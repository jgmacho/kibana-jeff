/*! Copyright Elasticsearch B.V. and/or license to Elasticsearch B.V. under one or more contributor license agreements
 * Licensed under the Elastic License; you may not use this file except in compliance with the Elastic License. */
webpackJsonp([4],{109:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.addElement=exports.deleteArgumentAtIndex=exports.addArgumentValueAtIndex=exports.setArgumentAtIndex=exports.setAstAtIndex=exports.setExpression=exports.setFilter=exports.removeElements=exports.duplicateElement=exports.fetchAllRenderables=exports.fetchRenderable=exports.fetchRenderableWithContext=exports.fetchContext=exports.flushContextAfterIndex=exports.flushContext=exports.setMultiplePositions=exports.elementLayer=void 0;var _extends=Object.assign||function(target){for(var i=1;i<arguments.length;i++){var source=arguments[i];for(var key in source)Object.prototype.hasOwnProperty.call(source,key)&&(target[key]=source[key])}return target};exports.getSiblingContext=getSiblingContext;var _reduxActions=__webpack_require__(29);var _reduxThunks=__webpack_require__(2035);var _objectPathImmutable=__webpack_require__(342);var _lodash=__webpack_require__(1);var _workpad=__webpack_require__(54);var _resolved_args=__webpack_require__(1165);var _defaults=__webpack_require__(804);var _ast=__webpack_require__(343);var _notify=__webpack_require__(293);var _run_interpreter=__webpack_require__(6046);var _interpreter=__webpack_require__(526);var _transient=__webpack_require__(345);var _resolved_args2=__webpack_require__(630);var args=_interopRequireWildcard(_resolved_args2);function _interopRequireWildcard(obj){if(obj&&obj.__esModule)return obj;var newObj={};if(null!=obj)for(var key in obj)Object.prototype.hasOwnProperty.call(obj,key)&&(newObj[key]=obj[key]);newObj.default=obj;return newObj}function getSiblingContext(state,elementId,checkIndex){var prevContextPath=[elementId,"expressionContext",checkIndex];var prevContextValue=(0,_resolved_args.getValue)(state,prevContextPath);if(null!=prevContextValue)return{index:checkIndex,context:prevContextValue};var prevContextIndex=checkIndex-1;if(prevContextIndex<0)return{};return getSiblingContext(state,elementId,prevContextIndex)}function getBareElement(el){var includeId=arguments.length>1&&void 0!==arguments[1]&&arguments[1];var props=["position","expression","filter"];if(includeId)return(0,_lodash.pick)(el,props.concat("id"));return(0,_lodash.cloneDeep)((0,_lodash.pick)(el,props))}exports.elementLayer=(0,_reduxActions.createAction)("elementLayer");exports.setMultiplePositions=(0,_reduxActions.createAction)("setMultiplePosition",function(repositionedElements){return{repositionedElements:repositionedElements}});exports.flushContext=(0,_reduxActions.createAction)("flushContext");var flushContextAfterIndex=exports.flushContextAfterIndex=(0,_reduxActions.createAction)("flushContextAfterIndex");exports.fetchContext=(0,_reduxThunks.createThunk)("fetchContext",function(_ref,index,element){var dispatch=_ref.dispatch,getState=_ref.getState;var fullRefresh=arguments.length>3&&void 0!==arguments[3]&&arguments[3];var chain=(0,_lodash.get)(element,["ast","chain"]);var invalidIndex=!chain||index>=chain.length;if(!element||!chain||invalidIndex)throw new Error("Invalid argument index: "+index);var contextIndex=index-1;var contextPath=[element.id,"expressionContext",contextIndex];dispatch(args.setLoading({path:contextPath}));var getContext=function getContext(){return getSiblingContext(getState(),element.id,contextIndex-1)};var _ref2=true!==fullRefresh?getContext():{},prevContextIndex=_ref2.index,prevContextValue=_ref2.context;var astChain=element.ast.chain.filter(function(exp,i){if(null!=prevContextValue)return i>prevContextIndex&&i<index;return i<index});return(0,_interpreter.interpretAst)(_extends({},element.ast,{chain:astChain}),prevContextValue).then(function(value){dispatch(args.setValue({path:contextPath,value:value}))})});var fetchRenderableWithContextFn=function fetchRenderableWithContextFn(_ref3,element,ast,context){var dispatch=_ref3.dispatch;var argumentPath=[element.id,"expressionRenderable"];dispatch(args.setLoading({path:argumentPath}));var getAction=function getAction(renderable){return args.setValue({path:argumentPath,value:renderable})};return(0,_run_interpreter.runInterpreter)(ast,context,{castToRender:true}).then(function(renderable){dispatch(getAction(renderable))}).catch(function(err){_notify.notify.error(err);dispatch(getAction(err))})};var fetchRenderableWithContext=exports.fetchRenderableWithContext=(0,_reduxThunks.createThunk)("fetchRenderableWithContext",fetchRenderableWithContextFn);var fetchRenderable=exports.fetchRenderable=(0,_reduxThunks.createThunk)("fetchRenderable",function(_ref4,element){var dispatch=_ref4.dispatch;var ast=element.ast||(0,_ast.safeElementFromExpression)(element.expression);dispatch(fetchRenderableWithContext(element,ast,null))});var fetchAllRenderables=exports.fetchAllRenderables=(0,_reduxThunks.createThunk)("fetchAllRenderables",function(_ref5){var dispatch=_ref5.dispatch,getState=_ref5.getState;var _ref6=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},_ref6$onlyActivePage=_ref6.onlyActivePage,onlyActivePage=void 0!==_ref6$onlyActivePage&&_ref6$onlyActivePage;var workpadPages=(0,_workpad.getPages)(getState());var currentPageIndex=(0,_workpad.getSelectedPageIndex)(getState());var currentPage=workpadPages[currentPageIndex];var otherPages=(0,_lodash.without)(workpadPages,currentPage);dispatch(args.inFlightActive());function fetchElementsOnPages(pages){var elements=[];pages.forEach(function(page){page.elements.forEach(function(element){elements.push(element)})});var renderablePromises=elements.map(function(element){var ast=element.ast||(0,_ast.safeElementFromExpression)(element.expression);var argumentPath=[element.id,"expressionRenderable"];return(0,_run_interpreter.runInterpreter)(ast,null,{castToRender:true}).then(function(renderable){return{path:argumentPath,value:renderable}}).catch(function(err){_notify.notify.error(err);return{path:argumentPath,value:err}})});return Promise.all(renderablePromises).then(function(renderables){dispatch(args.setValues(renderables))})}onlyActivePage?fetchElementsOnPages([currentPage]).then(function(){return dispatch(args.inFlightComplete())}):fetchElementsOnPages([currentPage]).then(function(){return fetchElementsOnPages(otherPages)}).then(function(){return dispatch(args.inFlightComplete())})});exports.duplicateElement=(0,_reduxThunks.createThunk)("duplicateElement",function(_ref7,element,pageId){var dispatch=_ref7.dispatch,type=_ref7.type;var newElement=_extends({},(0,_defaults.getDefaultElement)(),getBareElement(element));newElement.position.top=newElement.position.top+10;newElement.position.left=newElement.position.left+10;var _duplicateElement=(0,_reduxActions.createAction)(type);dispatch(_duplicateElement({pageId:pageId,element:newElement}));element.filter?dispatch(fetchAllRenderables()):dispatch(fetchRenderable(newElement));dispatch((0,_transient.selectElement)(newElement.id))});exports.removeElements=(0,_reduxThunks.createThunk)("removeElements",function(_ref8,elementIds,pageId){var dispatch=_ref8.dispatch,getState=_ref8.getState;var shouldRefresh=elementIds.some(function(elementId){var element=(0,_workpad.getElementById)(getState(),elementId,pageId);var filterIsApplied=null!=element.filter&&element.filter.length>0;return filterIsApplied});var _removeElements=(0,_reduxActions.createAction)("removeElements",function(elementIds,pageId){return{pageId:pageId,elementIds:elementIds}});dispatch(_removeElements(elementIds,pageId));shouldRefresh&&dispatch(fetchAllRenderables())});exports.setFilter=(0,_reduxThunks.createThunk)("setFilter",function(_ref9,filter,elementId,pageId){var dispatch=_ref9.dispatch;var doRender=!(arguments.length>4&&void 0!==arguments[4])||arguments[4];var _setFilter=(0,_reduxActions.createAction)("setFilter");dispatch(_setFilter({filter:filter,elementId:elementId,pageId:pageId}));true===doRender&&dispatch(fetchAllRenderables())});var setExpression=exports.setExpression=(0,_reduxThunks.createThunk)("setExpression",setExpressionFn);function setExpressionFn(_ref10,expression,elementId,pageId){var dispatch=_ref10.dispatch,getState=_ref10.getState;var doRender=!(arguments.length>4&&void 0!==arguments[4])||arguments[4];var _setExpression=(0,_reduxActions.createAction)("setExpression");dispatch(_setExpression({expression:expression,elementId:elementId,pageId:pageId}));var updatedElement=(0,_workpad.getElementById)(getState(),elementId,pageId);true===doRender&&dispatch(fetchRenderable(updatedElement))}var setAst=(0,_reduxThunks.createThunk)("setAst",function(_ref11,ast,element,pageId){var dispatch=_ref11.dispatch;var doRender=!(arguments.length>4&&void 0!==arguments[4])||arguments[4];try{var expression=(0,_ast.toExpression)(ast);dispatch(setExpression(expression,element.id,pageId,doRender))}catch(err){_notify.notify.error(err);dispatch(setExpression(element.expression,element.id,pageId,doRender))}});var setAstAtIndex=exports.setAstAtIndex=(0,_reduxThunks.createThunk)("setAstAtIndex",function(_ref12,index,ast,element,pageId){var dispatch=_ref12.dispatch,getState=_ref12.getState;dispatch(flushContextAfterIndex({elementId:element.id,index:index}));var newElement=(0,_objectPathImmutable.set)(element,["ast","chain",index],ast);var newAst=(0,_lodash.get)(newElement,"ast");var _getSiblingContext=getSiblingContext(getState(),element.id,index-1),contextIndex=_getSiblingContext.index,contextValue=_getSiblingContext.context;if(contextValue){dispatch(setAst(newAst,element,pageId,false));var partialAst=_extends({},newAst,{chain:newAst.chain.filter(function(exp,i){if(contextValue)return i>contextIndex;return i>=index})});return dispatch(fetchRenderableWithContext(newElement,partialAst,contextValue))}dispatch(setAst(newAst,element,pageId))});var setArgumentAtIndex=exports.setArgumentAtIndex=(0,_reduxThunks.createThunk)("setArgumentAtIndex",function(_ref13,args){var dispatch=_ref13.dispatch;var index=args.index,argName=args.argName,value=args.value,valueIndex=args.valueIndex,element=args.element,pageId=args.pageId;var selector=["ast","chain",index,"arguments",argName];null!=valueIndex&&selector.push(valueIndex);var newElement=(0,_objectPathImmutable.set)(element,selector,value);var newAst=(0,_lodash.get)(newElement,["ast","chain",index]);dispatch(setAstAtIndex(index,newAst,element,pageId))});exports.addArgumentValueAtIndex=(0,_reduxThunks.createThunk)("addArgumentValueAtIndex",function(_ref14,args){var dispatch=_ref14.dispatch;var index=args.index,argName=args.argName,value=args.value,element=args.element;var values=(0,_lodash.get)(element,["ast","chain",index,"arguments",argName],[]);var newValue=values.concat(value);dispatch(setArgumentAtIndex(_extends({},args,{value:newValue})))});exports.deleteArgumentAtIndex=(0,_reduxThunks.createThunk)("deleteArgumentAtIndex",function(_ref15,args){var dispatch=_ref15.dispatch;var index=args.index,element=args.element,pageId=args.pageId,argName=args.argName,argIndex=args.argIndex;var curVal=(0,_lodash.get)(element,["ast","chain",index,"arguments",argName]);var newElement=null!=argIndex&&curVal.length>1?(0,_objectPathImmutable.del)(element,["ast","chain",index,"arguments",argName,argIndex]):(0,_objectPathImmutable.del)(element,["ast","chain",index,"arguments",argName]);dispatch(setAstAtIndex(index,(0,_lodash.get)(newElement,["ast","chain",index]),element,pageId))});exports.addElement=(0,_reduxThunks.createThunk)("addElement",function(_ref16,pageId,element){var dispatch=_ref16.dispatch;var newElement=_extends({},(0,_defaults.getDefaultElement)(),getBareElement(element));element.width&&(newElement.position.width=element.width);element.height&&(newElement.position.height=element.height);var _addElement=(0,_reduxActions.createAction)("addElement");dispatch(_addElement({pageId:pageId,element:newElement}));element.filter?dispatch(fetchAllRenderables()):dispatch(fetchRenderable(newElement));dispatch((0,_transient.selectElement)(newElement.id))})},1162:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.createStore=createStore;exports.getState=getState;var _redux=__webpack_require__(53);var _lodash=__webpack_require__(1);var _middleware=__webpack_require__(6035);var _reducers=__webpack_require__(6331);var store=void 0;function createStore(initialState){if("undefined"!==typeof store)throw new Error("Redux store can only be initialized once");if(!(0,_lodash.isPlainObject)(initialState))throw new Error("Initial state must be a plain object");var rootReducer=(0,_reducers.getRootReducer)(initialState);store=(0,_redux.createStore)(rootReducer,initialState,_middleware.middleware);return store}function getState(){return store.getState()}},1163:function(module,exports,__webpack_require__){"use strict";var _extends=Object.assign||function(target){for(var i=1;i<arguments.length;i++){var source=arguments[i];for(var key in source)Object.prototype.hasOwnProperty.call(source,key)&&(target[key]=source[key])}return target};function _toConsumableArray(arr){if(Array.isArray(arr)){for(var i=0,arr2=Array(arr.length);i<arr.length;i++)arr2[i]=arr[i];return arr2}return Array.from(arr)}var _require=__webpack_require__(1164),shallowEqual=_require.shallowEqual;var makeUid=function makeUid(){return 1e11+Math.floor(9e11*Math.random())};var selectReduce=function selectReduce(fun,previousValue){var mapFun=arguments.length>2&&void 0!==arguments[2]?arguments[2]:function(d){return d};var logFun=arguments[3];return function(){for(var _len=arguments.length,inputs=Array(_len),_key=0;_key<_len;_key++)inputs[_key]=arguments[_key];var argumentValues=[];var value=previousValue;var prevValue=previousValue;var mappedValue=void 0;return function(state){if(shallowEqual(argumentValues,argumentValues=inputs.map(function(input){return input(state)}))&&value===prevValue)return mappedValue;prevValue=value;value=fun.apply(void 0,[prevValue].concat(_toConsumableArray(argumentValues)));logFun&&logFun(value,argumentValues);mappedValue=mapFun(value);return mappedValue}}};var select=function select(fun,logFun){return function(){for(var _len2=arguments.length,inputs=Array(_len2),_key2=0;_key2<_len2;_key2++)inputs[_key2]=arguments[_key2];var argumentValues=[];var value=void 0;var actionId=void 0;return function(state){var lastActionId=state.primaryUpdate.payload.uid;if(actionId===lastActionId||shallowEqual(argumentValues,argumentValues=inputs.map(function(input){return input(state)})))return value;value=fun.apply(void 0,_toConsumableArray(argumentValues));actionId=lastActionId;logFun&&logFun(value,argumentValues);return value}}};var createStore=function createStore(initialState){var onChangeCallback=arguments.length>1&&void 0!==arguments[1]?arguments[1]:function(){};var currentState=initialState;var updater=function updater(state){return state};var getCurrentState=function getCurrentState(){return currentState};var setUpdater=function setUpdater(updaterFunction){return updater=updaterFunction};var commit=function commit(type,payload){var meta=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};currentState=updater(_extends({},currentState,{primaryUpdate:{type:type,payload:_extends({},payload,{uid:makeUid()})}}));meta.silent||onChangeCallback({type:type,state:currentState},meta)};var dispatch=function dispatch(type,payload){return setTimeout(function(){return commit(type,payload)})};return{getCurrentState:getCurrentState,setUpdater:setUpdater,commit:commit,dispatch:dispatch}};module.exports={createStore:createStore,select:select,selectReduce:selectReduce,makeUid:makeUid}},1164:function(module,exports,__webpack_require__){"use strict";function _toConsumableArray(arr){if(Array.isArray(arr)){for(var i=0,arr2=Array(arr.length);i<arr.length;i++)arr2[i]=arr[i];return arr2}return Array.from(arr)}var flatten=function flatten(arrays){var _ref;return(_ref=[]).concat.apply(_ref,_toConsumableArray(arrays))};var identity=function identity(d){return d};var map=function map(fun){return function(array){return array.map(function(value){return fun(value)})}};var log=function log(d){var printerFun=arguments.length>1&&void 0!==arguments[1]?arguments[1]:identity;console.log(printerFun(d));return d};var disjunctiveUnion=function disjunctiveUnion(keyFun,set1,set2){return set1.filter(function(s1){return!set2.find(function(s2){return keyFun(s2)===keyFun(s1)})}).concat(set2.filter(function(s2){return!set1.find(function(s1){return keyFun(s1)===keyFun(s2)})}))};var mean=function mean(a,b){return(a+b)/2};var shallowEqual=function shallowEqual(a,b){if(a===b)return true;if(a.length!==b.length)return false;for(var i=0;i<a.length;i++)if(a[i]!==b[i])return false;return true};var not=function not(fun){return function(){return!fun.apply(void 0,arguments)}};var removeDuplicates=function removeDuplicates(idFun,a){return a.filter(function(d,i){return a.findIndex(function(s){return idFun(s)===idFun(d)})===i})};var epsilon=.001;var applyTolerance=function applyTolerance(d){return Math.round(d/epsilon)*epsilon};module.exports={applyTolerance:applyTolerance,disjunctiveUnion:disjunctiveUnion,flatten:flatten,identity:identity,log:log,map:map,mean:mean,not:not,removeDuplicates:removeDuplicates,shallowEqual:shallowEqual}},1165:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.getArg=getArg;exports.getValue=getValue;exports.getState=getState;exports.getError=getError;exports.getInFlight=getInFlight;var _lodash=__webpack_require__(1);var _resolved_arg=__webpack_require__(2037);var argHelper=_interopRequireWildcard(_resolved_arg);var _modify_path=__webpack_require__(803);function _interopRequireWildcard(obj){if(obj&&obj.__esModule)return obj;var newObj={};if(null!=obj)for(var key in obj)Object.prototype.hasOwnProperty.call(obj,key)&&(newObj[key]=obj[key]);newObj.default=obj;return newObj}function getArg(state,path){return(0,_lodash.get)(state,(0,_modify_path.prepend)(path,["transient","resolvedArgs"]))}function getValue(state,path){return argHelper.getValue(getArg(state,path))}function getState(state,path){return argHelper.getState(getArg(state,path))}function getError(state,path){return argHelper.getError(getArg(state,path))}function getInFlight(state){return(0,_lodash.get)(state,["transient","inFlight"],false)}},1166:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.getByAlias=getByAlias;function getByAlias(specs,name){var lowerCaseName=name.toLowerCase();return Object.values(specs).find(function(_ref){var name=_ref.name,aliases=_ref.aliases;if(name.toLowerCase()===lowerCaseName)return true;return(aliases||[]).some(function(alias){return alias.toLowerCase()===lowerCaseName})})}},1167:function(module,exports,__webpack_require__){var debug=__webpack_require__(344)("socket.io-parser");var Emitter=__webpack_require__(527);var binary=__webpack_require__(6055);var isArray=__webpack_require__(2043);var isBuf=__webpack_require__(2044);exports.protocol=4;exports.types=["CONNECT","DISCONNECT","EVENT","ACK","ERROR","BINARY_EVENT","BINARY_ACK"];exports.CONNECT=0;exports.DISCONNECT=1;exports.EVENT=2;exports.ACK=3;exports.ERROR=4;exports.BINARY_EVENT=5;exports.BINARY_ACK=6;exports.Encoder=Encoder;exports.Decoder=Decoder;function Encoder(){}var ERROR_PACKET=exports.ERROR+'"encode error"';Encoder.prototype.encode=function(obj,callback){debug("encoding packet %j",obj);if(exports.BINARY_EVENT===obj.type||exports.BINARY_ACK===obj.type)encodeAsBinary(obj,callback);else{var encoding=encodeAsString(obj);callback([encoding])}};function encodeAsString(obj){var str=""+obj.type;exports.BINARY_EVENT!==obj.type&&exports.BINARY_ACK!==obj.type||(str+=obj.attachments+"-");obj.nsp&&"/"!==obj.nsp&&(str+=obj.nsp+",");null!=obj.id&&(str+=obj.id);if(null!=obj.data){var payload=tryStringify(obj.data);if(false===payload)return ERROR_PACKET;str+=payload}debug("encoded %j as %s",obj,str);return str}function tryStringify(str){try{return JSON.stringify(str)}catch(e){return false}}function encodeAsBinary(obj,callback){function writeEncoding(bloblessData){var deconstruction=binary.deconstructPacket(bloblessData);var pack=encodeAsString(deconstruction.packet);var buffers=deconstruction.buffers;buffers.unshift(pack);callback(buffers)}binary.removeBlobs(obj,writeEncoding)}function Decoder(){this.reconstructor=null}Emitter(Decoder.prototype);Decoder.prototype.add=function(obj){var packet;if("string"===typeof obj){packet=decodeString(obj);if(exports.BINARY_EVENT===packet.type||exports.BINARY_ACK===packet.type){this.reconstructor=new BinaryReconstructor(packet);0===this.reconstructor.reconPack.attachments&&this.emit("decoded",packet)}else this.emit("decoded",packet)}else{if(!isBuf(obj)&&!obj.base64)throw new Error("Unknown type: "+obj);if(!this.reconstructor)throw new Error("got binary data when not reconstructing a packet");packet=this.reconstructor.takeBinaryData(obj);if(packet){this.reconstructor=null;this.emit("decoded",packet)}}};function decodeString(str){var i=0;var p={type:Number(str.charAt(0))};if(null==exports.types[p.type])return error("unknown packet type "+p.type);if(exports.BINARY_EVENT===p.type||exports.BINARY_ACK===p.type){var buf="";while("-"!==str.charAt(++i)){buf+=str.charAt(i);if(i==str.length)break}if(buf!=Number(buf)||"-"!==str.charAt(i))throw new Error("Illegal attachments");p.attachments=Number(buf)}if("/"===str.charAt(i+1)){p.nsp="";while(++i){var c=str.charAt(i);if(","===c)break;p.nsp+=c;if(i===str.length)break}}else p.nsp="/";var next=str.charAt(i+1);if(""!==next&&Number(next)==next){p.id="";while(++i){c=str.charAt(i);if(null==c||Number(c)!=c){--i;break}p.id+=str.charAt(i);if(i===str.length)break}p.id=Number(p.id)}if(str.charAt(++i)){var payload=tryParse(str.substr(i));var isPayloadValid=false!==payload&&(p.type===exports.ERROR||isArray(payload));if(!isPayloadValid)return error("invalid payload");p.data=payload}debug("decoded %s as %j",str,p);return p}function tryParse(str){try{return JSON.parse(str)}catch(e){return false}}Decoder.prototype.destroy=function(){this.reconstructor&&this.reconstructor.finishedReconstruction()};function BinaryReconstructor(packet){this.reconPack=packet;this.buffers=[]}BinaryReconstructor.prototype.takeBinaryData=function(binData){this.buffers.push(binData);if(this.buffers.length===this.reconPack.attachments){var packet=binary.reconstructPacket(this.reconPack,this.buffers);this.finishedReconstruction();return packet}return null};BinaryReconstructor.prototype.finishedReconstruction=function(){this.reconPack=null;this.buffers=[]};function error(msg){return{type:exports.ERROR,data:"parser error: "+msg}}},1168:function(module,exports,__webpack_require__){(function(global){var hasCORS=__webpack_require__(6058);module.exports=function(opts){var xdomain=opts.xdomain;var xscheme=opts.xscheme;var enablesXDR=opts.enablesXDR;try{if("undefined"!==typeof XMLHttpRequest&&(!xdomain||hasCORS))return new XMLHttpRequest}catch(e){}try{if("undefined"!==typeof XDomainRequest&&!xscheme&&enablesXDR)return new XDomainRequest}catch(e){}if(!xdomain)try{return new(global[["Active"].concat("Object").join("X")])("Microsoft.XMLHTTP")}catch(e){}}}).call(exports,__webpack_require__(23))},1169:function(module,exports,__webpack_require__){var parser=__webpack_require__(528);var Emitter=__webpack_require__(527);module.exports=Transport;function Transport(opts){this.path=opts.path;this.hostname=opts.hostname;this.port=opts.port;this.secure=opts.secure;this.query=opts.query;this.timestampParam=opts.timestampParam;this.timestampRequests=opts.timestampRequests;this.readyState="";this.agent=opts.agent||false;this.socket=opts.socket;this.enablesXDR=opts.enablesXDR;this.pfx=opts.pfx;this.key=opts.key;this.passphrase=opts.passphrase;this.cert=opts.cert;this.ca=opts.ca;this.ciphers=opts.ciphers;this.rejectUnauthorized=opts.rejectUnauthorized;this.forceNode=opts.forceNode;this.extraHeaders=opts.extraHeaders;this.localAddress=opts.localAddress}Emitter(Transport.prototype);Transport.prototype.onError=function(msg,desc){var err=new Error(msg);err.type="TransportError";err.description=desc;this.emit("error",err);return this};Transport.prototype.open=function(){if("closed"===this.readyState||""===this.readyState){this.readyState="opening";this.doOpen()}return this};Transport.prototype.close=function(){if("opening"===this.readyState||"open"===this.readyState){this.doClose();this.onClose()}return this};Transport.prototype.send=function(packets){if("open"!==this.readyState)throw new Error("Transport not open");this.write(packets)};Transport.prototype.onOpen=function(){this.readyState="open";this.writable=true;this.emit("open")};Transport.prototype.onData=function(data){var packet=parser.decodePacket(data,this.socket.binaryType);this.onPacket(packet)};Transport.prototype.onPacket=function(packet){this.emit("packet",packet)};Transport.prototype.onClose=function(){this.readyState="closed";this.emit("close")}},1170:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.RenderToDom=void 0;var _recompose=__webpack_require__(24);var _render_to_dom=__webpack_require__(6075);exports.RenderToDom=(0,_recompose.compose)((0,_recompose.withState)("domNode","setDomNode"))(_render_to_dom.RenderToDom)},1171:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}exports.BaseForm=function BaseForm(props){_classCallCheck(this,BaseForm);if(!props.name)throw new Error("Expression specs require a name property");this.name=props.name;this.displayName=props.displayName||this.name;this.help=props.help||""}},1172:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.FunctionForm=void 0;var _extends=Object.assign||function(target){for(var i=1;i<arguments.length;i++){var source=arguments[i];for(var key in source)Object.prototype.hasOwnProperty.call(source,key)&&(target[key]=source[key])}return target};var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;"value"in descriptor&&(descriptor.writable=true);Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){protoProps&&defineProperties(Constructor.prototype,protoProps);staticProps&&defineProperties(Constructor,staticProps);return Constructor}}();var _eui=__webpack_require__(2);var _react=__webpack_require__(0);var _react2=_interopRequireDefault(_react);var _lodash=__webpack_require__(1);var _ast=__webpack_require__(343);var _arg_add_popover=__webpack_require__(6076);var _sidebar_section=__webpack_require__(2058);var _sidebar_section_title=__webpack_require__(6081);var _base_form=__webpack_require__(1171);var _arg=__webpack_require__(2059);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _objectWithoutProperties(obj,keys){var target={};for(var i in obj){if(keys.indexOf(i)>=0)continue;if(!Object.prototype.hasOwnProperty.call(obj,i))continue;target[i]=obj[i]}return target}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(self,call){if(!self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!call||"object"!==typeof call&&"function"!==typeof call?self:call}function _inherits(subClass,superClass){if("function"!==typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function, not "+typeof superClass);subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:false,writable:true,configurable:true}});superClass&&(Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass)}exports.FunctionForm=function(_BaseForm){_inherits(FunctionForm,_BaseForm);function FunctionForm(props){_classCallCheck(this,FunctionForm);var _this=_possibleConstructorReturn(this,(FunctionForm.__proto__||Object.getPrototypeOf(FunctionForm)).call(this,_extends({},props)));_this.args=props.args||[];_this.resolve=props.resolve||function(){return{}};return _this}_createClass(FunctionForm,[{key:"renderArg",value:function renderArg(props,dataArg){var onValueRemove=props.onValueRemove,onValueChange=props.onValueChange,passedProps=_objectWithoutProperties(props,["onValueRemove","onValueChange"]);var arg=dataArg.arg,argValues=dataArg.argValues,skipRender=dataArg.skipRender,label=dataArg.label;var argType=passedProps.argType,expressionIndex=passedProps.expressionIndex;if(!arg||skipRender)return null;var renderArgWithProps=function renderArgWithProps(argValue,valueIndex){return arg.render(_extends({key:argType+"-"+expressionIndex+"-"+arg.name+"-"+valueIndex},passedProps,{label:label,valueIndex:valueIndex,argValue:argValue,onValueChange:onValueChange(arg.name,valueIndex),onValueRemove:onValueRemove(arg.name,valueIndex)}))};if(!argValues&&arg.required)return renderArgWithProps({type:void 0,value:""},0);return argValues&&argValues.map(renderArgWithProps)}},{key:"getAddableArg",value:function getAddableArg(props,dataArg){var onValueAdd=props.onValueAdd;var arg=dataArg.arg,argValues=dataArg.argValues,skipRender=dataArg.skipRender;if(!arg||arg.required||skipRender)return null;if(argValues&&!arg.multi)return null;var value=null==arg.default?null:(0,_ast.fromExpression)(arg.default,"argument");return{arg:arg,onValueAdd:onValueAdd(arg.name,value)}}},{key:"resolveArg",value:function resolveArg(){return{}}},{key:"render",value:function render(){var _this2=this;var data=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};var args=data.args,argTypeDef=data.argTypeDef;var argInstances=this.args.map(function(argSpec){return new _arg.Arg(argSpec)});if(!(0,_lodash.isPlainObject)(args))throw new Error('Form "'+this.name+'" expects "args" object');var argNames=(0,_lodash.uniq)(argInstances.map(function(arg){return arg.name}).concat(Object.keys(args)));var dataArgs=argNames.map(function(argName){var arg=argInstances.find(function(arg){return arg.name===argName});var isMulti=arg&&arg.multi;var argValues=args[argName]&&!isMulti?[(0,_lodash.last)(args[argName])]:args[argName];return{arg:arg,argValues:argValues}});var props=_extends({},data,this.resolve(data),{typeInstance:this});try{var resolvedDataArgs=dataArgs.map(function(d){return _extends({},d,_this2.resolveArg(d,props))});var argumentForms=(0,_lodash.compact)(resolvedDataArgs.map(function(d){return _this2.renderArg(props,d)}));var addableArgs=(0,_lodash.compact)(resolvedDataArgs.map(function(d){return _this2.getAddableArg(props,d)}));if(!addableArgs.length&&!argumentForms.length)return null;return _react2.default.createElement(_sidebar_section.SidebarSection,null,_react2.default.createElement(_sidebar_section_title.SidebarSectionTitle,{title:argTypeDef.displayName,tip:argTypeDef.help},0===addableArgs.length?null:_react2.default.createElement(_arg_add_popover.ArgAddPopover,{options:addableArgs})),argumentForms)}catch(e){return _react2.default.createElement(_eui.EuiCallOut,{color:"danger",iconType:"cross",title:"Expression rendering error"},_react2.default.createElement("p",null,e.message))}}}]);return FunctionForm}(_base_form.BaseForm)},1173:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.TooltipIcon=void 0;var _recompose=__webpack_require__(24);var _tooltip_icon=__webpack_require__(6085);exports.TooltipIcon=(0,_recompose.pure)(_tooltip_icon.TooltipIcon)},1174:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var _functions_registry=__webpack_require__(2054);Object.defineProperty(exports,"functionsRegistry",{enumerable:true,get:function get(){return _functions_registry.functionsRegistry}})},1175:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.fetch=void 0;var _axios=__webpack_require__(2067);var _axios2=_interopRequireDefault(_axios);var _constants=__webpack_require__(633);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}exports.fetch=_axios2.default.create({headers:{Accept:"application/json","Content-Type":"application/json","kbn-xsrf":"professionally-crafted-string-of-text"},timeout:_constants.FETCH_TIMEOUT})},1177:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.ConfirmModal=void 0;var _confirm_modal=__webpack_require__(6128);exports.ConfirmModal=_confirm_modal.ConfirmModal},1178:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var _link=__webpack_require__(6129);Object.defineProperty(exports,"Link",{enumerable:true,get:function get(){return _link.Link}})},1179:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.transitionsRegistry=void 0;var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;"value"in descriptor&&(descriptor.writable=true);Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){protoProps&&defineProperties(Constructor.prototype,protoProps);staticProps&&defineProperties(Constructor,staticProps);return Constructor}}();var _registry=__webpack_require__(313);var _transition=__webpack_require__(6172);function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(self,call){if(!self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!call||"object"!==typeof call&&"function"!==typeof call?self:call}function _inherits(subClass,superClass){if("function"!==typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function, not "+typeof superClass);subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:false,writable:true,configurable:true}});superClass&&(Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass)}var TransitionsRegistry=function(_Registry){_inherits(TransitionsRegistry,_Registry);function TransitionsRegistry(){_classCallCheck(this,TransitionsRegistry);return _possibleConstructorReturn(this,(TransitionsRegistry.__proto__||Object.getPrototypeOf(TransitionsRegistry)).apply(this,arguments))}_createClass(TransitionsRegistry,[{key:"wrapper",value:function wrapper(obj){return new _transition.Transition(obj)}}]);return TransitionsRegistry}(_registry.Registry);exports.transitionsRegistry=new TransitionsRegistry},1180:function(module,exports,__webpack_require__){"use strict";module.exports=function(key){return"shift"===key||"ctrl"===key||"alt"===key||"meta"===key}},1181:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var _extends=Object.assign||function(target){for(var i=1;i<arguments.length;i++){var source=arguments[i];for(var key in source)Object.prototype.hasOwnProperty.call(source,key)&&(target[key]=source[key])}return target};exports.routerProvider=routerProvider;var _router=__webpack_require__(6325);var _router2=_interopRequireDefault(_router);var _get_window=__webpack_require__(385);var _history_provider=__webpack_require__(2093);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var router=void 0;function routerProvider(routes){if(router)return router;var baseRouter=(0,_router2.default)(routes);var history=(0,_history_provider.historyProvider)((0,_get_window.getWindow)());var componentListener=null;var isPath=function isPath(str){return"string"===typeof str&&"/"===str.substr(0,1)};var getState=function getState(name,params,state){if(isPath(name))return params||history.getLocation().state;return state||history.getLocation().state};var updateLocation=function updateLocation(name,params,state){var replace=arguments.length>3&&void 0!==arguments[3]&&arguments[3];var currentState=getState(name,params,state);var method=replace?"replace":"push";if(isPath(name))return history[method](currentState,name);history[method](currentState,baseRouter.create(name,params))};router=_extends({},baseRouter,{execute:function execute(){var path=arguments.length>0&&void 0!==arguments[0]?arguments[0]:history.getPath();return this.parse(path)},getPath:history.getPath,getFullPath:history.getFullPath,navigateTo:function navigateTo(name,params,state){updateLocation(name,params,state)},redirectTo:function redirectTo(name,params,state){updateLocation(name,params,state,true)},onPathChange:function onPathChange(fn){var _this=this;if(null!=componentListener)throw new Error("Only one route component listener is allowed");var execOnMatch=function execOnMatch(location){var pathname=location.pathname;var match=_this.match(pathname);if(!match){console.error("No route found for path: ",pathname);return}fn(_extends({},match,{location:location}))};componentListener=history.onChange(function(locationObj,prevLocationObj){locationObj.pathname!==prevLocationObj.pathname&&execOnMatch(locationObj)});execOnMatch(history.getLocation())}});return router}},1182:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.getIndices=exports.getFields=void 0;var _chrome=__webpack_require__(9);var _chrome2=_interopRequireDefault(_chrome);var _constants=__webpack_require__(633);var _fetch=__webpack_require__(1175);var _notify=__webpack_require__(293);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var basePath=_chrome2.default.getBasePath();var apiPath=basePath+_constants.API_ROUTE;exports.getFields=function getFields(){var index=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"_all";return _fetch.fetch.get(apiPath+"/es_fields?index="+index).then(function(_ref){var mapping=_ref.data;return Object.keys(mapping).filter(function(field){return!field.startsWith("_")}).sort()}).catch(function(err){return _notify.notify.error(err,{title:"Couldn't fetch Elasticsearch fields for '"+index+"'"})})};exports.getIndices=function getIndices(){var savedObjectsClient=_chrome2.default.getSavedObjectsClient();return savedObjectsClient.find({type:"index-pattern",fields:["title"],search_fields:["title"],perPage:1e3}).then(function(resp){return resp.savedObjects.map(function(savedObject){return savedObject.attributes.title})}).catch(function(err){return _notify.notify.error(err,{title:"Couldn't fetch Elasticsearch indices"})})}},119:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.canUserWrite=canUserWrite;exports.getFullscreen=getFullscreen;exports.getServerFunctions=getServerFunctions;exports.getAppReady=getAppReady;exports.getBasePath=getBasePath;exports.getReportingBrowserType=getReportingBrowserType;exports.isAppReady=isAppReady;var _lodash=__webpack_require__(1);function canUserWrite(state){return(0,_lodash.get)(state,"transient.canUserWrite",true)}function getFullscreen(state){return(0,_lodash.get)(state,"transient.fullscreen",false)}function getServerFunctions(state){return(0,_lodash.get)(state,"app.serverFunctions")}function getAppReady(state){return(0,_lodash.get)(state,"app.ready")}function getBasePath(state){return(0,_lodash.get)(state,"app.basePath")}function getReportingBrowserType(state){return(0,_lodash.get)(state,"app.reportingBrowserType")}function isAppReady(state){var appReady=getAppReady(state);return true===appReady}},2032:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.aeroelastic=void 0;var _aeroelastic=__webpack_require__(440);var _aeroelastic2=_interopRequireDefault(_aeroelastic);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _toConsumableArray(arr){if(Array.isArray(arr)){for(var i=0,arr2=Array(arr.length);i<arr.length;i++)arr2[i]=arr[i];return arr2}return Array.from(arr)}var stores=new Map;exports.aeroelastic={matrix:_aeroelastic2.default.matrix,clearStores:function clearStores(){stores.clear()},createStore:function createStore(initialState){var onChangeCallback=arguments.length>1&&void 0!==arguments[1]?arguments[1]:function(){};var page=arguments[2];if(stores.has(page))throw new Error("Only a single aeroelastic store per page should exist");stores.set(page,_aeroelastic2.default.state.createStore(initialState,onChangeCallback));var updateScene=_aeroelastic2.default.state.select(function(nextScene,primaryUpdate){return{shapeAdditions:nextScene.shapes,primaryUpdate:primaryUpdate,currentScene:nextScene}})(_aeroelastic2.default.layout.nextScene,_aeroelastic2.default.layout.primaryUpdate);stores.get(page).setUpdater(updateScene)},removeStore:function removeStore(page){stores.has(page)&&stores.delete(page)},getStore:function getStore(page){var store=stores.get(page);if(!store)throw new Error("An aeroelastic store should exist for page "+page);return store.getCurrentState()},commit:function commit(page){var store=stores.get(page);for(var _len=arguments.length,args=Array(_len>1?_len-1:0),_key=1;_key<_len;_key++)args[_key-1]=arguments[_key];return store&&store.commit.apply(store,_toConsumableArray(args))}}},2033:function(module,exports,__webpack_require__){"use strict";var _slicedToArray=function(){function sliceIterator(arr,i){var _arr=[];var _n=true;var _d=false;var _e=void 0;try{for(var _s,_i=arr[Symbol.iterator]();!(_n=(_s=_i.next()).done);_n=true){_arr.push(_s.value);if(i&&_arr.length===i)break}}catch(err){_d=true;_e=err}finally{try{!_n&&_i["return"]&&_i["return"]()}finally{if(_d)throw _e}}return _arr}return function(arr,i){if(Array.isArray(arr))return arr;if(Symbol.iterator in Object(arr))return sliceIterator(arr,i);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}();var matrix=__webpack_require__(802);var shapesAtPoint=function shapesAtPoint(shapes,x,y){return shapes.map(function(shape,index){var transformMatrix=shape.transformMatrix,a=shape.a,b=shape.b;var centerPoint=matrix.normalize(matrix.mvMultiply(transformMatrix,matrix.ORIGIN));var rightPoint=matrix.normalize(matrix.mvMultiply(transformMatrix,[1,0,0,1]));var upPoint=matrix.normalize(matrix.mvMultiply(transformMatrix,[0,1,0,1]));var x0=rightPoint[0]-centerPoint[0];var y0=rightPoint[1]-centerPoint[1];var x1=upPoint[0]-centerPoint[0];var y1=upPoint[1]-centerPoint[1];var A=(x-centerPoint[0]-(y-centerPoint[1])/y1*x1)/(x0-y0/y1*x1);var B=(y-centerPoint[1]-A*y0)/y1;var rightSlope=rightPoint[2]-centerPoint[2];var upSlope=upPoint[2]-centerPoint[2];var z=centerPoint[2]+(y1?rightSlope*A+upSlope*B:0);var inverseProjection=matrix.invert(transformMatrix);var intersection=matrix.normalize(matrix.mvMultiply(inverseProjection,[x,y,z,1]));var _intersection=_slicedToArray(intersection,2),sx=_intersection[0],sy=_intersection[1];return{z:z,intersection:intersection,inside:Math.abs(sx)<=a&&Math.abs(sy)<=b,shape:shape,index:index}})};var shapesAt=function shapesAt(shapes,_ref){var x=_ref.x,y=_ref.y;return shapesAtPoint(shapes,x,y).filter(function(shape){return shape.inside}).sort(function(shape1,shape2){return shape2.z-shape1.z||shape2.index-shape1.index}).map(function(shape){return shape.shape})};var getExtremum=function getExtremum(transformMatrix,a,b){return matrix.normalize(matrix.mvMultiply(transformMatrix,[a,b,0,1]))};var landmarkPoint=function landmarkPoint(_ref2,k,l){var localTransformMatrix=_ref2.localTransformMatrix,a=_ref2.a,b=_ref2.b;return getExtremum(localTransformMatrix,k*a,l*b)};module.exports={landmarkPoint:landmarkPoint,shapesAt:shapesAt}},2034:function(module,exports,__webpack_require__){"use strict";var _require=__webpack_require__(1163),select=_require.select,selectReduce=_require.selectReduce;var appleKeyboard=Boolean(window&&window.navigator&&window.navigator.userAgent&&window.navigator.userAgent.match("Macintosh|iPhone|iPad"));var primaryUpdate=function primaryUpdate(state){return state.primaryUpdate};var rawCursorPosition=select(function(action){return"cursorPosition"===action.type?action.payload:null})(primaryUpdate);var mouseButtonEvent=select(function(action){return"mouseEvent"===action.type?action.payload:null})(primaryUpdate);var keyFromMouse=select(function(_ref){var type=_ref.type,_ref$payload=_ref.payload,altKey=_ref$payload.altKey,metaKey=_ref$payload.metaKey,shiftKey=_ref$payload.shiftKey,ctrlKey=_ref$payload.ctrlKey;return"cursorPosition"===type||"mouseEvent"===type?{altKey:altKey,metaKey:metaKey,shiftKey:shiftKey,ctrlKey:ctrlKey}:{}})(primaryUpdate);var metaHeld=select(appleKeyboard?function(e){return e.metaKey}:function(e){return e.altKey})(keyFromMouse);var optionHeld=select(appleKeyboard?function(e){return e.altKey}:function(e){return e.ctrlKey})(keyFromMouse);var shiftHeld=select(function(e){return e.shiftKey})(keyFromMouse);var pressedKeys=function pressedKeys(){return{}};var cursorPosition=selectReduce(function(previous,position){return position||previous},{x:0,y:0})(rawCursorPosition);var mouseButton=selectReduce(function(prev,next){if(!next)return prev;var event=next.event,uid=next.uid;return"mouseDown"===event?{down:true,uid:uid}:"mouseUp"===event?{down:false,uid:uid}:prev},{down:false,uid:null})(mouseButtonEvent);var mouseIsDown=selectReduce(function(previous,next){return next?"mouseDown"===next.event:previous},false)(mouseButtonEvent);var gestureEnd=select(function(next){return next&&"mouseUp"===next.event})(mouseButtonEvent);var mouseButtonStateTransitions=function mouseButtonStateTransitions(state,mouseIsDown,movedAlready){switch(state){case"up":return mouseIsDown?"downed":"up";case"downed":return mouseIsDown?movedAlready?"dragging":"downed":"up";case"dragging":return mouseIsDown?"dragging":"up"}};var mouseButtonState=selectReduce(function(_ref2,mouseIsDown,_ref3){var buttonState=_ref2.buttonState,downX=_ref2.downX,downY=_ref2.downY;var x=_ref3.x,y=_ref3.y;var movedAlready=x!==downX||y!==downY;var newButtonState=mouseButtonStateTransitions(buttonState,mouseIsDown,movedAlready);return{buttonState:newButtonState,downX:"downed"===newButtonState?x:downX,downY:"downed"===newButtonState?y:downY}},{buttonState:"up",downX:null,downY:null})(mouseIsDown,cursorPosition);var mouseDowned=select(function(state){return"downed"===state.buttonState})(mouseButtonState);var dragging=select(function(state){return"dragging"===state.buttonState})(mouseButtonState);var dragVector=select(function(_ref4,_ref5){var buttonState=_ref4.buttonState,downX=_ref4.downX,downY=_ref4.downY;var x=_ref5.x,y=_ref5.y;return{down:"up"!==buttonState,x0:downX,y0:downY,x1:x,y1:y}})(mouseButtonState,cursorPosition);module.exports={dragging:dragging,dragVector:dragVector,cursorPosition:cursorPosition,gestureEnd:gestureEnd,metaHeld:metaHeld,mouseButton:mouseButton,mouseDowned:mouseDowned,mouseIsDown:mouseIsDown,optionHeld:optionHeld,pressedKeys:pressedKeys,shiftHeld:shiftHeld}},2035:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var _create_thunk=__webpack_require__(6044);Object.defineProperty(exports,"createThunk",{enumerable:true,get:function get(){return _create_thunk.createThunk}})},2036:function(module,exports,__webpack_require__){"use strict";var _extends=Object.assign||function(target){for(var i=1;i<arguments.length;i++){var source=arguments[i];for(var key in source)Object.prototype.hasOwnProperty.call(source,key)&&(target[key]=source[key])}return target};function _defineProperty(obj,key,value){key in obj?Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true}):obj[key]=value;return obj}function peg$subclass(child,parent){function ctor(){this.constructor=child}ctor.prototype=parent.prototype;child.prototype=new ctor}function peg$SyntaxError(message,expected,found,location){this.message=message;this.expected=expected;this.found=found;this.location=location;this.name="SyntaxError";"function"===typeof Error.captureStackTrace&&Error.captureStackTrace(this,peg$SyntaxError)}peg$subclass(peg$SyntaxError,Error);peg$SyntaxError.buildMessage=function(expected,found){var DESCRIBE_EXPECTATION_FNS={literal:function literal(expectation){return'"'+literalEscape(expectation.text)+'"'},class:function _class(expectation){var i,escapedParts="";for(i=0;i<expectation.parts.length;i++)escapedParts+=expectation.parts[i]instanceof Array?classEscape(expectation.parts[i][0])+"-"+classEscape(expectation.parts[i][1]):classEscape(expectation.parts[i]);return"["+(expectation.inverted?"^":"")+escapedParts+"]"},any:function any(expectation){return"any character"},end:function end(expectation){return"end of input"},other:function other(expectation){return expectation.description}};function hex(ch){return ch.charCodeAt(0).toString(16).toUpperCase()}function literalEscape(s){return s.replace(/\\/g,"\\\\").replace(/"/g,'\\"').replace(/\0/g,"\\0").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/[\x00-\x0F]/g,function(ch){return"\\x0"+hex(ch)}).replace(/[\x10-\x1F\x7F-\x9F]/g,function(ch){return"\\x"+hex(ch)})}function classEscape(s){return s.replace(/\\/g,"\\\\").replace(/\]/g,"\\]").replace(/\^/g,"\\^").replace(/-/g,"\\-").replace(/\0/g,"\\0").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/[\x00-\x0F]/g,function(ch){return"\\x0"+hex(ch)}).replace(/[\x10-\x1F\x7F-\x9F]/g,function(ch){return"\\x"+hex(ch)})}function describeExpectation(expectation){return DESCRIBE_EXPECTATION_FNS[expectation.type](expectation)}function describeExpected(expected){var i,j,descriptions=new Array(expected.length);for(i=0;i<expected.length;i++)descriptions[i]=describeExpectation(expected[i]);descriptions.sort();if(descriptions.length>0){for(i=1,j=1;i<descriptions.length;i++)if(descriptions[i-1]!==descriptions[i]){descriptions[j]=descriptions[i];j++}descriptions.length=j}switch(descriptions.length){case 1:return descriptions[0];case 2:return descriptions[0]+" or "+descriptions[1];default:return descriptions.slice(0,-1).join(", ")+", or "+descriptions[descriptions.length-1]}}function describeFound(found){return found?'"'+literalEscape(found)+'"':"end of input"}return"Expected "+describeExpected(expected)+" but "+describeFound(found)+" found."};function peg$parse(input,options){options=void 0!==options?options:{};var peg$result,peg$FAILED={},peg$startRuleFunctions={expression:peg$parseexpression,argument:peg$parseargument},peg$startRuleFunction=peg$parseexpression,peg$c0="|",peg$c1=peg$literalExpectation("|",false),peg$c2=function peg$c2(first,fn){return fn},peg$c3=function peg$c3(first,rest){return addMeta({type:"expression",chain:[first].concat(rest)},text(),location())},peg$c4=peg$otherExpectation("function"),peg$c5=function peg$c5(name,arg_list){return addMeta({type:"function",function:name,arguments:arg_list},text(),location())},peg$c6="=",peg$c7=peg$literalExpectation("=",false),peg$c8=function peg$c8(name,value){return{name:name,value:value}},peg$c9=function peg$c9(value){return{name:"_",value:value}},peg$c10="$",peg$c11=peg$literalExpectation("$",false),peg$c12="{",peg$c13=peg$literalExpectation("{",false),peg$c14="}",peg$c15=peg$literalExpectation("}",false),peg$c16=function peg$c16(expression){return expression},peg$c17=function peg$c17(value){return addMeta(value,text(),location())},peg$c18=function peg$c18(arg){return arg},peg$c19=function peg$c19(args){return args.reduce(function(accumulator,_ref){var name=_ref.name,value=_ref.value;return _extends({},accumulator,_defineProperty({},name,(accumulator[name]||[]).concat(value)))},{})},peg$c20=/^[a-zA-Z0-9_\-]/,peg$c21=peg$classExpectation([["a","z"],["A","Z"],["0","9"],"_","-"],false,false),peg$c22=function peg$c22(name){return name.join("")},peg$c23=peg$otherExpectation("literal"),peg$c24='"',peg$c25=peg$literalExpectation('"',false),peg$c26=function peg$c26(chars){return chars.join("")},peg$c27="'",peg$c28=peg$literalExpectation("'",false),peg$c29=function peg$c29(string){var result=string.join("");if("null"===result)return null;if("true"===result)return true;if("false"===result)return false;if(isNaN(Number(result)))return result;return Number(result)},peg$c30=/^[ \t\r\n]/,peg$c31=peg$classExpectation([" ","\t","\r","\n"],false,false),peg$c32="\\",peg$c33=peg$literalExpectation("\\",false),peg$c34=/^["'(){}<>[\]$`|= \t\n\r]/,peg$c35=peg$classExpectation(['"',"'","(",")","{","}","<",">","[","]","$","`","|","="," ","\t","\n","\r"],false,false),peg$c36=function peg$c36(sequence){return sequence},peg$c37=/^[^"'(){}<>[\]$`|= \t\n\r]/,peg$c38=peg$classExpectation(['"',"'","(",")","{","}","<",">","[","]","$","`","|","="," ","\t","\n","\r"],true,false),peg$c39=/^[^"]/,peg$c40=peg$classExpectation(['"'],true,false),peg$c41=/^[^']/,peg$c42=peg$classExpectation(["'"],true,false),peg$currPos=0,peg$savedPos=0,peg$posDetailsCache=[{line:1,column:1}],peg$maxFailPos=0,peg$maxFailExpected=[],peg$silentFails=0;if("startRule"in options){if(!(options.startRule in peg$startRuleFunctions))throw new Error("Can't start parsing from rule \""+options.startRule+'".');peg$startRuleFunction=peg$startRuleFunctions[options.startRule]}function text(){return input.substring(peg$savedPos,peg$currPos)}function location(){return peg$computeLocation(peg$savedPos,peg$currPos)}function peg$literalExpectation(text,ignoreCase){return{type:"literal",text:text,ignoreCase:ignoreCase}}function peg$classExpectation(parts,inverted,ignoreCase){return{type:"class",parts:parts,inverted:inverted,ignoreCase:ignoreCase}}function peg$endExpectation(){return{type:"end"}}function peg$otherExpectation(description){return{type:"other",description:description}}function peg$computePosDetails(pos){var p,details=peg$posDetailsCache[pos];if(details)return details;p=pos-1;while(!peg$posDetailsCache[p])p--;details=peg$posDetailsCache[p];details={line:details.line,column:details.column};while(p<pos){if(10===input.charCodeAt(p)){details.line++;details.column=1}else details.column++;p++}peg$posDetailsCache[pos]=details;return details}function peg$computeLocation(startPos,endPos){var startPosDetails=peg$computePosDetails(startPos),endPosDetails=peg$computePosDetails(endPos);return{start:{offset:startPos,line:startPosDetails.line,column:startPosDetails.column},end:{offset:endPos,line:endPosDetails.line,column:endPosDetails.column}}}function peg$fail(expected){if(peg$currPos<peg$maxFailPos)return;if(peg$currPos>peg$maxFailPos){peg$maxFailPos=peg$currPos;peg$maxFailExpected=[]}peg$maxFailExpected.push(expected)}function peg$buildStructuredError(expected,found,location){return new peg$SyntaxError(peg$SyntaxError.buildMessage(expected,found),expected,found,location)}function peg$parseexpression(){var s0,s1,s2,s3,s4,s5,s6,s7;s0=peg$currPos;s1=peg$parsespace();s1===peg$FAILED&&(s1=null);if(s1!==peg$FAILED){s2=peg$parsefunction();if(s2!==peg$FAILED){s3=[];s4=peg$currPos;if(124===input.charCodeAt(peg$currPos)){s5=peg$c0;peg$currPos++}else{s5=peg$FAILED;0===peg$silentFails&&peg$fail(peg$c1)}if(s5!==peg$FAILED){s6=peg$parsespace();s6===peg$FAILED&&(s6=null);if(s6!==peg$FAILED){s7=peg$parsefunction();if(s7!==peg$FAILED){peg$savedPos=s4;s5=peg$c2(s2,s7);s4=s5}else{peg$currPos=s4;s4=peg$FAILED}}else{peg$currPos=s4;s4=peg$FAILED}}else{peg$currPos=s4;s4=peg$FAILED}while(s4!==peg$FAILED){s3.push(s4);s4=peg$currPos;if(124===input.charCodeAt(peg$currPos)){s5=peg$c0;peg$currPos++}else{s5=peg$FAILED;0===peg$silentFails&&peg$fail(peg$c1)}if(s5!==peg$FAILED){s6=peg$parsespace();s6===peg$FAILED&&(s6=null);if(s6!==peg$FAILED){s7=peg$parsefunction();if(s7!==peg$FAILED){peg$savedPos=s4;s5=peg$c2(s2,s7);s4=s5}else{peg$currPos=s4;s4=peg$FAILED}}else{peg$currPos=s4;s4=peg$FAILED}}else{peg$currPos=s4;s4=peg$FAILED}}if(s3!==peg$FAILED){peg$savedPos=s0;s1=peg$c3(s2,s3);s0=s1}else{peg$currPos=s0;s0=peg$FAILED}}else{peg$currPos=s0;s0=peg$FAILED}}else{peg$currPos=s0;s0=peg$FAILED}return s0}function peg$parsefunction(){var s0,s1,s2;peg$silentFails++;s0=peg$currPos;s1=peg$parseidentifier();if(s1!==peg$FAILED){s2=peg$parsearg_list();if(s2!==peg$FAILED){peg$savedPos=s0;s1=peg$c5(s1,s2);s0=s1}else{peg$currPos=s0;s0=peg$FAILED}}else{peg$currPos=s0;s0=peg$FAILED}peg$silentFails--;if(s0===peg$FAILED){s1=peg$FAILED;0===peg$silentFails&&peg$fail(peg$c4)}return s0}function peg$parseargument_assignment(){var s0,s1,s2,s3,s4,s5;s0=peg$currPos;s1=peg$parseidentifier();if(s1!==peg$FAILED){s2=peg$parsespace();s2===peg$FAILED&&(s2=null);if(s2!==peg$FAILED){if(61===input.charCodeAt(peg$currPos)){s3=peg$c6;peg$currPos++}else{s3=peg$FAILED;0===peg$silentFails&&peg$fail(peg$c7)}if(s3!==peg$FAILED){s4=peg$parsespace();s4===peg$FAILED&&(s4=null);if(s4!==peg$FAILED){s5=peg$parseargument();if(s5!==peg$FAILED){peg$savedPos=s0;s1=peg$c8(s1,s5);s0=s1}else{peg$currPos=s0;s0=peg$FAILED}}else{peg$currPos=s0;s0=peg$FAILED}}else{peg$currPos=s0;s0=peg$FAILED}}else{peg$currPos=s0;s0=peg$FAILED}}else{peg$currPos=s0;s0=peg$FAILED}if(s0===peg$FAILED){s0=peg$currPos;s1=peg$parseargument();if(s1!==peg$FAILED){peg$savedPos=s0;s1=peg$c9(s1)}s0=s1}return s0}function peg$parseargument(){var s0,s1,s2,s3,s4;s0=peg$currPos;if(36===input.charCodeAt(peg$currPos)){s1=peg$c10;peg$currPos++}else{s1=peg$FAILED;0===peg$silentFails&&peg$fail(peg$c11)}s1===peg$FAILED&&(s1=null);if(s1!==peg$FAILED){if(123===input.charCodeAt(peg$currPos)){s2=peg$c12;peg$currPos++}else{s2=peg$FAILED;0===peg$silentFails&&peg$fail(peg$c13)}if(s2!==peg$FAILED){s3=peg$parseexpression();if(s3!==peg$FAILED){if(125===input.charCodeAt(peg$currPos)){s4=peg$c14;peg$currPos++}else{s4=peg$FAILED;0===peg$silentFails&&peg$fail(peg$c15)}if(s4!==peg$FAILED){peg$savedPos=s0;s1=peg$c16(s3);s0=s1}else{peg$currPos=s0;s0=peg$FAILED}}else{peg$currPos=s0;s0=peg$FAILED}}else{peg$currPos=s0;s0=peg$FAILED}}else{peg$currPos=s0;s0=peg$FAILED}if(s0===peg$FAILED){s0=peg$currPos;s1=peg$parseliteral();if(s1!==peg$FAILED){peg$savedPos=s0;s1=peg$c17(s1)}s0=s1}return s0}function peg$parsearg_list(){var s0,s1,s2,s3,s4;s0=peg$currPos;s1=[];s2=peg$currPos;s3=peg$parsespace();if(s3!==peg$FAILED){s4=peg$parseargument_assignment();if(s4!==peg$FAILED){peg$savedPos=s2;s3=peg$c18(s4);s2=s3}else{peg$currPos=s2;s2=peg$FAILED}}else{peg$currPos=s2;s2=peg$FAILED}while(s2!==peg$FAILED){s1.push(s2);s2=peg$currPos;s3=peg$parsespace();if(s3!==peg$FAILED){s4=peg$parseargument_assignment();if(s4!==peg$FAILED){peg$savedPos=s2;s3=peg$c18(s4);s2=s3}else{peg$currPos=s2;s2=peg$FAILED}}else{peg$currPos=s2;s2=peg$FAILED}}if(s1!==peg$FAILED){s2=peg$parsespace();s2===peg$FAILED&&(s2=null);if(s2!==peg$FAILED){peg$savedPos=s0;s1=peg$c19(s1);s0=s1}else{peg$currPos=s0;s0=peg$FAILED}}else{peg$currPos=s0;s0=peg$FAILED}return s0}function peg$parseidentifier(){var s0,s1,s2;s0=peg$currPos;s1=[];if(peg$c20.test(input.charAt(peg$currPos))){s2=input.charAt(peg$currPos);peg$currPos++}else{s2=peg$FAILED;0===peg$silentFails&&peg$fail(peg$c21)}if(s2!==peg$FAILED)while(s2!==peg$FAILED){s1.push(s2);if(peg$c20.test(input.charAt(peg$currPos))){s2=input.charAt(peg$currPos);peg$currPos++}else{s2=peg$FAILED;0===peg$silentFails&&peg$fail(peg$c21)}}else s1=peg$FAILED;if(s1!==peg$FAILED){peg$savedPos=s0;s1=peg$c22(s1)}s0=s1;return s0}function peg$parseliteral(){var s0;peg$silentFails++;s0=peg$parsephrase();s0===peg$FAILED&&(s0=peg$parseunquoted_string_or_number());peg$silentFails--;if(s0===peg$FAILED){peg$FAILED;0===peg$silentFails&&peg$fail(peg$c23)}return s0}function peg$parsephrase(){var s0,s1,s2,s3;s0=peg$currPos;if(34===input.charCodeAt(peg$currPos)){s1=peg$c24;peg$currPos++}else{s1=peg$FAILED;0===peg$silentFails&&peg$fail(peg$c25)}if(s1!==peg$FAILED){s2=[];s3=peg$parsedq_char();while(s3!==peg$FAILED){s2.push(s3);s3=peg$parsedq_char()}if(s2!==peg$FAILED){if(34===input.charCodeAt(peg$currPos)){s3=peg$c24;peg$currPos++}else{s3=peg$FAILED;0===peg$silentFails&&peg$fail(peg$c25)}if(s3!==peg$FAILED){peg$savedPos=s0;s1=peg$c26(s2);s0=s1}else{peg$currPos=s0;s0=peg$FAILED}}else{peg$currPos=s0;s0=peg$FAILED}}else{peg$currPos=s0;s0=peg$FAILED}if(s0===peg$FAILED){s0=peg$currPos;if(39===input.charCodeAt(peg$currPos)){s1=peg$c27;peg$currPos++}else{s1=peg$FAILED;0===peg$silentFails&&peg$fail(peg$c28)}if(s1!==peg$FAILED){s2=[];s3=peg$parsesq_char();while(s3!==peg$FAILED){s2.push(s3);s3=peg$parsesq_char()}if(s2!==peg$FAILED){if(39===input.charCodeAt(peg$currPos)){s3=peg$c27;peg$currPos++}else{s3=peg$FAILED;0===peg$silentFails&&peg$fail(peg$c28)}if(s3!==peg$FAILED){peg$savedPos=s0;s1=peg$c26(s2);s0=s1}else{peg$currPos=s0;s0=peg$FAILED}}else{peg$currPos=s0;s0=peg$FAILED}}else{peg$currPos=s0;s0=peg$FAILED}}return s0}function peg$parseunquoted_string_or_number(){var s0,s1,s2;s0=peg$currPos;s1=[];s2=peg$parseunquoted();if(s2!==peg$FAILED)while(s2!==peg$FAILED){s1.push(s2);s2=peg$parseunquoted()}else s1=peg$FAILED;if(s1!==peg$FAILED){peg$savedPos=s0;s1=peg$c29(s1)}s0=s1;return s0}function peg$parsespace(){var s0,s1;s0=[];if(peg$c30.test(input.charAt(peg$currPos))){s1=input.charAt(peg$currPos);peg$currPos++}else{s1=peg$FAILED;0===peg$silentFails&&peg$fail(peg$c31)}if(s1!==peg$FAILED)while(s1!==peg$FAILED){s0.push(s1);if(peg$c30.test(input.charAt(peg$currPos))){s1=input.charAt(peg$currPos);peg$currPos++}else{s1=peg$FAILED;0===peg$silentFails&&peg$fail(peg$c31)}}else s0=peg$FAILED;return s0}function peg$parseunquoted(){var s0,s1,s2;s0=peg$currPos;if(92===input.charCodeAt(peg$currPos)){s1=peg$c32;peg$currPos++}else{s1=peg$FAILED;0===peg$silentFails&&peg$fail(peg$c33)}if(s1!==peg$FAILED){if(peg$c34.test(input.charAt(peg$currPos))){s2=input.charAt(peg$currPos);peg$currPos++}else{s2=peg$FAILED;0===peg$silentFails&&peg$fail(peg$c35)}if(s2===peg$FAILED)if(92===input.charCodeAt(peg$currPos)){s2=peg$c32;peg$currPos++}else{s2=peg$FAILED;0===peg$silentFails&&peg$fail(peg$c33)}if(s2!==peg$FAILED){peg$savedPos=s0;s1=peg$c36(s2);s0=s1}else{peg$currPos=s0;s0=peg$FAILED}}else{peg$currPos=s0;s0=peg$FAILED}if(s0===peg$FAILED)if(peg$c37.test(input.charAt(peg$currPos))){s0=input.charAt(peg$currPos);peg$currPos++}else{s0=peg$FAILED;0===peg$silentFails&&peg$fail(peg$c38)}return s0}function peg$parsedq_char(){var s0,s1,s2;s0=peg$currPos;if(92===input.charCodeAt(peg$currPos)){s1=peg$c32;peg$currPos++}else{s1=peg$FAILED;0===peg$silentFails&&peg$fail(peg$c33)}if(s1!==peg$FAILED){if(34===input.charCodeAt(peg$currPos)){s2=peg$c24;peg$currPos++}else{s2=peg$FAILED;0===peg$silentFails&&peg$fail(peg$c25)}if(s2===peg$FAILED)if(92===input.charCodeAt(peg$currPos)){s2=peg$c32;peg$currPos++}else{s2=peg$FAILED;0===peg$silentFails&&peg$fail(peg$c33)}if(s2!==peg$FAILED){peg$savedPos=s0;s1=peg$c36(s2);s0=s1}else{peg$currPos=s0;s0=peg$FAILED}}else{peg$currPos=s0;s0=peg$FAILED}if(s0===peg$FAILED)if(peg$c39.test(input.charAt(peg$currPos))){s0=input.charAt(peg$currPos);peg$currPos++}else{s0=peg$FAILED;0===peg$silentFails&&peg$fail(peg$c40)}return s0}function peg$parsesq_char(){var s0,s1,s2;s0=peg$currPos;if(92===input.charCodeAt(peg$currPos)){s1=peg$c32;peg$currPos++}else{s1=peg$FAILED;0===peg$silentFails&&peg$fail(peg$c33)}if(s1!==peg$FAILED){if(39===input.charCodeAt(peg$currPos)){s2=peg$c27;peg$currPos++}else{s2=peg$FAILED;0===peg$silentFails&&peg$fail(peg$c28)}if(s2===peg$FAILED)if(92===input.charCodeAt(peg$currPos)){s2=peg$c32;peg$currPos++}else{s2=peg$FAILED;0===peg$silentFails&&peg$fail(peg$c33)}if(s2!==peg$FAILED){peg$savedPos=s0;s1=peg$c36(s2);s0=s1}else{peg$currPos=s0;s0=peg$FAILED}}else{peg$currPos=s0;s0=peg$FAILED}if(s0===peg$FAILED)if(peg$c41.test(input.charAt(peg$currPos))){s0=input.charAt(peg$currPos);peg$currPos++}else{s0=peg$FAILED;0===peg$silentFails&&peg$fail(peg$c42)}return s0}function addMeta(node,text,_ref2){var start=_ref2.start.offset,end=_ref2.end.offset;if(!options.addMeta)return node;return{node:node,text:text,start:start,end:end}}peg$result=peg$startRuleFunction();if(peg$result!==peg$FAILED&&peg$currPos===input.length)return peg$result;peg$result!==peg$FAILED&&peg$currPos<input.length&&peg$fail(peg$endExpectation());throw peg$buildStructuredError(peg$maxFailExpected,peg$maxFailPos<input.length?input.charAt(peg$maxFailPos):null,peg$maxFailPos<input.length?peg$computeLocation(peg$maxFailPos,peg$maxFailPos+1):peg$computeLocation(peg$maxFailPos,peg$maxFailPos))}module.exports={SyntaxError:peg$SyntaxError,parse:peg$parse}},2037:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.getState=getState;exports.getValue=getValue;exports.getError=getError;var _lodash=__webpack_require__(1);function getState(resolvedArg){return(0,_lodash.get)(resolvedArg,"state",null)}function getValue(resolvedArg){return(0,_lodash.get)(resolvedArg,"value",null)}function getError(resolvedArg){if("error"!==getState(resolvedArg))return null;return(0,_lodash.get)(resolvedArg,"error",null)}},2038:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.serializeProvider=serializeProvider;var _lodash=__webpack_require__(1);var _get_type=__webpack_require__(386);function serializeProvider(types){return{serialize:provider("serialize"),deserialize:provider("deserialize")};function provider(key){return function(context){var type=(0,_get_type.getType)(context);var typeDef=types[type];var fn=(0,_lodash.get)(typeDef,key)||_lodash.identity;return fn(context)}}}},2039:function(module,exports,__webpack_require__){(function(global,module){var LARGE_ARRAY_SIZE=200;var HASH_UNDEFINED="__lodash_hash_undefined__";var MAX_SAFE_INTEGER=9007199254740991;var argsTag="[object Arguments]",arrayTag="[object Array]",boolTag="[object Boolean]",dateTag="[object Date]",errorTag="[object Error]",funcTag="[object Function]",genTag="[object GeneratorFunction]",mapTag="[object Map]",numberTag="[object Number]",objectTag="[object Object]",promiseTag="[object Promise]",regexpTag="[object RegExp]",setTag="[object Set]",stringTag="[object String]",symbolTag="[object Symbol]",weakMapTag="[object WeakMap]";var arrayBufferTag="[object ArrayBuffer]",dataViewTag="[object DataView]",float32Tag="[object Float32Array]",float64Tag="[object Float64Array]",int8Tag="[object Int8Array]",int16Tag="[object Int16Array]",int32Tag="[object Int32Array]",uint8Tag="[object Uint8Array]",uint8ClampedTag="[object Uint8ClampedArray]",uint16Tag="[object Uint16Array]",uint32Tag="[object Uint32Array]";var reRegExpChar=/[\\^$.*+?()[\]{}|]/g;var reFlags=/\w*$/;var reIsHostCtor=/^\[object .+?Constructor\]$/;var reIsUint=/^(?:0|[1-9]\d*)$/;var cloneableTags={};cloneableTags[argsTag]=cloneableTags[arrayTag]=cloneableTags[arrayBufferTag]=cloneableTags[dataViewTag]=cloneableTags[boolTag]=cloneableTags[dateTag]=cloneableTags[float32Tag]=cloneableTags[float64Tag]=cloneableTags[int8Tag]=cloneableTags[int16Tag]=cloneableTags[int32Tag]=cloneableTags[mapTag]=cloneableTags[numberTag]=cloneableTags[objectTag]=cloneableTags[regexpTag]=cloneableTags[setTag]=cloneableTags[stringTag]=cloneableTags[symbolTag]=cloneableTags[uint8Tag]=cloneableTags[uint8ClampedTag]=cloneableTags[uint16Tag]=cloneableTags[uint32Tag]=true;cloneableTags[errorTag]=cloneableTags[funcTag]=cloneableTags[weakMapTag]=false;var freeGlobal="object"==typeof global&&global&&global.Object===Object&&global;var freeSelf="object"==typeof self&&self&&self.Object===Object&&self;var root=freeGlobal||freeSelf||Function("return this")();var freeExports="object"==typeof exports&&exports&&!exports.nodeType&&exports;var freeModule=freeExports&&"object"==typeof module&&module&&!module.nodeType&&module;var moduleExports=freeModule&&freeModule.exports===freeExports;function addMapEntry(map,pair){map.set(pair[0],pair[1]);return map}function addSetEntry(set,value){set.add(value);return set}function arrayEach(array,iteratee){var index=-1,length=array?array.length:0;while(++index<length)if(false===iteratee(array[index],index,array))break;return array}function arrayPush(array,values){var index=-1,length=values.length,offset=array.length;while(++index<length)array[offset+index]=values[index];return array}function arrayReduce(array,iteratee,accumulator,initAccum){var index=-1,length=array?array.length:0;initAccum&&length&&(accumulator=array[++index]);while(++index<length)accumulator=iteratee(accumulator,array[index],index,array);return accumulator}function baseTimes(n,iteratee){var index=-1,result=Array(n);while(++index<n)result[index]=iteratee(index);return result}function getValue(object,key){return null==object?void 0:object[key]}function isHostObject(value){var result=false;if(null!=value&&"function"!=typeof value.toString)try{result=!!(value+"")}catch(e){}return result}function mapToArray(map){var index=-1,result=Array(map.size);map.forEach(function(value,key){result[++index]=[key,value]});return result}function overArg(func,transform){return function(arg){return func(transform(arg))}}function setToArray(set){var index=-1,result=Array(set.size);set.forEach(function(value){result[++index]=value});return result}var arrayProto=Array.prototype,funcProto=Function.prototype,objectProto=Object.prototype;var coreJsData=root["__core-js_shared__"];var maskSrcKey=(uid=/[^.]+$/.exec(coreJsData&&coreJsData.keys&&coreJsData.keys.IE_PROTO||""),uid?"Symbol(src)_1."+uid:"");var uid;var funcToString=funcProto.toString;var hasOwnProperty=objectProto.hasOwnProperty;var objectToString=objectProto.toString;var reIsNative=RegExp("^"+funcToString.call(hasOwnProperty).replace(reRegExpChar,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");var Buffer=moduleExports?root.Buffer:void 0,Symbol=root.Symbol,Uint8Array=root.Uint8Array,getPrototype=overArg(Object.getPrototypeOf,Object),objectCreate=Object.create,propertyIsEnumerable=objectProto.propertyIsEnumerable,splice=arrayProto.splice;var nativeGetSymbols=Object.getOwnPropertySymbols,nativeIsBuffer=Buffer?Buffer.isBuffer:void 0,nativeKeys=overArg(Object.keys,Object);var DataView=getNative(root,"DataView"),Map=getNative(root,"Map"),Promise=getNative(root,"Promise"),Set=getNative(root,"Set"),WeakMap=getNative(root,"WeakMap"),nativeCreate=getNative(Object,"create");var dataViewCtorString=toSource(DataView),mapCtorString=toSource(Map),promiseCtorString=toSource(Promise),setCtorString=toSource(Set),weakMapCtorString=toSource(WeakMap);var symbolProto=Symbol?Symbol.prototype:void 0,symbolValueOf=symbolProto?symbolProto.valueOf:void 0;function Hash(entries){var index=-1,length=entries?entries.length:0;this.clear();while(++index<length){var entry=entries[index];this.set(entry[0],entry[1])}}function hashClear(){this.__data__=nativeCreate?nativeCreate(null):{}}function hashDelete(key){return this.has(key)&&delete this.__data__[key]}function hashGet(key){var data=this.__data__;if(nativeCreate){var result=data[key];return result===HASH_UNDEFINED?void 0:result}return hasOwnProperty.call(data,key)?data[key]:void 0}function hashHas(key){var data=this.__data__;return nativeCreate?void 0!==data[key]:hasOwnProperty.call(data,key)}function hashSet(key,value){var data=this.__data__;data[key]=nativeCreate&&void 0===value?HASH_UNDEFINED:value;return this}Hash.prototype.clear=hashClear;Hash.prototype["delete"]=hashDelete;Hash.prototype.get=hashGet;Hash.prototype.has=hashHas;Hash.prototype.set=hashSet;function ListCache(entries){var index=-1,length=entries?entries.length:0;this.clear();while(++index<length){var entry=entries[index];this.set(entry[0],entry[1])}}function listCacheClear(){this.__data__=[]}function listCacheDelete(key){var data=this.__data__,index=assocIndexOf(data,key);if(index<0)return false;var lastIndex=data.length-1;index==lastIndex?data.pop():splice.call(data,index,1);return true}function listCacheGet(key){var data=this.__data__,index=assocIndexOf(data,key);return index<0?void 0:data[index][1]}function listCacheHas(key){return assocIndexOf(this.__data__,key)>-1}function listCacheSet(key,value){var data=this.__data__,index=assocIndexOf(data,key);index<0?data.push([key,value]):data[index][1]=value;return this}ListCache.prototype.clear=listCacheClear;ListCache.prototype["delete"]=listCacheDelete;ListCache.prototype.get=listCacheGet;ListCache.prototype.has=listCacheHas;ListCache.prototype.set=listCacheSet;function MapCache(entries){var index=-1,length=entries?entries.length:0;this.clear();while(++index<length){var entry=entries[index];this.set(entry[0],entry[1])}}function mapCacheClear(){this.__data__={hash:new Hash,map:new(Map||ListCache),string:new Hash}}function mapCacheDelete(key){return getMapData(this,key)["delete"](key)}function mapCacheGet(key){return getMapData(this,key).get(key)}function mapCacheHas(key){return getMapData(this,key).has(key)}function mapCacheSet(key,value){getMapData(this,key).set(key,value);return this}MapCache.prototype.clear=mapCacheClear;MapCache.prototype["delete"]=mapCacheDelete;MapCache.prototype.get=mapCacheGet;MapCache.prototype.has=mapCacheHas;MapCache.prototype.set=mapCacheSet;function Stack(entries){this.__data__=new ListCache(entries)}function stackClear(){this.__data__=new ListCache}function stackDelete(key){return this.__data__["delete"](key)}function stackGet(key){return this.__data__.get(key)}function stackHas(key){return this.__data__.has(key)}function stackSet(key,value){var cache=this.__data__;if(cache instanceof ListCache){var pairs=cache.__data__;if(!Map||pairs.length<LARGE_ARRAY_SIZE-1){pairs.push([key,value]);return this}cache=this.__data__=new MapCache(pairs)}cache.set(key,value);return this}Stack.prototype.clear=stackClear;Stack.prototype["delete"]=stackDelete;Stack.prototype.get=stackGet;Stack.prototype.has=stackHas;Stack.prototype.set=stackSet;function arrayLikeKeys(value,inherited){var result=isArray(value)||isArguments(value)?baseTimes(value.length,String):[];var length=result.length,skipIndexes=!!length;for(var key in value)!inherited&&!hasOwnProperty.call(value,key)||skipIndexes&&("length"==key||isIndex(key,length))||result.push(key);return result}function assignValue(object,key,value){var objValue=object[key];hasOwnProperty.call(object,key)&&eq(objValue,value)&&(void 0!==value||key in object)||(object[key]=value)}function assocIndexOf(array,key){var length=array.length;while(length--)if(eq(array[length][0],key))return length;return-1}function baseAssign(object,source){return object&&copyObject(source,keys(source),object)}function baseClone(value,isDeep,isFull,customizer,key,object,stack){var result;customizer&&(result=object?customizer(value,key,object,stack):customizer(value));if(void 0!==result)return result;if(!isObject(value))return value;var isArr=isArray(value);if(isArr){result=initCloneArray(value);if(!isDeep)return copyArray(value,result)}else{var tag=getTag(value),isFunc=tag==funcTag||tag==genTag;if(isBuffer(value))return cloneBuffer(value,isDeep);if(tag==objectTag||tag==argsTag||isFunc&&!object){if(isHostObject(value))return object?value:{};result=initCloneObject(isFunc?{}:value);if(!isDeep)return copySymbols(value,baseAssign(result,value))}else{if(!cloneableTags[tag])return object?value:{};result=initCloneByTag(value,tag,baseClone,isDeep)}}stack||(stack=new Stack);var stacked=stack.get(value);if(stacked)return stacked;stack.set(value,result);if(!isArr)var props=isFull?getAllKeys(value):keys(value);arrayEach(props||value,function(subValue,key){if(props){key=subValue;subValue=value[key]}assignValue(result,key,baseClone(subValue,isDeep,isFull,customizer,key,value,stack))});return result}function baseCreate(proto){return isObject(proto)?objectCreate(proto):{}}function baseGetAllKeys(object,keysFunc,symbolsFunc){var result=keysFunc(object);return isArray(object)?result:arrayPush(result,symbolsFunc(object))}function baseGetTag(value){return objectToString.call(value)}function baseIsNative(value){if(!isObject(value)||isMasked(value))return false;var pattern=isFunction(value)||isHostObject(value)?reIsNative:reIsHostCtor;return pattern.test(toSource(value))}function baseKeys(object){if(!isPrototype(object))return nativeKeys(object);var result=[];for(var key in Object(object))hasOwnProperty.call(object,key)&&"constructor"!=key&&result.push(key);return result}function cloneBuffer(buffer,isDeep){if(isDeep)return buffer.slice();var result=new buffer.constructor(buffer.length);buffer.copy(result);return result}function cloneArrayBuffer(arrayBuffer){var result=new arrayBuffer.constructor(arrayBuffer.byteLength);new Uint8Array(result).set(new Uint8Array(arrayBuffer));return result}function cloneDataView(dataView,isDeep){var buffer=isDeep?cloneArrayBuffer(dataView.buffer):dataView.buffer;return new dataView.constructor(buffer,dataView.byteOffset,dataView.byteLength)}function cloneMap(map,isDeep,cloneFunc){var array=isDeep?cloneFunc(mapToArray(map),true):mapToArray(map);return arrayReduce(array,addMapEntry,new map.constructor)}function cloneRegExp(regexp){var result=new regexp.constructor(regexp.source,reFlags.exec(regexp));result.lastIndex=regexp.lastIndex;return result}function cloneSet(set,isDeep,cloneFunc){var array=isDeep?cloneFunc(setToArray(set),true):setToArray(set);return arrayReduce(array,addSetEntry,new set.constructor)}function cloneSymbol(symbol){return symbolValueOf?Object(symbolValueOf.call(symbol)):{}}function cloneTypedArray(typedArray,isDeep){var buffer=isDeep?cloneArrayBuffer(typedArray.buffer):typedArray.buffer;return new typedArray.constructor(buffer,typedArray.byteOffset,typedArray.length)}function copyArray(source,array){var index=-1,length=source.length;array||(array=Array(length));while(++index<length)array[index]=source[index];return array}function copyObject(source,props,object,customizer){object||(object={});var index=-1,length=props.length;while(++index<length){var key=props[index];var newValue=customizer?customizer(object[key],source[key],key,object,source):void 0;assignValue(object,key,void 0===newValue?source[key]:newValue)}return object}function copySymbols(source,object){return copyObject(source,getSymbols(source),object)}function getAllKeys(object){return baseGetAllKeys(object,keys,getSymbols)}function getMapData(map,key){var data=map.__data__;return isKeyable(key)?data["string"==typeof key?"string":"hash"]:data.map}function getNative(object,key){var value=getValue(object,key);return baseIsNative(value)?value:void 0}var getSymbols=nativeGetSymbols?overArg(nativeGetSymbols,Object):stubArray;var getTag=baseGetTag;(DataView&&getTag(new DataView(new ArrayBuffer(1)))!=dataViewTag||Map&&getTag(new Map)!=mapTag||Promise&&getTag(Promise.resolve())!=promiseTag||Set&&getTag(new Set)!=setTag||WeakMap&&getTag(new WeakMap)!=weakMapTag)&&(getTag=function(value){var result=objectToString.call(value),Ctor=result==objectTag?value.constructor:void 0,ctorString=Ctor?toSource(Ctor):void 0;if(ctorString)switch(ctorString){case dataViewCtorString:return dataViewTag;case mapCtorString:return mapTag;case promiseCtorString:return promiseTag;case setCtorString:return setTag;case weakMapCtorString:return weakMapTag}return result});function initCloneArray(array){var length=array.length,result=array.constructor(length);if(length&&"string"==typeof array[0]&&hasOwnProperty.call(array,"index")){result.index=array.index;result.input=array.input}return result}function initCloneObject(object){return"function"!=typeof object.constructor||isPrototype(object)?{}:baseCreate(getPrototype(object))}function initCloneByTag(object,tag,cloneFunc,isDeep){var Ctor=object.constructor;switch(tag){case arrayBufferTag:return cloneArrayBuffer(object);case boolTag:case dateTag:return new Ctor(+object);case dataViewTag:return cloneDataView(object,isDeep);case float32Tag:case float64Tag:case int8Tag:case int16Tag:case int32Tag:case uint8Tag:case uint8ClampedTag:case uint16Tag:case uint32Tag:return cloneTypedArray(object,isDeep);case mapTag:return cloneMap(object,isDeep,cloneFunc);case numberTag:case stringTag:return new Ctor(object);case regexpTag:return cloneRegExp(object);case setTag:return cloneSet(object,isDeep,cloneFunc);case symbolTag:return cloneSymbol(object)}}function isIndex(value,length){length=null==length?MAX_SAFE_INTEGER:length;return!!length&&("number"==typeof value||reIsUint.test(value))&&value>-1&&value%1==0&&value<length}function isKeyable(value){var type=typeof value;return"string"==type||"number"==type||"symbol"==type||"boolean"==type?"__proto__"!==value:null===value}function isMasked(func){return!!maskSrcKey&&maskSrcKey in func}function isPrototype(value){var Ctor=value&&value.constructor,proto="function"==typeof Ctor&&Ctor.prototype||objectProto;return value===proto}function toSource(func){if(null!=func){try{return funcToString.call(func)}catch(e){}try{return func+""}catch(e){}}return""}function clone(value){return baseClone(value,false,true)}function eq(value,other){return value===other||value!==value&&other!==other}function isArguments(value){return isArrayLikeObject(value)&&hasOwnProperty.call(value,"callee")&&(!propertyIsEnumerable.call(value,"callee")||objectToString.call(value)==argsTag)}var isArray=Array.isArray;function isArrayLike(value){return null!=value&&isLength(value.length)&&!isFunction(value)}function isArrayLikeObject(value){return isObjectLike(value)&&isArrayLike(value)}var isBuffer=nativeIsBuffer||stubFalse;function isFunction(value){var tag=isObject(value)?objectToString.call(value):"";return tag==funcTag||tag==genTag}function isLength(value){return"number"==typeof value&&value>-1&&value%1==0&&value<=MAX_SAFE_INTEGER}function isObject(value){var type=typeof value;return!!value&&("object"==type||"function"==type)}function isObjectLike(value){return!!value&&"object"==typeof value}function keys(object){return isArrayLike(object)?arrayLikeKeys(object):baseKeys(object)}function stubArray(){return[]}function stubFalse(){return false}module.exports=clone}).call(exports,__webpack_require__(23),__webpack_require__(66)(module))},2040:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.castProvider=castProvider;var _get_type=__webpack_require__(386);function castProvider(types){return function cast(node,toTypeNames){if(!toTypeNames||0===toTypeNames.length)return node;var fromTypeName=(0,_get_type.getType)(node);if(toTypeNames.includes(fromTypeName))return node;var fromTypeDef=types[fromTypeName];for(var i=0;i<toTypeNames.length;i++){if(fromTypeDef&&fromTypeDef.castsTo(toTypeNames[i]))return fromTypeDef.to(node,toTypeNames[i],types);var toTypeDef=types[toTypeNames[i]];if(toTypeDef&&toTypeDef.castsFrom(fromTypeName))return toTypeDef.from(node,types)}throw new Error("Can not cast '"+fromTypeName+"' to any of '"+toTypeNames.join(", ")+"'")}}},2041:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.createSocket=void 0;exports.createSocket=(_ref=_asyncToGenerator(regeneratorRuntime.mark(function _callee(basePath){return regeneratorRuntime.wrap(function _callee$(_context){while(1)switch(_context.prev=_context.next){case 0:if(!(null!=socket)){_context.next=2;break}return _context.abrupt("return",socket);case 2:return _context.abrupt("return",new Promise(function(resolve,rej){var reject=function reject(p){socket=null;rej(p)};socket=(0,_socket2.default)({path:basePath+"/socket.io",transports:["polling","websocket"],transportOptions:{polling:{extraHeaders:{"kbn-xsrf":"professionally-crafted-string-of-text"}}},timeout:SOCKET_CONNECTION_TIMEOUT,rememberUpgrade:false});socket.on("getFunctionList",function(){var pluginsLoaded=(0,_browser_registries.getBrowserRegistries)();pluginsLoaded.then(function(){return socket.emit("functionList",_functions_registry.functionsRegistry.toJS())})});socket.on("connect",function(){resolve()});function errorHandler(err){reject(err.reason?new Error(err.reason):err)}socket.on("connectionFailed",errorHandler);socket.on("connect_error",errorHandler);socket.on("connect_timeout",errorHandler)}));case 3:case"end":return _context.stop()}},_callee,this)})),function createSocket(_x){return _ref.apply(this,arguments)});var _ref;exports.getSocket=getSocket;var _socket=__webpack_require__(6051);var _socket2=_interopRequireDefault(_socket);var _functions_registry=__webpack_require__(2054);var _browser_registries=__webpack_require__(808);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _asyncToGenerator(fn){return function(){var gen=fn.apply(this,arguments);return new Promise(function(resolve,reject){function step(key,arg){try{var info=gen[key](arg);var value=info.value}catch(error){reject(error);return}if(!info.done)return Promise.resolve(value).then(function(value){step("next",value)},function(err){step("throw",err)});resolve(value)}return step("next")})}}var SOCKET_CONNECTION_TIMEOUT=5e3;var socket=void 0;function getSocket(){if(!socket)throw new Error("getSocket failed, socket has not been created");return socket}},2042:function(module,exports){var re=/^(?:(?![^:@]+:[^:@\/]*@)(http|https|ws|wss):\/\/)?((?:(([^:@]*)(?::([^:@]*))?)?@)?((?:[a-f0-9]{0,4}:){2,7}[a-f0-9]{0,4}|[^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/;var parts=["source","protocol","authority","userInfo","user","password","host","port","relative","path","directory","file","query","anchor"];module.exports=function parseuri(str){var src=str,b=str.indexOf("["),e=str.indexOf("]");-1!=b&&-1!=e&&(str=str.substring(0,b)+str.substring(b,e).replace(/:/g,";")+str.substring(e,str.length));var m=re.exec(str||""),uri={},i=14;while(i--)uri[parts[i]]=m[i]||"";if(-1!=b&&-1!=e){uri.source=src;uri.host=uri.host.substring(1,uri.host.length-1).replace(/;/g,":");uri.authority=uri.authority.replace("[","").replace("]","").replace(/;/g,":");uri.ipv6uri=true}return uri}},2043:function(module,exports){var toString={}.toString;module.exports=Array.isArray||function(arr){return"[object Array]"==toString.call(arr)}},2044:function(module,exports,__webpack_require__){(function(global){module.exports=isBuf;var withNativeBuffer="function"===typeof global.Buffer&&"function"===typeof global.Buffer.isBuffer;var withNativeArrayBuffer="function"===typeof global.ArrayBuffer;var isView=withNativeArrayBuffer&&"function"===typeof global.ArrayBuffer.isView?global.ArrayBuffer.isView:function(obj){return obj.buffer instanceof global.ArrayBuffer};function isBuf(obj){return withNativeBuffer&&global.Buffer.isBuffer(obj)||withNativeArrayBuffer&&(obj instanceof global.ArrayBuffer||isView(obj))}}).call(exports,__webpack_require__(23))},2045:function(module,exports,__webpack_require__){var eio=__webpack_require__(6056);var Socket=__webpack_require__(2051);var Emitter=__webpack_require__(527);var parser=__webpack_require__(1167);var on=__webpack_require__(2052);var bind=__webpack_require__(2053);var debug=__webpack_require__(344)("socket.io-client:manager");var indexOf=__webpack_require__(2050);var Backoff=__webpack_require__(6071);var has=Object.prototype.hasOwnProperty;module.exports=Manager;function Manager(uri,opts){if(!(this instanceof Manager))return new Manager(uri,opts);if(uri&&"object"===typeof uri){opts=uri;uri=void 0}opts=opts||{};opts.path=opts.path||"/socket.io";this.nsps={};this.subs=[];this.opts=opts;this.reconnection(false!==opts.reconnection);this.reconnectionAttempts(opts.reconnectionAttempts||Infinity);this.reconnectionDelay(opts.reconnectionDelay||1e3);this.reconnectionDelayMax(opts.reconnectionDelayMax||5e3);this.randomizationFactor(opts.randomizationFactor||.5);this.backoff=new Backoff({min:this.reconnectionDelay(),max:this.reconnectionDelayMax(),jitter:this.randomizationFactor()});this.timeout(null==opts.timeout?2e4:opts.timeout);this.readyState="closed";this.uri=uri;this.connecting=[];this.lastPing=null;this.encoding=false;this.packetBuffer=[];var _parser=opts.parser||parser;this.encoder=new _parser.Encoder;this.decoder=new _parser.Decoder;this.autoConnect=false!==opts.autoConnect;this.autoConnect&&this.open()}Manager.prototype.emitAll=function(){this.emit.apply(this,arguments);for(var nsp in this.nsps)has.call(this.nsps,nsp)&&this.nsps[nsp].emit.apply(this.nsps[nsp],arguments)};Manager.prototype.updateSocketIds=function(){for(var nsp in this.nsps)has.call(this.nsps,nsp)&&(this.nsps[nsp].id=this.generateId(nsp))};Manager.prototype.generateId=function(nsp){return("/"===nsp?"":nsp+"#")+this.engine.id};Emitter(Manager.prototype);Manager.prototype.reconnection=function(v){if(!arguments.length)return this._reconnection;this._reconnection=!!v;return this};Manager.prototype.reconnectionAttempts=function(v){if(!arguments.length)return this._reconnectionAttempts;this._reconnectionAttempts=v;return this};Manager.prototype.reconnectionDelay=function(v){if(!arguments.length)return this._reconnectionDelay;this._reconnectionDelay=v;this.backoff&&this.backoff.setMin(v);return this};Manager.prototype.randomizationFactor=function(v){if(!arguments.length)return this._randomizationFactor;this._randomizationFactor=v;this.backoff&&this.backoff.setJitter(v);return this};Manager.prototype.reconnectionDelayMax=function(v){if(!arguments.length)return this._reconnectionDelayMax;this._reconnectionDelayMax=v;this.backoff&&this.backoff.setMax(v);return this};Manager.prototype.timeout=function(v){if(!arguments.length)return this._timeout;this._timeout=v;return this};Manager.prototype.maybeReconnectOnOpen=function(){!this.reconnecting&&this._reconnection&&0===this.backoff.attempts&&this.reconnect()};Manager.prototype.open=Manager.prototype.connect=function(fn,opts){debug("readyState %s",this.readyState);if(~this.readyState.indexOf("open"))return this;debug("opening %s",this.uri);this.engine=eio(this.uri,this.opts);var socket=this.engine;var self=this;this.readyState="opening";this.skipReconnect=false;var openSub=on(socket,"open",function(){self.onopen();fn&&fn()});var errorSub=on(socket,"error",function(data){debug("connect_error");self.cleanup();self.readyState="closed";self.emitAll("connect_error",data);if(fn){var err=new Error("Connection error");err.data=data;fn(err)}else self.maybeReconnectOnOpen()});if(false!==this._timeout){var timeout=this._timeout;debug("connect attempt will timeout after %d",timeout);var timer=setTimeout(function(){debug("connect attempt timed out after %d",timeout);openSub.destroy();socket.close();socket.emit("error","timeout");self.emitAll("connect_timeout",timeout)},timeout);this.subs.push({destroy:function(){clearTimeout(timer)}})}this.subs.push(openSub);this.subs.push(errorSub);return this};Manager.prototype.onopen=function(){debug("open");this.cleanup();this.readyState="open";this.emit("open");var socket=this.engine;this.subs.push(on(socket,"data",bind(this,"ondata")));this.subs.push(on(socket,"ping",bind(this,"onping")));this.subs.push(on(socket,"pong",bind(this,"onpong")));this.subs.push(on(socket,"error",bind(this,"onerror")));this.subs.push(on(socket,"close",bind(this,"onclose")));this.subs.push(on(this.decoder,"decoded",bind(this,"ondecoded")))};Manager.prototype.onping=function(){this.lastPing=new Date;this.emitAll("ping")};Manager.prototype.onpong=function(){this.emitAll("pong",new Date-this.lastPing)};Manager.prototype.ondata=function(data){this.decoder.add(data)};Manager.prototype.ondecoded=function(packet){this.emit("packet",packet)};Manager.prototype.onerror=function(err){debug("error",err);this.emitAll("error",err)};Manager.prototype.socket=function(nsp,opts){var socket=this.nsps[nsp];if(!socket){socket=new Socket(this,nsp,opts);this.nsps[nsp]=socket;var self=this;socket.on("connecting",onConnecting);socket.on("connect",function(){socket.id=self.generateId(nsp)});this.autoConnect&&onConnecting()}function onConnecting(){~indexOf(self.connecting,socket)||self.connecting.push(socket)}return socket};Manager.prototype.destroy=function(socket){var index=indexOf(this.connecting,socket);~index&&this.connecting.splice(index,1);if(this.connecting.length)return;this.close()};Manager.prototype.packet=function(packet){debug("writing packet %j",packet);var self=this;packet.query&&0===packet.type&&(packet.nsp+="?"+packet.query);if(self.encoding)self.packetBuffer.push(packet);else{self.encoding=true;this.encoder.encode(packet,function(encodedPackets){for(var i=0;i<encodedPackets.length;i++)self.engine.write(encodedPackets[i],packet.options);self.encoding=false;self.processPacketQueue()})}};Manager.prototype.processPacketQueue=function(){if(this.packetBuffer.length>0&&!this.encoding){var pack=this.packetBuffer.shift();this.packet(pack)}};Manager.prototype.cleanup=function(){debug("cleanup");var subsLength=this.subs.length;for(var i=0;i<subsLength;i++){var sub=this.subs.shift();sub.destroy()}this.packetBuffer=[];this.encoding=false;this.lastPing=null;this.decoder.destroy()};Manager.prototype.close=Manager.prototype.disconnect=function(){debug("disconnect");this.skipReconnect=true;this.reconnecting=false;"opening"===this.readyState&&this.cleanup();this.backoff.reset();this.readyState="closed";this.engine&&this.engine.close()};Manager.prototype.onclose=function(reason){debug("onclose");this.cleanup();this.backoff.reset();this.readyState="closed";this.emit("close",reason);this._reconnection&&!this.skipReconnect&&this.reconnect()};Manager.prototype.reconnect=function(){if(this.reconnecting||this.skipReconnect)return this;var self=this;if(this.backoff.attempts>=this._reconnectionAttempts){debug("reconnect failed");this.backoff.reset();this.emitAll("reconnect_failed");this.reconnecting=false}else{var delay=this.backoff.duration();debug("will wait %dms before reconnect attempt",delay);this.reconnecting=true;var timer=setTimeout(function(){if(self.skipReconnect)return;debug("attempting reconnect");self.emitAll("reconnect_attempt",self.backoff.attempts);self.emitAll("reconnecting",self.backoff.attempts);if(self.skipReconnect)return;self.open(function(err){if(err){debug("reconnect attempt error");self.reconnecting=false;self.reconnect();self.emitAll("reconnect_error",err.data)}else{debug("reconnect success");self.onreconnect()}})},delay);this.subs.push({destroy:function(){clearTimeout(timer)}})}};Manager.prototype.onreconnect=function(){var attempt=this.backoff.attempts;this.reconnecting=false;this.backoff.reset();this.updateSocketIds();this.emitAll("reconnect",attempt)}},2046:function(module,exports,__webpack_require__){(function(global){var XMLHttpRequest=__webpack_require__(1168);var XHR=__webpack_require__(6059);var JSONP=__webpack_require__(6067);var websocket=__webpack_require__(6068);exports.polling=polling;exports.websocket=websocket;function polling(opts){var xhr;var xd=false;var xs=false;var jsonp=false!==opts.jsonp;if(global.location){var isSSL="https:"===location.protocol;var port=location.port;port||(port=isSSL?443:80);xd=opts.hostname!==location.hostname||port!==opts.port;xs=opts.secure!==isSSL}opts.xdomain=xd;opts.xscheme=xs;xhr=new XMLHttpRequest(opts);if("open"in xhr&&!opts.forceJSONP)return new XHR(opts);if(!jsonp)throw new Error("JSONP disabled");return new JSONP(opts)}}).call(exports,__webpack_require__(23))},2047:function(module,exports,__webpack_require__){var Transport=__webpack_require__(1169);var parseqs=__webpack_require__(806);var parser=__webpack_require__(528);var inherit=__webpack_require__(807);var yeast=__webpack_require__(2049);var debug=__webpack_require__(344)("engine.io-client:polling");module.exports=Polling;var hasXHR2=(XMLHttpRequest=__webpack_require__(1168),xhr=new XMLHttpRequest({xdomain:false}),null!=xhr.responseType);var XMLHttpRequest,xhr;function Polling(opts){var forceBase64=opts&&opts.forceBase64;hasXHR2&&!forceBase64||(this.supportsBinary=false);Transport.call(this,opts)}inherit(Polling,Transport);Polling.prototype.name="polling";Polling.prototype.doOpen=function(){this.poll()};Polling.prototype.pause=function(onPause){var self=this;this.readyState="pausing";function pause(){debug("paused");self.readyState="paused";onPause()}if(this.polling||!this.writable){var total=0;if(this.polling){debug("we are currently polling - waiting to pause");total++;this.once("pollComplete",function(){debug("pre-pause polling complete");--total||pause()})}if(!this.writable){debug("we are currently writing - waiting to pause");total++;this.once("drain",function(){debug("pre-pause writing complete");--total||pause()})}}else pause()};Polling.prototype.poll=function(){debug("polling");this.polling=true;this.doPoll();this.emit("poll")};Polling.prototype.onData=function(data){var self=this;debug("polling got data %s",data);var callback=function(packet,index,total){"opening"===self.readyState&&self.onOpen();if("close"===packet.type){self.onClose();return false}self.onPacket(packet)};parser.decodePayload(data,this.socket.binaryType,callback);if("closed"!==this.readyState){this.polling=false;this.emit("pollComplete");"open"===this.readyState?this.poll():debug('ignoring poll - transport state "%s"',this.readyState)}};Polling.prototype.doClose=function(){var self=this;function close(){debug("writing close packet");self.write([{type:"close"}])}if("open"===this.readyState){debug("transport open - closing");close()}else{debug("transport not open - deferring close");this.once("open",close)}};Polling.prototype.write=function(packets){var self=this;this.writable=false;var callbackfn=function(){self.writable=true;self.emit("drain")};parser.encodePayload(packets,this.supportsBinary,function(data){self.doWrite(data,callbackfn)})};Polling.prototype.uri=function(){var query=this.query||{};var schema=this.secure?"https":"http";var port="";false!==this.timestampRequests&&(query[this.timestampParam]=yeast());this.supportsBinary||query.sid||(query.b64=1);query=parseqs.encode(query);this.port&&("https"===schema&&443!==Number(this.port)||"http"===schema&&80!==Number(this.port))&&(port=":"+this.port);query.length&&(query="?"+query);var ipv6=-1!==this.hostname.indexOf(":");return schema+"://"+(ipv6?"["+this.hostname+"]":this.hostname)+port+this.path+query}},2048:function(module,exports,__webpack_require__){(function(Buffer){var isArray=__webpack_require__(6061);var toString=Object.prototype.toString;var withNativeBlob="function"===typeof Blob||"undefined"!==typeof Blob&&"[object BlobConstructor]"===toString.call(Blob);var withNativeFile="function"===typeof File||"undefined"!==typeof File&&"[object FileConstructor]"===toString.call(File);module.exports=hasBinary;function hasBinary(obj){if(!obj||"object"!==typeof obj)return false;if(isArray(obj)){for(var i=0,l=obj.length;i<l;i++)if(hasBinary(obj[i]))return true;return false}if("function"===typeof Buffer&&Buffer.isBuffer&&Buffer.isBuffer(obj)||"function"===typeof ArrayBuffer&&obj instanceof ArrayBuffer||withNativeBlob&&obj instanceof Blob||withNativeFile&&obj instanceof File)return true;if(obj.toJSON&&"function"===typeof obj.toJSON&&1===arguments.length)return hasBinary(obj.toJSON(),true);for(var key in obj)if(Object.prototype.hasOwnProperty.call(obj,key)&&hasBinary(obj[key]))return true;return false}}).call(exports,__webpack_require__(250).Buffer)},2049:function(module,exports,__webpack_require__){"use strict";var prev,alphabet="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz-_".split(""),length=64,map={},seed=0,i=0;function encode(num){var encoded="";do{encoded=alphabet[num%length]+encoded;num=Math.floor(num/length)}while(num>0);return encoded}function decode(str){var decoded=0;for(i=0;i<str.length;i++)decoded=decoded*length+map[str.charAt(i)];return decoded}function yeast(){var now=encode(+new Date);if(now!==prev)return seed=0,prev=now;return now+"."+encode(seed++)}for(;i<length;i++)map[alphabet[i]]=i;yeast.encode=encode;yeast.decode=decode;module.exports=yeast},2050:function(module,exports){var indexOf=[].indexOf;module.exports=function(arr,obj){if(indexOf)return arr.indexOf(obj);for(var i=0;i<arr.length;++i)if(arr[i]===obj)return i;return-1}},2051:function(module,exports,__webpack_require__){var parser=__webpack_require__(1167);var Emitter=__webpack_require__(527);var toArray=__webpack_require__(6070);var on=__webpack_require__(2052);var bind=__webpack_require__(2053);var debug=__webpack_require__(344)("socket.io-client:socket");var parseqs=__webpack_require__(806);var hasBin=__webpack_require__(2048);module.exports=Socket;var events={connect:1,connect_error:1,connect_timeout:1,connecting:1,disconnect:1,error:1,reconnect:1,reconnect_attempt:1,reconnect_failed:1,reconnect_error:1,reconnecting:1,ping:1,pong:1};var emit=Emitter.prototype.emit;function Socket(io,nsp,opts){this.io=io;this.nsp=nsp;this.json=this;this.ids=0;this.acks={};this.receiveBuffer=[];this.sendBuffer=[];this.connected=false;this.disconnected=true;this.flags={};opts&&opts.query&&(this.query=opts.query);this.io.autoConnect&&this.open()}Emitter(Socket.prototype);Socket.prototype.subEvents=function(){if(this.subs)return;var io=this.io;this.subs=[on(io,"open",bind(this,"onopen")),on(io,"packet",bind(this,"onpacket")),on(io,"close",bind(this,"onclose"))]};Socket.prototype.open=Socket.prototype.connect=function(){if(this.connected)return this;this.subEvents();this.io.open();"open"===this.io.readyState&&this.onopen();this.emit("connecting");return this};Socket.prototype.send=function(){var args=toArray(arguments);args.unshift("message");this.emit.apply(this,args);return this};Socket.prototype.emit=function(ev){if(events.hasOwnProperty(ev)){emit.apply(this,arguments);return this}var args=toArray(arguments);var packet={type:(void 0!==this.flags.binary?this.flags.binary:hasBin(args))?parser.BINARY_EVENT:parser.EVENT,data:args};packet.options={};packet.options.compress=!this.flags||false!==this.flags.compress;if("function"===typeof args[args.length-1]){debug("emitting packet with ack id %d",this.ids);this.acks[this.ids]=args.pop();packet.id=this.ids++}this.connected?this.packet(packet):this.sendBuffer.push(packet);this.flags={};return this};Socket.prototype.packet=function(packet){packet.nsp=this.nsp;this.io.packet(packet)};Socket.prototype.onopen=function(){debug("transport is open - connecting");if("/"!==this.nsp)if(this.query){var query="object"===typeof this.query?parseqs.encode(this.query):this.query;debug("sending connect packet with query %s",query);this.packet({type:parser.CONNECT,query:query})}else this.packet({type:parser.CONNECT})};Socket.prototype.onclose=function(reason){debug("close (%s)",reason);this.connected=false;this.disconnected=true;delete this.id;this.emit("disconnect",reason)};Socket.prototype.onpacket=function(packet){var sameNamespace=packet.nsp===this.nsp;var rootNamespaceError=packet.type===parser.ERROR&&"/"===packet.nsp;if(!sameNamespace&&!rootNamespaceError)return;switch(packet.type){case parser.CONNECT:this.onconnect();break;case parser.EVENT:case parser.BINARY_EVENT:this.onevent(packet);break;case parser.ACK:case parser.BINARY_ACK:this.onack(packet);break;case parser.DISCONNECT:this.ondisconnect();break;case parser.ERROR:this.emit("error",packet.data)}};Socket.prototype.onevent=function(packet){var args=packet.data||[];debug("emitting event %j",args);if(null!=packet.id){debug("attaching ack callback to event");args.push(this.ack(packet.id))}this.connected?emit.apply(this,args):this.receiveBuffer.push(args)};Socket.prototype.ack=function(id){var self=this;var sent=false;return function(){if(sent)return;sent=true;var args=toArray(arguments);debug("sending ack %j",args);self.packet({type:hasBin(args)?parser.BINARY_ACK:parser.ACK,id:id,data:args})}};Socket.prototype.onack=function(packet){var ack=this.acks[packet.id];if("function"===typeof ack){debug("calling ack %s with %j",packet.id,packet.data);ack.apply(this,packet.data);delete this.acks[packet.id]}else debug("bad ack %s",packet.id)};Socket.prototype.onconnect=function(){this.connected=true;this.disconnected=false;this.emit("connect");this.emitBuffered()};Socket.prototype.emitBuffered=function(){var i;for(i=0;i<this.receiveBuffer.length;i++)emit.apply(this,this.receiveBuffer[i]);this.receiveBuffer=[];for(i=0;i<this.sendBuffer.length;i++)this.packet(this.sendBuffer[i]);this.sendBuffer=[]};Socket.prototype.ondisconnect=function(){debug("server disconnect (%s)",this.nsp);this.destroy();this.onclose("io server disconnect")};Socket.prototype.destroy=function(){if(this.subs){for(var i=0;i<this.subs.length;i++)this.subs[i].destroy();this.subs=null}this.io.destroy(this)};Socket.prototype.close=Socket.prototype.disconnect=function(){if(this.connected){debug("performing disconnect (%s)",this.nsp);this.packet({type:parser.DISCONNECT})}this.destroy();this.connected&&this.onclose("io client disconnect");return this};Socket.prototype.compress=function(compress){this.flags.compress=compress;return this};Socket.prototype.binary=function(binary){this.flags.binary=binary;return this}},2052:function(module,exports){module.exports=on;function on(obj,ev,fn){obj.on(ev,fn);return{destroy:function(){obj.removeListener(ev,fn)}}}},2053:function(module,exports){var slice=[].slice;module.exports=function(obj,fn){"string"==typeof fn&&(fn=obj[fn]);if("function"!=typeof fn)throw new Error("bind() requires a function");var args=slice.call(arguments,2);return function(){return fn.apply(obj,args.concat(slice.call(arguments)))}}},2054:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.functionsRegistry=void 0;var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;"value"in descriptor&&(descriptor.writable=true);Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){protoProps&&defineProperties(Constructor.prototype,protoProps);staticProps&&defineProperties(Constructor,staticProps);return Constructor}}();var _registry=__webpack_require__(313);var _fn=__webpack_require__(6072);function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(self,call){if(!self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!call||"object"!==typeof call&&"function"!==typeof call?self:call}function _inherits(subClass,superClass){if("function"!==typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function, not "+typeof superClass);subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:false,writable:true,configurable:true}});superClass&&(Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass)}var FunctionsRegistry=function(_Registry){_inherits(FunctionsRegistry,_Registry);function FunctionsRegistry(){_classCallCheck(this,FunctionsRegistry);return _possibleConstructorReturn(this,(FunctionsRegistry.__proto__||Object.getPrototypeOf(FunctionsRegistry)).apply(this,arguments))}_createClass(FunctionsRegistry,[{key:"wrapper",value:function wrapper(obj){return new _fn.Fn(obj)}}]);return FunctionsRegistry}(_registry.Registry);exports.functionsRegistry=new FunctionsRegistry},2055:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.datasourceRegistry=exports.Datasource=void 0;var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;"value"in descriptor&&(descriptor.writable=true);Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){protoProps&&defineProperties(Constructor.prototype,protoProps);staticProps&&defineProperties(Constructor,staticProps);return Constructor}}();var _react=__webpack_require__(0);var _react2=_interopRequireDefault(_react);var _propTypes=__webpack_require__(4);var _propTypes2=_interopRequireDefault(_propTypes);var _registry=__webpack_require__(313);var _render_to_dom=__webpack_require__(1170);var _expression_form_handlers=__webpack_require__(2056);var _base_form=__webpack_require__(1171);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(self,call){if(!self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!call||"object"!==typeof call&&"function"!==typeof call?self:call}function _inherits(subClass,superClass){if("function"!==typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function, not "+typeof superClass);subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:false,writable:true,configurable:true}});superClass&&(Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass)}var defaultTemplate=function defaultTemplate(){return _react2.default.createElement("div",null,_react2.default.createElement("p",null,"This datasource has no interface. Use the expression editor to make changes."))};var DatasourceWrapper=function(_React$PureComponent){_inherits(DatasourceWrapper,_React$PureComponent);function DatasourceWrapper(){var _ref;var _temp,_this,_ret;_classCallCheck(this,DatasourceWrapper);for(var _len=arguments.length,args=Array(_len),_key=0;_key<_len;_key++)args[_key]=arguments[_key];return _ret=(_temp=(_this=_possibleConstructorReturn(this,(_ref=DatasourceWrapper.__proto__||Object.getPrototypeOf(DatasourceWrapper)).call.apply(_ref,[this].concat(args))),_this),_this.callRenderFn=function(){var _this$props=_this.props,spec=_this$props.spec,datasourceProps=_this$props.datasourceProps,handlers=_this$props.handlers;var template=spec.template;template(_this.domNode,datasourceProps,handlers)},_temp),_possibleConstructorReturn(_this,_ret)}_createClass(DatasourceWrapper,[{key:"componentDidUpdate",value:function componentDidUpdate(){this.callRenderFn()}},{key:"componentWillUnmount",value:function componentWillUnmount(){this.props.handlers.destroy()}},{key:"render",value:function render(){var _this2=this;return _react2.default.createElement(_render_to_dom.RenderToDom,{render:function render(domNode){_this2.domNode=domNode;_this2.callRenderFn()}})}}]);return DatasourceWrapper}(_react2.default.PureComponent);DatasourceWrapper.propTypes={spec:_propTypes2.default.object.isRequired,datasourceProps:_propTypes2.default.object.isRequired,handlers:_propTypes2.default.object.isRequired};var Datasource=exports.Datasource=function(_BaseForm){_inherits(Datasource,_BaseForm);function Datasource(props){_classCallCheck(this,Datasource);var _this3=_possibleConstructorReturn(this,(Datasource.__proto__||Object.getPrototypeOf(Datasource)).call(this,props));_this3.template=props.template||defaultTemplate;_this3.image=props.image;return _this3}_createClass(Datasource,[{key:"render",value:function render(){var props=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};var expressionFormHandlers=new _expression_form_handlers.ExpressionFormHandlers;return _react2.default.createElement(DatasourceWrapper,{spec:this,handlers:expressionFormHandlers,datasourceProps:props})}}]);return Datasource}(_base_form.BaseForm);var DatasourceRegistry=function(_Registry){_inherits(DatasourceRegistry,_Registry);function DatasourceRegistry(){_classCallCheck(this,DatasourceRegistry);return _possibleConstructorReturn(this,(DatasourceRegistry.__proto__||Object.getPrototypeOf(DatasourceRegistry)).apply(this,arguments))}_createClass(DatasourceRegistry,[{key:"wrapper",value:function wrapper(obj){return new Datasource(obj)}}]);return DatasourceRegistry}(_registry.Registry);exports.datasourceRegistry=new DatasourceRegistry},2056:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;"value"in descriptor&&(descriptor.writable=true);Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){protoProps&&defineProperties(Constructor.prototype,protoProps);staticProps&&defineProperties(Constructor,staticProps);return Constructor}}();function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}exports.ExpressionFormHandlers=function(){function ExpressionFormHandlers(){_classCallCheck(this,ExpressionFormHandlers);this.destroy=function(){};this.done=function(){}}_createClass(ExpressionFormHandlers,[{key:"onDestroy",value:function onDestroy(fn){this.destroy=fn}}]);return ExpressionFormHandlers}()},2057:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.transformRegistry=exports.Transform=void 0;var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;"value"in descriptor&&(descriptor.writable=true);Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){protoProps&&defineProperties(Constructor.prototype,protoProps);staticProps&&defineProperties(Constructor,staticProps);return Constructor}}();var _lodash=__webpack_require__(1);var _registry=__webpack_require__(313);var _function_form=__webpack_require__(1172);function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(self,call){if(!self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!call||"object"!==typeof call&&"function"!==typeof call?self:call}function _inherits(subClass,superClass){if("function"!==typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function, not "+typeof superClass);subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:false,writable:true,configurable:true}});superClass&&(Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass)}var Transform=exports.Transform=function(_FunctionForm){_inherits(Transform,_FunctionForm);function Transform(props){_classCallCheck(this,Transform);var _this=_possibleConstructorReturn(this,(Transform.__proto__||Object.getPrototypeOf(Transform)).call(this,props));var propNames=["requiresContext"];var defaultProps={requiresContext:true};Object.assign(_this,defaultProps,(0,_lodash.pick)(props,propNames));return _this}return Transform}(_function_form.FunctionForm);var TransformRegistry=function(_Registry){_inherits(TransformRegistry,_Registry);function TransformRegistry(){_classCallCheck(this,TransformRegistry);return _possibleConstructorReturn(this,(TransformRegistry.__proto__||Object.getPrototypeOf(TransformRegistry)).apply(this,arguments))}_createClass(TransformRegistry,[{key:"wrapper",value:function wrapper(obj){return new Transform(obj)}}]);return TransformRegistry}(_registry.Registry);exports.transformRegistry=new TransformRegistry},2058:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.SidebarSection=void 0;var _react=__webpack_require__(0);var _react2=_interopRequireDefault(_react);var _propTypes=__webpack_require__(4);var _propTypes2=_interopRequireDefault(_propTypes);var _eui=__webpack_require__(2);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var SidebarSection=exports.SidebarSection=function SidebarSection(_ref){var children=_ref.children;return _react2.default.createElement(_eui.EuiPanel,{className:"canvasSidebar__panel"},children)};SidebarSection.propTypes={children:_propTypes2.default.node,title:_propTypes2.default.string,tip:_propTypes2.default.string}},2059:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.Arg=void 0;var _extends=Object.assign||function(target){for(var i=1;i<arguments.length;i++){var source=arguments[i];for(var key in source)Object.prototype.hasOwnProperty.call(source,key)&&(target[key]=source[key])}return target};var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;"value"in descriptor&&(descriptor.writable=true);Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){protoProps&&defineProperties(Constructor.prototype,protoProps);staticProps&&defineProperties(Constructor,staticProps);return Constructor}}();var _react=__webpack_require__(0);var _lodash=__webpack_require__(1);var _arg_form=__webpack_require__(6082);var _arg_type=__webpack_require__(2062);function _objectWithoutProperties(obj,keys){var target={};for(var i in obj){if(keys.indexOf(i)>=0)continue;if(!Object.prototype.hasOwnProperty.call(obj,i))continue;target[i]=obj[i]}return target}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}exports.Arg=function(){function Arg(props){_classCallCheck(this,Arg);var argType=_arg_type.argTypeRegistry.get(props.argType);if(!argType)throw new Error("Invalid arg type: "+props.argType);if(!props.name)throw new Error("Args must have a name property");var defaultProps={multi:false,required:false,types:[],default:null!=argType.default?argType.default:null,options:{},resolve:function resolve(){return{}}};var viewOverrides=_extends({argType:argType},(0,_lodash.pick)(props,["name","displayName","help","multi","required","types","default","resolve","options"]));Object.assign(this,defaultProps,argType,viewOverrides)}_createClass(Arg,[{key:"render",value:function render(_ref){var onValueChange=_ref.onValueChange,onValueRemove=_ref.onValueRemove,argValue=_ref.argValue,key=_ref.key,label=_ref.label,otherProps=_objectWithoutProperties(_ref,["onValueChange","onValueRemove","argValue","key","label"]);var templateProps=_extends({},otherProps,this.resolve(otherProps),{onValueChange:onValueChange,argValue:argValue,typeInstance:this});var formProps={key:key,argTypeInstance:this,valueMissing:this.required&&null==argValue,label:label,onValueChange:onValueChange,onValueRemove:onValueRemove,templateProps:templateProps,argId:key};return(0,_react.createElement)(_arg_form.ArgForm,formProps)}}]);return Arg}()},2060:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.ErrorBoundary=exports.errorBoundaryHoc=void 0;var _react=__webpack_require__(0);var _react2=_interopRequireDefault(_react);var _recompose=__webpack_require__(24);var _propTypes=__webpack_require__(4);var _propTypes2=_interopRequireDefault(_propTypes);var _lodash=__webpack_require__(1);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var errorBoundaryHoc=exports.errorBoundaryHoc=(0,_recompose.compose)((0,_recompose.withState)("error","setError",null),(0,_recompose.withState)("errorInfo","setErrorInfo",null),(0,_recompose.withHandlers)({resetErrorState:function resetErrorState(_ref){var setError=_ref.setError,setErrorInfo=_ref.setErrorInfo;return function(){setError(null);setErrorInfo(null)}}}),(0,_recompose.lifecycle)({componentDidCatch:function componentDidCatch(error,errorInfo){this.props.setError(error);this.props.setErrorInfo(errorInfo)}}),(0,_recompose.mapProps)(function(props){return(0,_lodash.omit)(props,["setError","setErrorInfo"])}));var ErrorBoundaryComponent=function ErrorBoundaryComponent(props){return _react2.default.createElement(_react.Fragment,null,props.children({error:props.error,errorInfo:props.errorInfo,resetErrorState:props.resetErrorState}))};ErrorBoundaryComponent.propTypes={children:_propTypes2.default.func.isRequired,error:_propTypes2.default.object,errorInfo:_propTypes2.default.object,resetErrorState:_propTypes2.default.func.isRequired};exports.ErrorBoundary=errorBoundaryHoc(ErrorBoundaryComponent)},2061:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.ArgLabel=void 0;var _react=__webpack_require__(0);var _react2=_interopRequireDefault(_react);var _propTypes=__webpack_require__(4);var _propTypes2=_interopRequireDefault(_propTypes);var _eui=__webpack_require__(2);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var ArgLabel=exports.ArgLabel=function ArgLabel(props){var argId=props.argId,className=props.className,label=props.label,help=props.help,expandable=props.expandable,children=props.children,simpleArg=props.simpleArg,initialIsOpen=props.initialIsOpen;return _react2.default.createElement("div",{className:"canvasArg--header"+(className&&" "+className)},expandable?_react2.default.createElement(_eui.EuiAccordion,{id:"accordion-"+argId,className:"canvasArg__accordion",buttonContent:_react2.default.createElement(_eui.EuiToolTip,{content:help,position:"left",className:"canvasArg__tooltip"},_react2.default.createElement(_eui.EuiText,{size:"s",color:"subdued",htmlFor:"accordion-"+argId},label)),extraAction:simpleArg,initialIsOpen:initialIsOpen},_react2.default.createElement("div",{className:"canvasArg__content"},children)):simpleArg&&_react2.default.createElement(_eui.EuiFormRow,{label:label,helpText:help,id:argId},simpleArg))};ArgLabel.propTypes={argId:_propTypes2.default.string,label:_propTypes2.default.string,help:_propTypes2.default.string,expandable:_propTypes2.default.bool,initialIsOpen:_propTypes2.default.bool,simpleArg:_propTypes2.default.object,children:_propTypes2.default.oneOfType([_propTypes2.default.node,_propTypes2.default.element]).isRequired,className:_propTypes2.default.string}},2062:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.argTypeRegistry=exports.ArgType=void 0;var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;"value"in descriptor&&(descriptor.writable=true);Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){protoProps&&defineProperties(Constructor.prototype,protoProps);staticProps&&defineProperties(Constructor,staticProps);return Constructor}}();var _registry=__webpack_require__(313);var _base_form=__webpack_require__(1171);function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(self,call){if(!self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!call||"object"!==typeof call&&"function"!==typeof call?self:call}function _inherits(subClass,superClass){if("function"!==typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function, not "+typeof superClass);subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:false,writable:true,configurable:true}});superClass&&(Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass)}var ArgType=exports.ArgType=function(_BaseForm){_inherits(ArgType,_BaseForm);function ArgType(props){_classCallCheck(this,ArgType);var _this=_possibleConstructorReturn(this,(ArgType.__proto__||Object.getPrototypeOf(ArgType)).call(this,props));_this.simpleTemplate=props.simpleTemplate;_this.template=props.template;_this.default=props.default;_this.resolveArgValue=Boolean(props.resolveArgValue);return _this}return ArgType}(_base_form.BaseForm);var ArgTypeRegistry=function(_Registry){_inherits(ArgTypeRegistry,_Registry);function ArgTypeRegistry(){_classCallCheck(this,ArgTypeRegistry);return _possibleConstructorReturn(this,(ArgTypeRegistry.__proto__||Object.getPrototypeOf(ArgTypeRegistry)).apply(this,arguments))}_createClass(ArgTypeRegistry,[{key:"wrapper",value:function wrapper(obj){return new ArgType(obj)}}]);return ArgTypeRegistry}(_registry.Registry);exports.argTypeRegistry=new ArgTypeRegistry},2063:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.modelRegistry=exports.Model=void 0;var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;"value"in descriptor&&(descriptor.writable=true);Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){protoProps&&defineProperties(Constructor.prototype,protoProps);staticProps&&defineProperties(Constructor,staticProps);return Constructor}}();var _lodash=__webpack_require__(1);var _registry=__webpack_require__(313);var _function_form=__webpack_require__(1172);function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(self,call){if(!self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!call||"object"!==typeof call&&"function"!==typeof call?self:call}function _inherits(subClass,superClass){if("function"!==typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function, not "+typeof superClass);subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:false,writable:true,configurable:true}});superClass&&(Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass)}var NO_NEXT_EXP="no next expression";var MISSING_MODEL_ARGS="missing model args";function getModelArgs(expressionType){if(!expressionType)return NO_NEXT_EXP;if(!expressionType.modelArgs)return MISSING_MODEL_ARGS;return expressionType.modelArgs.length>0?expressionType.modelArgs:MISSING_MODEL_ARGS}var Model=exports.Model=function(_FunctionForm){_inherits(Model,_FunctionForm);function Model(props){_classCallCheck(this,Model);var _this=_possibleConstructorReturn(this,(Model.__proto__||Object.getPrototypeOf(Model)).call(this,props));var propNames=["requiresContext"];var defaultProps={requiresContext:true};Object.assign(_this,defaultProps,(0,_lodash.pick)(props,propNames));return _this}_createClass(Model,[{key:"resolveArg",value:function resolveArg(dataArg,props){var nextExpressionType=props.nextExpressionType;var modelArgs=getModelArgs(nextExpressionType);if(modelArgs===MISSING_MODEL_ARGS)throw new Error(nextExpressionType.displayName+" modelArgs Error:\n        The modelArgs value is empty. Either it should contain an arg,\n        or a model should not be used in the expression.\n      ");if(modelArgs===NO_NEXT_EXP)return{skipRender:true};var argName=(0,_lodash.get)(dataArg,"arg.name");var modelArg=modelArgs.find(function(modelArg){if(Array.isArray(modelArg))return modelArg[0]===argName;return modelArg===argName});return{label:Array.isArray(modelArg)?(0,_lodash.get)(modelArg[1],"label"):null,skipRender:!modelArg}}}]);return Model}(_function_form.FunctionForm);var ModelRegistry=function(_Registry){_inherits(ModelRegistry,_Registry);function ModelRegistry(){_classCallCheck(this,ModelRegistry);return _possibleConstructorReturn(this,(ModelRegistry.__proto__||Object.getPrototypeOf(ModelRegistry)).apply(this,arguments))}_createClass(ModelRegistry,[{key:"wrapper",value:function wrapper(obj){return new Model(obj)}}]);return ModelRegistry}(_registry.Registry);exports.modelRegistry=new ModelRegistry},2064:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.viewRegistry=exports.View=void 0;var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;"value"in descriptor&&(descriptor.writable=true);Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){protoProps&&defineProperties(Constructor.prototype,protoProps);staticProps&&defineProperties(Constructor,staticProps);return Constructor}}();var _lodash=__webpack_require__(1);var _registry=__webpack_require__(313);var _function_form=__webpack_require__(1172);function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(self,call){if(!self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!call||"object"!==typeof call&&"function"!==typeof call?self:call}function _inherits(subClass,superClass){if("function"!==typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function, not "+typeof superClass);subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:false,writable:true,configurable:true}});superClass&&(Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass)}var View=exports.View=function(_FunctionForm){_inherits(View,_FunctionForm);function View(props){_classCallCheck(this,View);var _this=_possibleConstructorReturn(this,(View.__proto__||Object.getPrototypeOf(View)).call(this,props));var propNames=["help","modelArgs","requiresContext"];var defaultProps={help:"Element: "+props.name,requiresContext:true};Object.assign(_this,defaultProps,(0,_lodash.pick)(props,propNames));_this.modelArgs=_this.modelArgs||[];if(!Array.isArray(_this.modelArgs))throw new Error(_this.name+" element is invalid, modelArgs must be an array");return _this}return View}(_function_form.FunctionForm);var ViewRegistry=function(_Registry){_inherits(ViewRegistry,_Registry);function ViewRegistry(){_classCallCheck(this,ViewRegistry);return _possibleConstructorReturn(this,(ViewRegistry.__proto__||Object.getPrototypeOf(ViewRegistry)).apply(this,arguments))}_createClass(ViewRegistry,[{key:"wrapper",value:function wrapper(obj){return new View(obj)}}]);return ViewRegistry}(_registry.Registry);exports.viewRegistry=new ViewRegistry},2065:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.elementsRegistry=void 0;var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;"value"in descriptor&&(descriptor.writable=true);Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){protoProps&&defineProperties(Constructor.prototype,protoProps);staticProps&&defineProperties(Constructor,staticProps);return Constructor}}();var _registry=__webpack_require__(313);var _element=__webpack_require__(6093);function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(self,call){if(!self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!call||"object"!==typeof call&&"function"!==typeof call?self:call}function _inherits(subClass,superClass){if("function"!==typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function, not "+typeof superClass);subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:false,writable:true,configurable:true}});superClass&&(Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass)}var ElementsRegistry=function(_Registry){_inherits(ElementsRegistry,_Registry);function ElementsRegistry(){_classCallCheck(this,ElementsRegistry);return _possibleConstructorReturn(this,(ElementsRegistry.__proto__||Object.getPrototypeOf(ElementsRegistry)).apply(this,arguments))}_createClass(ElementsRegistry,[{key:"wrapper",value:function wrapper(obj){return new _element.Element(obj)}}]);return ElementsRegistry}(_registry.Registry);exports.elementsRegistry=new ElementsRegistry},2066:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.renderFunctionsRegistry=void 0;var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;"value"in descriptor&&(descriptor.writable=true);Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){protoProps&&defineProperties(Constructor.prototype,protoProps);staticProps&&defineProperties(Constructor,staticProps);return Constructor}}();var _registry=__webpack_require__(313);var _render_function=__webpack_require__(6095);function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(self,call){if(!self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!call||"object"!==typeof call&&"function"!==typeof call?self:call}function _inherits(subClass,superClass){if("function"!==typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function, not "+typeof superClass);subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:false,writable:true,configurable:true}});superClass&&(Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass)}var RenderFunctionsRegistry=function(_Registry){_inherits(RenderFunctionsRegistry,_Registry);function RenderFunctionsRegistry(){_classCallCheck(this,RenderFunctionsRegistry);return _possibleConstructorReturn(this,(RenderFunctionsRegistry.__proto__||Object.getPrototypeOf(RenderFunctionsRegistry)).apply(this,arguments))}_createClass(RenderFunctionsRegistry,[{key:"wrapper",value:function wrapper(obj){return new _render_function.RenderFunction(obj)}}]);return RenderFunctionsRegistry}(_registry.Registry);exports.renderFunctionsRegistry=new RenderFunctionsRegistry},2073:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.apps=exports.routes=void 0;var _home=__webpack_require__(6124);var home=_interopRequireWildcard(_home);var _workpad=__webpack_require__(6140);var workpad=_interopRequireWildcard(_workpad);var _export=__webpack_require__(6319);var exp=_interopRequireWildcard(_export);function _interopRequireWildcard(obj){if(obj&&obj.__esModule)return obj;var newObj={};if(null!=obj)for(var key in obj)Object.prototype.hasOwnProperty.call(obj,key)&&(newObj[key]=obj[key]);newObj.default=obj;return newObj}exports.routes=[].concat(workpad.routes,home.routes,exp.routes);exports.apps=[workpad.WorkpadApp,home.HomeApp,exp.ExportApp]},2074:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.HomeApp=void 0;var _react=__webpack_require__(0);var _react2=_interopRequireDefault(_react);var _eui=__webpack_require__(2);var _workpad_loader=__webpack_require__(2075);var _doc_title=__webpack_require__(2079);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}exports.HomeApp=function HomeApp(){(0,_doc_title.setDocTitle)("Canvas");return _react2.default.createElement(_eui.EuiPage,{restrictWidth:true,style:{width:"100%"}},_react2.default.createElement(_eui.EuiPageBody,null,_react2.default.createElement(_eui.EuiPageContent,{panelPaddingSize:"none",horizontalPosition:"center"},_react2.default.createElement(_workpad_loader.WorkpadLoader,{onClose:function onClose(){}}))))}},2075:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.WorkpadLoader=void 0;var _slicedToArray=function(){function sliceIterator(arr,i){var _arr=[];var _n=true;var _d=false;var _e=void 0;try{for(var _s,_i=arr[Symbol.iterator]();!(_n=(_s=_i.next()).done);_n=true){_arr.push(_s.value);if(i&&_arr.length===i)break}}catch(err){_d=true;_e=err}finally{try{!_n&&_i["return"]&&_i["return"]()}finally{if(_d)throw _e}}return _arr}return function(arr,i){if(Array.isArray(arr))return arr;if(Symbol.iterator in Object(arr))return sliceIterator(arr,i);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}();var _propTypes=__webpack_require__(4);var _propTypes2=_interopRequireDefault(_propTypes);var _reactRedux=__webpack_require__(19);var _recompose=__webpack_require__(24);var _fileSaver=__webpack_require__(2076);var _fileSaver2=_interopRequireDefault(_fileSaver);var _workpad_service=__webpack_require__(632);var workpadService=_interopRequireWildcard(_workpad_service);var _notify=__webpack_require__(293);var _app=__webpack_require__(119);var _workpad=__webpack_require__(54);var _get_id=__webpack_require__(525);var _transient=__webpack_require__(345);var _workpad_loader=__webpack_require__(6126);function _interopRequireWildcard(obj){if(obj&&obj.__esModule)return obj;var newObj={};if(null!=obj)for(var key in obj)Object.prototype.hasOwnProperty.call(obj,key)&&(newObj[key]=obj[key]);newObj.default=obj;return newObj}function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _asyncToGenerator(fn){return function(){var gen=fn.apply(this,arguments);return new Promise(function(resolve,reject){function step(key,arg){try{var info=gen[key](arg);var value=info.value}catch(error){reject(error);return}if(!info.done)return Promise.resolve(value).then(function(value){step("next",value)},function(err){step("throw",err)});resolve(value)}return step("next")})}}var mapStateToProps=function mapStateToProps(state){return{workpadId:(0,_workpad.getWorkpad)(state).id,canUserWrite:(0,_app.canUserWrite)(state)}};var mapDispatchToProps=function mapDispatchToProps(dispatch){return{setCanUserWrite:function setCanUserWrite(canUserWrite){return dispatch((0,_transient.setCanUserWrite)(canUserWrite))}}};exports.WorkpadLoader=(0,_recompose.compose)((0,_recompose.getContext)({router:_propTypes2.default.object}),(0,_reactRedux.connect)(mapStateToProps,mapDispatchToProps),(0,_recompose.withState)("workpads","setWorkpads",null),(0,_recompose.withHandlers)({createWorkpad:function createWorkpad(props){return _ref=_asyncToGenerator(regeneratorRuntime.mark(function _callee(workpad){return regeneratorRuntime.wrap(function _callee$(_context){while(1)switch(_context.prev=_context.next){case 0:if(!(null!=workpad)){_context.next=12;break}_context.prev=1;_context.next=4;return workpadService.create(workpad);case 4:props.router.navigateTo("loadWorkpad",{id:workpad.id,page:1});_context.next=11;break;case 7:_context.prev=7;_context.t0=_context["catch"](1);_notify.notify.error(_context.t0,{title:"Couldn't upload workpad"});403===_context.t0.response.status&&props.setCanUserWrite(false);case 11:return _context.abrupt("return");case 12:props.router.navigateTo("createWorkpad");case 13:case"end":return _context.stop()}},_callee,void 0,[[1,7]])})),function(_x){return _ref.apply(this,arguments)};var _ref},findWorkpads:function findWorkpads(_ref2){var setWorkpads=_ref2.setWorkpads;return _ref3=_asyncToGenerator(regeneratorRuntime.mark(function _callee2(text){var workpads;return regeneratorRuntime.wrap(function _callee2$(_context2){while(1)switch(_context2.prev=_context2.next){case 0:_context2.prev=0;_context2.next=3;return workpadService.find(text);case 3:workpads=_context2.sent;setWorkpads(workpads);_context2.next=10;break;case 7:_context2.prev=7;_context2.t0=_context2["catch"](0);_notify.notify.error(_context2.t0,{title:"Couldn't find workpads"});case 10:case"end":return _context2.stop()}},_callee2,void 0,[[0,7]])})),function(_x2){return _ref3.apply(this,arguments)};var _ref3},downloadWorkpad:function downloadWorkpad(){return _ref4=_asyncToGenerator(regeneratorRuntime.mark(function _callee3(workpadId){var workpad,jsonBlob;return regeneratorRuntime.wrap(function _callee3$(_context3){while(1)switch(_context3.prev=_context3.next){case 0:_context3.prev=0;_context3.next=3;return workpadService.get(workpadId);case 3:workpad=_context3.sent;jsonBlob=new Blob([JSON.stringify(workpad)],{type:"application/json"});_fileSaver2.default.saveAs(jsonBlob,"canvas-workpad-"+workpad.name+"-"+workpad.id+".json");_context3.next=11;break;case 8:_context3.prev=8;_context3.t0=_context3["catch"](0);_notify.notify.error(_context3.t0,{title:"Couldn't download workpad"});case 11:case"end":return _context3.stop()}},_callee3,void 0,[[0,8]])})),function(_x3){return _ref4.apply(this,arguments)};var _ref4},cloneWorkpad:function cloneWorkpad(props){return _ref5=_asyncToGenerator(regeneratorRuntime.mark(function _callee4(workpadId){var workpad;return regeneratorRuntime.wrap(function _callee4$(_context4){while(1)switch(_context4.prev=_context4.next){case 0:_context4.prev=0;_context4.next=3;return workpadService.get(workpadId);case 3:workpad=_context4.sent;workpad.name+=" - Copy";workpad.id=(0,_get_id.getId)("workpad");_context4.next=8;return workpadService.create(workpad);case 8:props.router.navigateTo("loadWorkpad",{id:workpad.id,page:1});_context4.next=15;break;case 11:_context4.prev=11;_context4.t0=_context4["catch"](0);_notify.notify.error(_context4.t0,{title:"Couldn't clone workpad"});403===_context4.t0.response.status&&props.setCanUserWrite(false);case 15:case"end":return _context4.stop()}},_callee4,void 0,[[0,11]])})),function(_x4){return _ref5.apply(this,arguments)};var _ref5},removeWorkpads:function removeWorkpads(props){return _ref6=_asyncToGenerator(regeneratorRuntime.mark(function _callee5(workpadIds){var setWorkpads,workpads,loadedWorkpad,removeWorkpads;return regeneratorRuntime.wrap(function _callee5$(_context5){while(1)switch(_context5.prev=_context5.next){case 0:setWorkpads=props.setWorkpads,workpads=props.workpads,loadedWorkpad=props.workpadId;removeWorkpads=workpadIds.map(function(id){return workpadService.remove(id).then(function(){return{id:id,err:null}}).catch(function(err){return{id:id,err:err}})});return _context5.abrupt("return",Promise.all(removeWorkpads).then(function(results){var redirectHome=false;var _results$reduce=results.reduce(function(_ref7,result){var _ref8=_slicedToArray(_ref7,2),passes=_ref8[0],errors=_ref8[1];result.id!==loadedWorkpad||result.err||(redirectHome=true);if(result.err){errors.push(result.id);403===result.err.response.status&&props.setCanUserWrite(false)}else passes.push(result.id);return[passes,errors]},[[],[]]),_results$reduce2=_slicedToArray(_results$reduce,2),passes=_results$reduce2[0],errors=_results$reduce2[1];var remainingWorkpads=workpads.workpads.filter(function(_ref9){var id=_ref9.id;return!passes.includes(id)});var workpadState={total:remainingWorkpads.length,workpads:remainingWorkpads};errors.length>0&&_notify.notify.error("Couldn't delete all workpads");setWorkpads(workpadState);redirectHome&&props.router.navigateTo("home");return errors.map(function(_ref10){var id=_ref10.id;return id})}));case 3:case"end":return _context5.stop()}},_callee5,void 0)})),function(_x5){return _ref6.apply(this,arguments)};var _ref6}}))(_workpad_loader.WorkpadLoader)},2076:function(module,exports,__webpack_require__){var __WEBPACK_AMD_DEFINE_RESULT__;
/*! @source http://purl.eligrey.com/github/FileSaver.js/blob/master/FileSaver.js */var saveAs=saveAs||function(view){"use strict";if("undefined"===typeof view||"undefined"!==typeof navigator&&/MSIE [1-9]\./.test(navigator.userAgent))return;var doc=view.document,get_URL=function(){return view.URL||view.webkitURL||view},save_link=doc.createElementNS("http://www.w3.org/1999/xhtml","a"),can_use_save_link="download"in save_link,click=function(node){var event=new MouseEvent("click");node.dispatchEvent(event)},is_safari=/constructor/i.test(view.HTMLElement)||view.safari,is_chrome_ios=/CriOS\/[\d]+/.test(navigator.userAgent),throw_outside=function(ex){(view.setImmediate||view.setTimeout)(function(){throw ex},0)},force_saveable_type="application/octet-stream",arbitrary_revoke_timeout=4e4,revoke=function(file){var revoker=function(){"string"===typeof file?get_URL().revokeObjectURL(file):file.remove()};setTimeout(revoker,arbitrary_revoke_timeout)},dispatch=function(filesaver,event_types,event){event_types=[].concat(event_types);var i=event_types.length;while(i--){var listener=filesaver["on"+event_types[i]];if("function"===typeof listener)try{listener.call(filesaver,event||filesaver)}catch(ex){throw_outside(ex)}}},auto_bom=function(blob){if(/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(blob.type))return new Blob([String.fromCharCode(65279),blob],{type:blob.type});return blob},FileSaver=function(blob,name,no_auto_bom){no_auto_bom||(blob=auto_bom(blob));var object_url,filesaver=this,type=blob.type,force=type===force_saveable_type,dispatch_all=function(){dispatch(filesaver,"writestart progress write writeend".split(" "))},fs_error=function(){if((is_chrome_ios||force&&is_safari)&&view.FileReader){var reader=new FileReader;reader.onloadend=function(){var url=is_chrome_ios?reader.result:reader.result.replace(/^data:[^;]*;/,"data:attachment/file;");var popup=view.open(url,"_blank");popup||(view.location.href=url);url=void 0;filesaver.readyState=filesaver.DONE;dispatch_all()};reader.readAsDataURL(blob);filesaver.readyState=filesaver.INIT;return}object_url||(object_url=get_URL().createObjectURL(blob));if(force)view.location.href=object_url;else{var opened=view.open(object_url,"_blank");opened||(view.location.href=object_url)}filesaver.readyState=filesaver.DONE;dispatch_all();revoke(object_url)};filesaver.readyState=filesaver.INIT;if(can_use_save_link){object_url=get_URL().createObjectURL(blob);setTimeout(function(){save_link.href=object_url;save_link.download=name;click(save_link);dispatch_all();revoke(object_url);filesaver.readyState=filesaver.DONE});return}fs_error()},FS_proto=FileSaver.prototype,saveAs=function(blob,name,no_auto_bom){return new FileSaver(blob,name||blob.name||"download",no_auto_bom)};if("undefined"!==typeof navigator&&navigator.msSaveOrOpenBlob)return function(blob,name,no_auto_bom){name=name||blob.name||"download";no_auto_bom||(blob=auto_bom(blob));return navigator.msSaveOrOpenBlob(blob,name)};FS_proto.abort=function(){};FS_proto.readyState=FS_proto.INIT=0;FS_proto.WRITING=1;FS_proto.DONE=2;FS_proto.error=FS_proto.onwritestart=FS_proto.onprogress=FS_proto.onwrite=FS_proto.onabort=FS_proto.onerror=FS_proto.onwriteend=null;return saveAs}("undefined"!==typeof self&&self||"undefined"!==typeof window&&window||this.content);"undefined"!==typeof module&&module.exports?module.exports.saveAs=saveAs:(true,null!==__webpack_require__(565))&&null!==__webpack_require__(784)&&!(__WEBPACK_AMD_DEFINE_RESULT__=function(){return saveAs}.call(exports,__webpack_require__,exports,module),void 0!==__WEBPACK_AMD_DEFINE_RESULT__&&(module.exports=__WEBPACK_AMD_DEFINE_RESULT__))},2077:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.Paginate=void 0;var _propTypes=__webpack_require__(4);var _propTypes2=_interopRequireDefault(_propTypes);var _recompose=__webpack_require__(24);var _paginate=__webpack_require__(6130);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var Paginate=exports.Paginate=(0,_recompose.compose)((0,_recompose.withProps)(function(_ref){var rows=_ref.rows,perPage=_ref.perPage;return{perPage:Number(perPage),totalPages:Math.ceil(rows.length/(perPage||10))}}),(0,_recompose.withState)("currentPage","setPage",function(_ref2){var startPage=_ref2.startPage,totalPages=_ref2.totalPages;if(totalPages>0)return Math.min(startPage,totalPages-1);return 0}),(0,_recompose.withProps)(function(_ref3){var rows=_ref3.rows,totalPages=_ref3.totalPages,currentPage=_ref3.currentPage,perPage=_ref3.perPage;var maxPage=totalPages-1;var start=currentPage*perPage;var end=0===currentPage?perPage:perPage*(currentPage+1);return{pageNumber:currentPage,nextPageEnabled:currentPage<maxPage,prevPageEnabled:currentPage>0,partialRows:rows.slice(start,end)}}),(0,_recompose.withHandlers)({nextPage:function nextPage(_ref4){var currentPage=_ref4.currentPage,nextPageEnabled=_ref4.nextPageEnabled,setPage=_ref4.setPage;return function(){return nextPageEnabled&&setPage(currentPage+1)}},prevPage:function prevPage(_ref5){var currentPage=_ref5.currentPage,prevPageEnabled=_ref5.prevPageEnabled,setPage=_ref5.setPage;return function(){return prevPageEnabled&&setPage(currentPage-1)}}}),(0,_recompose.lifecycle)({componentDidUpdate:function componentDidUpdate(prevProps){prevProps.perPage!==this.props.perPage&&this.props.setPage(0)}}))(_paginate.Paginate);Paginate.propTypes={rows:_propTypes2.default.array.isRequired,perPage:_propTypes2.default.oneOfType([_propTypes2.default.string,_propTypes2.default.number]),startPage:_propTypes2.default.number};Paginate.defaultProps={perPage:10,startPage:0}},2078:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.uploadWorkpad=void 0;var _lodash=__webpack_require__(1);var _get_id=__webpack_require__(525);var _notify=__webpack_require__(293);exports.uploadWorkpad=function uploadWorkpad(file,onUpload){if(!file)return;if("application/json"!==(0,_lodash.get)(file,"type"))return _notify.notify.warning("Only JSON files are accepted",{title:"Couldn't upload '"+(file.name||"file")+"'"});var reader=new FileReader;reader.onload=function(){try{var workpad=JSON.parse(reader.result);workpad.id=(0,_get_id.getId)("workpad");if(!Array.isArray(workpad.pages)||0===workpad.pages.length||!workpad.assets)throw new Error("Some properties required for a Canvas workpad are missing.  Edit your JSON file to provide the correct property values and try again.");onUpload(workpad)}catch(e){_notify.notify.error(e,{title:"Couldn't upload '"+(file.name||"file")+"'"})}};reader.readAsText(file)}},2079:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.setDocTitle=function setDocTitle(title){return document.title=title+" - Kibana"}},2080:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.WorkpadApp=void 0;var _typeof="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(obj){return typeof obj}:function(obj){return obj&&"function"===typeof Symbol&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj};var _reactRedux=__webpack_require__(19);var _recompose=__webpack_require__(24);var _workpad=__webpack_require__(233);var _transient=__webpack_require__(345);var _app=__webpack_require__(119);var _workpad2=__webpack_require__(54);var _load_workpad=__webpack_require__(6142);var _workpad_app=__webpack_require__(6143);var mapStateToProps=function mapStateToProps(state){var appReady=(0,_app.getAppReady)(state);return{isWriteable:(0,_workpad2.isWriteable)(state)&&(0,_app.canUserWrite)(state),appReady:"object"===("undefined"===typeof appReady?"undefined":_typeof(appReady))?appReady:{ready:appReady},workpad:(0,_workpad2.getWorkpad)(state)}};var mapDispatchToProps=function mapDispatchToProps(dispatch){return{initializeWorkpad:function initializeWorkpad(){dispatch((0,_workpad.initializeWorkpad)())},deselectElement:function deselectElement(ev){ev&&ev.stopPropagation();dispatch((0,_transient.selectElement)(null))}}};var branches=[(0,_recompose.branch)(function(_ref){var workpad=_ref.workpad;return null==workpad},(0,_recompose.renderComponent)(_load_workpad.LoadWorkpad))];exports.WorkpadApp=_recompose.compose.apply(void 0,[(0,_reactRedux.connect)(mapStateToProps,mapDispatchToProps)].concat(branches))(_workpad_app.WorkpadApp)},2081:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.ColorPicker=void 0;var _recompose=__webpack_require__(24);var _color_picker=__webpack_require__(6175);exports.ColorPicker=(0,_recompose.pure)(_color_picker.ColorPicker)},2082:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.ColorDot=void 0;var _recompose=__webpack_require__(24);var _color_dot=__webpack_require__(2083);exports.ColorDot=(0,_recompose.pure)(_color_dot.ColorDot)},2083:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.ColorDot=void 0;var _react=__webpack_require__(0);var _react2=_interopRequireDefault(_react);var _propTypes=__webpack_require__(4);var _propTypes2=_interopRequireDefault(_propTypes);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var ColorDot=exports.ColorDot=function ColorDot(_ref){var value=_ref.value,children=_ref.children;return _react2.default.createElement("div",{className:"canvasColorDot"},_react2.default.createElement("div",{className:"canvasColorDot__background canvasCheckered"}),_react2.default.createElement("div",{className:"canvasColorDot__foreground",style:{background:value}},children))};ColorDot.propTypes={value:_propTypes2.default.string,children:_propTypes2.default.node,handleClick:_propTypes2.default.func}},2084:function(module,exports,__webpack_require__){module.exports=__webpack_require__(1457)},2085:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var _platform=__webpack_require__(6229);var _platform2=_interopRequireDefault(_platform);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var getPlatformName=function getPlatformName(){var os=_platform2.default.os.family||"";os=os.toLowerCase().replace(/ /g,"");os=/\bwin/.test(os)?"windows":/darwin|osx/.test(os)?"osx":/linux|freebsd|sunos|ubuntu|debian|fedora|redhat|suse/.test(os)?"linux":"other";return os};var getCharacter=function getCharacter(event){if(null==event.which)return String.fromCharCode(event.keyCode);if(0!==event.which&&0!==event.charCode)return String.fromCharCode(event.which);return null};exports.default={getPlatformName:getPlatformName,getCharacter:getCharacter};module.exports=exports["default"]},2086:function(module,exports){module.exports=on;module.exports.on=on;module.exports.off=off;function on(element,event,callback,capture){!element.addEventListener&&(event="on"+event);(element.addEventListener||element.attachEvent).call(element,event,callback,capture);return callback}function off(element,event,callback,capture){!element.removeEventListener&&(event="on"+event);(element.removeEventListener||element.detachEvent).call(element,event,callback,capture);return callback}},2087:function(module,exports,__webpack_require__){"use strict";module.exports=function(e){var SPECIAL_KEYS_MAP,SPECIAL_CHARACTERS_MAP;SPECIAL_KEYS_MAP=__webpack_require__(2088);SPECIAL_CHARACTERS_MAP=__webpack_require__(6243);if("keypress"===e.type){var character=String.fromCharCode(e.which);e.shiftKey||(character=character.toLowerCase());return character}if(void 0!==SPECIAL_KEYS_MAP[e.which])return SPECIAL_KEYS_MAP[e.which];if(void 0!==SPECIAL_CHARACTERS_MAP[e.which])return SPECIAL_CHARACTERS_MAP[e.which];return String.fromCharCode(e.which).toLowerCase()}},2088:function(module,exports,__webpack_require__){"use strict";module.exports={8:"backspace",9:"tab",13:"enter",16:"shift",17:"ctrl",18:"alt",20:"capslock",27:"esc",32:"space",33:"pageup",34:"pagedown",35:"end",36:"home",37:"left",38:"up",39:"right",40:"down",45:"ins",46:"del",91:"meta",93:"meta",173:"minus",187:"plus",189:"minus",224:"meta"};for(var i=1;i<20;++i)module.exports[111+i]="f"+i;for(i=0;i<=9;++i)module.exports[i+96]=i},2089:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.WorkpadPage=void 0;var _extends=Object.assign||function(target){for(var i=1;i<arguments.length;i++){var source=arguments[i];for(var key in source)Object.prototype.hasOwnProperty.call(source,key)&&(target[key]=source[key])}return target};var _reactRedux=__webpack_require__(19);var _propTypes=__webpack_require__(4);var _propTypes2=_interopRequireDefault(_propTypes);var _recompose=__webpack_require__(24);var _aeroelastic_kibana=__webpack_require__(2032);var _elements=__webpack_require__(109);var _app=__webpack_require__(119);var _workpad=__webpack_require__(54);var _event_handlers=__webpack_require__(6265);var _workpad_page=__webpack_require__(6266);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var mapStateToProps=function mapStateToProps(state,ownProps){return{isEditable:!(0,_app.getFullscreen)(state)&&(0,_workpad.isWriteable)(state)&&(0,_app.canUserWrite)(state),elements:(0,_workpad.getElements)(state,ownProps.page.id)}};var mapDispatchToProps=function mapDispatchToProps(dispatch){return{removeElements:function removeElements(pageId){return function(elementIds){return dispatch((0,_elements.removeElements)(elementIds,pageId))}}}};var WorkpadPage=exports.WorkpadPage=(0,_recompose.compose)((0,_reactRedux.connect)(mapStateToProps,mapDispatchToProps),(0,_recompose.withProps)(function(_ref){var isSelected=_ref.isSelected,animation=_ref.animation;function getClassName(){if(animation)return animation.name;return isSelected?"canvasPage--isActive":"canvasPage--isInactive"}function getAnimationStyle(){if(!animation)return{};return{animationDirection:animation.direction,animationDuration:"1s"}}return{className:getClassName(),animationStyle:getAnimationStyle()}}),(0,_recompose.withState)("updateCount","setUpdateCount",0),(0,_recompose.withProps)(function(_ref2){var updateCount=_ref2.updateCount,setUpdateCount=_ref2.setUpdateCount,page=_ref2.page,pageElements=_ref2.elements,removeElements=_ref2.removeElements;var _aeroelastic$getStore=_aeroelastic_kibana.aeroelastic.getStore(page.id).currentScene,shapes=_aeroelastic$getStore.shapes,_aeroelastic$getStore2=_aeroelastic$getStore.selectedLeafShapes,selectedLeafShapes=void 0===_aeroelastic$getStore2?[]:_aeroelastic$getStore2,cursor=_aeroelastic$getStore.cursor;var elementLookup=new Map(pageElements.map(function(element){return[element.id,element]}));var elements=shapes.map(function(shape){return elementLookup.has(shape.id)?_extends({},shape,{filter:elementLookup.get(shape.id).filter}):shape});var selectedElements=selectedLeafShapes;return{elements:elements,cursor:cursor,commit:function commit(){for(var _len=arguments.length,args=Array(_len),_key=0;_key<_len;_key++)args[_key]=arguments[_key];_aeroelastic_kibana.aeroelastic.commit.apply(_aeroelastic_kibana.aeroelastic,[page.id].concat(args));setUpdateCount(updateCount+1)},remove:function remove(){selectedElements.length&&removeElements(page.id)(selectedElements)}}}),_event_handlers.withEventHandlers)(_workpad_page.WorkpadPage);WorkpadPage.propTypes={page:_propTypes2.default.shape({id:_propTypes2.default.string.isRequired}).isRequired}},2090:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.Clipboard=void 0;var _clipboard=__webpack_require__(6298);exports.Clipboard=_clipboard.Clipboard},2091:function(module,exports,__webpack_require__){"use strict";exports.byteLength=byteLength;exports.toByteArray=toByteArray;exports.fromByteArray=fromByteArray;var lookup=[];var revLookup=[];var Arr="undefined"!==typeof Uint8Array?Uint8Array:Array;var code="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/";for(var i=0,len=code.length;i<len;++i){lookup[i]=code[i];revLookup[code.charCodeAt(i)]=i}revLookup["-".charCodeAt(0)]=62;revLookup["_".charCodeAt(0)]=63;function getLens(b64){var len=b64.length;if(len%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var validLen=b64.indexOf("=");-1===validLen&&(validLen=len);var placeHoldersLen=validLen===len?0:4-validLen%4;return[validLen,placeHoldersLen]}function byteLength(b64){var lens=getLens(b64);var validLen=lens[0];var placeHoldersLen=lens[1];return 3*(validLen+placeHoldersLen)/4-placeHoldersLen}function _byteLength(b64,validLen,placeHoldersLen){return 3*(validLen+placeHoldersLen)/4-placeHoldersLen}function toByteArray(b64){var tmp;var lens=getLens(b64);var validLen=lens[0];var placeHoldersLen=lens[1];var arr=new Arr(_byteLength(b64,validLen,placeHoldersLen));var curByte=0;var len=placeHoldersLen>0?validLen-4:validLen;for(var i=0;i<len;i+=4){tmp=revLookup[b64.charCodeAt(i)]<<18|revLookup[b64.charCodeAt(i+1)]<<12|revLookup[b64.charCodeAt(i+2)]<<6|revLookup[b64.charCodeAt(i+3)];arr[curByte++]=tmp>>16&255;arr[curByte++]=tmp>>8&255;arr[curByte++]=255&tmp}if(2===placeHoldersLen){tmp=revLookup[b64.charCodeAt(i)]<<2|revLookup[b64.charCodeAt(i+1)]>>4;arr[curByte++]=255&tmp}if(1===placeHoldersLen){tmp=revLookup[b64.charCodeAt(i)]<<10|revLookup[b64.charCodeAt(i+1)]<<4|revLookup[b64.charCodeAt(i+2)]>>2;arr[curByte++]=tmp>>8&255;arr[curByte++]=255&tmp}return arr}function tripletToBase64(num){return lookup[num>>18&63]+lookup[num>>12&63]+lookup[num>>6&63]+lookup[63&num]}function encodeChunk(uint8,start,end){var tmp;var output=[];for(var i=start;i<end;i+=3){tmp=(uint8[i]<<16&16711680)+(uint8[i+1]<<8&65280)+(255&uint8[i+2]);output.push(tripletToBase64(tmp))}return output.join("")}function fromByteArray(uint8){var tmp;var len=uint8.length;var extraBytes=len%3;var parts=[];var maxChunkLength=16383;for(var i=0,len2=len-extraBytes;i<len2;i+=maxChunkLength)parts.push(encodeChunk(uint8,i,i+maxChunkLength>len2?len2:i+maxChunkLength));if(1===extraBytes){tmp=uint8[len-1];parts.push(lookup[tmp>>2]+lookup[tmp<<4&63]+"==")}else if(2===extraBytes){tmp=(uint8[len-2]<<8)+uint8[len-1];parts.push(lookup[tmp>>10]+lookup[tmp>>4&63]+lookup[tmp<<2&63]+"=")}return parts.join("")}},2092:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.ExportApp=void 0;var _reactRedux=__webpack_require__(19);var _recompose=__webpack_require__(24);var _workpad=__webpack_require__(233);var _workpad2=__webpack_require__(54);var _load_workpad=__webpack_require__(6321);var _export_app=__webpack_require__(6322);var mapStateToProps=function mapStateToProps(state){return{workpad:(0,_workpad2.getWorkpad)(state),selectedPageId:(0,_workpad2.getSelectedPage)(state)}};var mapDispatchToProps=function mapDispatchToProps(dispatch){return{initializeWorkpad:function initializeWorkpad(){dispatch((0,_workpad.initializeWorkpad)())}}};var branches=[(0,_recompose.branch)(function(_ref){var workpad=_ref.workpad;return null==workpad},(0,_recompose.renderComponent)(_load_workpad.LoadWorkpad))];exports.ExportApp=_recompose.compose.apply(void 0,[(0,_reactRedux.connect)(mapStateToProps,mapDispatchToProps)].concat(branches))(_export_app.ExportApp)},2093:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.historyProvider=void 0;var _extends=Object.assign||function(target){for(var i=1;i<arguments.length;i++){var source=arguments[i];for(var key in source)Object.prototype.hasOwnProperty.call(source,key)&&(target[key]=source[key])}return target};var _lzString=__webpack_require__(6323);var _lzString2=_interopRequireDefault(_lzString);var _history=__webpack_require__(341);var _historyExtra=__webpack_require__(6324);var _historyExtra2=_interopRequireDefault(_historyExtra);var _get_window=__webpack_require__(385);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function wrapHistoryInstance(history){var historyState={onChange:[],prevLocation:{},changeUnlisten:null};var locationFormat=function locationFormat(location,action,parser){return{pathname:location.pathname,hash:location.hash,state:parser(location.state),action:action.toLowerCase()}};var wrappedHistory={undo:function undo(){history.goBack()},redo:function redo(){history.goForward()},go:function go(idx){history.go(idx)},parse:function parse(payload){try{var stateJSON=_lzString2.default.decompress(payload);return JSON.parse(stateJSON)}catch(e){return null}},encode:function encode(state){try{var stateJSON=JSON.stringify(state);return _lzString2.default.compress(stateJSON)}catch(e){throw new Error("Could not encode state: ",e.message)}},getLocation:function getLocation(){var location=history.location;return _extends({},location,{state:this.parse(location.state)})},getPath:function getPath(path){if(null!=path)return(0,_history.createPath)((0,_history.parsePath)(path));return(0,_history.createPath)(this.getLocation())},getFullPath:function getFullPath(path){if(null!=path)return history.createHref((0,_history.parsePath)(path));return history.createHref(this.getLocation())},push:function push(state,path){history.push(path||this.getPath(),this.encode(state))},replace:function replace(state,path){history.replace(path||this.getPath(),this.encode(state))},onChange:function onChange(fn){if(null==fn)return;var pushedIndex=historyState.onChange.push(fn)-1;return called=false,function(){if(called)return;historyState.onChange.splice(pushedIndex,1);called=true};var called},resetOnChange:function resetOnChange(){historyState.onChange.splice(0)},get historyInstance(){return history}};historyState.prevLocation=wrappedHistory.getLocation();historyState.changeUnlisten=history.listen(function(location,action){var prevLocation=historyState.prevLocation;var locationObj=locationFormat(location,action,wrappedHistory.parse);var prevLocationObj=locationFormat(prevLocation,action,wrappedHistory.parse);historyState.onChange.forEach(function(fn){return fn.call(null,locationObj,prevLocationObj)});historyState.prevLocation=wrappedHistory.getLocation()});return wrappedHistory}var instances=new WeakMap;var getHistoryInstance=function getHistoryInstance(win){if("undefined"===typeof win||!win.history)return(0,_history.createMemoryHistory)();return(0,_historyExtra2.default)()};exports.historyProvider=function historyProvider(){var win=arguments.length>0&&void 0!==arguments[0]?arguments[0]:(0,_get_window.getWindow)();var instance=instances.get(win);if(instance)return instance;var historyInstance=getHistoryInstance(win);var wrappedInstance=wrapHistoryInstance(historyInstance);instances.set(win,wrappedInstance);return wrappedInstance}},2094:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var americanTypewriter=exports.americanTypewriter={label:"American Typewriter",value:"'American Typewriter', 'Courier New', Courier, Monaco, mono"};var arial=exports.arial={label:"Arial",value:"Arial, sans-serif"};var baskerville=exports.baskerville={label:"Baskerville",value:"Baskerville, Georgia, Garamond, 'Times New Roman', Times, serif"};var bookAntiqua=exports.bookAntiqua={label:"Book Antiqua",value:"'Book Antiqua', Georgia, Garamond, 'Times New Roman', Times, serif"};var brushScript=exports.brushScript={label:"Brush Script",value:"'Brush Script MT', 'Comic Sans', sans-serif"};var chalkboard=exports.chalkboard={label:"Chalkboard",value:"Chalkboard, 'Comic Sans', sans-serif"};var didot=exports.didot={label:"Didot",value:"Didot, Georgia, Garamond, 'Times New Roman', Times, serif"};var futura=exports.futura={label:"Futura",value:"Futura, Impact, Helvetica, Arial, sans-serif"};var gillSans=exports.gillSans={label:"Gill Sans",value:"'Gill Sans', 'Lucida Grande', 'Lucida Sans Unicode', Verdana, Helvetica, Arial, sans-serif"};var helveticaNeue=exports.helveticaNeue={label:"Helvetica Neue",value:"'Helvetica Neue', Helvetica, Arial, sans-serif"};var hoeflerText=exports.hoeflerText={label:"Hoefler Text",value:"'Hoefler Text', Garamond, Georgia, 'Times New Roman', Times, serif"};var lucidaGrande=exports.lucidaGrande={label:"Lucida Grande",value:"'Lucida Grande', 'Lucida Sans Unicode', Lucida, Verdana, Helvetica, Arial, sans-serif"};var myriad=exports.myriad={label:"Myriad",value:"Myriad, Helvetica, Arial, sans-serif"};var openSans=exports.openSans={label:"Open Sans",value:"'Open Sans', Helvetica, Arial, sans-serif"};var optima=exports.optima={label:"Optima",value:"Optima, 'Lucida Grande', 'Lucida Sans Unicode', Verdana, Helvetica, Arial, sans-serif"};var palatino=exports.palatino={label:"Palatino",value:"Palatino, 'Book Antiqua', Georgia, Garamond, 'Times New Roman', Times, serif"};exports.fonts=[americanTypewriter,arial,baskerville,bookAntiqua,brushScript,chalkboard,didot,futura,gillSans,helveticaNeue,hoeflerText,lucidaGrande,myriad,openSans,optima,palatino]},233:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.setWorkpad=exports.removeColor=exports.addColor=exports.initializeWorkpad=exports.setRefreshInterval=exports.setColors=exports.setWriteable=exports.setName=exports.sizeWorkpad=void 0;var _reduxActions=__webpack_require__(29);var _reduxThunks=__webpack_require__(2035);var _lodash=__webpack_require__(1);var _workpad=__webpack_require__(54);var _elements=__webpack_require__(109);exports.sizeWorkpad=(0,_reduxActions.createAction)("sizeWorkpad");exports.setName=(0,_reduxActions.createAction)("setName");exports.setWriteable=(0,_reduxActions.createAction)("setWriteable");var setColors=exports.setColors=(0,_reduxActions.createAction)("setColors");var setRefreshInterval=exports.setRefreshInterval=(0,_reduxActions.createAction)("setRefreshInterval");var initializeWorkpad=exports.initializeWorkpad=(0,_reduxThunks.createThunk)("initializeWorkpad",function(_ref){var dispatch=_ref.dispatch;dispatch((0,_elements.fetchAllRenderables)())});exports.addColor=(0,_reduxThunks.createThunk)("addColor",function(_ref2,color){var dispatch=_ref2.dispatch,getState=_ref2.getState;var colors=(0,_workpad.getWorkpadColors)(getState()).slice(0);(0,_lodash.includes)(colors,color)||colors.push(color);dispatch(setColors(colors))});exports.removeColor=(0,_reduxThunks.createThunk)("removeColor",function(_ref3,color){var dispatch=_ref3.dispatch,getState=_ref3.getState;dispatch(setColors((0,_lodash.without)((0,_workpad.getWorkpadColors)(getState()),color)))});exports.setWorkpad=(0,_reduxThunks.createThunk)("setWorkpad",function(_ref4,workpad){var dispatch=_ref4.dispatch,type=_ref4.type;var _ref5=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},_ref5$loadPages=_ref5.loadPages,loadPages=void 0===_ref5$loadPages||_ref5$loadPages;dispatch(setRefreshInterval(0));dispatch((0,_reduxActions.createAction)(type)(workpad));loadPages&&dispatch(initializeWorkpad())})},24:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});function _interopDefault(ex){return ex&&"object"===typeof ex&&"default"in ex?ex["default"]:ex}var React=__webpack_require__(0);var React__default=_interopDefault(React);var shallowEqual=_interopDefault(__webpack_require__(6037));var hoistNonReactStatics=_interopDefault(__webpack_require__(6038));var changeEmitter=__webpack_require__(6039);var $$observable=_interopDefault(__webpack_require__(1124));var setStatic=function setStatic(key,value){return function(BaseComponent){BaseComponent[key]=value;return BaseComponent}};var setDisplayName=function setDisplayName(displayName){return setStatic("displayName",displayName)};var getDisplayName=function getDisplayName(Component$$1){if("string"===typeof Component$$1)return Component$$1;if(!Component$$1)return;return Component$$1.displayName||Component$$1.name||"Component"};var wrapDisplayName=function wrapDisplayName(BaseComponent,hocName){return hocName+"("+getDisplayName(BaseComponent)+")"};var mapProps=function mapProps(propsMapper){return function(BaseComponent){var factory=React.createFactory(BaseComponent);var MapProps=function MapProps(props){return factory(propsMapper(props))};false;return MapProps}};var classCallCheck=function(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")};var _extends=Object.assign||function(target){for(var i=1;i<arguments.length;i++){var source=arguments[i];for(var key in source)Object.prototype.hasOwnProperty.call(source,key)&&(target[key]=source[key])}return target};var inherits=function(subClass,superClass){if("function"!==typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function, not "+typeof superClass);subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:false,writable:true,configurable:true}});superClass&&(Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass)};var objectWithoutProperties=function(obj,keys){var target={};for(var i in obj){if(keys.indexOf(i)>=0)continue;if(!Object.prototype.hasOwnProperty.call(obj,i))continue;target[i]=obj[i]}return target};var possibleConstructorReturn=function(self,call){if(!self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!call||"object"!==typeof call&&"function"!==typeof call?self:call};var withProps=function withProps(input){var hoc=mapProps(function(props){return _extends({},props,"function"===typeof input?input(props):input)});false;return hoc};var pick=function pick(obj,keys){var result={};for(var i=0;i<keys.length;i++){var key=keys[i];obj.hasOwnProperty(key)&&(result[key]=obj[key])}return result};var withPropsOnChange=function withPropsOnChange(shouldMapOrKeys,propsMapper){return function(BaseComponent){var factory=React.createFactory(BaseComponent);var shouldMap="function"===typeof shouldMapOrKeys?shouldMapOrKeys:function(props,nextProps){return!shallowEqual(pick(props,shouldMapOrKeys),pick(nextProps,shouldMapOrKeys))};var WithPropsOnChange=function(_Component){inherits(WithPropsOnChange,_Component);function WithPropsOnChange(){var _temp,_this,_ret;classCallCheck(this,WithPropsOnChange);for(var _len=arguments.length,args=Array(_len),_key=0;_key<_len;_key++)args[_key]=arguments[_key];return _ret=(_temp=(_this=possibleConstructorReturn(this,_Component.call.apply(_Component,[this].concat(args))),_this),_this.computedProps=propsMapper(_this.props),_temp),possibleConstructorReturn(_this,_ret)}WithPropsOnChange.prototype.componentWillReceiveProps=function componentWillReceiveProps(nextProps){shouldMap(this.props,nextProps)&&(this.computedProps=propsMapper(nextProps))};WithPropsOnChange.prototype.render=function render(){return factory(_extends({},this.props,this.computedProps))};return WithPropsOnChange}(React.Component);false;return WithPropsOnChange}};var mapValues=function mapValues(obj,func){var result={};for(var key in obj)obj.hasOwnProperty(key)&&(result[key]=func(obj[key],key));return result};var withHandlers=function withHandlers(handlers){return function(BaseComponent){var factory=React.createFactory(BaseComponent);var WithHandlers=function(_Component){inherits(WithHandlers,_Component);function WithHandlers(){var _temp,_this,_ret;classCallCheck(this,WithHandlers);for(var _len=arguments.length,args=Array(_len),_key=0;_key<_len;_key++)args[_key]=arguments[_key];return _ret=(_temp=(_this=possibleConstructorReturn(this,_Component.call.apply(_Component,[this].concat(args))),_this),_initialiseProps.call(_this),_temp),possibleConstructorReturn(_this,_ret)}WithHandlers.prototype.componentWillReceiveProps=function componentWillReceiveProps(){this.cachedHandlers={}};WithHandlers.prototype.render=function render(){return factory(_extends({},this.props,this.handlers))};return WithHandlers}(React.Component);var _initialiseProps=function _initialiseProps(){var _this2=this;this.cachedHandlers={};this.handlers=mapValues("function"===typeof handlers?handlers(this.props):handlers,function(createHandler,handlerName){return function(){var cachedHandler=_this2.cachedHandlers[handlerName];if(cachedHandler)return cachedHandler.apply(void 0,arguments);var handler=createHandler(_this2.props);_this2.cachedHandlers[handlerName]=handler;false;return handler.apply(void 0,arguments)}})};false;return WithHandlers}};var defaultProps=function defaultProps(props){return function(BaseComponent){var factory=React.createFactory(BaseComponent);var DefaultProps=function DefaultProps(ownerProps){return factory(ownerProps)};DefaultProps.defaultProps=props;false;return DefaultProps}};var omit=function omit(obj,keys){var rest=objectWithoutProperties(obj,[]);for(var i=0;i<keys.length;i++){var key=keys[i];rest.hasOwnProperty(key)&&delete rest[key]}return rest};var renameProp=function renameProp(oldName,newName){var hoc=mapProps(function(props){var _babelHelpers$extends;return _extends({},omit(props,[oldName]),(_babelHelpers$extends={},_babelHelpers$extends[newName]=props[oldName],_babelHelpers$extends))});false;return hoc};var keys=Object.keys;var mapKeys=function mapKeys(obj,func){return keys(obj).reduce(function(result,key){var val=obj[key];result[func(val,key)]=val;return result},{})};var renameProps=function renameProps(nameMap){var hoc=mapProps(function(props){return _extends({},omit(props,keys(nameMap)),mapKeys(pick(props,keys(nameMap)),function(_,oldName){return nameMap[oldName]}))});false;return hoc};var flattenProp=function flattenProp(propName){return function(BaseComponent){var factory=React.createFactory(BaseComponent);var FlattenProp=function FlattenProp(props){return factory(_extends({},props,props[propName]))};false;return FlattenProp}};var withState=function withState(stateName,stateUpdaterName,initialState){return function(BaseComponent){var factory=React.createFactory(BaseComponent);var WithState=function(_Component){inherits(WithState,_Component);function WithState(){var _temp,_this,_ret;classCallCheck(this,WithState);for(var _len=arguments.length,args=Array(_len),_key=0;_key<_len;_key++)args[_key]=arguments[_key];return _ret=(_temp=(_this=possibleConstructorReturn(this,_Component.call.apply(_Component,[this].concat(args))),_this),_this.state={stateValue:"function"===typeof initialState?initialState(_this.props):initialState},_this.updateStateValue=function(updateFn,callback){return _this.setState(function(_ref){var stateValue=_ref.stateValue;return{stateValue:"function"===typeof updateFn?updateFn(stateValue):updateFn}},callback)},_temp),possibleConstructorReturn(_this,_ret)}WithState.prototype.render=function render(){var _babelHelpers$extends;return factory(_extends({},this.props,(_babelHelpers$extends={},_babelHelpers$extends[stateName]=this.state.stateValue,_babelHelpers$extends[stateUpdaterName]=this.updateStateValue,_babelHelpers$extends)))};return WithState}(React.Component);false;return WithState}};var withStateHandlers=function withStateHandlers(initialState,stateUpdaters){return function(BaseComponent){var factory=React.createFactory(BaseComponent);var WithStateHandlers=function(_Component){inherits(WithStateHandlers,_Component);function WithStateHandlers(){var _temp,_this,_ret;classCallCheck(this,WithStateHandlers);for(var _len=arguments.length,args=Array(_len),_key=0;_key<_len;_key++)args[_key]=arguments[_key];return _ret=(_temp=(_this=possibleConstructorReturn(this,_Component.call.apply(_Component,[this].concat(args))),_this),_initialiseProps.call(_this),_temp),possibleConstructorReturn(_this,_ret)}WithStateHandlers.prototype.shouldComponentUpdate=function shouldComponentUpdate(nextProps,nextState){var propsChanged=nextProps!==this.props;var stateChanged=!shallowEqual(nextState,this.state);return propsChanged||stateChanged};WithStateHandlers.prototype.render=function render(){return factory(_extends({},this.props,this.state,this.stateUpdaters))};return WithStateHandlers}(React.Component);var _initialiseProps=function _initialiseProps(){var _this2=this;this.state="function"===typeof initialState?initialState(this.props):initialState;this.stateUpdaters=mapValues(stateUpdaters,function(handler){return function(mayBeEvent){for(var _len2=arguments.length,args=Array(_len2>1?_len2-1:0),_key2=1;_key2<_len2;_key2++)args[_key2-1]=arguments[_key2];mayBeEvent&&"function"===typeof mayBeEvent.persist&&mayBeEvent.persist();_this2.setState(function(state,props){return handler(state,props).apply(void 0,[mayBeEvent].concat(args))})}})};false;return WithStateHandlers}};var withReducer=function withReducer(stateName,dispatchName,reducer,initialState){return function(BaseComponent){var factory=React.createFactory(BaseComponent);var WithReducer=function(_Component){inherits(WithReducer,_Component);function WithReducer(){var _temp,_this,_ret;classCallCheck(this,WithReducer);for(var _len=arguments.length,args=Array(_len),_key=0;_key<_len;_key++)args[_key]=arguments[_key];return _ret=(_temp=(_this=possibleConstructorReturn(this,_Component.call.apply(_Component,[this].concat(args))),_this),_this.state={stateValue:_this.initializeStateValue()},_this.dispatch=function(action){return _this.setState(function(_ref){var stateValue=_ref.stateValue;return{stateValue:reducer(stateValue,action)}})},_temp),possibleConstructorReturn(_this,_ret)}WithReducer.prototype.initializeStateValue=function initializeStateValue(){if(void 0!==initialState)return"function"===typeof initialState?initialState(this.props):initialState;return reducer(void 0,{type:"@@recompose/INIT"})};WithReducer.prototype.render=function render(){var _babelHelpers$extends;return factory(_extends({},this.props,(_babelHelpers$extends={},_babelHelpers$extends[stateName]=this.state.stateValue,_babelHelpers$extends[dispatchName]=this.dispatch,_babelHelpers$extends)))};return WithReducer}(React.Component);false;return WithReducer}};var identity=function identity(Component$$1){return Component$$1};var branch=function branch(test,left){var right=arguments.length>2&&void 0!==arguments[2]?arguments[2]:identity;return function(BaseComponent){var leftFactory=void 0;var rightFactory=void 0;var Branch=function Branch(props){if(test(props)){leftFactory=leftFactory||React.createFactory(left(BaseComponent));return leftFactory(props)}rightFactory=rightFactory||React.createFactory(right(BaseComponent));return rightFactory(props)};false;return Branch}};var renderComponent=function renderComponent(Component$$1){return function(_){var factory=React.createFactory(Component$$1);var RenderComponent=function RenderComponent(props){return factory(props)};false;return RenderComponent}};var Nothing=function(_Component){inherits(Nothing,_Component);function Nothing(){classCallCheck(this,Nothing);return possibleConstructorReturn(this,_Component.apply(this,arguments))}Nothing.prototype.render=function render(){return null};return Nothing}(React.Component);var renderNothing=function renderNothing(_){return Nothing};var shouldUpdate=function shouldUpdate(test){return function(BaseComponent){var factory=React.createFactory(BaseComponent);var ShouldUpdate=function(_Component){inherits(ShouldUpdate,_Component);function ShouldUpdate(){classCallCheck(this,ShouldUpdate);return possibleConstructorReturn(this,_Component.apply(this,arguments))}ShouldUpdate.prototype.shouldComponentUpdate=function shouldComponentUpdate(nextProps){return test(this.props,nextProps)};ShouldUpdate.prototype.render=function render(){return factory(this.props)};return ShouldUpdate}(React.Component);false;return ShouldUpdate}};var pure=function pure(BaseComponent){var hoc=shouldUpdate(function(props,nextProps){return!shallowEqual(props,nextProps)});false;return hoc(BaseComponent)};var onlyUpdateForKeys=function onlyUpdateForKeys(propKeys){var hoc=shouldUpdate(function(props,nextProps){return!shallowEqual(pick(nextProps,propKeys),pick(props,propKeys))});false;return hoc};var onlyUpdateForPropTypes=function onlyUpdateForPropTypes(BaseComponent){var propTypes=BaseComponent.propTypes;false;var propKeys=Object.keys(propTypes||{});var OnlyUpdateForPropTypes=onlyUpdateForKeys(propKeys)(BaseComponent);false;return OnlyUpdateForPropTypes};var withContext=function withContext(childContextTypes,getChildContext){return function(BaseComponent){var factory=React.createFactory(BaseComponent);var WithContext=function(_Component){inherits(WithContext,_Component);function WithContext(){var _temp,_this,_ret;classCallCheck(this,WithContext);for(var _len=arguments.length,args=Array(_len),_key=0;_key<_len;_key++)args[_key]=arguments[_key];return _ret=(_temp=(_this=possibleConstructorReturn(this,_Component.call.apply(_Component,[this].concat(args))),_this),_this.getChildContext=function(){return getChildContext(_this.props)},_temp),possibleConstructorReturn(_this,_ret)}WithContext.prototype.render=function render(){return factory(this.props)};return WithContext}(React.Component);WithContext.childContextTypes=childContextTypes;false;return WithContext}};var getContext=function getContext(contextTypes){return function(BaseComponent){var factory=React.createFactory(BaseComponent);var GetContext=function GetContext(ownerProps,context){return factory(_extends({},ownerProps,context))};GetContext.contextTypes=contextTypes;false;return GetContext}};var lifecycle=function lifecycle(spec){return function(BaseComponent){var factory=React.createFactory(BaseComponent);false;var Lifecycle=function(_Component){inherits(Lifecycle,_Component);function Lifecycle(){classCallCheck(this,Lifecycle);return possibleConstructorReturn(this,_Component.apply(this,arguments))}Lifecycle.prototype.render=function render(){return factory(_extends({},this.props,this.state))};return Lifecycle}(React.Component);Object.keys(spec).forEach(function(hook){return Lifecycle.prototype[hook]=spec[hook]});false;return Lifecycle}};var isClassComponent=function isClassComponent(Component$$1){return Boolean(Component$$1&&Component$$1.prototype&&"function"===typeof Component$$1.prototype.render)};var toClass=function toClass(baseComponent){if(isClassComponent(baseComponent))return baseComponent;var ToClass=function(_Component){inherits(ToClass,_Component);function ToClass(){classCallCheck(this,ToClass);return possibleConstructorReturn(this,_Component.apply(this,arguments))}ToClass.prototype.render=function render(){if("string"===typeof baseComponent)return React__default.createElement(baseComponent,this.props);return baseComponent(this.props,this.context)};return ToClass}(React.Component);ToClass.displayName=getDisplayName(baseComponent);ToClass.propTypes=baseComponent.propTypes;ToClass.contextTypes=baseComponent.contextTypes;ToClass.defaultProps=baseComponent.defaultProps;return ToClass};var setPropTypes=function setPropTypes(propTypes){return setStatic("propTypes",propTypes)};function compose(){for(var _len=arguments.length,funcs=Array(_len),_key=0;_key<_len;_key++)funcs[_key]=arguments[_key];if(0===funcs.length)return function(arg){return arg};if(1===funcs.length)return funcs[0];return funcs.reduce(function(a,b){return function(){return a(b.apply(void 0,arguments))}})}var createSink=function createSink(callback){return function(_Component){inherits(Sink,_Component);function Sink(){classCallCheck(this,Sink);return possibleConstructorReturn(this,_Component.apply(this,arguments))}Sink.prototype.componentWillMount=function componentWillMount(){callback(this.props)};Sink.prototype.componentWillReceiveProps=function componentWillReceiveProps(nextProps){callback(nextProps)};Sink.prototype.render=function render(){return null};return Sink}(React.Component)};var componentFromProp=function componentFromProp(propName){var Component$$1=function Component$$1(props){return React.createElement(props[propName],omit(props,[propName]))};Component$$1.displayName="componentFromProp("+propName+")";return Component$$1};var nest=function nest(){for(var _len=arguments.length,Components=Array(_len),_key=0;_key<_len;_key++)Components[_key]=arguments[_key];var factories=Components.map(React.createFactory);var Nest=function Nest(_ref){var props=objectWithoutProperties(_ref,[]),children=_ref.children;return factories.reduceRight(function(child,factory){return factory(props,child)},children)};false;return Nest};var hoistStatics=function hoistStatics(higherOrderComponent){return function(BaseComponent){var NewComponent=higherOrderComponent(BaseComponent);hoistNonReactStatics(NewComponent,BaseComponent);return NewComponent}};var _config={fromESObservable:null,toESObservable:null};var configureObservable=function configureObservable(c){_config=c};var config={fromESObservable:function fromESObservable(observable){return"function"===typeof _config.fromESObservable?_config.fromESObservable(observable):observable},toESObservable:function toESObservable(stream){return"function"===typeof _config.toESObservable?_config.toESObservable(stream):stream}};var componentFromStreamWithConfig=function componentFromStreamWithConfig(config$$1){return function(propsToVdom){return function(_Component){inherits(ComponentFromStream,_Component);function ComponentFromStream(){var _config$fromESObserva;var _temp,_this,_ret;classCallCheck(this,ComponentFromStream);for(var _len=arguments.length,args=Array(_len),_key=0;_key<_len;_key++)args[_key]=arguments[_key];return _ret=(_temp=(_this=possibleConstructorReturn(this,_Component.call.apply(_Component,[this].concat(args))),_this),_this.state={vdom:null},_this.propsEmitter=changeEmitter.createChangeEmitter(),_this.props$=config$$1.fromESObservable((_config$fromESObserva={subscribe:function subscribe(observer){var unsubscribe=_this.propsEmitter.listen(function(props){props?observer.next(props):observer.complete()});return{unsubscribe:unsubscribe}}},_config$fromESObserva[$$observable]=function(){return this},_config$fromESObserva)),_this.vdom$=config$$1.toESObservable(propsToVdom(_this.props$)),_temp),possibleConstructorReturn(_this,_ret)}ComponentFromStream.prototype.componentWillMount=function componentWillMount(){var _this2=this;this.subscription=this.vdom$.subscribe({next:function next(vdom){_this2.setState({vdom:vdom})}});this.propsEmitter.emit(this.props)};ComponentFromStream.prototype.componentWillReceiveProps=function componentWillReceiveProps(nextProps){this.propsEmitter.emit(nextProps)};ComponentFromStream.prototype.shouldComponentUpdate=function shouldComponentUpdate(nextProps,nextState){return nextState.vdom!==this.state.vdom};ComponentFromStream.prototype.componentWillUnmount=function componentWillUnmount(){this.propsEmitter.emit();this.subscription.unsubscribe()};ComponentFromStream.prototype.render=function render(){return this.state.vdom};return ComponentFromStream}(React.Component)}};var componentFromStream=function componentFromStream(propsToVdom){return componentFromStreamWithConfig(config)(propsToVdom)};var identity$1=function identity(t){return t};var mapPropsStreamWithConfig=function mapPropsStreamWithConfig(config$$1){var componentFromStream=componentFromStreamWithConfig({fromESObservable:identity$1,toESObservable:identity$1});return function(transform){return function(BaseComponent){var factory=React.createFactory(BaseComponent);var fromESObservable=config$$1.fromESObservable,toESObservable=config$$1.toESObservable;return componentFromStream(function(props$){var _ref;return _ref={subscribe:function subscribe(observer){var subscription=toESObservable(transform(fromESObservable(props$))).subscribe({next:function next(childProps){return observer.next(factory(childProps))}});return{unsubscribe:function unsubscribe(){return subscription.unsubscribe()}}}},_ref[$$observable]=function(){return this},_ref})}}};var mapPropsStream=function mapPropsStream(transform){var hoc=mapPropsStreamWithConfig(config)(transform);false;return hoc};var createEventHandlerWithConfig=function createEventHandlerWithConfig(config$$1){return function(){var _config$fromESObserva;var emitter=changeEmitter.createChangeEmitter();var stream=config$$1.fromESObservable((_config$fromESObserva={subscribe:function subscribe(observer){var unsubscribe=emitter.listen(function(value){return observer.next(value)});return{unsubscribe:unsubscribe}}},_config$fromESObserva[$$observable]=function(){return this},_config$fromESObserva));return{handler:emitter.emit,stream:stream}}};var createEventHandler=createEventHandlerWithConfig(config);exports.mapProps=mapProps;exports.withProps=withProps;exports.withPropsOnChange=withPropsOnChange;exports.withHandlers=withHandlers;exports.defaultProps=defaultProps;exports.renameProp=renameProp;exports.renameProps=renameProps;exports.flattenProp=flattenProp;exports.withState=withState;exports.withStateHandlers=withStateHandlers;exports.withReducer=withReducer;exports.branch=branch;exports.renderComponent=renderComponent;exports.renderNothing=renderNothing;exports.shouldUpdate=shouldUpdate;exports.pure=pure;exports.onlyUpdateForKeys=onlyUpdateForKeys;exports.onlyUpdateForPropTypes=onlyUpdateForPropTypes;exports.withContext=withContext;exports.getContext=getContext;exports.lifecycle=lifecycle;exports.toClass=toClass;exports.setStatic=setStatic;exports.setPropTypes=setPropTypes;exports.setDisplayName=setDisplayName;exports.compose=compose;exports.getDisplayName=getDisplayName;exports.wrapDisplayName=wrapDisplayName;exports.shallowEqual=shallowEqual;exports.isClassComponent=isClassComponent;exports.createSink=createSink;exports.componentFromProp=componentFromProp;exports.nest=nest;exports.hoistStatics=hoistStatics;exports.componentFromStream=componentFromStream;exports.componentFromStreamWithConfig=componentFromStreamWithConfig;exports.mapPropsStream=mapPropsStream;exports.mapPropsStreamWithConfig=mapPropsStreamWithConfig;exports.createEventHandler=createEventHandler;exports.createEventHandlerWithConfig=createEventHandlerWithConfig;exports.setObservableConfig=configureObservable},293:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.notify=void 0;var _extends=Object.assign||function(target){for(var i=1;i<arguments.length;i++){var source=arguments[i];for(var key in source)Object.prototype.hasOwnProperty.call(source,key)&&(target[key]=source[key])}return target};var _notify=__webpack_require__(11);var _format_msg=__webpack_require__(1568);var _lodash=__webpack_require__(1);function _objectWithoutProperties(obj,keys){var target={};for(var i in obj){if(keys.indexOf(i)>=0)continue;if(!Object.prototype.hasOwnProperty.call(obj,i))continue;target[i]=obj[i]}return target}var getToast=function getToast(err){var opts=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};var errData=(0,_lodash.get)(err,"response")||err;var errMsg=(0,_format_msg.formatMsg)(errData);var title=opts.title,rest=_objectWithoutProperties(opts,["title"]);var text=null;title&&(text=errMsg);return _extends({},rest,{title:title||errMsg,text:text})};exports.notify={error:function error(err,opts){_notify.toastNotifications.addDanger(getToast(err,opts))},warning:function warning(err,opts){_notify.toastNotifications.addWarning(getToast(err,opts))},info:function info(err,opts){_notify.toastNotifications.add(getToast(err,opts))},success:function success(err,opts){_notify.toastNotifications.addSuccess(getToast(err,opts))}}},313:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.Registry=void 0;var _typeof="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(obj){return typeof obj}:function(obj){return obj&&"function"===typeof Symbol&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj};var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;"value"in descriptor&&(descriptor.writable=true);Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){protoProps&&defineProperties(Constructor.prototype,protoProps);staticProps&&defineProperties(Constructor,staticProps);return Constructor}}();var _lodash=__webpack_require__(2039);var _lodash2=_interopRequireDefault(_lodash);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}exports.Registry=function(){function Registry(){var prop=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"name";_classCallCheck(this,Registry);if("string"!==typeof prop)throw new Error("Registry property name must be a string");this._prop=prop;this._indexed=new Object}_createClass(Registry,[{key:"wrapper",value:function wrapper(obj){return obj}},{key:"register",value:function register(fn){if("function"!==typeof fn)throw new Error("Register requires an function");var obj=fn();if("object"!==("undefined"===typeof obj?"undefined":_typeof(obj))||!obj[this._prop])throw new Error("Registered functions must return an object with a "+this._prop+" property");this._indexed[obj[this._prop].toLowerCase()]=this.wrapper(obj)}},{key:"toJS",value:function toJS(){var _this=this;return Object.keys(this._indexed).reduce(function(acc,key){acc[key]=_this.get(key);return acc},{})}},{key:"toArray",value:function toArray(){var _this2=this;return Object.keys(this._indexed).map(function(key){return _this2.get(key)})}},{key:"get",value:function get(name){if(void 0===name)return null;var lowerCaseName=name.toLowerCase();return this._indexed[lowerCaseName]?(0,_lodash2.default)(this._indexed[lowerCaseName]):null}},{key:"getProp",value:function getProp(){return this._prop}},{key:"reset",value:function reset(){this._indexed=new Object}}]);return Registry}()},342:function(module,exports,__webpack_require__){var __WEBPACK_AMD_DEFINE_FACTORY__,__WEBPACK_AMD_DEFINE_ARRAY__,__WEBPACK_AMD_DEFINE_RESULT__;(function(root,factory){"use strict";if("object"===typeof module&&"object"===typeof module.exports)module.exports=factory();else{true;!(__WEBPACK_AMD_DEFINE_ARRAY__=[],__WEBPACK_AMD_DEFINE_FACTORY__=factory,__WEBPACK_AMD_DEFINE_RESULT__="function"===typeof __WEBPACK_AMD_DEFINE_FACTORY__?__WEBPACK_AMD_DEFINE_FACTORY__.apply(exports,__WEBPACK_AMD_DEFINE_ARRAY__):__WEBPACK_AMD_DEFINE_FACTORY__,void 0!==__WEBPACK_AMD_DEFINE_RESULT__&&(module.exports=__WEBPACK_AMD_DEFINE_RESULT__))}})(0,function(){"use strict";var _hasOwnProperty=Object.prototype.hasOwnProperty;function isEmpty(value){if(!value)return true;if(isArray(value)&&0===value.length)return true;if(!isString(value)){for(var i in value)if(_hasOwnProperty.call(value,i))return false;return true}return false}function isNumber(value){return"number"===typeof value}function isString(obj){return"string"===typeof obj}function isArray(obj){return Array.isArray(obj)}function getKey(key){var intKey=parseInt(key);if(intKey.toString()===key)return intKey;return key}var objectPathImmutable=function(src){var dest=src;var committed=false;var transaction=Object.keys(api).reduce(function(proxy,prop){"function"===typeof api[prop]&&(proxy[prop]=function(){var args=[dest,src].concat(Array.prototype.slice.call(arguments));if(committed)throw new Error("Cannot call "+prop+" after `value`");dest=api[prop].apply(null,args);return transaction});return proxy},{});transaction.value=function(){committed=true;return dest};return transaction};function clone(obj,createIfEmpty,assumeArray){if(null==obj){if(createIfEmpty){if(assumeArray)return[];return{}}return obj}if(isArray(obj))return obj.slice();var res={};for(var key in obj)obj.hasOwnProperty(key)&&(res[key]=obj[key]);return res}function changeImmutable(dest,src,path,changeCallback){isNumber(path)&&(path=[path]);if(isEmpty(path))return src;if(isString(path))return changeImmutable(dest,src,path.split(".").map(getKey),changeCallback);var currentPath=path[0];dest&&dest!==src||(dest=clone(src,true,isNumber(currentPath)));if(1===path.length)return changeCallback(dest,currentPath);null!=src&&(src=src[currentPath]);dest[currentPath]=changeImmutable(dest[currentPath],src,path.slice(1),changeCallback);return dest}var api={};api.set=function set(dest,src,path,value){return changeImmutable(dest,src,path,function(clonedObj,finalPath){clonedObj[finalPath]=value;return clonedObj})};api.update=function update(dest,src,path,updater){return changeImmutable(dest,src,path,function(clonedObj,finalPath){clonedObj[finalPath]=updater(clonedObj[finalPath]);return clonedObj})};api.push=function push(dest,src,path){var values=Array.prototype.slice.call(arguments,3);return changeImmutable(dest,src,path,function(clonedObj,finalPath){isArray(clonedObj[finalPath])?clonedObj[finalPath]=clonedObj[finalPath].concat(values):clonedObj[finalPath]=values;return clonedObj})};api.insert=function insert(dest,src,path,value,at){at=~~at;return changeImmutable(dest,src,path,function(clonedObj,finalPath){var arr=clonedObj[finalPath];if(!isArray(arr)){if(null!=arr&&"undefined"!==typeof arr)throw new Error("Expected "+path+"to be an array. Instead got "+typeof path);arr=[]}var first=arr.slice(0,at);first.push(value);clonedObj[finalPath]=first.concat(arr.slice(at));return clonedObj})};api.del=function del(dest,src,path,value,at){return changeImmutable(dest,src,path,function(clonedObj,finalPath){Array.isArray(clonedObj)?void 0!==clonedObj[finalPath]&&clonedObj.splice(finalPath,1):clonedObj.hasOwnProperty(finalPath)&&delete clonedObj[finalPath];return clonedObj})};api.assign=function assign(dest,src,path,source){return changeImmutable(dest,src,path,function(clonedObj,finalPath){source=Object(source);var target=clone(clonedObj[finalPath],true);for(var key in source)_hasOwnProperty.call(source,key)&&(target[key]=source[key]);clonedObj[finalPath]=target;return clonedObj})};return Object.keys(api).reduce(function(objectPathImmutable,method){objectPathImmutable[method]=api[method].bind(null,null);return objectPathImmutable},objectPathImmutable)})},343:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var _typeof="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(obj){return typeof obj}:function(obj){return obj&&"function"===typeof Symbol&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj};exports.fromExpression=fromExpression;exports.safeElementFromExpression=safeElementFromExpression;exports.toExpression=toExpression;var _get_type=__webpack_require__(386);var _grammar=__webpack_require__(2036);function getArgumentString(arg,argKey){var level=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;var type=(0,_get_type.getType)(arg);function maybeArgKey(argKey,argString){return null==argKey||"_"===argKey?argString:argKey+"="+argString}if("string"===type){var escapedArg=arg.replace(/[\\"]/g,"\\$&");return maybeArgKey(argKey,'"'+escapedArg+'"')}if("boolean"===type||"null"===type||"number"===type)return maybeArgKey(argKey,""+arg);if("expression"===type)return maybeArgKey(argKey,"{"+getExpression(arg.chain,level+1)+"}");throw new Error("Invalid argument type in AST: "+type)}function getExpressionArgs(block){var level=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;var args=block.arguments;var hasValidArgs="object"===("undefined"===typeof args?"undefined":_typeof(args))&&null!=args&&!Array.isArray(args);if(!hasValidArgs)throw new Error("Arguments can only be an object");var argKeys=Object.keys(args);var MAX_LINE_LENGTH=80;return argKeys.map(function(argKey){return args[argKey].reduce(function(acc,arg){var argString=getArgumentString(arg,argKey,level);var lineLength=acc.split("\n").pop().length;if(0===level&&lineLength+argString.length>MAX_LINE_LENGTH)return acc+"\n  "+argString;if(lineLength>0)return acc+" "+argString;return argString},"")})}function fnWithArgs(fnName,args){if(!args||0===args.length)return fnName;return fnName+" "+args.join(" ")}function getExpression(chain){var level=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;if(!chain)throw new Error("Expressions must contain a chain");var separator=level>0?" | ":"\n| ";return chain.map(function(chainObj){var type=(0,_get_type.getType)(chainObj);if("function"===type){var fn=chainObj.function;if(!fn||0===fn.length)throw new Error("Functions must have a function name");var expArgs=getExpressionArgs(chainObj,level);return fnWithArgs(fn,expArgs)}},[]).join(separator)}function fromExpression(expression){var type=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"expression";try{return(0,_grammar.parse)(String(expression),{startRule:type})}catch(e){throw new Error("Unable to parse expression: "+e.message)}}function safeElementFromExpression(expression){try{return fromExpression(expression)}catch(e){return fromExpression("markdown\n\"## Crud.\nCanvas could not parse this element's expression. I am so sorry this error isn't more useful. I promise it will be soon.\n\nThanks for understanding,\n#### Management\n\"")}}function toExpression(astObj){var type=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"expression";if("argument"===type)return getArgumentString(astObj);var validType=["expression","function"].includes((0,_get_type.getType)(astObj));if(!validType)throw new Error("Expression must be an expression or argument function");if("expression"===(0,_get_type.getType)(astObj)){if(!Array.isArray(astObj.chain))throw new Error("Expressions must contain a chain");return getExpression(astObj.chain)}var expArgs=getExpressionArgs(astObj);return fnWithArgs(astObj.function,expArgs)}},344:function(module,exports,__webpack_require__){(function(process){exports=module.exports=__webpack_require__(6053);exports.log=log;exports.formatArgs=formatArgs;exports.save=save;exports.load=load;exports.useColors=useColors;exports.storage="undefined"!=typeof chrome&&"undefined"!=typeof chrome.storage?chrome.storage.local:localstorage();exports.colors=["#0000CC","#0000FF","#0033CC","#0033FF","#0066CC","#0066FF","#0099CC","#0099FF","#00CC00","#00CC33","#00CC66","#00CC99","#00CCCC","#00CCFF","#3300CC","#3300FF","#3333CC","#3333FF","#3366CC","#3366FF","#3399CC","#3399FF","#33CC00","#33CC33","#33CC66","#33CC99","#33CCCC","#33CCFF","#6600CC","#6600FF","#6633CC","#6633FF","#66CC00","#66CC33","#9900CC","#9900FF","#9933CC","#9933FF","#99CC00","#99CC33","#CC0000","#CC0033","#CC0066","#CC0099","#CC00CC","#CC00FF","#CC3300","#CC3333","#CC3366","#CC3399","#CC33CC","#CC33FF","#CC6600","#CC6633","#CC9900","#CC9933","#CCCC00","#CCCC33","#FF0000","#FF0033","#FF0066","#FF0099","#FF00CC","#FF00FF","#FF3300","#FF3333","#FF3366","#FF3399","#FF33CC","#FF33FF","#FF6600","#FF6633","#FF9900","#FF9933","#FFCC00","#FFCC33"];function useColors(){if("undefined"!==typeof window&&window.process&&"renderer"===window.process.type)return true;if("undefined"!==typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/(edge|trident)\/(\d+)/))return false;return"undefined"!==typeof document&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||"undefined"!==typeof window&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||"undefined"!==typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/)&&parseInt(RegExp.$1,10)>=31||"undefined"!==typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/)}exports.formatters.j=function(v){try{return JSON.stringify(v)}catch(err){return"[UnexpectedJSONParseError]: "+err.message}};function formatArgs(args){var useColors=this.useColors;args[0]=(useColors?"%c":"")+this.namespace+(useColors?" %c":" ")+args[0]+(useColors?"%c ":" ")+"+"+exports.humanize(this.diff);if(!useColors)return;var c="color: "+this.color;args.splice(1,0,c,"color: inherit");var index=0;var lastC=0;args[0].replace(/%[a-zA-Z%]/g,function(match){if("%%"===match)return;index++;"%c"===match&&(lastC=index)});args.splice(lastC,0,c)}function log(){return"object"===typeof console&&console.log&&Function.prototype.apply.call(console.log,console,arguments)}function save(namespaces){try{null==namespaces?exports.storage.removeItem("debug"):exports.storage.debug=namespaces}catch(e){}}function load(){var r;try{r=exports.storage.debug}catch(e){}!r&&"undefined"!==typeof process&&"env"in process&&(r=Object({IS_KIBANA_DISTRIBUTABLE:"true"}).DEBUG);return r}exports.enable(load());function localstorage(){try{return window.localStorage}catch(e){}}}).call(exports,__webpack_require__(90))},345:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.selectElement=exports.setFullscreen=exports.setCanUserWrite=void 0;var _reduxActions=__webpack_require__(29);exports.setCanUserWrite=(0,_reduxActions.createAction)("setCanUserWrite");exports.setFullscreen=(0,_reduxActions.createAction)("setFullscreen");exports.selectElement=(0,_reduxActions.createAction)("selectElement")},385:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var windowObj={};exports.getWindow=function getWindow(){return"undefined"===typeof window?windowObj:window}},386:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var _typeof="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(obj){return typeof obj}:function(obj){return obj&&"function"===typeof Symbol&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj};exports.getType=getType;function getType(node){if(null==node)return"null";if("object"===("undefined"===typeof node?"undefined":_typeof(node))){if(!node.type)throw new Error("Objects must have a type propery");return node.type}return"undefined"===typeof node?"undefined":_typeof(node)}},440:function(module,exports,__webpack_require__){"use strict";var dom=__webpack_require__(6040);var geometry=__webpack_require__(2033);var gestures=__webpack_require__(2034);var layout=__webpack_require__(6041);var matrix=__webpack_require__(802);var state=__webpack_require__(1163);module.exports={dom:dom,geometry:geometry,gestures:gestures,layout:layout,matrix:matrix,state:state}},441:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.setPageTransition=exports.setPage=exports.stylePage=exports.removePage=exports.movePage=exports.gotoPage=exports.duplicatePage=exports.addPage=void 0;var _reduxActions=__webpack_require__(29);exports.addPage=(0,_reduxActions.createAction)("addPage");exports.duplicatePage=(0,_reduxActions.createAction)("duplicatePage");exports.gotoPage=(0,_reduxActions.createAction)("gotoPage");exports.movePage=(0,_reduxActions.createAction)("movePage",function(id,position){return{id:id,position:position}});exports.removePage=(0,_reduxActions.createAction)("removePage");exports.stylePage=(0,_reduxActions.createAction)("stylePage",function(pageId,style){return{pageId:pageId,style:style}});exports.setPage=(0,_reduxActions.createAction)("setPage");exports.setPageTransition=(0,_reduxActions.createAction)("setPageTransition",function(pageId,transition){return{pageId:pageId,transition:transition}})},442:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.resetAssets=exports.setAssets=exports.removeAsset=exports.setAssetValue=exports.createAsset=void 0;var _reduxActions=__webpack_require__(29);exports.createAsset=(0,_reduxActions.createAction)("createAsset",function(type,value,id){return{type:type,value:value,id:id}});exports.setAssetValue=(0,_reduxActions.createAction)("setAssetContent",function(id,value){return{id:id,value:value}});exports.removeAsset=(0,_reduxActions.createAction)("removeAsset");exports.setAssets=(0,_reduxActions.createAction)("setAssets");exports.resetAssets=(0,_reduxActions.createAction)("resetAssets")},524:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.getAssets=getAssets;exports.getAssetIds=getAssetIds;exports.getAssetById=getAssetById;var _lodash=__webpack_require__(1);var assetRoot="assets";function getAssets(state){return(0,_lodash.get)(state,assetRoot,{})}function getAssetIds(state){return Object.keys(getAssets(state))}function getAssetById(state,id){return(0,_lodash.get)(state,[assetRoot,id])}},525:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.getId=getId;var _v=__webpack_require__(1040);var _v2=_interopRequireDefault(_v);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function getId(type){return type+"-"+(0,_v2.default)()}},526:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.interpretAst=exports.initialize=void 0;var _slicedToArray=function(){function sliceIterator(arr,i){var _arr=[];var _n=true;var _d=false;var _e=void 0;try{for(var _s,_i=arr[Symbol.iterator]();!(_n=(_s=_i.next()).done);_n=true){_arr.push(_s.value);if(i&&_arr.length===i)break}}catch(err){_d=true;_e=err}finally{try{!_n&&_i["return"]&&_i["return"]()}finally{if(_d)throw _e}}return _arr}return function(arr,i){if(Array.isArray(arr))return arr;if(Symbol.iterator in Object(arr))return sliceIterator(arr,i);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}();exports.initialize=(_ref=_asyncToGenerator(regeneratorRuntime.mark(function _callee(){return regeneratorRuntime.wrap(function _callee$(_context){while(1)switch(_context.prev=_context.next){case 0:socket=(0,_socket.getSocket)();socket.on("run",function(_ref2){var ast=_ref2.ast,context=_ref2.context,id=_ref2.id;var types=_types_registry.typesRegistry.toJS();var _serializeProvider=(0,_serialize.serializeProvider)(types),serialize=_serializeProvider.serialize,deserialize=_serializeProvider.deserialize;interpretAst(ast,deserialize(context)).then(function(value){socket.emit("resp:"+id,{value:serialize(value)})})});socket.emit("getFunctionList");socket.once("functionList",resolve);return _context.abrupt("return",functionList);case 5:case"end":return _context.stop()}},_callee,this)})),function initialize(){return _ref.apply(this,arguments)});var _ref;var interpretAst=exports.interpretAst=(_ref3=_asyncToGenerator(regeneratorRuntime.mark(function _callee2(ast,context){return regeneratorRuntime.wrap(function _callee2$(_context2){while(1)switch(_context2.prev=_context2.next){case 0:return _context2.abrupt("return",Promise.all([functionList,(0,_browser_registries.getBrowserRegistries)()]).then(function(_ref4){var _ref5=_slicedToArray(_ref4,1),serverFunctionList=_ref5[0];return(0,_socket_interpret.socketInterpreterProvider)({types:_types_registry.typesRegistry.toJS(),handlers:(0,_create_handlers.createHandlers)(socket),functions:_functions_registry.functionsRegistry.toJS(),referableFunctions:serverFunctionList,socket:socket})}).then(function(interpretFn){return interpretFn(ast,context)}));case 1:case"end":return _context2.stop()}},_callee2,this)})),function interpretAst(_x,_x2){return _ref3.apply(this,arguments)});var _ref3;var _socket_interpret=__webpack_require__(6047);var _serialize=__webpack_require__(2038);var _socket=__webpack_require__(2041);var _types_registry=__webpack_require__(805);var _create_handlers=__webpack_require__(6102);var _functions_registry=__webpack_require__(1174);var _browser_registries=__webpack_require__(808);function _asyncToGenerator(fn){return function(){var gen=fn.apply(this,arguments);return new Promise(function(resolve,reject){function step(key,arg){try{var info=gen[key](arg);var value=info.value}catch(error){reject(error);return}if(!info.done)return Promise.resolve(value).then(function(value){step("next",value)},function(err){step("throw",err)});resolve(value)}return step("next")})}}var socket=void 0;var resolve=void 0;var functionList=new Promise(function(_resolve){return resolve=_resolve})},527:function(module,exports,__webpack_require__){true;module.exports=Emitter;function Emitter(obj){if(obj)return mixin(obj)}function mixin(obj){for(var key in Emitter.prototype)obj[key]=Emitter.prototype[key];return obj}Emitter.prototype.on=Emitter.prototype.addEventListener=function(event,fn){this._callbacks=this._callbacks||{};(this._callbacks["$"+event]=this._callbacks["$"+event]||[]).push(fn);return this};Emitter.prototype.once=function(event,fn){function on(){this.off(event,on);fn.apply(this,arguments)}on.fn=fn;this.on(event,on);return this};Emitter.prototype.off=Emitter.prototype.removeListener=Emitter.prototype.removeAllListeners=Emitter.prototype.removeEventListener=function(event,fn){this._callbacks=this._callbacks||{};if(0==arguments.length){this._callbacks={};return this}var callbacks=this._callbacks["$"+event];if(!callbacks)return this;if(1==arguments.length){delete this._callbacks["$"+event];return this}var cb;for(var i=0;i<callbacks.length;i++){cb=callbacks[i];if(cb===fn||cb.fn===fn){callbacks.splice(i,1);break}}return this};Emitter.prototype.emit=function(event){this._callbacks=this._callbacks||{};var args=[].slice.call(arguments,1),callbacks=this._callbacks["$"+event];if(callbacks){callbacks=callbacks.slice(0);for(var i=0,len=callbacks.length;i<len;++i)callbacks[i].apply(this,args)}return this};Emitter.prototype.listeners=function(event){this._callbacks=this._callbacks||{};return this._callbacks["$"+event]||[]};Emitter.prototype.hasListeners=function(event){return!!this.listeners(event).length}},528:function(module,exports,__webpack_require__){(function(global){var keys=__webpack_require__(6060);var hasBinary=__webpack_require__(2048);var sliceBuffer=__webpack_require__(6062);var after=__webpack_require__(6063);var utf8=__webpack_require__(6064);var base64encoder;global&&global.ArrayBuffer&&(base64encoder=__webpack_require__(6065));var isAndroid="undefined"!==typeof navigator&&/Android/i.test(navigator.userAgent);var isPhantomJS="undefined"!==typeof navigator&&/PhantomJS/i.test(navigator.userAgent);var dontSendBlobs=isAndroid||isPhantomJS;exports.protocol=3;var packets=exports.packets={open:0,close:1,ping:2,pong:3,message:4,upgrade:5,noop:6};var packetslist=keys(packets);var err={type:"error",data:"parser error"};var Blob=__webpack_require__(6066);exports.encodePacket=function(packet,supportsBinary,utf8encode,callback){if("function"===typeof supportsBinary){callback=supportsBinary;supportsBinary=false}if("function"===typeof utf8encode){callback=utf8encode;utf8encode=null}var data=void 0===packet.data?void 0:packet.data.buffer||packet.data;if(global.ArrayBuffer&&data instanceof ArrayBuffer)return encodeArrayBuffer(packet,supportsBinary,callback);if(Blob&&data instanceof global.Blob)return encodeBlob(packet,supportsBinary,callback);if(data&&data.base64)return encodeBase64Object(packet,callback);var encoded=packets[packet.type];void 0!==packet.data&&(encoded+=utf8encode?utf8.encode(String(packet.data),{strict:false}):String(packet.data));return callback(""+encoded)};function encodeBase64Object(packet,callback){var message="b"+exports.packets[packet.type]+packet.data.data;return callback(message)}function encodeArrayBuffer(packet,supportsBinary,callback){if(!supportsBinary)return exports.encodeBase64Packet(packet,callback);var data=packet.data;var contentArray=new Uint8Array(data);var resultBuffer=new Uint8Array(1+data.byteLength);resultBuffer[0]=packets[packet.type];for(var i=0;i<contentArray.length;i++)resultBuffer[i+1]=contentArray[i];return callback(resultBuffer.buffer)}function encodeBlobAsArrayBuffer(packet,supportsBinary,callback){if(!supportsBinary)return exports.encodeBase64Packet(packet,callback);var fr=new FileReader;fr.onload=function(){packet.data=fr.result;exports.encodePacket(packet,supportsBinary,true,callback)};return fr.readAsArrayBuffer(packet.data)}function encodeBlob(packet,supportsBinary,callback){if(!supportsBinary)return exports.encodeBase64Packet(packet,callback);if(dontSendBlobs)return encodeBlobAsArrayBuffer(packet,supportsBinary,callback);var length=new Uint8Array(1);length[0]=packets[packet.type];var blob=new Blob([length.buffer,packet.data]);return callback(blob)}exports.encodeBase64Packet=function(packet,callback){var message="b"+exports.packets[packet.type];if(Blob&&packet.data instanceof global.Blob){var fr=new FileReader;fr.onload=function(){var b64=fr.result.split(",")[1];callback(message+b64)};return fr.readAsDataURL(packet.data)}var b64data;try{b64data=String.fromCharCode.apply(null,new Uint8Array(packet.data))}catch(e){var typed=new Uint8Array(packet.data);var basic=new Array(typed.length);for(var i=0;i<typed.length;i++)basic[i]=typed[i];b64data=String.fromCharCode.apply(null,basic)}message+=global.btoa(b64data);return callback(message)};exports.decodePacket=function(data,binaryType,utf8decode){if(void 0===data)return err;if("string"===typeof data){if("b"===data.charAt(0))return exports.decodeBase64Packet(data.substr(1),binaryType);if(utf8decode){data=tryDecode(data);if(false===data)return err}var type=data.charAt(0);if(Number(type)!=type||!packetslist[type])return err;return data.length>1?{type:packetslist[type],data:data.substring(1)}:{type:packetslist[type]}}var asArray=new Uint8Array(data);type=asArray[0];var rest=sliceBuffer(data,1);Blob&&"blob"===binaryType&&(rest=new Blob([rest]));return{type:packetslist[type],data:rest}};function tryDecode(data){try{data=utf8.decode(data,{strict:false})}catch(e){return false}return data}exports.decodeBase64Packet=function(msg,binaryType){var type=packetslist[msg.charAt(0)];if(!base64encoder)return{type:type,data:{base64:true,data:msg.substr(1)}};var data=base64encoder.decode(msg.substr(1));"blob"===binaryType&&Blob&&(data=new Blob([data]));return{type:type,data:data}};exports.encodePayload=function(packets,supportsBinary,callback){if("function"===typeof supportsBinary){callback=supportsBinary;supportsBinary=null}var isBinary=hasBinary(packets);if(supportsBinary&&isBinary){if(Blob&&!dontSendBlobs)return exports.encodePayloadAsBlob(packets,callback);return exports.encodePayloadAsArrayBuffer(packets,callback)}if(!packets.length)return callback("0:");function setLengthHeader(message){return message.length+":"+message}function encodeOne(packet,doneCallback){exports.encodePacket(packet,!!isBinary&&supportsBinary,false,function(message){doneCallback(null,setLengthHeader(message))})}map(packets,encodeOne,function(err,results){return callback(results.join(""))})};function map(ary,each,done){var result=new Array(ary.length);var next=after(ary.length,done);var eachWithIndex=function(i,el,cb){each(el,function(error,msg){result[i]=msg;cb(error,result)})};for(var i=0;i<ary.length;i++)eachWithIndex(i,ary[i],next)}exports.decodePayload=function(data,binaryType,callback){if("string"!==typeof data)return exports.decodePayloadAsBinary(data,binaryType,callback);if("function"===typeof binaryType){callback=binaryType;binaryType=null}var packet;if(""===data)return callback(err,0,1);var n,msg,length="";for(var i=0,l=data.length;i<l;i++){var chr=data.charAt(i);if(":"!==chr){length+=chr;continue}if(""===length||length!=(n=Number(length)))return callback(err,0,1);msg=data.substr(i+1,n);if(length!=msg.length)return callback(err,0,1);if(msg.length){packet=exports.decodePacket(msg,binaryType,false);if(err.type===packet.type&&err.data===packet.data)return callback(err,0,1);var ret=callback(packet,i+n,l);if(false===ret)return}i+=n;length=""}if(""!==length)return callback(err,0,1)};exports.encodePayloadAsArrayBuffer=function(packets,callback){if(!packets.length)return callback(new ArrayBuffer(0));function encodeOne(packet,doneCallback){exports.encodePacket(packet,true,true,function(data){return doneCallback(null,data)})}map(packets,encodeOne,function(err,encodedPackets){var totalLength=encodedPackets.reduce(function(acc,p){var len;len="string"===typeof p?p.length:p.byteLength;return acc+len.toString().length+len+2},0);var resultArray=new Uint8Array(totalLength);var bufferIndex=0;encodedPackets.forEach(function(p){var isString="string"===typeof p;var ab=p;if(isString){var view=new Uint8Array(p.length);for(var i=0;i<p.length;i++)view[i]=p.charCodeAt(i);ab=view.buffer}resultArray[bufferIndex++]=isString?0:1;var lenStr=ab.byteLength.toString();for(i=0;i<lenStr.length;i++)resultArray[bufferIndex++]=parseInt(lenStr[i]);resultArray[bufferIndex++]=255;view=new Uint8Array(ab);for(i=0;i<view.length;i++)resultArray[bufferIndex++]=view[i]});return callback(resultArray.buffer)})};exports.encodePayloadAsBlob=function(packets,callback){function encodeOne(packet,doneCallback){exports.encodePacket(packet,true,true,function(encoded){var binaryIdentifier=new Uint8Array(1);binaryIdentifier[0]=1;if("string"===typeof encoded){var view=new Uint8Array(encoded.length);for(var i=0;i<encoded.length;i++)view[i]=encoded.charCodeAt(i);encoded=view.buffer;binaryIdentifier[0]=0}var len=encoded instanceof ArrayBuffer?encoded.byteLength:encoded.size;var lenStr=len.toString();var lengthAry=new Uint8Array(lenStr.length+1);for(i=0;i<lenStr.length;i++)lengthAry[i]=parseInt(lenStr[i]);lengthAry[lenStr.length]=255;if(Blob){var blob=new Blob([binaryIdentifier.buffer,lengthAry.buffer,encoded]);doneCallback(null,blob)}})}map(packets,encodeOne,function(err,results){return callback(new Blob(results))})};exports.decodePayloadAsBinary=function(data,binaryType,callback){if("function"===typeof binaryType){callback=binaryType;binaryType=null}var bufferTail=data;var buffers=[];while(bufferTail.byteLength>0){var tailArray=new Uint8Array(bufferTail);var isString=0===tailArray[0];var msgLength="";for(var i=1;;i++){if(255===tailArray[i])break;if(msgLength.length>310)return callback(err,0,1);msgLength+=tailArray[i]}bufferTail=sliceBuffer(bufferTail,2+msgLength.length);msgLength=parseInt(msgLength);var msg=sliceBuffer(bufferTail,0,msgLength);if(isString)try{msg=String.fromCharCode.apply(null,new Uint8Array(msg))}catch(e){var typed=new Uint8Array(msg);msg="";for(i=0;i<typed.length;i++)msg+=String.fromCharCode(typed[i])}buffers.push(msg);bufferTail=sliceBuffer(bufferTail,msgLength)}var total=buffers.length;buffers.forEach(function(buffer,i){callback(exports.decodePacket(buffer,binaryType,true),i,total)})}}).call(exports,__webpack_require__(23))},529:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.ColorPickerMini=void 0;var _recompose=__webpack_require__(24);var _color_picker_mini=__webpack_require__(6174);exports.ColorPickerMini=(0,_recompose.pure)(_color_picker_mini.ColorPickerMini)},54:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var _extends=Object.assign||function(target){for(var i=1;i<arguments.length;i++){var source=arguments[i];for(var key in source)Object.prototype.hasOwnProperty.call(source,key)&&(target[key]=source[key])}return target};exports.getWorkpad=getWorkpad;exports.getWorkpadPersisted=getWorkpadPersisted;exports.getWorkpadInfo=getWorkpadInfo;exports.isWriteable=isWriteable;exports.getSelectedPageIndex=getSelectedPageIndex;exports.getSelectedPage=getSelectedPage;exports.getPages=getPages;exports.getPageById=getPageById;exports.getPageIndexById=getPageIndexById;exports.getWorkpadName=getWorkpadName;exports.getWorkpadColors=getWorkpadColors;exports.getAllElements=getAllElements;exports.getGlobalFilterExpression=getGlobalFilterExpression;exports.getSelectedElementId=getSelectedElementId;exports.getSelectedElement=getSelectedElement;exports.getElements=getElements;exports.getElementById=getElementById;exports.getResolvedArgs=getResolvedArgs;exports.getSelectedResolvedArgs=getSelectedResolvedArgs;exports.getContextForIndex=getContextForIndex;exports.getRefreshInterval=getRefreshInterval;var _lodash=__webpack_require__(1);var _ast=__webpack_require__(343);var _modify_path=__webpack_require__(803);var _assets=__webpack_require__(524);var workpadRoot="persistent.workpad";var appendAst=function appendAst(element){return _extends({},element,{ast:(0,_ast.safeElementFromExpression)(element.expression)})};function getWorkpad(state){return(0,_lodash.get)(state,workpadRoot)}function getWorkpadPersisted(state){return _extends({},getWorkpad(state),{assets:(0,_assets.getAssets)(state)})}function getWorkpadInfo(state){return(0,_lodash.omit)(getWorkpad(state),["pages"])}function isWriteable(state){return(0,_lodash.get)(state,(0,_modify_path.append)(workpadRoot,"isWriteable"),true)}function getSelectedPageIndex(state){return(0,_lodash.get)(state,(0,_modify_path.append)(workpadRoot,"page"))}function getSelectedPage(state){var pageIndex=getSelectedPageIndex(state);var pages=getPages(state);return(0,_lodash.get)(pages,"["+pageIndex+"].id")}function getPages(state){return(0,_lodash.get)(state,(0,_modify_path.append)(workpadRoot,"pages"),[])}function getPageById(state,id){var pages=getPages(state);return pages.find(function(page){return page.id===id})}function getPageIndexById(state,id){var pages=getPages(state);return pages.findIndex(function(page){return page.id===id})}function getWorkpadName(state){return(0,_lodash.get)(state,(0,_modify_path.append)(workpadRoot,"name"))}function getWorkpadColors(state){return(0,_lodash.get)(state,(0,_modify_path.append)(workpadRoot,"colors"))}function getAllElements(state){return getPages(state).reduce(function(elements,page){return elements.concat(page.elements)},[])}function getGlobalFilterExpression(state){return getAllElements(state).map(function(el){return el.filter}).filter(function(str){return null!=str&&str.length}).join(" | ")}function getSelectedElementId(state){return(0,_lodash.get)(state,"transient.selectedElement")}function getSelectedElement(state){return getElementById(state,getSelectedElementId(state))}function getElements(state,pageId){var withAst=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];var id=pageId||getSelectedPage(state);if(!id)return[];var page=getPageById(state,id);var elements=(0,_lodash.get)(page,"elements");if(!elements)return[];if(!withAst)return elements.map(function(el){return(0,_lodash.omit)(el,["ast"])});return elements.map(appendAst)}function getElementById(state,id,pageId){var element=getElements(state,pageId,[]).find(function(el){return el.id===id});if(element)return appendAst(element)}function getResolvedArgs(state,elementId,path){if(!elementId)return;var args=(0,_lodash.get)(state,["transient","resolvedArgs",elementId]);if(path)return(0,_lodash.get)(args,path);return args}function getSelectedResolvedArgs(state,path){return getResolvedArgs(state,getSelectedElementId(state),path)}function getContextForIndex(state,index){return getSelectedResolvedArgs(state,["expressionContext",index-1])}function getRefreshInterval(state){return(0,_lodash.get)(state,"transient.refresh.interval",0)}},6028:function(module,exports,__webpack_require__){"use strict";__webpack_require__(132);__webpack_require__(134);__webpack_require__(135);__webpack_require__(136);__webpack_require__(137);__webpack_require__(138);__webpack_require__(139);__webpack_require__(140);__webpack_require__(141);__webpack_require__(142);__webpack_require__(143);__webpack_require__(144);__webpack_require__(145);__webpack_require__(146);__webpack_require__(147);__webpack_require__(148);__webpack_require__(149);__webpack_require__(150);__webpack_require__(151);__webpack_require__(152);__webpack_require__(153);__webpack_require__(154);__webpack_require__(155);__webpack_require__(156);__webpack_require__(157);__webpack_require__(158);__webpack_require__(159);__webpack_require__(160);__webpack_require__(161);__webpack_require__(162);__webpack_require__(163);__webpack_require__(164);__webpack_require__(165);__webpack_require__(166);__webpack_require__(167);__webpack_require__(168);__webpack_require__(169);__webpack_require__(170);__webpack_require__(171);__webpack_require__(172);__webpack_require__(173);__webpack_require__(174);__webpack_require__(175);__webpack_require__(176);__webpack_require__(177);__webpack_require__(178);__webpack_require__(179);__webpack_require__(180);__webpack_require__(181);__webpack_require__(182);__webpack_require__(183);__webpack_require__(110);__webpack_require__(184);__webpack_require__(185);__webpack_require__(186);__webpack_require__(187);__webpack_require__(188);__webpack_require__(189);__webpack_require__(190);__webpack_require__(191);__webpack_require__(192);__webpack_require__(193);__webpack_require__(194);__webpack_require__(195);__webpack_require__(196);__webpack_require__(197);__webpack_require__(198);__webpack_require__(199);__webpack_require__(200);__webpack_require__(201);__webpack_require__(202);__webpack_require__(203);__webpack_require__(204);__webpack_require__(205);__webpack_require__(206);__webpack_require__(207);__webpack_require__(208);__webpack_require__(209);__webpack_require__(210);__webpack_require__(211);__webpack_require__(212);__webpack_require__(213);__webpack_require__(214);__webpack_require__(215);__webpack_require__(216);__webpack_require__(217);__webpack_require__(218);__webpack_require__(219);__webpack_require__(220);__webpack_require__(221);var _i18n=__webpack_require__(18);var _kibanaCore__=__webpack_require__(222);var injectedMetadata=JSON.parse(document.querySelector("kbn-injected-metadata").getAttribute("data"));_i18n.i18n.init(injectedMetadata.legacyMetadata.translations);new _kibanaCore__.CoreSystem({injectedMetadata:injectedMetadata,rootDomElement:document.body,requireLegacyFiles:function requireLegacyFiles(){__webpack_require__(6029)}}).start()},6029:function(module,exports,__webpack_require__){"use strict";__webpack_require__(258);var _chrome=__webpack_require__(9);var _chrome2=_interopRequireDefault(_chrome);__webpack_require__(6030);__webpack_require__(6033);var _controllers=__webpack_require__(6341);__webpack_require__(1089);__webpack_require__(1114);__webpack_require__(1115);__webpack_require__(1117);__webpack_require__(489);__webpack_require__(6351);__webpack_require__(488);__webpack_require__(6352);__webpack_require__(6378);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}_chrome2.default.setRootController("canvas",_controllers.CanvasRootController)},6030:function(module,exports,__webpack_require__){"use strict";__webpack_require__(6031);__webpack_require__(6032)},6031:function(module,exports,__webpack_require__){"use strict";var _modules=__webpack_require__(3);var app=_modules.uiModules.get("apps/canvas");app.config(function(stateManagementConfigProvider){stateManagementConfigProvider.disable()})},6032:function(module,exports,__webpack_require__){"use strict";var _modules=__webpack_require__(3);var app=_modules.uiModules.get("apps/canvas");app.config(function($locationProvider){$locationProvider.html5Mode({enabled:false,requireBase:false,rewriteLinks:false})})},6033:function(module,exports,__webpack_require__){"use strict";__webpack_require__(6034)},6034:function(module,exports,__webpack_require__){"use strict";var _modules=__webpack_require__(3);var _store=__webpack_require__(1162);var _initial_state=__webpack_require__(6340);var app=_modules.uiModules.get("apps/canvas");app.service("canvasStore",function(kbnVersion,basePath,reportingBrowserType,serverFunctions){var initialState=(0,_initial_state.getInitialState)();initialState.app={kbnVersion:kbnVersion,basePath:basePath,reportingBrowserType:reportingBrowserType,serverFunctions:serverFunctions,ready:false};var store=(0,_store.createStore)(initialState);window.canvasStore=store;return store})},6035:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.middleware=void 0;var _redux=__webpack_require__(53);var _reduxThunk=__webpack_require__(434);var _reduxThunk2=_interopRequireDefault(_reduxThunk);var _get_window=__webpack_require__(385);var _aeroelastic=__webpack_require__(6036);var _es_persist=__webpack_require__(6103);var _fullscreen=__webpack_require__(6121);var _history=__webpack_require__(6123);var _in_flight=__webpack_require__(6327);var _workpad_update=__webpack_require__(6328);var _workpad_refresh=__webpack_require__(6329);var _app_ready=__webpack_require__(6330);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var middlewares=[(0,_redux.applyMiddleware)(_reduxThunk2.default,_es_persist.esPersistMiddleware,_history.historyMiddleware,_aeroelastic.aeroelastic,_fullscreen.fullscreen,_in_flight.inFlight,_app_ready.appReady,_workpad_update.workpadUpdate,_workpad_refresh.workpadRefresh)];(0,_get_window.getWindow)().__REDUX_DEVTOOLS_EXTENSION__&&middlewares.push((0,_get_window.getWindow)().__REDUX_DEVTOOLS_EXTENSION__());exports.middleware=_redux.compose.apply(void 0,middlewares)},6036:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.aeroelastic=void 0;var _extends=Object.assign||function(target){for(var i=1;i<arguments.length;i++){var source=arguments[i];for(var key in source)Object.prototype.hasOwnProperty.call(source,key)&&(target[key]=source[key])}return target};var _recompose=__webpack_require__(24);var _aeroelastic_kibana=__webpack_require__(2032);var _matrix=__webpack_require__(802);var _functional=__webpack_require__(1164);var _elements=__webpack_require__(109);var _history=__webpack_require__(631);var _transient=__webpack_require__(345);var _pages2=__webpack_require__(441);var _app=__webpack_require__(812);var _workpad=__webpack_require__(233);var _workpad2=__webpack_require__(54);var elementToShape=function elementToShape(element,i){var position=element.position;var a=position.width/2;var b=position.height/2;var cx=position.left+a;var cy=position.top+b;var z=i;var angleRadians=-position.angle/180*Math.PI;var transformMatrix=_aeroelastic_kibana.aeroelastic.matrix.multiply(_aeroelastic_kibana.aeroelastic.matrix.translate(cx,cy,z),_aeroelastic_kibana.aeroelastic.matrix.rotateZ(angleRadians));return{id:element.id,parent:null,localTransformMatrix:transformMatrix,transformMatrix:transformMatrix,a:a,b:b}};var updateGlobalPositions=function updateGlobalPositions(setMultiplePositions,_ref,elems){var shapes=_ref.shapes,gestureEnd=_ref.gestureEnd;var repositionings=shapes.map(function(shape,i){var elemPos=elems[i]&&elems[i].position;if(elemPos&&gestureEnd){var oldProps={left:elemPos.left,top:elemPos.top,width:elemPos.width,height:elemPos.height,angle:Math.round(elemPos.angle)};var newProps={left:shape.transformMatrix[12]-shape.a,top:shape.transformMatrix[13]-shape.b,width:2*shape.a,height:2*shape.b,angle:Math.round((0,_matrix.matrixToAngle)(shape.transformMatrix))};1/newProps.angle===-Infinity&&(newProps.angle=0);return(0,_recompose.shallowEqual)(oldProps,newProps)?null:{position:newProps,elementId:shape.id}}}).filter(_functional.identity);repositionings.length&&setMultiplePositions(repositionings)};var id=function id(element){return element.id};exports.aeroelastic=function aeroelastic(_ref2){var dispatch=_ref2.dispatch,getState=_ref2.getState;var onChangeCallback=function onChangeCallback(_ref3){var state=_ref3.state;var nextScene=state.currentScene;if(!nextScene.gestureEnd)return;var page=(0,_workpad2.getSelectedPage)(getState());var elements=(0,_workpad2.getElements)(getState(),page);var selectedElement=(0,_workpad2.getSelectedElement)(getState());updateGlobalPositions(function(positions){return dispatch((0,_elements.setMultiplePositions)(positions.map(function(p){return _extends({},p,{pageId:page})})))},nextScene,elements);var selectedShape=nextScene.selectedPrimaryShapes[0];1===nextScene.selectedShapes.length?selectedShape&&selectedShape!==selectedElement&&dispatch((0,_transient.selectElement)(selectedShape)):dispatch((0,_transient.selectElement)(null))};var createStore=function createStore(page){return _aeroelastic_kibana.aeroelastic.createStore({shapeAdditions:[],primaryUpdate:null,currentScene:{shapes:[]}},onChangeCallback,page)};var populateWithElements=function populateWithElements(page){return _aeroelastic_kibana.aeroelastic.commit(page,"restateShapesEvent",{newShapes:(0,_workpad2.getElements)(getState(),page).map(elementToShape)},{silent:true})};var selectShape=function selectShape(page,id){_aeroelastic_kibana.aeroelastic.commit(page,"shapeSelect",{shapes:[id]})};var unselectShape=function unselectShape(page){_aeroelastic_kibana.aeroelastic.commit(page,"shapeSelect",{shapes:[]})};return function(next){return function(action){var prevPage=(0,_workpad2.getSelectedPage)(getState());var prevElements=(0,_workpad2.getElements)(getState(),prevPage);if(action.type===_workpad.setWorkpad.toString()){var pages=action.payload.pages;_aeroelastic_kibana.aeroelastic.clearStores();pages.map(function(p){return p.id}).forEach(createStore)}if(action.type===_history.restoreHistory.toString()){_aeroelastic_kibana.aeroelastic.clearStores();action.payload.workpad.pages.map(function(p){return p.id}).forEach(createStore)}if(action.type===_app.appReady.toString()){var _pages=(0,_workpad2.getPages)(getState());_aeroelastic_kibana.aeroelastic.clearStores();_pages.map(function(p){return p.id}).forEach(createStore)}var lastPageRemoved=false;if(action.type===_pages2.removePage.toString()){var preRemoveState=getState();(0,_workpad2.getPages)(preRemoveState).length<=1&&(lastPageRemoved=true);_aeroelastic_kibana.aeroelastic.removeStore(action.payload)}next(action);switch(action.type){case _app.appReady.toString():case _history.restoreHistory.toString():case _workpad.setWorkpad.toString():(0,_workpad2.getPages)(getState()).map(function(p){return p.id}).forEach(populateWithElements);break;case _pages2.addPage.toString():case _pages2.duplicatePage.toString():var newPage=(0,_workpad2.getSelectedPage)(getState());createStore(newPage);action.type===_pages2.duplicatePage.toString()&&dispatch((0,_elements.fetchAllRenderables)());populateWithElements(newPage);break;case _pages2.removePage.toString():var postRemoveState=getState();if(lastPageRemoved){var freshPage=(0,_workpad2.getSelectedPage)(postRemoveState);createStore(freshPage)}break;case _transient.selectElement.toString():action.payload?selectShape(prevPage,action.payload):unselectShape(prevPage);break;case _elements.removeElements.toString():case _elements.addElement.toString():case _elements.duplicateElement.toString():case _elements.elementLayer.toString():case _elements.setMultiplePositions.toString():var page=(0,_workpad2.getSelectedPage)(getState());var elements=(0,_workpad2.getElements)(getState(),page);var shouldResetState=prevPage!==page||!(0,_recompose.shallowEqual)(prevElements.map(id),elements.map(id));shouldResetState&&populateWithElements(page);action.type!==_elements.setMultiplePositions.toString()&&unselectShape(prevPage)}}}}},6037:function(module,exports,__webpack_require__){"use strict";var hasOwnProperty=Object.prototype.hasOwnProperty;function is(x,y){return x===y?0!==x||0!==y||1/x===1/y:x!==x&&y!==y}function shallowEqual(objA,objB){if(is(objA,objB))return true;if("object"!==typeof objA||null===objA||"object"!==typeof objB||null===objB)return false;var keysA=Object.keys(objA);var keysB=Object.keys(objB);if(keysA.length!==keysB.length)return false;for(var i=0;i<keysA.length;i++)if(!hasOwnProperty.call(objB,keysA[i])||!is(objA[keysA[i]],objB[keysA[i]]))return false;return true}module.exports=shallowEqual},6038:function(module,exports,__webpack_require__){"use strict";var REACT_STATICS={childContextTypes:true,contextTypes:true,defaultProps:true,displayName:true,getDefaultProps:true,getDerivedStateFromProps:true,mixins:true,propTypes:true,type:true};var KNOWN_STATICS={name:true,length:true,prototype:true,caller:true,callee:true,arguments:true,arity:true};var defineProperty=Object.defineProperty;var getOwnPropertyNames=Object.getOwnPropertyNames;var getOwnPropertySymbols=Object.getOwnPropertySymbols;var getOwnPropertyDescriptor=Object.getOwnPropertyDescriptor;var getPrototypeOf=Object.getPrototypeOf;var objectPrototype=getPrototypeOf&&getPrototypeOf(Object);function hoistNonReactStatics(targetComponent,sourceComponent,blacklist){if("string"!==typeof sourceComponent){if(objectPrototype){var inheritedComponent=getPrototypeOf(sourceComponent);inheritedComponent&&inheritedComponent!==objectPrototype&&hoistNonReactStatics(targetComponent,inheritedComponent,blacklist)}var keys=getOwnPropertyNames(sourceComponent);getOwnPropertySymbols&&(keys=keys.concat(getOwnPropertySymbols(sourceComponent)));for(var i=0;i<keys.length;++i){var key=keys[i];if(!REACT_STATICS[key]&&!KNOWN_STATICS[key]&&(!blacklist||!blacklist[key])){var descriptor=getOwnPropertyDescriptor(sourceComponent,key);try{defineProperty(targetComponent,key,descriptor)}catch(e){}}}return targetComponent}return targetComponent}module.exports=hoistNonReactStatics},6039:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.createChangeEmitter=function createChangeEmitter(){var currentListeners=[];var nextListeners=currentListeners;function ensureCanMutateNextListeners(){nextListeners===currentListeners&&(nextListeners=currentListeners.slice())}function listen(listener){if("function"!==typeof listener)throw new Error("Expected listener to be a function.");var isSubscribed=true;ensureCanMutateNextListeners();nextListeners.push(listener);return function(){if(!isSubscribed)return;isSubscribed=false;ensureCanMutateNextListeners();var index=nextListeners.indexOf(listener);nextListeners.splice(index,1)}}function emit(){currentListeners=nextListeners;var listeners=currentListeners;for(var i=0;i<listeners.length;i++)listeners[i].apply(listeners,arguments)}return{listen:listen,emit:emit}}},6040:function(module,exports,__webpack_require__){"use strict";var matrixToCSS=function matrixToCSS(transformMatrix){return transformMatrix?"matrix3d("+transformMatrix.join(",")+")":"translate3d(0,0,0)"};var px=function px(value){return 0===value?"0":value+"px"};module.exports={matrixToCSS:matrixToCSS,px:px}},6041:function(module,exports,__webpack_require__){"use strict";var _slicedToArray=function(){function sliceIterator(arr,i){var _arr=[];var _n=true;var _d=false;var _e=void 0;try{for(var _s,_i=arr[Symbol.iterator]();!(_n=(_s=_i.next()).done);_n=true){_arr.push(_s.value);if(i&&_arr.length===i)break}}catch(err){_d=true;_e=err}finally{try{!_n&&_i["return"]&&_i["return"]()}finally{if(_d)throw _e}}return _arr}return function(arr,i){if(Array.isArray(arr))return arr;if(Symbol.iterator in Object(arr))return sliceIterator(arr,i);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}();var _extends=Object.assign||function(target){for(var i=1;i<arguments.length;i++){var source=arguments[i];for(var key in source)Object.prototype.hasOwnProperty.call(source,key)&&(target[key]=source[key])}return target};function _toConsumableArray(arr){if(Array.isArray(arr)){for(var i=0,arr2=Array(arr.length);i<arr.length;i++)arr2[i]=arr[i];return arr2}return Array.from(arr)}var _require=__webpack_require__(1163),select=_require.select,makeUid=_require.makeUid;var _require2=__webpack_require__(2034),dragging=_require2.dragging,dragVector=_require2.dragVector,cursorPosition=_require2.cursorPosition,gestureEnd=_require2.gestureEnd,metaHeld=_require2.metaHeld,mouseButton=_require2.mouseButton,mouseDowned=_require2.mouseDowned,mouseIsDown=_require2.mouseIsDown,optionHeld=_require2.optionHeld,pressedKeys=_require2.pressedKeys,shiftHeld=_require2.shiftHeld;var _require3=__webpack_require__(2033),shapesAt=_require3.shapesAt,landmarkPoint=_require3.landmarkPoint;var matrix=__webpack_require__(802);var matrix2d=__webpack_require__(6042);var config=__webpack_require__(6043);var _require4=__webpack_require__(1164),applyTolerance=_require4.applyTolerance,disjunctiveUnion=_require4.disjunctiveUnion,identity=_require4.identity,flatten=_require4.flatten,mean=_require4.mean,not=_require4.not,removeDuplicates=_require4.removeDuplicates,shallowEqual=_require4.shallowEqual;var primaryUpdate=function primaryUpdate(state){return state.primaryUpdate};var scene=function scene(state){return state.currentScene};var draggingShape=function draggingShape(_ref,hoveredShape,down,mouseDowned){var draggedShape=_ref.draggedShape,shapes=_ref.shapes;var dragInProgress=down&&shapes.reduce(function(prev,next){return prev||draggedShape&&next.id===draggedShape.id},false);var result=dragInProgress&&draggedShape||down&&mouseDowned&&hoveredShape;return result};var shapes=select(function(scene){return scene.shapes})(scene);var hoveredShapes=select(function(shapes,cursorPosition){return shapesAt(shapes.filter(function(s){return("annotation"!==s.type||s.interactive)&&(config.intraGroupManipulation||!s.parent||"annotation"===s.type)}),cursorPosition)})(shapes,cursorPosition);var depthIndex=0;var hoveredShape=select(function(hoveredShapes){return hoveredShapes.length?hoveredShapes[depthIndex]:null})(hoveredShapes);var draggedShape=select(draggingShape)(scene,hoveredShape,mouseIsDown,mouseDowned);var focusedShape=select(function(draggedShape,hoveredShape){return draggedShape||hoveredShape})(draggedShape,hoveredShape);var focusedShapes=select(function(shapes,focusedShape){return shapes.filter(function(shape){return focusedShape&&shape.id===focusedShape.id})})(shapes,focusedShape);var keyTransformGesture=select(function(keys){return config.shortcuts?Object.keys(keys).map(function(keypress){switch(keypress){case"KeyW":return{transform:matrix.translate(0,-5,0)};case"KeyA":return{transform:matrix.translate(-5,0,0)};case"KeyS":return{transform:matrix.translate(0,5,0)};case"KeyD":return{transform:matrix.translate(5,0,0)};case"KeyF":return{transform:matrix.translate(0,0,-20)};case"KeyC":return{transform:matrix.translate(0,0,20)};case"KeyX":return{transform:matrix.rotateX(Math.PI/45)};case"KeyY":return{transform:matrix.rotateY(Math.PI/45/1.3)};case"KeyZ":return{transform:matrix.rotateZ(Math.PI/45/1.6)};case"KeyI":return{transform:matrix.scale(1,1.05,1)};case"KeyJ":return{transform:matrix.scale(1/1.05,1,1)};case"KeyK":return{transform:matrix.scale(1,1/1.05,1)};case"KeyL":return{transform:matrix.scale(1.05,1,1)};case"KeyP":return{transform:matrix.perspective(2e3)};case"KeyR":return{transform:matrix.shear(.1,0)};case"KeyT":return{transform:matrix.shear(-.1,0)};case"KeyU":return{transform:matrix.shear(0,.1)};case"KeyH":return{transform:matrix.shear(0,-.1)};case"KeyM":return{transform:matrix.UNITMATRIX,sizes:[1,0,0,0,1,0,10,0,1]};case"Backspace":case"Delete":return{transform:matrix.UNITMATRIX,delete:true}}}).filter(identity):[]})(pressedKeys);var alterSnapGesture=select(function(metaHeld){return metaHeld?["relax"]:[]})(metaHeld);var multiselectModifier=shiftHeld;var initialTransformTuple={deltaX:0,deltaY:0,transform:null,cumulativeTransform:null};var mouseTransformGesturePrev=select(function(_ref2){var mouseTransformState=_ref2.mouseTransformState;return mouseTransformState||initialTransformTuple})(scene);var mouseTransformState=select(function(prev,dragging,_ref3){var x0=_ref3.x0,y0=_ref3.y0,x1=_ref3.x1,y1=_ref3.y1;if(dragging){var deltaX=x1-x0;var deltaY=y1-y0;var transform=matrix.translate(deltaX-prev.deltaX,deltaY-prev.deltaY,0);var cumulativeTransform=matrix.translate(deltaX,deltaY,0);return{deltaX:deltaX,deltaY:deltaY,transform:transform,cumulativeTransform:cumulativeTransform}}return initialTransformTuple})(mouseTransformGesturePrev,dragging,dragVector);var mouseTransformGesture=select(function(tuple){return[tuple].filter(function(tuple){return tuple.transform}).map(function(_ref4){var transform=_ref4.transform,cumulativeTransform=_ref4.cumulativeTransform;return{transform:transform,cumulativeTransform:cumulativeTransform}})})(mouseTransformState);var transformGestures=select(function(keyTransformGesture,mouseTransformGesture){return keyTransformGesture.concat(mouseTransformGesture)})(keyTransformGesture,mouseTransformGesture);var restateShapesEvent=select(function(action){return action&&"restateShapesEvent"===action.type?action.payload:null})(primaryUpdate);var directSelect=select(function(action){return action&&"shapeSelect"===action.type?action.payload:null})(primaryUpdate);var selectedShapeObjects=select(function(scene){return scene.selectedShapeObjects||[]})(scene);var singleSelect=function singleSelect(prev,hoveredShapes,metaHeld,uid){var down=true;var depthIndex=config.depthSelect&&metaHeld?(prev.depthIndex+(down&&!prev.down?1:0))%hoveredShapes.length:0;return{shapes:hoveredShapes.length?[hoveredShapes[depthIndex]]:[],uid:uid,depthIndex:hoveredShapes.length?depthIndex:0,down:down}};var multiSelect=function multiSelect(prev,hoveredShapes,metaHeld,uid,selectedShapeObjects){var shapes=hoveredShapes.length>0?disjunctiveUnion(function(shape){return shape.id},selectedShapeObjects,hoveredShapes.slice(0,1)):[];return{shapes:shapes,uid:uid,depthIndex:0,down:false}};var selectedShapesPrev=select(function(scene){return scene.selectionState||{shapes:[],uid:null,depthIndex:0,down:false}})(scene);var reselectShapes=function reselectShapes(allShapes,shapes){return shapes.map(function(id){return allShapes.find(function(shape){return shape.id===id})})};var contentShape=function contentShape(allShapes){return function(shape){return"annotation"===shape.type?contentShape(allShapes)(allShapes.find(function(s){return s.id===shape.parent})):shape}};var contentShapes=function contentShapes(allShapes,shapes){return shapes.map(contentShape(allShapes))};var selectionState=select(function(prev,selectedShapeObjects,hoveredShapes,_ref5,metaHeld,multiselect,directSelect,allShapes){var down=_ref5.down,uid=_ref5.uid;var uidUnchanged=uid===prev.uid;var mouseButtonUp=!down;var updateFromDirectSelect=directSelect&&directSelect.shapes&&!shallowEqual(directSelect.shapes,selectedShapeObjects.map(function(shape){return shape.id}));if(updateFromDirectSelect)return{shapes:reselectShapes(allShapes,directSelect.shapes),uid:directSelect.uid,depthIndex:prev.depthIndex,down:prev.down};selectedShapeObjects&&(prev.shapes=selectedShapeObjects.slice());if(mouseButtonUp||uidUnchanged&&!directSelect)return _extends({},prev,{down:down,uid:uid,metaHeld:metaHeld});var selectFunction=config.singleSelect||!multiselect?singleSelect:multiSelect;return selectFunction(prev,hoveredShapes,metaHeld,uid,selectedShapeObjects)})(selectedShapesPrev,selectedShapeObjects,hoveredShapes,mouseButton,metaHeld,multiselectModifier,directSelect,shapes);var selectedShapes=select(function(selectionTuple){return selectionTuple.shapes})(selectionState);var selectedShapeIds=select(function(shapes){return shapes.map(function(shape){return shape.id})})(selectedShapes);var primaryShape=function primaryShape(shape){return shape.parent||shape.id};var selectedPrimaryShapeIds=select(function(shapes){return shapes.map(primaryShape)})(selectedShapes);var rotationManipulation=function rotationManipulation(_ref6){var shape=_ref6.shape,directShape=_ref6.directShape,_ref6$cursorPosition=_ref6.cursorPosition,x=_ref6$cursorPosition.x,y=_ref6$cursorPosition.y,alterSnapGesture=_ref6.alterSnapGesture;if(!shape||!directShape)return{transforms:[],shapes:[]};var center=shape.transformMatrix;var centerPosition=matrix.mvMultiply(center,matrix.ORIGIN);var vector=matrix.mvMultiply(matrix.multiply(center,directShape.localTransformMatrix),matrix.ORIGIN);var oldAngle=Math.atan2(centerPosition[1]-vector[1],centerPosition[0]-vector[0]);var newAngle=Math.atan2(centerPosition[1]-y,centerPosition[0]-x);var closest45deg=Math.round(newAngle/(Math.PI/4))*Math.PI/4;var radius=Math.sqrt(Math.pow(centerPosition[0]-x,2)+Math.pow(centerPosition[1]-y,2));var closest45degPosition=[Math.cos(closest45deg)*radius,Math.sin(closest45deg)*radius];var pixelDifference=Math.sqrt(Math.pow(closest45degPosition[0]-(centerPosition[0]-x),2)+Math.pow(closest45degPosition[1]-(centerPosition[1]-y),2));var relaxed=-1!==alterSnapGesture.indexOf("relax");var newSnappedAngle=pixelDifference<config.rotateSnapInPixels&&!relaxed?closest45deg:newAngle;var result=matrix.rotateZ(oldAngle-newSnappedAngle);return{transforms:[result],shapes:[shape.id]}};var resizeMultiplierHorizontal={left:-1,center:0,right:1};var resizeMultiplierVertical={top:-1,center:0,bottom:1};var xNames={"-1":"left",0:"center",1:"right"};var yNames={"-1":"top",0:"center",1:"bottom"};var minimumSize=function minimumSize(_ref7,vector){var a=_ref7.a,b=_ref7.b,baseAB=_ref7.baseAB;var min=config.minimumElementSize;return[Math.max(baseAB?min-baseAB[0]:min-a,vector[0]),Math.max(baseAB?min-baseAB[1]:min-b,vector[1])]};var centeredResizeManipulation=function centeredResizeManipulation(_ref8){var gesture=_ref8.gesture,shape=_ref8.shape,directShape=_ref8.directShape;var transform=gesture.cumulativeTransform;if(!shape||!directShape)return{transforms:[],shapes:[]};var vector=matrix.mvMultiply(matrix.multiply(matrix.invert(matrix.compositeComponent(shape.localTransformMatrix)),transform),matrix.ORIGIN);var orientationMask=[resizeMultiplierHorizontal[directShape.horizontalPosition],resizeMultiplierVertical[directShape.verticalPosition],0];var orientedVector=matrix2d.componentProduct(vector,orientationMask);var cappedOrientedVector=minimumSize(shape,orientedVector);return{cumulativeTransforms:[],cumulativeSizes:[gesture.sizes||matrix2d.translate.apply(matrix2d,_toConsumableArray(cappedOrientedVector))],shapes:[shape.id]}};var asymmetricResizeManipulation=function asymmetricResizeManipulation(_ref9){var gesture=_ref9.gesture,shape=_ref9.shape,directShape=_ref9.directShape;var transform=gesture.cumulativeTransform;if(!shape||!directShape)return{transforms:[],shapes:[]};var compositeComponent=matrix.compositeComponent(shape.localTransformMatrix);var inv=matrix.invert(compositeComponent);var vector=matrix.mvMultiply(matrix.multiply(inv,transform),matrix.ORIGIN);var orientationMask=[resizeMultiplierHorizontal[directShape.horizontalPosition]/2,resizeMultiplierVertical[directShape.verticalPosition]/2,0];var orientedVector=matrix2d.componentProduct(vector,orientationMask);var cappedOrientedVector=minimumSize(shape,orientedVector);var antiRotatedVector=matrix.mvMultiply(matrix.multiply(compositeComponent,matrix.scale(resizeMultiplierHorizontal[directShape.horizontalPosition],resizeMultiplierVertical[directShape.verticalPosition],1),matrix.translate(cappedOrientedVector[0],cappedOrientedVector[1],0)),matrix.ORIGIN);var sizeMatrix=gesture.sizes||matrix2d.translate.apply(matrix2d,_toConsumableArray(cappedOrientedVector));return{cumulativeTransforms:[matrix.translate(antiRotatedVector[0],antiRotatedVector[1],0)],cumulativeSizes:[sizeMatrix],shapes:[shape.id]}};var directShapeTranslateManipulation=function directShapeTranslateManipulation(cumulativeTransforms,directShapes){var shapes=directShapes.map(function(shape){return"annotation"!==shape.type&&shape.id}).filter(identity);return[{cumulativeTransforms:cumulativeTransforms,shapes:shapes}]};var rotationAnnotationManipulation=function rotationAnnotationManipulation(directTransforms,directShapes,allShapes,cursorPosition,alterSnapGesture){var shapeIds=directShapes.map(function(shape){return"annotation"===shape.type&&shape.subtype===config.rotationHandleName&&shape.parent});var shapes=shapeIds.map(function(id){return id&&allShapes.find(function(shape){return shape.id===id})});var tuples=flatten(shapes.map(function(shape,i){return directTransforms.map(function(transform){return{transform:transform,shape:shape,directShape:directShapes[i],cursorPosition:cursorPosition,alterSnapGesture:alterSnapGesture}})}));return tuples.map(rotationManipulation)};var resizeAnnotationManipulation=function resizeAnnotationManipulation(transformGestures,directShapes,allShapes,manipulator){var shapeIds=directShapes.map(function(shape){return"annotation"===shape.type&&shape.subtype===config.resizeHandleName&&shape.parent});var shapes=shapeIds.map(function(id){return id&&allShapes.find(function(shape){return shape.id===id})});var tuples=flatten(shapes.map(function(shape,i){return transformGestures.map(function(gesture){return{gesture:gesture,shape:shape,directShape:directShapes[i]}})}));return tuples.map(manipulator)};var symmetricManipulation=optionHeld;var resizeManipulator=select(function(toggle){return toggle?centeredResizeManipulation:asymmetricResizeManipulation})(symmetricManipulation);var transformIntents=select(function(transformGestures,directShapes,shapes,cursorPosition,alterSnapGesture,manipulator){return[].concat(_toConsumableArray(directShapeTranslateManipulation(transformGestures.map(function(g){return g.cumulativeTransform}),directShapes)),_toConsumableArray(rotationAnnotationManipulation(transformGestures.map(function(g){return g.transform}),directShapes,shapes,cursorPosition,alterSnapGesture)),_toConsumableArray(resizeAnnotationManipulation(transformGestures,directShapes,shapes,manipulator)))})(transformGestures,selectedShapes,shapes,cursorPosition,alterSnapGesture,resizeManipulator);var fromScreen=function fromScreen(currentTransform){return function(transform){var isTranslate=0!==transform[12]||0!==transform[13];if(isTranslate){var composite=matrix.compositeComponent(currentTransform);var inverse=matrix.invert(composite);var result=matrix.translateComponent(matrix.multiply(inverse,transform));return result}return transform}};var shapeApplyLocalTransforms=function shapeApplyLocalTransforms(intents){return function(shape){var transformIntents=flatten(intents.map(function(intent){return intent.transforms&&intent.transforms.length&&intent.shapes.find(function(id){return id===shape.id})&&intent.transforms.map(fromScreen(shape.localTransformMatrix))}).filter(identity));var sizeIntents=flatten(intents.map(function(intent){return intent.sizes&&intent.sizes.length&&intent.shapes.find(function(id){return id===shape.id})&&intent.sizes}).filter(identity));var cumulativeTransformIntents=flatten(intents.map(function(intent){return intent.cumulativeTransforms&&intent.cumulativeTransforms.length&&intent.shapes.find(function(id){return id===shape.id})&&intent.cumulativeTransforms.map(fromScreen(shape.localTransformMatrix))}).filter(identity));var cumulativeSizeIntents=flatten(intents.map(function(intent){return intent.cumulativeSizes&&intent.cumulativeSizes.length&&intent.shapes.find(function(id){return id===shape.id})&&intent.cumulativeSizes}).filter(identity));var baselineLocalTransformMatrix=matrix.multiply.apply(matrix,[shape.baselineLocalTransformMatrix||shape.localTransformMatrix].concat(_toConsumableArray(transformIntents)));var cumulativeTransformIntentMatrix=matrix.multiply.apply(matrix,_toConsumableArray(cumulativeTransformIntents));var baselineSizeMatrix=matrix2d.multiply.apply(matrix2d,_toConsumableArray(sizeIntents))||matrix2d.UNITMATRIX;var localTransformMatrix=cumulativeTransformIntents.length?matrix.multiply(baselineLocalTransformMatrix,cumulativeTransformIntentMatrix):baselineLocalTransformMatrix;var cumulativeSizeIntentMatrix=matrix2d.multiply.apply(matrix2d,_toConsumableArray(cumulativeSizeIntents));var sizeVector=matrix2d.mvMultiply(cumulativeSizeIntents.length?matrix2d.multiply(baselineSizeMatrix,cumulativeSizeIntentMatrix):baselineSizeMatrix,shape.baseAB?[].concat(_toConsumableArray(shape.baseAB),[1]):[shape.a,shape.b,1]);var absorbChanges=!transformIntents.length&&!sizeIntents.length&&!cumulativeTransformIntents.length&&!cumulativeSizeIntents.length;return _extends({},shape,{baselineLocalTransformMatrix:absorbChanges?null:baselineLocalTransformMatrix,baselineSizeMatrix:absorbChanges?null:baselineSizeMatrix,localTransformMatrix:absorbChanges?shape.localTransformMatrix:localTransformMatrix,a:absorbChanges?shape.a:sizeVector[0],b:absorbChanges?shape.b:sizeVector[1],baseAB:absorbChanges?null:shape.baseAB||[shape.a,shape.b]})}};var applyLocalTransforms=function applyLocalTransforms(shapes,transformIntents){return shapes.map(shapeApplyLocalTransforms(transformIntents))};var getUpstreams=function getUpstreams(shapes,shape){return shape.parent?getUpstreams(shapes,shapes.find(function(s){return s.id===shape.parent})).concat([shape]):[shape]};var snappedA=function snappedA(shape){return shape.a+(shape.snapResizeVector?shape.snapResizeVector[0]:0)};var snappedB=function snappedB(shape){return shape.b+(shape.snapResizeVector?shape.snapResizeVector[1]:0)};var cascadeTransforms=function cascadeTransforms(shapes,shape){var upstreams=getUpstreams(shapes,shape);var upstreamTransforms=upstreams.map(function(shape){return shape.snapDeltaMatrix?matrix.multiply(shape.localTransformMatrix,shape.snapDeltaMatrix):shape.localTransformMatrix});var cascadedTransforms=matrix.reduceTransforms(upstreamTransforms);return cascadedTransforms};var shapeCascadeProperties=function shapeCascadeProperties(shapes){return function(shape){return _extends({},shape,{transformMatrix:cascadeTransforms(shapes,shape),width:2*snappedA(shape),height:2*snappedB(shape)})}};var cascadeProperties=function cascadeProperties(shapes){return shapes.map(shapeCascadeProperties(shapes))};var nextShapes=select(function(preexistingShapes,restated){if(restated&&restated.newShapes)return restated.newShapes;return preexistingShapes})(shapes,restateShapesEvent);var transformedShapes=select(applyLocalTransforms)(nextShapes,transformIntents);var alignmentGuides=function alignmentGuides(shapes,guidedShapes,draggedShape){var result={};var counter=0;var extremeHorizontal=resizeMultiplierHorizontal[draggedShape.horizontalPosition];var extremeVertical=resizeMultiplierVertical[draggedShape.verticalPosition];for(var i=0;i<guidedShapes.length;i++){var d=guidedShapes[i];if("annotation"===d.type)continue;for(var j=0;j<shapes.length;j++){var referenceShape=shapes[j];if("annotation"===referenceShape.type)continue;if(referenceShape.parent)continue;var s=d.id===referenceShape.id?_extends({},d,{localTransformMatrix:d.baselineLocalTransformMatrix||d.localTransformMatrix,a:d.baseAB?d.baseAB[0]:d.a,b:d.baseAB?d.baseAB[1]:d.b}):referenceShape;for(var k=-1;k<2;k++)for(var l=-1;l<2;l++){if(k&&!l||!k&&l)continue;if(draggedShape.subtype===config.resizeHandleName&&!(extremeHorizontal===k&&extremeVertical===l||0===extremeHorizontal&&0!==k&&extremeVertical===l||0===extremeVertical&&0!==l&&extremeHorizontal===k))continue;var D=landmarkPoint(d,k,l);for(var m=-1;m<2;m++)for(var n=-1;n<2;n++){if(m&&!n||!m&&n)continue;var S=landmarkPoint(s,m,n);for(var dim=0;dim<2;dim++){var orthogonalDimension=1-dim;var dd=D[dim];var ss=S[dim];var key=k+"|"+l+"|"+dim;var signedDistance=dd-ss;var distance=Math.abs(signedDistance);var currentClosest=result[key];if(Math.round(distance)<=config.guideDistance&&(!currentClosest||distance<=currentClosest.distance)){var orthogonalValues=[D[orthogonalDimension],S[orthogonalDimension]].concat(_toConsumableArray(currentClosest?[currentClosest.lowPoint,currentClosest.highPoint]:[]));var lowPoint=Math.min.apply(Math,_toConsumableArray(orthogonalValues));var highPoint=Math.max.apply(Math,_toConsumableArray(orthogonalValues));var midPoint=(lowPoint+highPoint)/2;var radius=midPoint-lowPoint;result[key]={id:counter++,localTransformMatrix:matrix.translate(dim?midPoint:ss,dim?ss:midPoint,config.atopZ),a:dim?radius:.5,b:dim?.5:radius,lowPoint:lowPoint,highPoint:highPoint,distance:distance,signedDistance:signedDistance,dimension:dim?"vertical":"horizontal",constrained:d.id,constrainer:s.id}}}}}}}return Object.values(result)};var isHorizontal=function isHorizontal(constraint){return"horizontal"===constraint.dimension};var isVertical=function isVertical(constraint){return"vertical"===constraint.dimension};var closestConstraint=function closestConstraint(){var prev=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{distance:Infinity};var next=arguments[1];return next.distance<prev.distance?{constraint:next,distance:next.distance}:prev};var directionalConstraint=function directionalConstraint(constraints,filterFun){var directionalConstraints=constraints.filter(filterFun);var closest=directionalConstraints.reduce(closestConstraint,void 0);return closest&&closest.constraint};var draggedPrimaryShape=select(function(shapes,draggedShape){return draggedShape&&shapes.find(function(shape){return shape.id===primaryShape(draggedShape)})})(shapes,draggedShape);var alignmentGuideAnnotations=select(function(shapes,draggedPrimaryShape,draggedShape){var guidedShapes=draggedPrimaryShape?[shapes.find(function(s){return s.id===draggedPrimaryShape.id})].filter(identity):[];return guidedShapes.length?alignmentGuides(shapes,guidedShapes,draggedShape).map(function(shape){return _extends({},shape,{id:config.alignmentGuideName+"_"+shape.id,type:"annotation",subtype:config.alignmentGuideName,interactive:false,backgroundColor:"magenta"})}):[]})(transformedShapes,draggedPrimaryShape,draggedShape);var hoverAnnotations=select(function(hoveredShape,selectedPrimaryShapeIds,draggedShape){return hoveredShape&&"annotation"!==hoveredShape.type&&-1===selectedPrimaryShapeIds.indexOf(hoveredShape.id)&&!draggedShape?[_extends({},hoveredShape,{id:config.hoverAnnotationName+"_"+hoveredShape.id,type:"annotation",subtype:config.hoverAnnotationName,interactive:false,localTransformMatrix:matrix.multiply(hoveredShape.localTransformMatrix,matrix.translate(0,0,100))})]:[]})(hoveredShape,selectedPrimaryShapeIds,draggedShape);var rotationAnnotation=function rotationAnnotation(shapes,selectedShapes,shape,i){var foundShape=shapes.find(function(s){return shape.id===s.id});if(!foundShape)return false;if("annotation"===foundShape.type)return rotationAnnotation(shapes,selectedShapes,shapes.find(function(s){return foundShape.parent===s.id}),i);var b=snappedB(foundShape);var centerTop=matrix.translate(0,-b,0);var pixelOffset=matrix.translate(0,-config.rotateAnnotationOffset,config.atopZ);var transform=matrix.multiply(centerTop,pixelOffset);return{id:config.rotationHandleName+"_"+i,type:"annotation",subtype:config.rotationHandleName,interactive:true,parent:foundShape.id,localTransformMatrix:transform,backgroundColor:"rgb(0,0,255,0.3)",a:config.rotationHandleSize,b:config.rotationHandleSize}};var resizePointAnnotations=function resizePointAnnotations(parent,a,b){return function(_ref10){var _ref11=_slicedToArray(_ref10,3),x=_ref11[0],y=_ref11[1],cursorAngle=_ref11[2];var markerPlace=matrix.translate(x*a,y*b,config.resizeAnnotationOffsetZ);var pixelOffset=matrix.translate(-x*config.resizeAnnotationOffset,-y*config.resizeAnnotationOffset,config.atopZ+10);var transform=matrix.multiply(markerPlace,pixelOffset);var xName=xNames[x];var yName=yNames[y];return{id:[config.resizeHandleName,xName,yName,parent].join("_"),type:"annotation",subtype:config.resizeHandleName,horizontalPosition:xName,verticalPosition:yName,cursorAngle:cursorAngle,interactive:true,parent:parent,localTransformMatrix:transform,backgroundColor:"rgb(0,255,0,1)",a:config.resizeAnnotationSize,b:config.resizeAnnotationSize}}};var resizeEdgeAnnotations=function resizeEdgeAnnotations(parent,a,b){return function(_ref12){var _ref13=_slicedToArray(_ref12,2),_ref13$=_slicedToArray(_ref13[0],2),x0=_ref13$[0],y0=_ref13$[1],_ref13$2=_slicedToArray(_ref13[1],2),x1=_ref13$2[0],y1=_ref13$2[1];var x=a*mean(x0,x1);var y=b*mean(y0,y1);var markerPlace=matrix.translate(x,y,config.atopZ-10);var transform=markerPlace;var horizontal=y0===y1;var length=horizontal?a*Math.abs(x1-x0):b*Math.abs(y1-y0);var sectionHalfLength=Math.max(0,length/2-config.resizeAnnotationConnectorOffset);var width=.5;return{id:[config.resizeConnectorName,xNames[x0],yNames[y0],xNames[x1],yNames[y1],parent].join("_"),type:"annotation",subtype:config.resizeConnectorName,interactive:true,parent:parent,localTransformMatrix:transform,backgroundColor:config.devColor,a:horizontal?sectionHalfLength:width,b:horizontal?width:sectionHalfLength}}};var connectorVertices=[[[-1,-1],[0,-1]],[[0,-1],[1,-1]],[[1,-1],[1,0]],[[1,0],[1,1]],[[1,1],[0,1]],[[0,1],[-1,1]],[[-1,1],[-1,0]],[[-1,0],[-1,-1]]];var cornerVertices=[[-1,-1],[1,-1],[-1,1],[1,1]];function resizeAnnotation(shapes,selectedShapes,shape){var foundShape=shapes.find(function(s){return shape.id===s.id});var properShape=foundShape&&(foundShape.subtype===config.resizeHandleName?shapes.find(function(s){return shape.parent===s.id}):foundShape);if(!foundShape)return[];if(foundShape.subtype===config.resizeHandleName){var result=foundShape.interactive?resizeAnnotationsFunction({shapes:shapes,selectedShapes:[shapes.find(function(s){return shape.parent===s.id})]}):[];return result}if("annotation"===foundShape.type)return resizeAnnotation(shapes,selectedShapes,shapes.find(function(s){return foundShape.parent===s.id}));var a=snappedA(properShape);var b=snappedB(properShape);var groupedShape=function groupedShape(shape){return shape.parent===properShape.id&&"annotation"!==shape.type&&shape.subtype!==config.adHocGroupName};var resizableChild=function resizableChild(shape){return shallowEqual(matrix.compositeComponent(shape.localTransformMatrix).map(applyTolerance),matrix.UNITMATRIX)};var allowResize="group"!==properShape.type||config.groupResize&&shapes.filter(groupedShape).every(resizableChild);var resizeVertices=allowResize?[[-1,-1,315],[1,-1,45],[1,1,135],[-1,1,225],[0,-1,0],[1,0,90],[0,1,180],[-1,0,270]]:[];var resizePoints=resizeVertices.map(resizePointAnnotations(shape.id,a,b));var connectors=connectorVertices.map(resizeEdgeAnnotations(shape.id,a,b));return[].concat(_toConsumableArray(resizePoints),_toConsumableArray(connectors))}function resizeAnnotationsFunction(_ref14){var shapes=_ref14.shapes,selectedShapes=_ref14.selectedShapes;var shapesToAnnotate=selectedShapes;return flatten(shapesToAnnotate.map(function(shape){return resizeAnnotation(shapes,selectedShapes,shape)}).filter(identity))}var crystallizeConstraint=function crystallizeConstraint(shape){var result=_extends({},shape);if(shape.snapDeltaMatrix){result.localTransformMatrix=matrix.multiply(shape.localTransformMatrix,shape.snapDeltaMatrix);result.snapDeltaMatrix=null}if(shape.snapResizeVector){result.a=snappedA(shape);result.b=snappedB(shape);result.snapResizeVector=null}return result};var translateShapeSnap=function translateShapeSnap(horizontalConstraint,verticalConstraint,draggedElement){return function(shape){var constrainedX=horizontalConstraint&&horizontalConstraint.constrained===shape.id;var constrainedY=verticalConstraint&&verticalConstraint.constrained===shape.id;var snapOffsetX=constrainedX?-horizontalConstraint.signedDistance:0;var snapOffsetY=constrainedY?-verticalConstraint.signedDistance:0;if(constrainedX||constrainedY){if(!snapOffsetX&&!snapOffsetY)return shape;var snapOffset=matrix.translateComponent(matrix.multiply(matrix.rotateZ(matrix.matrixToAngle(draggedElement.localTransformMatrix)/180*Math.PI),matrix.translate(snapOffsetX,snapOffsetY,0)));return _extends({},shape,{snapDeltaMatrix:snapOffset})}return shape.snapDeltaMatrix||shape.snapResizeVector?crystallizeConstraint(shape):shape}};var resizeShapeSnap=function resizeShapeSnap(horizontalConstraint,verticalConstraint,draggedElement,symmetric,horizontalPosition,verticalPosition){return function(shape){var constrainedShape=draggedElement&&shape.id===draggedElement.id;var constrainedX=horizontalConstraint&&horizontalConstraint.constrained===shape.id;var constrainedY=verticalConstraint&&verticalConstraint.constrained===shape.id;var snapOffsetX=constrainedX?horizontalConstraint.signedDistance:0;var snapOffsetY=constrainedY?-verticalConstraint.signedDistance:0;if(constrainedX||constrainedY){var multiplier=symmetric?1:.5;var angle=matrix.matrixToAngle(draggedElement.localTransformMatrix)/180*Math.PI;var horizontalSign=-resizeMultiplierHorizontal[horizontalPosition];var verticalSign=resizeMultiplierVertical[verticalPosition];var sin=Math.sin(angle);var cos=Math.cos(angle);var snapOffsetA=horizontalSign*(cos*snapOffsetX-sin*snapOffsetY);var snapOffsetB=verticalSign*(sin*snapOffsetX+cos*snapOffsetY);var snapTranslateOffset=matrix.translateComponent(matrix.multiply(matrix.rotateZ(angle),matrix.translate((1-multiplier)*-snapOffsetX,(1-multiplier)*snapOffsetY,0)));var snapSizeOffset=[multiplier*snapOffsetA,multiplier*snapOffsetB];return _extends({},shape,{snapDeltaMatrix:snapTranslateOffset,snapResizeVector:snapSizeOffset})}return constrainedShape?_extends({},shape,{snapDeltaMatrix:null,snapResizeVector:null}):crystallizeConstraint(shape)}};var snappedShapes=select(function(shapes,draggedShape,draggedElement,alignmentGuideAnnotations,alterSnapGesture,symmetricManipulation){var contentShapes=shapes.filter(function(shape){return"annotation"!==shape.type});var subtype=draggedShape&&draggedShape.subtype;if(subtype&&-1===[config.resizeHandleName,config.adHocGroupName].indexOf(subtype))return contentShapes;var constraints=alignmentGuideAnnotations;var relaxed=-1!==alterSnapGesture.indexOf("relax");var constrained=config.snapConstraint&&!relaxed;var horizontalConstraint=constrained&&directionalConstraint(constraints,isHorizontal);var verticalConstraint=constrained&&directionalConstraint(constraints,isVertical);var snapper=subtype===config.resizeHandleName?resizeShapeSnap(horizontalConstraint,verticalConstraint,draggedElement,symmetricManipulation,draggedShape.horizontalPosition,draggedShape.verticalPosition):translateShapeSnap(horizontalConstraint,verticalConstraint,draggedElement);return contentShapes.map(snapper)})(transformedShapes,draggedShape,draggedPrimaryShape,alignmentGuideAnnotations,alterSnapGesture,symmetricManipulation);var constrainedShapesWithPreexistingAnnotations=select(function(snapped,transformed){return snapped.concat(transformed.filter(function(s){return"annotation"===s.type}))})(snappedShapes,transformedShapes);var extend=function extend(_ref15,_ref16,_ref17){var _ref20=_slicedToArray(_ref15,2),_ref20$=_slicedToArray(_ref20[0],2),xMin=_ref20$[0],yMin=_ref20$[1],_ref20$2=_slicedToArray(_ref20[1],2),xMax=_ref20$2[0],yMax=_ref20$2[1];var _ref19=_slicedToArray(_ref16,2),x0=_ref19[0],y0=_ref19[1];var _ref18=_slicedToArray(_ref17,2),x1=_ref18[0],y1=_ref18[1];return[[Math.min(xMin,x0,x1),Math.min(yMin,y0,y1)],[Math.max(xMax,x0,x1),Math.max(yMax,y0,y1)]]};var isAdHocGroup=function isAdHocGroup(shape){return shape.type===config.groupName&&shape.subtype===config.adHocGroupName};var getAABB=function getAABB(shapes){return shapes.reduce(function(prev,shape){var shapeBounds=cornerVertices.reduce(function(prev,xyVertex){var cornerPoint=matrix.normalize(matrix.mvMultiply(shape.transformMatrix,[shape.a*xyVertex[0],shape.b*xyVertex[1],0,1]));return extend(prev,cornerPoint,cornerPoint)},prev);return extend.apply(void 0,[prev].concat(_toConsumableArray(shapeBounds)))},[[Infinity,Infinity],[-Infinity,-Infinity]])};var projectAABB=function projectAABB(_ref21){var _ref22=_slicedToArray(_ref21,2),_ref22$=_slicedToArray(_ref22[0],2),xMin=_ref22$[0],yMin=_ref22$[1],_ref22$2=_slicedToArray(_ref22[1],2),xMax=_ref22$2[0],yMax=_ref22$2[1];var a=(xMax-xMin)/2;var b=(yMax-yMin)/2;var xTranslate=xMin+a;var yTranslate=yMin+b;var zTranslate=0;var localTransformMatrix=matrix.translate(xTranslate,yTranslate,zTranslate);var rigTransform=matrix.translate(-xTranslate,-yTranslate,-zTranslate);return{a:a,b:b,localTransformMatrix:localTransformMatrix,rigTransform:rigTransform}};var dissolveGroups=function dissolveGroups(preexistingAdHocGroups,shapes,selectedShapes){return{shapes:shapes.filter(function(shape){return!isAdHocGroup(shape)}).map(function(shape){var preexistingAdHocGroupParent=preexistingAdHocGroups.find(function(groupShape){return groupShape.id===shape.parent});return preexistingAdHocGroupParent?_extends({},shape,{parent:null,localTransformMatrix:matrix.multiply(preexistingAdHocGroupParent.localTransformMatrix,shape.localTransformMatrix)}):shape}),selectedShapes:selectedShapes}};var hasNoParentWithin=function hasNoParentWithin(shapes){return function(shape){return!shapes.some(function(g){return shape.parent===g.id})}};var childOfAdHocGroup=function childOfAdHocGroup(shape){return shape.parent&&shape.parent.startsWith(config.adHocGroupName)};var isOrBelongsToAdHocGroup=function isOrBelongsToAdHocGroup(shape){return isAdHocGroup(shape)||childOfAdHocGroup(shape)};var asYetUngroupedShapes=function asYetUngroupedShapes(preexistingAdHocGroups,selectedShapes){return selectedShapes.filter(hasNoParentWithin(preexistingAdHocGroups))};var idMatch=function idMatch(shape){return function(s){return s.id===shape.id}};var idsMatch=function idsMatch(selectedShapes){return function(shape){return selectedShapes.find(idMatch(shape))}};var axisAlignedBoundingBoxShape=function axisAlignedBoundingBoxShape(shapesToBox){var axisAlignedBoundingBox=getAABB(shapesToBox);var _projectAABB=projectAABB(axisAlignedBoundingBox),a=_projectAABB.a,b=_projectAABB.b,localTransformMatrix=_projectAABB.localTransformMatrix,rigTransform=_projectAABB.rigTransform;var id=config.adHocGroupName+"_"+makeUid();var aabbShape={id:id,type:config.groupName,subtype:config.adHocGroupName,a:a,b:b,localTransformMatrix:localTransformMatrix,rigTransform:rigTransform};return aabbShape};var resizeGroup=function resizeGroup(shapes,selectedShapes,elements){if(!elements.length)return{shapes:shapes,selectedShapes:selectedShapes};var e=elements[0];if("adHocGroup"!==e.subtype)return{shapes:shapes,selectedShapes:selectedShapes};if(!e.baseAB)return{shapes:shapes.map(function(s){return _extends({},s,{childBaseAB:null,baseLocalTransformMatrix:null})}),selectedShapes:selectedShapes};var groupScaleX=e.a/e.baseAB[0];var groupScaleY=e.b/e.baseAB[1];var groupScale=matrix.scale(groupScaleX,groupScaleY,1);return{shapes:shapes.map(function(s){if(s.parent!==e.id||"annotation"===s.type)return s;var childBaseAB=s.childBaseAB||[s.a,s.b];var impliedScale=matrix.scale.apply(matrix,_toConsumableArray(childBaseAB).concat([1]));var inverseImpliedScale=matrix.invert(impliedScale);var baseLocalTransformMatrix=s.baseLocalTransformMatrix||s.localTransformMatrix;var normalizedBaseLocalTransformMatrix=matrix.multiply(baseLocalTransformMatrix,impliedScale);var T=matrix.multiply(groupScale,normalizedBaseLocalTransformMatrix);var backScaler=groupScale.map(function(d){return Math.abs(d)});var transformShit=matrix.invert(backScaler);var abTuple=matrix.mvMultiply(matrix.multiply(backScaler,impliedScale),[1,1,1,1]);return _extends({},s,{localTransformMatrix:matrix.multiply(T,matrix.multiply(inverseImpliedScale,transformShit)),a:abTuple[0],b:abTuple[1],childBaseAB:childBaseAB,baseLocalTransformMatrix:baseLocalTransformMatrix})}),selectedShapes:selectedShapes}};var getLeafs=function getLeafs(descendCondition,allShapes,shapes){return removeDuplicates(function(s){return s.id},flatten(shapes.map(function(shape){return descendCondition(shape)?allShapes.filter(function(s){return s.parent===shape.id}):shape})))};var grouping=select(function(shapes,selectedShapes){var preexistingAdHocGroups=shapes.filter(isAdHocGroup);var matcher=idsMatch(selectedShapes);var selectedFn=function selectedFn(shape){return matcher(shape)&&"annotation"!==shape.type};var freshSelectedShapes=shapes.filter(selectedFn);var freshNonSelectedShapes=shapes.filter(not(selectedFn));var someSelectedShapesAreGrouped=selectedShapes.some(isOrBelongsToAdHocGroup);var selectionOutsideGroup=!someSelectedShapesAreGrouped;if(preexistingAdHocGroups.length&&selectionOutsideGroup)return dissolveGroups(preexistingAdHocGroups,shapes,asYetUngroupedShapes(preexistingAdHocGroups,freshSelectedShapes));var elements=contentShapes(shapes,selectedShapes);if(1===selectedShapes.length&&"adHocGroup"===elements[0].subtype)return config.groupResize?resizeGroup(shapes,selectedShapes,elements):{shapes:shapes,selectedShapes:selectedShapes};if(selectedShapes.length<2)return{shapes:shapes,selectedShapes:selectedShapes};var group=axisAlignedBoundingBoxShape(freshSelectedShapes);var selectedLeafShapes=getLeafs(function(shape){return shape.subtype===config.adHocGroupName},shapes,freshSelectedShapes);var parentedSelectedShapes=selectedLeafShapes.map(function(shape){return _extends({},shape,{parent:group.id,localTransformMatrix:matrix.multiply(group.rigTransform,shape.transformMatrix)})});var nonGroupGraphConstituent=function nonGroupGraphConstituent(s){return s.subtype!==config.adHocGroupName&&!parentedSelectedShapes.find(function(ss){return s.id===ss.id})};var dissociateFromParentIfAny=function dissociateFromParentIfAny(s){return s.parent&&s.parent.startsWith(config.adHocGroupName)?_extends({},s,{parent:null}):s};var allTerminalShapes=parentedSelectedShapes.concat(freshNonSelectedShapes.filter(nonGroupGraphConstituent).map(dissociateFromParentIfAny));return{shapes:allTerminalShapes.concat([group]),selectedShapes:[group]}})(constrainedShapesWithPreexistingAnnotations,selectedShapes);var groupedSelectedShapes=select(function(_ref23){var selectedShapes=_ref23.selectedShapes;return selectedShapes})(grouping);var groupedSelectedShapeIds=select(function(selectedShapes){return selectedShapes.map(function(shape){return shape.id})})(groupedSelectedShapes);var groupedSelectedPrimaryShapeIds=select(function(selectedShapes){return selectedShapes.map(primaryShape)})(groupedSelectedShapes);var resizeAnnotations=select(resizeAnnotationsFunction)(grouping);var rotationAnnotations=select(function(_ref24){var shapes=_ref24.shapes,selectedShapes=_ref24.selectedShapes;var shapesToAnnotate=selectedShapes;return shapesToAnnotate.map(function(shape,i){return rotationAnnotation(shapes,selectedShapes,shape,i)}).filter(identity)})(grouping);var annotatedShapes=select(function(_ref25,alignmentGuideAnnotations,hoverAnnotations,rotationAnnotations,resizeAnnotations){var shapes=_ref25.shapes;var annotations=[].concat(alignmentGuideAnnotations,hoverAnnotations,rotationAnnotations,resizeAnnotations);var contentShapes=shapes.filter(function(shape){return"annotation"!==shape.type});return contentShapes.concat(annotations)})(grouping,alignmentGuideAnnotations,hoverAnnotations,rotationAnnotations,resizeAnnotations);var globalTransformShapes=select(cascadeProperties)(annotatedShapes);var bidirectionalCursors={0:"ns-resize",45:"nesw-resize",90:"ew-resize",135:"nwse-resize",180:"ns-resize",225:"nesw-resize",270:"ew-resize",315:"nwse-resize"};var cursor=select(function(shape,draggedPrimaryShape){if(!shape)return"auto";switch(shape.subtype){case config.rotationHandleName:return"crosshair";case config.resizeHandleName:var angle=(matrix.matrixToAngle(shape.transformMatrix)+360)%360;var screenProjectedAngle=angle+shape.cursorAngle;var discretizedAngle=(45*Math.round(screenProjectedAngle/45)+360)%360;return bidirectionalCursors[discretizedAngle];default:return draggedPrimaryShape?"grabbing":"grab"}})(focusedShape,draggedPrimaryShape);var nextScene=select(function(hoveredShape,selectedShapeIds,selectedPrimaryShapes,shapes,gestureEnd,draggedShape,cursor,selectionState,mouseTransformState,selectedShapes){var selectedLeafShapes=getLeafs(function(shape){return shape.subtype===config.adHocGroupName},shapes,selectionState.shapes.map(function(s){return"annotation"===s.type?shapes.find(function(ss){return ss.id===s.parent}):s}).filter(identity)).filter(function(shape){return"annotation"!==shape.type}).map(function(s){return s.id});return{hoveredShape:hoveredShape,selectedShapes:selectedShapeIds,selectedLeafShapes:selectedLeafShapes,selectedPrimaryShapes:selectedPrimaryShapes,shapes:shapes,gestureEnd:gestureEnd,draggedShape:draggedShape,cursor:cursor,selectionState:selectionState,mouseTransformState:mouseTransformState,selectedShapeObjects:selectedShapes}})(hoveredShape,groupedSelectedShapeIds,groupedSelectedPrimaryShapeIds,globalTransformShapes,gestureEnd,draggedShape,cursor,selectionState,mouseTransformState,groupedSelectedShapes);module.exports={cursorPosition:cursorPosition,mouseIsDown:mouseIsDown,dragVector:dragVector,nextScene:nextScene,focusedShape:focusedShape,primaryUpdate:primaryUpdate,shapes:shapes,focusedShapes:focusedShapes,selectedShapes:selectedShapeIds}},6042:function(module,exports,__webpack_require__){"use strict";var _slicedToArray=function(){function sliceIterator(arr,i){var _arr=[];var _n=true;var _d=false;var _e=void 0;try{for(var _s,_i=arr[Symbol.iterator]();!(_n=(_s=_i.next()).done);_n=true){_arr.push(_s.value);if(i&&_arr.length===i)break}}catch(err){_d=true;_e=err}finally{try{!_n&&_i["return"]&&_i["return"]()}finally{if(_d)throw _e}}return _arr}return function(arr,i){if(Array.isArray(arr))return arr;if(Symbol.iterator in Object(arr))return sliceIterator(arr,i);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}();var transpose=function transpose(_ref){var _ref2=_slicedToArray(_ref,9),a=_ref2[0],d=_ref2[1],g=_ref2[2],b=_ref2[3],e=_ref2[4],h=_ref2[5],c=_ref2[6],f=_ref2[7],i=_ref2[8];return[a,b,c,d,e,f,g,h,i]};var ORIGIN=[0,0,1];var NULLVECTOR=[0,0,0];var NULLMATRIX=transpose([0,0,0,0,0,0,0,0,0]);var UNITMATRIX=transpose([1,0,0,0,1,0,0,0,1]);var translate=function translate(x,y){return transpose([1,0,x,0,1,y,0,0,1])};var scale=function scale(x,y){return transpose([x,0,0,0,y,0,0,0,1])};var shear=function shear(x,y){return transpose([1,x,0,y,1,0,0,0,1])};var mult=function mult(_ref3,_ref4){var _ref6=_slicedToArray(_ref3,9),a=_ref6[0],b=_ref6[1],c=_ref6[2],d=_ref6[3],e=_ref6[4],f=_ref6[5],g=_ref6[6],h=_ref6[7],i=_ref6[8];var _ref5=_slicedToArray(_ref4,9),A=_ref5[0],B=_ref5[1],C=_ref5[2],D=_ref5[3],E=_ref5[4],F=_ref5[5],G=_ref5[6],H=_ref5[7],I=_ref5[8];return[a*A+d*B+g*C,b*A+e*B+h*C,c*A+f*B+i*C,a*D+d*E+g*F,b*D+e*E+h*F,c*D+f*E+i*F,a*G+d*H+g*I,b*G+e*H+h*I,c*G+f*H+i*I]};var multiply=function multiply(){for(var _len=arguments.length,elements=Array(_len),_key=0;_key<_len;_key++)elements[_key]=arguments[_key];return elements.slice(1).reduce(function(prev,next){return mult(prev,next)},elements[0])};var mvMultiply=function mvMultiply(_ref7,_ref8){var _ref10=_slicedToArray(_ref7,9),a=_ref10[0],b=_ref10[1],c=_ref10[2],d=_ref10[3],e=_ref10[4],f=_ref10[5],g=_ref10[6],h=_ref10[7],i=_ref10[8];var _ref9=_slicedToArray(_ref8,3),A=_ref9[0],B=_ref9[1],C=_ref9[2];return[a*A+d*B+g*C,b*A+e*B+h*C,c*A+f*B+i*C]};var normalize=function normalize(_ref11){var _ref12=_slicedToArray(_ref11,3),A=_ref12[0],B=_ref12[1],C=_ref12[2];return 1===C?[A,B,C]:[A/C,B/C,1]};var add=function add(_ref13,_ref14){var _ref16=_slicedToArray(_ref13,9),a=_ref16[0],b=_ref16[1],c=_ref16[2],d=_ref16[3],e=_ref16[4],f=_ref16[5],g=_ref16[6],h=_ref16[7],i=_ref16[8];var _ref15=_slicedToArray(_ref14,9),A=_ref15[0],B=_ref15[1],C=_ref15[2],D=_ref15[3],E=_ref15[4],F=_ref15[5],G=_ref15[6],H=_ref15[7],I=_ref15[8];return[a+A,b+B,c+C,d+D,e+E,f+F,g+G,h+H,i+I]};var subtract=function subtract(_ref17,_ref18){var _ref20=_slicedToArray(_ref17,9),a=_ref20[0],b=_ref20[1],c=_ref20[2],d=_ref20[3],e=_ref20[4],f=_ref20[5],g=_ref20[6],h=_ref20[7],i=_ref20[8];var _ref19=_slicedToArray(_ref18,9),A=_ref19[0],B=_ref19[1],C=_ref19[2],D=_ref19[3],E=_ref19[4],F=_ref19[5],G=_ref19[6],H=_ref19[7],I=_ref19[8];return[a-A,b-B,c-C,d-D,e-E,f-F,g-G,h-H,i-I]};var reduceTransforms=function reduceTransforms(transforms){return 1===transforms.length?transforms[0]:transforms.slice(1).reduce(function(prev,next){return multiply(prev,next)},transforms[0])};var applyTransforms=function applyTransforms(transforms,previousTransformMatrix){return transforms.reduce(function(prev,next){return multiply(prev,next)},previousTransformMatrix)};var componentProduct=function componentProduct(_ref21,_ref22){var _ref24=_slicedToArray(_ref21,3),a=_ref24[0],b=_ref24[1],c=_ref24[2];var _ref23=_slicedToArray(_ref22,3),A=_ref23[0],B=_ref23[1],C=_ref23[2];return[a*A,b*B,c*C]};module.exports={ORIGIN:ORIGIN,NULLVECTOR:NULLVECTOR,NULLMATRIX:NULLMATRIX,UNITMATRIX:UNITMATRIX,transpose:transpose,translate:translate,shear:shear,scale:scale,multiply:multiply,mvMultiply:mvMultiply,normalize:normalize,applyTransforms:applyTransforms,reduceTransforms:reduceTransforms,add:add,subtract:subtract,componentProduct:componentProduct}},6043:function(module,exports,__webpack_require__){"use strict";var adHocGroupName="adHocGroup";var alignmentGuideName="alignmentGuide";var atopZ=1e3;var depthSelect=true;var devColor="magenta";var groupName="group";var groupResize=true;var guideDistance=3;var hoverAnnotationName="hoverAnnotation";var intraGroupManipulation=false;var resizeAnnotationOffset=0;var resizeAnnotationOffsetZ=.1;var resizeAnnotationSize=10;var resizeAnnotationConnectorOffset=0;var resizeConnectorName="resizeConnector";var rotateAnnotationOffset=12;var rotationHandleName="rotationHandle";var rotationHandleSize=14;var resizeHandleName="resizeHandle";var rotateSnapInPixels=10;var shortcuts=false;var singleSelect=false;var snapConstraint=true;var minimumElementSize=0;module.exports={adHocGroupName:adHocGroupName,alignmentGuideName:alignmentGuideName,atopZ:atopZ,depthSelect:depthSelect,devColor:devColor,groupName:groupName,groupResize:groupResize,guideDistance:guideDistance,hoverAnnotationName:hoverAnnotationName,intraGroupManipulation:intraGroupManipulation,minimumElementSize:minimumElementSize,resizeAnnotationOffset:resizeAnnotationOffset,resizeAnnotationOffsetZ:resizeAnnotationOffsetZ,resizeAnnotationSize:resizeAnnotationSize,resizeAnnotationConnectorOffset:resizeAnnotationConnectorOffset,resizeConnectorName:resizeConnectorName,resizeHandleName:resizeHandleName,rotateAnnotationOffset:rotateAnnotationOffset,rotateSnapInPixels:rotateSnapInPixels,rotationHandleName:rotationHandleName,rotationHandleSize:rotationHandleSize,shortcuts:shortcuts,singleSelect:singleSelect,snapConstraint:snapConstraint}},6044:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.createThunk=createThunk;function createThunk(type,fn){var actionCreator=function actionCreator(){for(var _len=arguments.length,args=Array(_len),_key=0;_key<_len;_key++)args[_key]=arguments[_key];return function(dispatch,getState){return fn.apply(void 0,[{dispatch:dispatch,getState:getState,type:type}].concat(args))}};actionCreator.toString=function(){return type.toString()};return actionCreator}},6045:function(module,exports,__webpack_require__){(function(global){var FUNC_ERROR_TEXT="Expected a function";var HASH_UNDEFINED="__lodash_hash_undefined__";var INFINITY=1/0;var funcTag="[object Function]",genTag="[object GeneratorFunction]",symbolTag="[object Symbol]";var reLeadingDot=/^\./,rePropName=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g;var reRegExpChar=/[\\^$.*+?()[\]{}|]/g;var reEscapeChar=/\\(\\)?/g;var reIsHostCtor=/^\[object .+?Constructor\]$/;var freeGlobal="object"==typeof global&&global&&global.Object===Object&&global;var freeSelf="object"==typeof self&&self&&self.Object===Object&&self;var root=freeGlobal||freeSelf||Function("return this")();function arrayMap(array,iteratee){var index=-1,length=array?array.length:0,result=Array(length);while(++index<length)result[index]=iteratee(array[index],index,array);return result}function getValue(object,key){return null==object?void 0:object[key]}function isHostObject(value){var result=false;if(null!=value&&"function"!=typeof value.toString)try{result=!!(value+"")}catch(e){}return result}var arrayProto=Array.prototype,funcProto=Function.prototype,objectProto=Object.prototype;var coreJsData=root["__core-js_shared__"];var maskSrcKey=(uid=/[^.]+$/.exec(coreJsData&&coreJsData.keys&&coreJsData.keys.IE_PROTO||""),uid?"Symbol(src)_1."+uid:"");var uid;var funcToString=funcProto.toString;var hasOwnProperty=objectProto.hasOwnProperty;var objectToString=objectProto.toString;var reIsNative=RegExp("^"+funcToString.call(hasOwnProperty).replace(reRegExpChar,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");var Symbol=root.Symbol,splice=arrayProto.splice;var Map=getNative(root,"Map"),nativeCreate=getNative(Object,"create");var symbolProto=Symbol?Symbol.prototype:void 0,symbolToString=symbolProto?symbolProto.toString:void 0;function Hash(entries){var index=-1,length=entries?entries.length:0;this.clear();while(++index<length){var entry=entries[index];this.set(entry[0],entry[1])}}function hashClear(){this.__data__=nativeCreate?nativeCreate(null):{}}function hashDelete(key){return this.has(key)&&delete this.__data__[key]}function hashGet(key){var data=this.__data__;if(nativeCreate){var result=data[key];return result===HASH_UNDEFINED?void 0:result}return hasOwnProperty.call(data,key)?data[key]:void 0}function hashHas(key){var data=this.__data__;return nativeCreate?void 0!==data[key]:hasOwnProperty.call(data,key)}function hashSet(key,value){var data=this.__data__;data[key]=nativeCreate&&void 0===value?HASH_UNDEFINED:value;return this}Hash.prototype.clear=hashClear;Hash.prototype["delete"]=hashDelete;Hash.prototype.get=hashGet;Hash.prototype.has=hashHas;Hash.prototype.set=hashSet;function ListCache(entries){var index=-1,length=entries?entries.length:0;this.clear();while(++index<length){var entry=entries[index];this.set(entry[0],entry[1])}}function listCacheClear(){this.__data__=[]}function listCacheDelete(key){var data=this.__data__,index=assocIndexOf(data,key);if(index<0)return false;var lastIndex=data.length-1;index==lastIndex?data.pop():splice.call(data,index,1);return true}function listCacheGet(key){var data=this.__data__,index=assocIndexOf(data,key);return index<0?void 0:data[index][1]}function listCacheHas(key){return assocIndexOf(this.__data__,key)>-1}function listCacheSet(key,value){var data=this.__data__,index=assocIndexOf(data,key);index<0?data.push([key,value]):data[index][1]=value;return this}ListCache.prototype.clear=listCacheClear;ListCache.prototype["delete"]=listCacheDelete;ListCache.prototype.get=listCacheGet;ListCache.prototype.has=listCacheHas;ListCache.prototype.set=listCacheSet;function MapCache(entries){var index=-1,length=entries?entries.length:0;this.clear();while(++index<length){var entry=entries[index];this.set(entry[0],entry[1])}}function mapCacheClear(){this.__data__={hash:new Hash,map:new(Map||ListCache),string:new Hash}}function mapCacheDelete(key){return getMapData(this,key)["delete"](key)}function mapCacheGet(key){return getMapData(this,key).get(key)}function mapCacheHas(key){return getMapData(this,key).has(key)}function mapCacheSet(key,value){getMapData(this,key).set(key,value);return this}MapCache.prototype.clear=mapCacheClear;MapCache.prototype["delete"]=mapCacheDelete;MapCache.prototype.get=mapCacheGet;MapCache.prototype.has=mapCacheHas;MapCache.prototype.set=mapCacheSet;function assocIndexOf(array,key){var length=array.length;while(length--)if(eq(array[length][0],key))return length;return-1}function baseIsNative(value){if(!isObject(value)||isMasked(value))return false;var pattern=isFunction(value)||isHostObject(value)?reIsNative:reIsHostCtor;return pattern.test(toSource(value))}function baseToString(value){if("string"==typeof value)return value;if(isSymbol(value))return symbolToString?symbolToString.call(value):"";var result=value+"";return"0"==result&&1/value==-INFINITY?"-0":result}function copyArray(source,array){var index=-1,length=source.length;array||(array=Array(length));while(++index<length)array[index]=source[index];return array}function getMapData(map,key){var data=map.__data__;return isKeyable(key)?data["string"==typeof key?"string":"hash"]:data.map}function getNative(object,key){var value=getValue(object,key);return baseIsNative(value)?value:void 0}function isKeyable(value){var type=typeof value;return"string"==type||"number"==type||"symbol"==type||"boolean"==type?"__proto__"!==value:null===value}function isMasked(func){return!!maskSrcKey&&maskSrcKey in func}var stringToPath=memoize(function(string){string=toString(string);var result=[];reLeadingDot.test(string)&&result.push("");string.replace(rePropName,function(match,number,quote,string){result.push(quote?string.replace(reEscapeChar,"$1"):number||match)});return result});function toKey(value){if("string"==typeof value||isSymbol(value))return value;var result=value+"";return"0"==result&&1/value==-INFINITY?"-0":result}function toSource(func){if(null!=func){try{return funcToString.call(func)}catch(e){}try{return func+""}catch(e){}}return""}function memoize(func,resolver){if("function"!=typeof func||resolver&&"function"!=typeof resolver)throw new TypeError(FUNC_ERROR_TEXT);var memoized=function(){var args=arguments,key=resolver?resolver.apply(this,args):args[0],cache=memoized.cache;if(cache.has(key))return cache.get(key);var result=func.apply(this,args);memoized.cache=cache.set(key,result);return result};memoized.cache=new(memoize.Cache||MapCache);return memoized}memoize.Cache=MapCache;function eq(value,other){return value===other||value!==value&&other!==other}var isArray=Array.isArray;function isFunction(value){var tag=isObject(value)?objectToString.call(value):"";return tag==funcTag||tag==genTag}function isObject(value){var type=typeof value;return!!value&&("object"==type||"function"==type)}function isObjectLike(value){return!!value&&"object"==typeof value}function isSymbol(value){return"symbol"==typeof value||isObjectLike(value)&&objectToString.call(value)==symbolTag}function toString(value){return null==value?"":baseToString(value)}function toPath(value){if(isArray(value))return arrayMap(value,toKey);return isSymbol(value)?[value]:copyArray(stringToPath(value))}module.exports=toPath}).call(exports,__webpack_require__(23))},6046:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.runInterpreter=runInterpreter;var _ast=__webpack_require__(343);var _get_type=__webpack_require__(386);var _interpreter=__webpack_require__(526);var _notify=__webpack_require__(293);function runInterpreter(ast){var context=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;var options=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return(0,_interpreter.interpretAst)(ast,context).then(function(renderable){if("render"===(0,_get_type.getType)(renderable))return renderable;if(options.castToRender)return runInterpreter((0,_ast.fromExpression)("render"),renderable,{castToRender:false});return new Error("Ack! I don't know how to render a '"+(0,_get_type.getType)(renderable)+"'")}).catch(function(err){_notify.notify.error(err);throw err})}},6047:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.socketInterpreterProvider=socketInterpreterProvider;var _v=__webpack_require__(1040);var _v2=_interopRequireDefault(_v);var _get_by_alias=__webpack_require__(1166);var _serialize=__webpack_require__(2038);var _interpret=__webpack_require__(6048);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function socketInterpreterProvider(_ref){var types=_ref.types,functions=_ref.functions,handlers=_ref.handlers,referableFunctions=_ref.referableFunctions,socket=_ref.socket;return(0,_interpret.interpretProvider)({types:types,functions:functions,handlers:handlers,onFunctionNotFound:function onFunctionNotFound(ast,context){var functionName=ast.chain[0].function;return Promise.resolve(referableFunctions).then(function(referableFunctionMap){if(!(0,_get_by_alias.getByAlias)(referableFunctionMap,functionName))throw new Error("Function not found: "+functionName);var id=(0,_v2.default)();return new Promise(function(resolve){var _serializeProvider=(0,_serialize.serializeProvider)(types),serialize=_serializeProvider.serialize,deserialize=_serializeProvider.deserialize;var listener=function listener(resp){return resolve(deserialize(resp.value))};socket.once("resp:"+id,listener);socket.emit("run",{ast:ast,context:serialize(context),id:id})})})}})}},6048:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var _extends=Object.assign||function(target){for(var i=1;i<arguments.length;i++){var source=arguments[i];for(var key in source)Object.prototype.hasOwnProperty.call(source,key)&&(target[key]=source[key])}return target};exports.interpretProvider=interpretProvider;var _lodash=__webpack_require__(2039);var _lodash2=_interopRequireDefault(_lodash);var _lodash3=__webpack_require__(1);var _get_type=__webpack_require__(386);var _ast=__webpack_require__(343);var _get_by_alias=__webpack_require__(1166);var _types_registry=__webpack_require__(805);var _cast=__webpack_require__(2040);var _create_error=__webpack_require__(6050);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _asyncToGenerator(fn){return function(){var gen=fn.apply(this,arguments);return new Promise(function(resolve,reject){function step(key,arg){try{var info=gen[key](arg);var value=info.value}catch(error){reject(error);return}if(!info.done)return Promise.resolve(value).then(function(value){step("next",value)},function(err){step("throw",err)});resolve(value)}return step("next")})}}function interpretProvider(config){var interpret=(_ref=_asyncToGenerator(regeneratorRuntime.mark(function _callee(node){var context=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return regeneratorRuntime.wrap(function _callee$(_context){while(1)switch(_context.prev=_context.next){case 0:_context.t0=(0,_get_type.getType)(node);_context.next="expression"===_context.t0?3:"string"===_context.t0?4:"number"===_context.t0?4:"null"===_context.t0?4:"boolean"===_context.t0?4:5;break;case 3:return _context.abrupt("return",invokeChain(node.chain,context));case 4:return _context.abrupt("return",node);case 5:throw new Error("Unknown AST object: "+JSON.stringify(node));case 6:case"end":return _context.stop()}},_callee,this)})),function interpret(_x2){return _ref.apply(this,arguments)});var _ref;var invokeChain=(_ref2=_asyncToGenerator(regeneratorRuntime.mark(function _callee2(chainArr,context){var chain,link,fnName,fnArgs,fnDef,_ref3,resolvedArgs,newContext;return regeneratorRuntime.wrap(function _callee2$(_context2){while(1)switch(_context2.prev=_context2.next){case 0:if(chainArr.length){_context2.next=2;break}return _context2.abrupt("return",Promise.resolve(context));case 2:chain=(0,_lodash2.default)(chainArr);link=chain.shift();fnName=link.function,fnArgs=link.arguments;fnDef=(0,_get_by_alias.getByAlias)(functions,fnName);if(fnDef){_context2.next=17;break}chain.unshift(link);_context2.prev=8;_context2.next=11;return onFunctionNotFound({type:"expression",chain:chain},context);case 11:return _context2.abrupt("return",_context2.sent);case 14:_context2.prev=14;_context2.t0=_context2["catch"](8);return _context2.abrupt("return",(0,_create_error.createError)(_context2.t0));case 17:_context2.prev=17;_context2.next=20;return resolveArgs(fnDef,context,fnArgs);case 20:_ref3=_context2.sent;resolvedArgs=_ref3.resolvedArgs;_context2.next=24;return invokeFunction(fnDef,context,resolvedArgs);case 24:newContext=_context2.sent;if(!("error"===(0,_get_type.getType)(newContext))){_context2.next=27;break}return _context2.abrupt("return",newContext);case 27:_context2.next=29;return invokeChain(chain,newContext);case 29:return _context2.abrupt("return",_context2.sent);case 32:_context2.prev=32;_context2.t1=_context2["catch"](17);_context2.t1.message="["+fnName+"] > "+_context2.t1.message;return _context2.abrupt("return",(0,_create_error.createError)(_context2.t1));case 36:case"end":return _context2.stop()}},_callee2,this,[[8,14],[17,32]])})),function invokeChain(_x3,_x4){return _ref2.apply(this,arguments)});var _ref2;var invokeFunction=(_ref4=_asyncToGenerator(regeneratorRuntime.mark(function _callee3(fnDef,context,args){var acceptableContext,fnOutput,returnType,expectedType,type;return regeneratorRuntime.wrap(function _callee3$(_context3){while(1)switch(_context3.prev=_context3.next){case 0:acceptableContext=cast(context,fnDef.context.types);_context3.next=3;return fnDef.fn(acceptableContext,args,handlers);case 3:fnOutput=_context3.sent;returnType=(0,_get_type.getType)(fnOutput);expectedType=fnDef.type;if(!(expectedType&&returnType!==expectedType)){_context3.next=8;break}throw new Error("Function '"+fnDef.name+"' should return '"+expectedType+"', actually returned '"+returnType+"'");case 8:type=_types_registry.typesRegistry.get(fnDef.type);if(!(type&&type.validate)){_context3.next=17;break}_context3.prev=10;type.validate(fnOutput);_context3.next=17;break;case 14:_context3.prev=14;_context3.t0=_context3["catch"](10);throw new Error("Output of '"+fnDef.name+"' is not a valid type '"+fnDef.type+"': "+_context3.t0);case 17:return _context3.abrupt("return",fnOutput);case 18:case"end":return _context3.stop()}},_callee3,this,[[10,14]])})),function invokeFunction(_x5,_x6,_x7){return _ref4.apply(this,arguments)});var _ref4;var resolveArgs=(_ref5=_asyncToGenerator(regeneratorRuntime.mark(function _callee5(fnDef,context,argAsts){var _this=this;var argDefs,dealiasedArgAsts,argAstsWithDefaults,resolveArgFns,argNames,resolvedArgValues,resolvedMultiArgs,resolvedArgs;return regeneratorRuntime.wrap(function _callee5$(_context5){while(1)switch(_context5.prev=_context5.next){case 0:argDefs=fnDef.args;dealiasedArgAsts=(0,_lodash3.reduce)(argAsts,function(argAsts,argAst,argName){var argDef=(0,_get_by_alias.getByAlias)(argDefs,argName);if(!argDef)throw new Error("Unknown argument '"+argName+"' passed to function '"+fnDef.name+"'");argAsts[argDef.name]=(argAsts[argDef.name]||[]).concat(argAst);return argAsts},{});(0,_lodash3.each)(argDefs,function(argDef){var aliases=argDef.aliases,argDefault=argDef.default,argName=argDef.name,required=argDef.required;if("undefined"===typeof argDefault&&required&&"undefined"===typeof dealiasedArgAsts[argName]){if(0===aliases.length)throw new Error(fnDef.name+" requires an argument");var errorArg="_"===argName?aliases[0]:argName;throw new Error(fnDef.name+' requires an "'+errorArg+'" argument')}});argAstsWithDefaults=(0,_lodash3.reduce)(argDefs,function(argAsts,argDef,argName){"undefined"===typeof argAsts[argName]&&"undefined"!==typeof argDef.default&&(argAsts[argName]=[(0,_ast.fromExpression)(argDef.default,"argument")]);return argAsts},dealiasedArgAsts);resolveArgFns=(0,_lodash3.mapValues)(argAstsWithDefaults,function(argAsts,argName){return argAsts.map(function(argAst){return _asyncToGenerator(regeneratorRuntime.mark(function _callee4(){var ctx=arguments.length>0&&void 0!==arguments[0]?arguments[0]:context;var newContext;return regeneratorRuntime.wrap(function _callee4$(_context4){while(1)switch(_context4.prev=_context4.next){case 0:_context4.next=2;return interpret(argAst,ctx);case 2:newContext=_context4.sent;if(!("error"===(0,_get_type.getType)(newContext))){_context4.next=5;break}throw newContext.error;case 5:return _context4.abrupt("return",cast(newContext,argDefs[argName].types));case 6:case"end":return _context4.stop()}},_callee4,_this)}))})});argNames=(0,_lodash3.keys)(resolveArgFns);_context5.next=8;return Promise.all(argNames.map(function(argName){var interpretFns=resolveArgFns[argName];if(!argDefs[argName].resolve)return interpretFns;return Promise.all(interpretFns.map(function(fn){return fn()}))}));case 8:resolvedArgValues=_context5.sent;resolvedMultiArgs=(0,_lodash3.zipObject)(argNames,resolvedArgValues);resolvedArgs=(0,_lodash3.mapValues)(resolvedMultiArgs,function(argValues,argName){if(argDefs[argName].multi)return argValues;return(0,_lodash3.last)(argValues)});return _context5.abrupt("return",{resolvedArgs:resolvedArgs});case 12:case"end":return _context5.stop()}},_callee5,this)})),function resolveArgs(_x8,_x9,_x10){return _ref5.apply(this,arguments)});var _ref5;var functions=config.functions,onFunctionNotFound=config.onFunctionNotFound,types=config.types;var handlers=_extends({},config.handlers,{types:types});var cast=(0,_cast.castProvider)(types);return interpret}},6049:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.Type=Type;var _lodash=__webpack_require__(1);var _get_type=__webpack_require__(386);function Type(config){var _this=this;this.name=config.name;this.help=config.help||"";this.validate=config.validate||function validate(){};this.create=config.create;this.serialize=config.serialize;this.deserialize=config.deserialize;var getToFn=function getToFn(type){return(0,_lodash.get)(config,["to",type])||(0,_lodash.get)(config,["to","*"])};var getFromFn=function getFromFn(type){return(0,_lodash.get)(config,["from",type])||(0,_lodash.get)(config,["from","*"])};this.castsTo=function(type){return"function"===typeof getToFn(type)};this.castsFrom=function(type){return"function"===typeof getFromFn(type)};this.to=function(node,toTypeName,types){var typeName=(0,_get_type.getType)(node);if(typeName!==_this.name)throw new Error("Can not cast object of type '"+typeName+"' using '"+_this.name+"'");if(!_this.castsTo(toTypeName))throw new Error("Can not cast '"+typeName+"' to '"+toTypeName+"'");return getToFn(toTypeName)(node,types)};this.from=function(node,types){var typeName=(0,_get_type.getType)(node);if(!_this.castsFrom(typeName))throw new Error("Can not cast '"+_this.name+"' from "+typeName);return getFromFn(typeName)(node,types)}}},6050:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.createError=function createError(err){return{type:"error",error:{stack:void 0,message:"string"===typeof err?err:err.message}}}},6051:function(module,exports,__webpack_require__){var url=__webpack_require__(6052);var parser=__webpack_require__(1167);var Manager=__webpack_require__(2045);var debug=__webpack_require__(344)("socket.io-client");module.exports=exports=lookup;var cache=exports.managers={};function lookup(uri,opts){if("object"===typeof uri){opts=uri;uri=void 0}opts=opts||{};var parsed=url(uri);var source=parsed.source;var id=parsed.id;var path=parsed.path;var sameNamespace=cache[id]&&path in cache[id].nsps;var newConnection=opts.forceNew||opts["force new connection"]||false===opts.multiplex||sameNamespace;var io;if(newConnection){debug("ignoring socket cache for %s",source);io=Manager(source,opts)}else{if(!cache[id]){debug("new io instance for %s",source);cache[id]=Manager(source,opts)}io=cache[id]}parsed.query&&!opts.query&&(opts.query=parsed.query);return io.socket(parsed.path,opts)}exports.protocol=parser.protocol;exports.connect=lookup;exports.Manager=__webpack_require__(2045);exports.Socket=__webpack_require__(2051)},6052:function(module,exports,__webpack_require__){(function(global){var parseuri=__webpack_require__(2042);var debug=__webpack_require__(344)("socket.io-client:url");module.exports=url;function url(uri,loc){var obj=uri;loc=loc||global.location;null==uri&&(uri=loc.protocol+"//"+loc.host);if("string"===typeof uri){"/"===uri.charAt(0)&&(uri="/"===uri.charAt(1)?loc.protocol+uri:loc.host+uri);if(!/^(https?|wss?):\/\//.test(uri)){debug("protocol-less url %s",uri);uri="undefined"!==typeof loc?loc.protocol+"//"+uri:"https://"+uri}debug("parse %s",uri);obj=parseuri(uri)}obj.port||(/^(http|ws)$/.test(obj.protocol)?obj.port="80":/^(http|ws)s$/.test(obj.protocol)&&(obj.port="443"));obj.path=obj.path||"/";var ipv6=-1!==obj.host.indexOf(":");var host=ipv6?"["+obj.host+"]":obj.host;obj.id=obj.protocol+"://"+host+":"+obj.port;obj.href=obj.protocol+"://"+host+(loc&&loc.port===obj.port?"":":"+obj.port);return obj}}).call(exports,__webpack_require__(23))},6053:function(module,exports,__webpack_require__){exports=module.exports=createDebug.debug=createDebug["default"]=createDebug;exports.coerce=coerce;exports.disable=disable;exports.enable=enable;exports.enabled=enabled;exports.humanize=__webpack_require__(6054);exports.instances=[];exports.names=[];exports.skips=[];exports.formatters={};function selectColor(namespace){var i,hash=0;for(i in namespace){hash=(hash<<5)-hash+namespace.charCodeAt(i);hash|=0}return exports.colors[Math.abs(hash)%exports.colors.length]}function createDebug(namespace){var prevTime;function debug(){if(!debug.enabled)return;var self=debug;var curr=+new Date;var ms=curr-(prevTime||curr);self.diff=ms;self.prev=prevTime;self.curr=curr;prevTime=curr;var args=new Array(arguments.length);for(var i=0;i<args.length;i++)args[i]=arguments[i];args[0]=exports.coerce(args[0]);"string"!==typeof args[0]&&args.unshift("%O");var index=0;args[0]=args[0].replace(/%([a-zA-Z%])/g,function(match,format){if("%%"===match)return match;index++;var formatter=exports.formatters[format];if("function"===typeof formatter){var val=args[index];match=formatter.call(self,val);args.splice(index,1);index--}return match});exports.formatArgs.call(self,args);var logFn=debug.log||exports.log||console.log.bind(console);logFn.apply(self,args)}debug.namespace=namespace;debug.enabled=exports.enabled(namespace);debug.useColors=exports.useColors();debug.color=selectColor(namespace);debug.destroy=destroy;"function"===typeof exports.init&&exports.init(debug);exports.instances.push(debug);return debug}function destroy(){var index=exports.instances.indexOf(this);if(-1!==index){exports.instances.splice(index,1);return true}return false}function enable(namespaces){exports.save(namespaces);exports.names=[];exports.skips=[];var i;var split=("string"===typeof namespaces?namespaces:"").split(/[\s,]+/);var len=split.length;for(i=0;i<len;i++){if(!split[i])continue;namespaces=split[i].replace(/\*/g,".*?");"-"===namespaces[0]?exports.skips.push(new RegExp("^"+namespaces.substr(1)+"$")):exports.names.push(new RegExp("^"+namespaces+"$"))}for(i=0;i<exports.instances.length;i++){var instance=exports.instances[i];instance.enabled=exports.enabled(instance.namespace)}}function disable(){exports.enable("")}function enabled(name){if("*"===name[name.length-1])return true;var i,len;for(i=0,len=exports.skips.length;i<len;i++)if(exports.skips[i].test(name))return false;for(i=0,len=exports.names.length;i<len;i++)if(exports.names[i].test(name))return true;return false}function coerce(val){if(val instanceof Error)return val.stack||val.message;return val}},6054:function(module,exports){var s=1e3;var m=60*s;var h=60*m;var d=24*h;var y=365.25*d;module.exports=function(val,options){options=options||{};var type=typeof val;if("string"===type&&val.length>0)return parse(val);if("number"===type&&false===isNaN(val))return options.long?fmtLong(val):fmtShort(val);throw new Error("val is not a non-empty string or a valid number. val="+JSON.stringify(val))};function parse(str){str=String(str);if(str.length>100)return;var match=/^((?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|years?|yrs?|y)?$/i.exec(str);if(!match)return;var n=parseFloat(match[1]);var type=(match[2]||"ms").toLowerCase();switch(type){case"years":case"year":case"yrs":case"yr":case"y":return n*y;case"days":case"day":case"d":return n*d;case"hours":case"hour":case"hrs":case"hr":case"h":return n*h;case"minutes":case"minute":case"mins":case"min":case"m":return n*m;case"seconds":case"second":case"secs":case"sec":case"s":return n*s;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return n;default:return}}function fmtShort(ms){if(ms>=d)return Math.round(ms/d)+"d";if(ms>=h)return Math.round(ms/h)+"h";if(ms>=m)return Math.round(ms/m)+"m";if(ms>=s)return Math.round(ms/s)+"s";return ms+"ms"}function fmtLong(ms){return plural(ms,d,"day")||plural(ms,h,"hour")||plural(ms,m,"minute")||plural(ms,s,"second")||ms+" ms"}function plural(ms,n,name){if(ms<n)return;if(ms<1.5*n)return Math.floor(ms/n)+" "+name;return Math.ceil(ms/n)+" "+name+"s"}},6055:function(module,exports,__webpack_require__){(function(global){var isArray=__webpack_require__(2043);var isBuf=__webpack_require__(2044);var toString=Object.prototype.toString;var withNativeBlob="function"===typeof global.Blob||"[object BlobConstructor]"===toString.call(global.Blob);var withNativeFile="function"===typeof global.File||"[object FileConstructor]"===toString.call(global.File);exports.deconstructPacket=function(packet){var buffers=[];var packetData=packet.data;var pack=packet;pack.data=_deconstructPacket(packetData,buffers);pack.attachments=buffers.length;return{packet:pack,buffers:buffers}};function _deconstructPacket(data,buffers){if(!data)return data;if(isBuf(data)){var placeholder={_placeholder:true,num:buffers.length};buffers.push(data);return placeholder}if(isArray(data)){var newData=new Array(data.length);for(var i=0;i<data.length;i++)newData[i]=_deconstructPacket(data[i],buffers);return newData}if("object"===typeof data&&!(data instanceof Date)){newData={};for(var key in data)newData[key]=_deconstructPacket(data[key],buffers);return newData}return data}exports.reconstructPacket=function(packet,buffers){packet.data=_reconstructPacket(packet.data,buffers);packet.attachments=void 0;return packet};function _reconstructPacket(data,buffers){if(!data)return data;if(data&&data._placeholder)return buffers[data.num];if(isArray(data))for(var i=0;i<data.length;i++)data[i]=_reconstructPacket(data[i],buffers);else if("object"===typeof data)for(var key in data)data[key]=_reconstructPacket(data[key],buffers);return data}exports.removeBlobs=function(data,callback){function _removeBlobs(obj,curKey,containingObject){if(!obj)return obj;if(withNativeBlob&&obj instanceof Blob||withNativeFile&&obj instanceof File){pendingBlobs++;var fileReader=new FileReader;fileReader.onload=function(){containingObject?containingObject[curKey]=this.result:bloblessData=this.result;--pendingBlobs||callback(bloblessData)};fileReader.readAsArrayBuffer(obj)}else if(isArray(obj))for(var i=0;i<obj.length;i++)_removeBlobs(obj[i],i,obj);else if("object"===typeof obj&&!isBuf(obj))for(var key in obj)_removeBlobs(obj[key],key,obj)}var pendingBlobs=0;var bloblessData=data;_removeBlobs(bloblessData);pendingBlobs||callback(bloblessData)}}).call(exports,__webpack_require__(23))},6056:function(module,exports,__webpack_require__){module.exports=__webpack_require__(6057);module.exports.parser=__webpack_require__(528)},6057:function(module,exports,__webpack_require__){(function(global){var transports=__webpack_require__(2046);var Emitter=__webpack_require__(527);var debug=__webpack_require__(344)("engine.io-client:socket");var index=__webpack_require__(2050);var parser=__webpack_require__(528);var parseuri=__webpack_require__(2042);var parseqs=__webpack_require__(806);module.exports=Socket;function Socket(uri,opts){if(!(this instanceof Socket))return new Socket(uri,opts);opts=opts||{};if(uri&&"object"===typeof uri){opts=uri;uri=null}if(uri){uri=parseuri(uri);opts.hostname=uri.host;opts.secure="https"===uri.protocol||"wss"===uri.protocol;opts.port=uri.port;uri.query&&(opts.query=uri.query)}else opts.host&&(opts.hostname=parseuri(opts.host).host);this.secure=null!=opts.secure?opts.secure:global.location&&"https:"===location.protocol;opts.hostname&&!opts.port&&(opts.port=this.secure?"443":"80");this.agent=opts.agent||false;this.hostname=opts.hostname||(global.location?location.hostname:"localhost");this.port=opts.port||(global.location&&location.port?location.port:this.secure?443:80);this.query=opts.query||{};"string"===typeof this.query&&(this.query=parseqs.decode(this.query));this.upgrade=false!==opts.upgrade;this.path=(opts.path||"/engine.io").replace(/\/$/,"")+"/";this.forceJSONP=!!opts.forceJSONP;this.jsonp=false!==opts.jsonp;this.forceBase64=!!opts.forceBase64;this.enablesXDR=!!opts.enablesXDR;this.timestampParam=opts.timestampParam||"t";this.timestampRequests=opts.timestampRequests;this.transports=opts.transports||["polling","websocket"];this.transportOptions=opts.transportOptions||{};this.readyState="";this.writeBuffer=[];this.prevBufferLen=0;this.policyPort=opts.policyPort||843;this.rememberUpgrade=opts.rememberUpgrade||false;this.binaryType=null;this.onlyBinaryUpgrades=opts.onlyBinaryUpgrades;this.perMessageDeflate=false!==opts.perMessageDeflate&&(opts.perMessageDeflate||{});true===this.perMessageDeflate&&(this.perMessageDeflate={});this.perMessageDeflate&&null==this.perMessageDeflate.threshold&&(this.perMessageDeflate.threshold=1024);this.pfx=opts.pfx||null;this.key=opts.key||null;this.passphrase=opts.passphrase||null;this.cert=opts.cert||null;this.ca=opts.ca||null;this.ciphers=opts.ciphers||null;this.rejectUnauthorized=void 0===opts.rejectUnauthorized||opts.rejectUnauthorized;this.forceNode=!!opts.forceNode;var freeGlobal="object"===typeof global&&global;if(freeGlobal.global===freeGlobal){opts.extraHeaders&&Object.keys(opts.extraHeaders).length>0&&(this.extraHeaders=opts.extraHeaders);opts.localAddress&&(this.localAddress=opts.localAddress)}this.id=null;this.upgrades=null;this.pingInterval=null;this.pingTimeout=null;this.pingIntervalTimer=null;this.pingTimeoutTimer=null;this.open()}Socket.priorWebsocketSuccess=false;Emitter(Socket.prototype);Socket.protocol=parser.protocol;Socket.Socket=Socket;Socket.Transport=__webpack_require__(1169);Socket.transports=__webpack_require__(2046);Socket.parser=__webpack_require__(528);Socket.prototype.createTransport=function(name){debug('creating transport "%s"',name);var query=clone(this.query);query.EIO=parser.protocol;query.transport=name;var options=this.transportOptions[name]||{};this.id&&(query.sid=this.id);var transport=new transports[name]({query:query,socket:this,agent:options.agent||this.agent,hostname:options.hostname||this.hostname,port:options.port||this.port,secure:options.secure||this.secure,path:options.path||this.path,forceJSONP:options.forceJSONP||this.forceJSONP,jsonp:options.jsonp||this.jsonp,forceBase64:options.forceBase64||this.forceBase64,enablesXDR:options.enablesXDR||this.enablesXDR,timestampRequests:options.timestampRequests||this.timestampRequests,timestampParam:options.timestampParam||this.timestampParam,policyPort:options.policyPort||this.policyPort,pfx:options.pfx||this.pfx,key:options.key||this.key,passphrase:options.passphrase||this.passphrase,cert:options.cert||this.cert,ca:options.ca||this.ca,ciphers:options.ciphers||this.ciphers,rejectUnauthorized:options.rejectUnauthorized||this.rejectUnauthorized,perMessageDeflate:options.perMessageDeflate||this.perMessageDeflate,extraHeaders:options.extraHeaders||this.extraHeaders,forceNode:options.forceNode||this.forceNode,localAddress:options.localAddress||this.localAddress,requestTimeout:options.requestTimeout||this.requestTimeout,protocols:options.protocols||void 0});return transport};function clone(obj){var o={};for(var i in obj)obj.hasOwnProperty(i)&&(o[i]=obj[i]);return o}Socket.prototype.open=function(){var transport;if(this.rememberUpgrade&&Socket.priorWebsocketSuccess&&-1!==this.transports.indexOf("websocket"))transport="websocket";else{if(0===this.transports.length){var self=this;setTimeout(function(){self.emit("error","No transports available")},0);return}transport=this.transports[0]}this.readyState="opening";try{transport=this.createTransport(transport)}catch(e){this.transports.shift();this.open();return}transport.open();this.setTransport(transport)};Socket.prototype.setTransport=function(transport){debug("setting transport %s",transport.name);var self=this;if(this.transport){debug("clearing existing transport %s",this.transport.name);this.transport.removeAllListeners()}this.transport=transport;transport.on("drain",function(){self.onDrain()}).on("packet",function(packet){self.onPacket(packet)}).on("error",function(e){self.onError(e)}).on("close",function(){self.onClose("transport close")})};Socket.prototype.probe=function(name){debug('probing transport "%s"',name);var transport=this.createTransport(name,{probe:1});var failed=false;var self=this;Socket.priorWebsocketSuccess=false;function onTransportOpen(){if(self.onlyBinaryUpgrades){var upgradeLosesBinary=!this.supportsBinary&&self.transport.supportsBinary;failed=failed||upgradeLosesBinary}if(failed)return;debug('probe transport "%s" opened',name);transport.send([{type:"ping",data:"probe"}]);transport.once("packet",function(msg){if(failed)return;if("pong"===msg.type&&"probe"===msg.data){debug('probe transport "%s" pong',name);self.upgrading=true;self.emit("upgrading",transport);if(!transport)return;Socket.priorWebsocketSuccess="websocket"===transport.name;debug('pausing current transport "%s"',self.transport.name);self.transport.pause(function(){if(failed)return;if("closed"===self.readyState)return;debug("changing transport and sending upgrade packet");cleanup();self.setTransport(transport);transport.send([{type:"upgrade"}]);self.emit("upgrade",transport);transport=null;self.upgrading=false;self.flush()})}else{debug('probe transport "%s" failed',name);var err=new Error("probe error");err.transport=transport.name;self.emit("upgradeError",err)}})}function freezeTransport(){if(failed)return;failed=true;cleanup();transport.close();transport=null}function onerror(err){var error=new Error("probe error: "+err);error.transport=transport.name;freezeTransport();debug('probe transport "%s" failed because of error: %s',name,err);self.emit("upgradeError",error)}function onTransportClose(){onerror("transport closed")}function onclose(){onerror("socket closed")}function onupgrade(to){if(transport&&to.name!==transport.name){debug('"%s" works - aborting "%s"',to.name,transport.name);freezeTransport()}}function cleanup(){transport.removeListener("open",onTransportOpen);transport.removeListener("error",onerror);transport.removeListener("close",onTransportClose);self.removeListener("close",onclose);self.removeListener("upgrading",onupgrade)}transport.once("open",onTransportOpen);transport.once("error",onerror);transport.once("close",onTransportClose);this.once("close",onclose);this.once("upgrading",onupgrade);transport.open()};Socket.prototype.onOpen=function(){debug("socket open");this.readyState="open";Socket.priorWebsocketSuccess="websocket"===this.transport.name;this.emit("open");this.flush();if("open"===this.readyState&&this.upgrade&&this.transport.pause){debug("starting upgrade probes");for(var i=0,l=this.upgrades.length;i<l;i++)this.probe(this.upgrades[i])}};Socket.prototype.onPacket=function(packet){if("opening"===this.readyState||"open"===this.readyState||"closing"===this.readyState){debug('socket receive: type "%s", data "%s"',packet.type,packet.data);this.emit("packet",packet);this.emit("heartbeat");switch(packet.type){case"open":this.onHandshake(JSON.parse(packet.data));break;case"pong":this.setPing();this.emit("pong");break;case"error":var err=new Error("server error");err.code=packet.data;this.onError(err);break;case"message":this.emit("data",packet.data);this.emit("message",packet.data)}}else debug('packet received with socket readyState "%s"',this.readyState)};Socket.prototype.onHandshake=function(data){this.emit("handshake",data);this.id=data.sid;this.transport.query.sid=data.sid;this.upgrades=this.filterUpgrades(data.upgrades);this.pingInterval=data.pingInterval;this.pingTimeout=data.pingTimeout;this.onOpen();if("closed"===this.readyState)return;this.setPing();this.removeListener("heartbeat",this.onHeartbeat);this.on("heartbeat",this.onHeartbeat)};Socket.prototype.onHeartbeat=function(timeout){clearTimeout(this.pingTimeoutTimer);var self=this;self.pingTimeoutTimer=setTimeout(function(){if("closed"===self.readyState)return;self.onClose("ping timeout")},timeout||self.pingInterval+self.pingTimeout)};Socket.prototype.setPing=function(){var self=this;clearTimeout(self.pingIntervalTimer);self.pingIntervalTimer=setTimeout(function(){debug("writing ping packet - expecting pong within %sms",self.pingTimeout);self.ping();self.onHeartbeat(self.pingTimeout)},self.pingInterval)};Socket.prototype.ping=function(){var self=this;this.sendPacket("ping",function(){self.emit("ping")})};Socket.prototype.onDrain=function(){this.writeBuffer.splice(0,this.prevBufferLen);this.prevBufferLen=0;0===this.writeBuffer.length?this.emit("drain"):this.flush()};Socket.prototype.flush=function(){if("closed"!==this.readyState&&this.transport.writable&&!this.upgrading&&this.writeBuffer.length){debug("flushing %d packets in socket",this.writeBuffer.length);this.transport.send(this.writeBuffer);this.prevBufferLen=this.writeBuffer.length;this.emit("flush")}};Socket.prototype.write=Socket.prototype.send=function(msg,options,fn){this.sendPacket("message",msg,options,fn);return this};Socket.prototype.sendPacket=function(type,data,options,fn){if("function"===typeof data){fn=data;data=void 0}if("function"===typeof options){fn=options;options=null}if("closing"===this.readyState||"closed"===this.readyState)return;options=options||{};options.compress=false!==options.compress;var packet={type:type,data:data,options:options};this.emit("packetCreate",packet);this.writeBuffer.push(packet);fn&&this.once("flush",fn);this.flush()};Socket.prototype.close=function(){if("opening"===this.readyState||"open"===this.readyState){this.readyState="closing";var self=this;this.writeBuffer.length?this.once("drain",function(){this.upgrading?waitForUpgrade():close()}):this.upgrading?waitForUpgrade():close()}function close(){self.onClose("forced close");debug("socket closing - telling transport to close");self.transport.close()}function cleanupAndClose(){self.removeListener("upgrade",cleanupAndClose);self.removeListener("upgradeError",cleanupAndClose);close()}function waitForUpgrade(){self.once("upgrade",cleanupAndClose);self.once("upgradeError",cleanupAndClose)}return this};Socket.prototype.onError=function(err){debug("socket error %j",err);Socket.priorWebsocketSuccess=false;this.emit("error",err);this.onClose("transport error",err)};Socket.prototype.onClose=function(reason,desc){if("opening"===this.readyState||"open"===this.readyState||"closing"===this.readyState){debug('socket close with reason: "%s"',reason);var self=this;clearTimeout(this.pingIntervalTimer);clearTimeout(this.pingTimeoutTimer);this.transport.removeAllListeners("close");this.transport.close();this.transport.removeAllListeners();this.readyState="closed";this.id=null;this.emit("close",reason,desc);self.writeBuffer=[];self.prevBufferLen=0}};Socket.prototype.filterUpgrades=function(upgrades){var filteredUpgrades=[];for(var i=0,j=upgrades.length;i<j;i++)~index(this.transports,upgrades[i])&&filteredUpgrades.push(upgrades[i]);return filteredUpgrades}}).call(exports,__webpack_require__(23))},6058:function(module,exports){try{module.exports="undefined"!==typeof XMLHttpRequest&&"withCredentials"in new XMLHttpRequest}catch(err){module.exports=false}},6059:function(module,exports,__webpack_require__){(function(global){var XMLHttpRequest=__webpack_require__(1168);var Polling=__webpack_require__(2047);var Emitter=__webpack_require__(527);var inherit=__webpack_require__(807);var debug=__webpack_require__(344)("engine.io-client:polling-xhr");module.exports=XHR;module.exports.Request=Request;function empty(){}function XHR(opts){Polling.call(this,opts);this.requestTimeout=opts.requestTimeout;this.extraHeaders=opts.extraHeaders;if(global.location){var isSSL="https:"===location.protocol;var port=location.port;port||(port=isSSL?443:80);this.xd=opts.hostname!==global.location.hostname||port!==opts.port;this.xs=opts.secure!==isSSL}}inherit(XHR,Polling);XHR.prototype.supportsBinary=true;XHR.prototype.request=function(opts){opts=opts||{};opts.uri=this.uri();opts.xd=this.xd;opts.xs=this.xs;opts.agent=this.agent||false;opts.supportsBinary=this.supportsBinary;opts.enablesXDR=this.enablesXDR;opts.pfx=this.pfx;opts.key=this.key;opts.passphrase=this.passphrase;opts.cert=this.cert;opts.ca=this.ca;opts.ciphers=this.ciphers;opts.rejectUnauthorized=this.rejectUnauthorized;opts.requestTimeout=this.requestTimeout;opts.extraHeaders=this.extraHeaders;return new Request(opts)};XHR.prototype.doWrite=function(data,fn){var isBinary="string"!==typeof data&&void 0!==data;var req=this.request({method:"POST",data:data,isBinary:isBinary});var self=this;req.on("success",fn);req.on("error",function(err){self.onError("xhr post error",err)});this.sendXhr=req};XHR.prototype.doPoll=function(){debug("xhr poll");var req=this.request();var self=this;req.on("data",function(data){self.onData(data)});req.on("error",function(err){self.onError("xhr poll error",err)});this.pollXhr=req};function Request(opts){this.method=opts.method||"GET";this.uri=opts.uri;this.xd=!!opts.xd;this.xs=!!opts.xs;this.async=false!==opts.async;this.data=void 0!==opts.data?opts.data:null;this.agent=opts.agent;this.isBinary=opts.isBinary;this.supportsBinary=opts.supportsBinary;this.enablesXDR=opts.enablesXDR;this.requestTimeout=opts.requestTimeout;this.pfx=opts.pfx;this.key=opts.key;this.passphrase=opts.passphrase;this.cert=opts.cert;this.ca=opts.ca;this.ciphers=opts.ciphers;this.rejectUnauthorized=opts.rejectUnauthorized;this.extraHeaders=opts.extraHeaders;this.create()}Emitter(Request.prototype);Request.prototype.create=function(){var opts={agent:this.agent,xdomain:this.xd,xscheme:this.xs,enablesXDR:this.enablesXDR};opts.pfx=this.pfx;opts.key=this.key;opts.passphrase=this.passphrase;opts.cert=this.cert;opts.ca=this.ca;opts.ciphers=this.ciphers;opts.rejectUnauthorized=this.rejectUnauthorized;var xhr=this.xhr=new XMLHttpRequest(opts);var self=this;try{debug("xhr open %s: %s",this.method,this.uri);xhr.open(this.method,this.uri,this.async);try{if(this.extraHeaders){xhr.setDisableHeaderCheck&&xhr.setDisableHeaderCheck(true);for(var i in this.extraHeaders)this.extraHeaders.hasOwnProperty(i)&&xhr.setRequestHeader(i,this.extraHeaders[i])}}catch(e){}if("POST"===this.method)try{this.isBinary?xhr.setRequestHeader("Content-type","application/octet-stream"):xhr.setRequestHeader("Content-type","text/plain;charset=UTF-8")}catch(e){}try{xhr.setRequestHeader("Accept","*/*")}catch(e){}"withCredentials"in xhr&&(xhr.withCredentials=true);this.requestTimeout&&(xhr.timeout=this.requestTimeout);if(this.hasXDR()){xhr.onload=function(){self.onLoad()};xhr.onerror=function(){self.onError(xhr.responseText)}}else xhr.onreadystatechange=function(){if(2===xhr.readyState)try{var contentType=xhr.getResponseHeader("Content-Type");self.supportsBinary&&"application/octet-stream"===contentType&&(xhr.responseType="arraybuffer")}catch(e){}if(4!==xhr.readyState)return;200===xhr.status||1223===xhr.status?self.onLoad():setTimeout(function(){self.onError(xhr.status)},0)};debug("xhr data %s",this.data);xhr.send(this.data)}catch(e){setTimeout(function(){self.onError(e)},0);return}if(global.document){this.index=Request.requestsCount++;Request.requests[this.index]=this}};Request.prototype.onSuccess=function(){this.emit("success");this.cleanup()};Request.prototype.onData=function(data){this.emit("data",data);this.onSuccess()};Request.prototype.onError=function(err){this.emit("error",err);this.cleanup(true)};Request.prototype.cleanup=function(fromError){if("undefined"===typeof this.xhr||null===this.xhr)return;this.hasXDR()?this.xhr.onload=this.xhr.onerror=empty:this.xhr.onreadystatechange=empty;if(fromError)try{this.xhr.abort()}catch(e){}global.document&&delete Request.requests[this.index];this.xhr=null};Request.prototype.onLoad=function(){var data;try{var contentType;try{contentType=this.xhr.getResponseHeader("Content-Type")}catch(e){}data="application/octet-stream"===contentType&&this.xhr.response||this.xhr.responseText}catch(e){this.onError(e)}null!=data&&this.onData(data)};Request.prototype.hasXDR=function(){return"undefined"!==typeof global.XDomainRequest&&!this.xs&&this.enablesXDR};Request.prototype.abort=function(){this.cleanup()};Request.requestsCount=0;Request.requests={};global.document&&(global.attachEvent?global.attachEvent("onunload",unloadHandler):global.addEventListener&&global.addEventListener("beforeunload",unloadHandler,false));function unloadHandler(){for(var i in Request.requests)Request.requests.hasOwnProperty(i)&&Request.requests[i].abort()}}).call(exports,__webpack_require__(23))},6060:function(module,exports){module.exports=Object.keys||function keys(obj){var arr=[];var has=Object.prototype.hasOwnProperty;for(var i in obj)has.call(obj,i)&&arr.push(i);return arr}},6061:function(module,exports){var toString={}.toString;module.exports=Array.isArray||function(arr){return"[object Array]"==toString.call(arr)}},6062:function(module,exports){module.exports=function(arraybuffer,start,end){var bytes=arraybuffer.byteLength;start=start||0;end=end||bytes;if(arraybuffer.slice)return arraybuffer.slice(start,end);start<0&&(start+=bytes);end<0&&(end+=bytes);end>bytes&&(end=bytes);if(start>=bytes||start>=end||0===bytes)return new ArrayBuffer(0);var abv=new Uint8Array(arraybuffer);var result=new Uint8Array(end-start);for(var i=start,ii=0;i<end;i++,ii++)result[ii]=abv[i];return result.buffer}},6063:function(module,exports){module.exports=after;function after(count,callback,err_cb){var bail=false;err_cb=err_cb||noop;proxy.count=count;return 0===count?callback():proxy;function proxy(err,result){if(proxy.count<=0)throw new Error("after called too many times");--proxy.count;if(err){bail=true;callback(err);callback=err_cb}else 0!==proxy.count||bail||callback(null,result)}}function noop(){}},6064:function(module,exports,__webpack_require__){(function(module,global){var __WEBPACK_AMD_DEFINE_RESULT__;/*! https://mths.be/utf8js v2.1.2 by @mathias */(function(root){var freeExports="object"==typeof exports&&exports;"object"==typeof module&&module&&module.exports;var freeGlobal="object"==typeof global&&global;freeGlobal.global!==freeGlobal&&freeGlobal.window!==freeGlobal||freeGlobal;var stringFromCharCode=String.fromCharCode;function ucs2decode(string){var output=[];var counter=0;var length=string.length;var value;var extra;while(counter<length){value=string.charCodeAt(counter++);if(value>=55296&&value<=56319&&counter<length){extra=string.charCodeAt(counter++);if(56320==(64512&extra))output.push(((1023&value)<<10)+(1023&extra)+65536);else{output.push(value);counter--}}else output.push(value)}return output}function ucs2encode(array){var length=array.length;var index=-1;var value;var output="";while(++index<length){value=array[index];if(value>65535){value-=65536;output+=stringFromCharCode(value>>>10&1023|55296);value=56320|1023&value}output+=stringFromCharCode(value)}return output}function checkScalarValue(codePoint,strict){if(codePoint>=55296&&codePoint<=57343){if(strict)throw Error("Lone surrogate U+"+codePoint.toString(16).toUpperCase()+" is not a scalar value");return false}return true}function createByte(codePoint,shift){return stringFromCharCode(codePoint>>shift&63|128)}function encodeCodePoint(codePoint,strict){if(0==(4294967168&codePoint))return stringFromCharCode(codePoint);var symbol="";if(0==(4294965248&codePoint))symbol=stringFromCharCode(codePoint>>6&31|192);else if(0==(4294901760&codePoint)){checkScalarValue(codePoint,strict)||(codePoint=65533);symbol=stringFromCharCode(codePoint>>12&15|224);symbol+=createByte(codePoint,6)}else if(0==(4292870144&codePoint)){symbol=stringFromCharCode(codePoint>>18&7|240);symbol+=createByte(codePoint,12);symbol+=createByte(codePoint,6)}symbol+=stringFromCharCode(63&codePoint|128);return symbol}function utf8encode(string,opts){opts=opts||{};var strict=false!==opts.strict;var codePoints=ucs2decode(string);var length=codePoints.length;var index=-1;var codePoint;var byteString="";while(++index<length){codePoint=codePoints[index];byteString+=encodeCodePoint(codePoint,strict)}return byteString}function readContinuationByte(){if(byteIndex>=byteCount)throw Error("Invalid byte index");var continuationByte=255&byteArray[byteIndex];byteIndex++;if(128==(192&continuationByte))return 63&continuationByte;throw Error("Invalid continuation byte")}function decodeSymbol(strict){var byte1;var byte2;var byte3;var byte4;var codePoint;if(byteIndex>byteCount)throw Error("Invalid byte index");if(byteIndex==byteCount)return false;byte1=255&byteArray[byteIndex];byteIndex++;if(0==(128&byte1))return byte1;if(192==(224&byte1)){byte2=readContinuationByte();codePoint=(31&byte1)<<6|byte2;if(codePoint>=128)return codePoint;throw Error("Invalid continuation byte")}if(224==(240&byte1)){byte2=readContinuationByte();byte3=readContinuationByte();codePoint=(15&byte1)<<12|byte2<<6|byte3;if(codePoint>=2048)return checkScalarValue(codePoint,strict)?codePoint:65533;throw Error("Invalid continuation byte")}if(240==(248&byte1)){byte2=readContinuationByte();byte3=readContinuationByte();byte4=readContinuationByte();codePoint=(7&byte1)<<18|byte2<<12|byte3<<6|byte4;if(codePoint>=65536&&codePoint<=1114111)return codePoint}throw Error("Invalid UTF-8 detected")}var byteArray;var byteCount;var byteIndex;function utf8decode(byteString,opts){opts=opts||{};var strict=false!==opts.strict;byteArray=ucs2decode(byteString);byteCount=byteArray.length;byteIndex=0;var codePoints=[];var tmp;while(false!==(tmp=decodeSymbol(strict)))codePoints.push(tmp);return ucs2encode(codePoints)}var utf8={version:"2.1.2",encode:utf8encode,decode:utf8decode};true;!(__WEBPACK_AMD_DEFINE_RESULT__=function(){return utf8}.call(exports,__webpack_require__,exports,module),void 0!==__WEBPACK_AMD_DEFINE_RESULT__&&(module.exports=__WEBPACK_AMD_DEFINE_RESULT__))})()}).call(exports,__webpack_require__(66)(module),__webpack_require__(23))},6065:function(module,exports){(function(){"use strict";var chars="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/";var lookup=new Uint8Array(256);for(var i=0;i<chars.length;i++)lookup[chars.charCodeAt(i)]=i;exports.encode=function(arraybuffer){var i,bytes=new Uint8Array(arraybuffer),len=bytes.length,base64="";for(i=0;i<len;i+=3){base64+=chars[bytes[i]>>2];base64+=chars[(3&bytes[i])<<4|bytes[i+1]>>4];base64+=chars[(15&bytes[i+1])<<2|bytes[i+2]>>6];base64+=chars[63&bytes[i+2]]}len%3===2?base64=base64.substring(0,base64.length-1)+"=":len%3===1&&(base64=base64.substring(0,base64.length-2)+"==");return base64};exports.decode=function(base64){var i,encoded1,encoded2,encoded3,encoded4,bufferLength=.75*base64.length,len=base64.length,p=0;if("="===base64[base64.length-1]){bufferLength--;"="===base64[base64.length-2]&&bufferLength--}var arraybuffer=new ArrayBuffer(bufferLength),bytes=new Uint8Array(arraybuffer);for(i=0;i<len;i+=4){encoded1=lookup[base64.charCodeAt(i)];encoded2=lookup[base64.charCodeAt(i+1)];encoded3=lookup[base64.charCodeAt(i+2)];encoded4=lookup[base64.charCodeAt(i+3)];bytes[p++]=encoded1<<2|encoded2>>4;bytes[p++]=(15&encoded2)<<4|encoded3>>2;bytes[p++]=(3&encoded3)<<6|63&encoded4}return arraybuffer}})()},6066:function(module,exports,__webpack_require__){(function(global){var BlobBuilder=global.BlobBuilder||global.WebKitBlobBuilder||global.MSBlobBuilder||global.MozBlobBuilder;var blobSupported=function(){try{var a=new Blob(["hi"]);return 2===a.size}catch(e){return false}}();var blobSupportsArrayBufferView=blobSupported&&function(){try{var b=new Blob([new Uint8Array([1,2])]);return 2===b.size}catch(e){return false}}();var blobBuilderSupported=BlobBuilder&&BlobBuilder.prototype.append&&BlobBuilder.prototype.getBlob;function mapArrayBufferViews(ary){for(var i=0;i<ary.length;i++){var chunk=ary[i];if(chunk.buffer instanceof ArrayBuffer){var buf=chunk.buffer;if(chunk.byteLength!==buf.byteLength){var copy=new Uint8Array(chunk.byteLength);copy.set(new Uint8Array(buf,chunk.byteOffset,chunk.byteLength));buf=copy.buffer}ary[i]=buf}}}function BlobBuilderConstructor(ary,options){options=options||{};var bb=new BlobBuilder;mapArrayBufferViews(ary);for(var i=0;i<ary.length;i++)bb.append(ary[i]);return options.type?bb.getBlob(options.type):bb.getBlob()}function BlobConstructor(ary,options){mapArrayBufferViews(ary);return new Blob(ary,options||{})}module.exports=blobSupported?blobSupportsArrayBufferView?global.Blob:BlobConstructor:blobBuilderSupported?BlobBuilderConstructor:void 0}).call(exports,__webpack_require__(23))},6067:function(module,exports,__webpack_require__){(function(global){var Polling=__webpack_require__(2047);var inherit=__webpack_require__(807);module.exports=JSONPPolling;var rNewline=/\n/g;var rEscapedNewline=/\\n/g;var callbacks;function empty(){}function JSONPPolling(opts){Polling.call(this,opts);this.query=this.query||{};if(!callbacks){global.___eio||(global.___eio=[]);callbacks=global.___eio}this.index=callbacks.length;var self=this;callbacks.push(function(msg){self.onData(msg)});this.query.j=this.index;global.document&&global.addEventListener&&global.addEventListener("beforeunload",function(){self.script&&(self.script.onerror=empty)},false)}inherit(JSONPPolling,Polling);JSONPPolling.prototype.supportsBinary=false;JSONPPolling.prototype.doClose=function(){if(this.script){this.script.parentNode.removeChild(this.script);this.script=null}if(this.form){this.form.parentNode.removeChild(this.form);this.form=null;this.iframe=null}Polling.prototype.doClose.call(this)};JSONPPolling.prototype.doPoll=function(){var self=this;var script=document.createElement("script");if(this.script){this.script.parentNode.removeChild(this.script);this.script=null}script.async=true;script.src=this.uri();script.onerror=function(e){self.onError("jsonp poll error",e)};var insertAt=document.getElementsByTagName("script")[0];insertAt?insertAt.parentNode.insertBefore(script,insertAt):(document.head||document.body).appendChild(script);this.script=script;var isUAgecko="undefined"!==typeof navigator&&/gecko/i.test(navigator.userAgent);isUAgecko&&setTimeout(function(){var iframe=document.createElement("iframe");document.body.appendChild(iframe);document.body.removeChild(iframe)},100)};JSONPPolling.prototype.doWrite=function(data,fn){var self=this;if(!this.form){var form=document.createElement("form");var area=document.createElement("textarea");var id=this.iframeId="eio_iframe_"+this.index;var iframe;form.className="socketio";form.style.position="absolute";form.style.top="-1000px";form.style.left="-1000px";form.target=id;form.method="POST";form.setAttribute("accept-charset","utf-8");area.name="d";form.appendChild(area);document.body.appendChild(form);this.form=form;this.area=area}this.form.action=this.uri();function complete(){initIframe();fn()}function initIframe(){if(self.iframe)try{self.form.removeChild(self.iframe)}catch(e){self.onError("jsonp polling iframe removal error",e)}try{var html='<iframe src="javascript:0" name="'+self.iframeId+'">';iframe=document.createElement(html)}catch(e){iframe=document.createElement("iframe");iframe.name=self.iframeId;iframe.src="javascript:0"}iframe.id=self.iframeId;self.form.appendChild(iframe);self.iframe=iframe}initIframe();data=data.replace(rEscapedNewline,"\\\n");this.area.value=data.replace(rNewline,"\\n");try{this.form.submit()}catch(e){}this.iframe.attachEvent?this.iframe.onreadystatechange=function(){"complete"===self.iframe.readyState&&complete()}:this.iframe.onload=complete}}).call(exports,__webpack_require__(23))},6068:function(module,exports,__webpack_require__){(function(global){var Transport=__webpack_require__(1169);var parser=__webpack_require__(528);var parseqs=__webpack_require__(806);var inherit=__webpack_require__(807);var yeast=__webpack_require__(2049);var debug=__webpack_require__(344)("engine.io-client:websocket");var BrowserWebSocket=global.WebSocket||global.MozWebSocket;var NodeWebSocket;if("undefined"===typeof window)try{NodeWebSocket=__webpack_require__(6069)}catch(e){}var WebSocket=BrowserWebSocket;WebSocket||"undefined"!==typeof window||(WebSocket=NodeWebSocket);module.exports=WS;function WS(opts){var forceBase64=opts&&opts.forceBase64;forceBase64&&(this.supportsBinary=false);this.perMessageDeflate=opts.perMessageDeflate;this.usingBrowserWebSocket=BrowserWebSocket&&!opts.forceNode;this.protocols=opts.protocols;this.usingBrowserWebSocket||(WebSocket=NodeWebSocket);Transport.call(this,opts)}inherit(WS,Transport);WS.prototype.name="websocket";WS.prototype.supportsBinary=true;WS.prototype.doOpen=function(){if(!this.check())return;var uri=this.uri();var protocols=this.protocols;var opts={agent:this.agent,perMessageDeflate:this.perMessageDeflate};opts.pfx=this.pfx;opts.key=this.key;opts.passphrase=this.passphrase;opts.cert=this.cert;opts.ca=this.ca;opts.ciphers=this.ciphers;opts.rejectUnauthorized=this.rejectUnauthorized;this.extraHeaders&&(opts.headers=this.extraHeaders);this.localAddress&&(opts.localAddress=this.localAddress);try{this.ws=this.usingBrowserWebSocket?protocols?new WebSocket(uri,protocols):new WebSocket(uri):new WebSocket(uri,protocols,opts)}catch(err){return this.emit("error",err)}void 0===this.ws.binaryType&&(this.supportsBinary=false);if(this.ws.supports&&this.ws.supports.binary){this.supportsBinary=true;this.ws.binaryType="nodebuffer"}else this.ws.binaryType="arraybuffer";this.addEventListeners()};WS.prototype.addEventListeners=function(){var self=this;this.ws.onopen=function(){self.onOpen()};this.ws.onclose=function(){self.onClose()};this.ws.onmessage=function(ev){self.onData(ev.data)};this.ws.onerror=function(e){self.onError("websocket error",e)}};WS.prototype.write=function(packets){var self=this;this.writable=false;var total=packets.length;for(var i=0,l=total;i<l;i++)(function(packet){parser.encodePacket(packet,self.supportsBinary,function(data){if(!self.usingBrowserWebSocket){var opts={};packet.options&&(opts.compress=packet.options.compress);if(self.perMessageDeflate){var len="string"===typeof data?global.Buffer.byteLength(data):data.length;len<self.perMessageDeflate.threshold&&(opts.compress=false)}}try{self.usingBrowserWebSocket?self.ws.send(data):self.ws.send(data,opts)}catch(e){debug("websocket closed before onclose event")}--total||done()})})(packets[i]);function done(){self.emit("flush");setTimeout(function(){self.writable=true;self.emit("drain")},0)}};WS.prototype.onClose=function(){Transport.prototype.onClose.call(this)};WS.prototype.doClose=function(){"undefined"!==typeof this.ws&&this.ws.close()};WS.prototype.uri=function(){var query=this.query||{};var schema=this.secure?"wss":"ws";var port="";this.port&&("wss"===schema&&443!==Number(this.port)||"ws"===schema&&80!==Number(this.port))&&(port=":"+this.port);this.timestampRequests&&(query[this.timestampParam]=yeast());this.supportsBinary||(query.b64=1);query=parseqs.encode(query);query.length&&(query="?"+query);var ipv6=-1!==this.hostname.indexOf(":");return schema+"://"+(ipv6?"["+this.hostname+"]":this.hostname)+port+this.path+query};WS.prototype.check=function(){return!!WebSocket&&!("__initialize"in WebSocket&&this.name===WS.prototype.name)}}).call(exports,__webpack_require__(23))},6069:function(module,exports){},6070:function(module,exports){module.exports=toArray;function toArray(list,index){var array=[];index=index||0;for(var i=index||0;i<list.length;i++)array[i-index]=list[i];return array}},6071:function(module,exports){module.exports=Backoff;function Backoff(opts){opts=opts||{};this.ms=opts.min||100;this.max=opts.max||1e4;this.factor=opts.factor||2;this.jitter=opts.jitter>0&&opts.jitter<=1?opts.jitter:0;this.attempts=0}Backoff.prototype.duration=function(){var ms=this.ms*Math.pow(this.factor,this.attempts++);if(this.jitter){var rand=Math.random();var deviation=Math.floor(rand*this.jitter*ms);ms=0==(1&Math.floor(10*rand))?ms-deviation:ms+deviation}return 0|Math.min(ms,this.max)};Backoff.prototype.reset=function(){this.attempts=0};Backoff.prototype.setMin=function(min){this.ms=min};Backoff.prototype.setMax=function(max){this.max=max};Backoff.prototype.setJitter=function(jitter){this.jitter=jitter}},6072:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var _extends=Object.assign||function(target){for(var i=1;i<arguments.length;i++){var source=arguments[i];for(var key in source)Object.prototype.hasOwnProperty.call(source,key)&&(target[key]=source[key])}return target};exports.Fn=Fn;var _lodash=__webpack_require__(1);var _arg=__webpack_require__(6073);function Fn(config){var _this=this;this.name=config.name;this.type=config.type;this.aliases=config.aliases||[];this.fn=function(){return Promise.resolve(config.fn.apply(config,arguments))};this.help=config.help||"";this.args=(0,_lodash.mapValues)(config.args||{},function(arg,name){return new _arg.Arg(_extends({name:name},arg))});this.context=config.context||{};this.accepts=function(type){if(!_this.context.types)return true;return(0,_lodash.includes)(_this.context.types,type)}}},6073:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.Arg=Arg;var _lodash=__webpack_require__(1);function Arg(config){var _this=this;if("_"===config.name)throw Error("Arg names must not be _. Use it in aliases instead.");this.name=config.name;this.required=config.required||false;this.help=config.help||"";this.types=config.types||[];this.default=config.default;this.aliases=config.aliases||[];this.multi=null!=config.multi&&config.multi;this.resolve=null==config.resolve||config.resolve;this.options=config.options||[];this.accepts=function(type){if(!_this.types.length)return true;return(0,_lodash.includes)(config.types,type)}}},6074:function(module,exports,__webpack_require__){var __WEBPACK_AMD_DEFINE_FACTORY__,__WEBPACK_AMD_DEFINE_RESULT__;
/*!
  * $script.js JS loader & dependency manager
  * https://github.com/ded/script.js
  * (c) Dustin Diaz 2014 | License MIT
  */
/*!
  * $script.js JS loader & dependency manager
  * https://github.com/ded/script.js
  * (c) Dustin Diaz 2014 | License MIT
  */
(function(name,definition){if("undefined"!=typeof module&&module.exports)module.exports=definition();else{true;!(__WEBPACK_AMD_DEFINE_FACTORY__=definition,__WEBPACK_AMD_DEFINE_RESULT__="function"===typeof __WEBPACK_AMD_DEFINE_FACTORY__?__WEBPACK_AMD_DEFINE_FACTORY__.call(exports,__webpack_require__,exports,module):__WEBPACK_AMD_DEFINE_FACTORY__,void 0!==__WEBPACK_AMD_DEFINE_RESULT__&&(module.exports=__WEBPACK_AMD_DEFINE_RESULT__))}})(0,function(){var scriptpath,urlArgs,doc=document,head=doc.getElementsByTagName("head")[0],f=false,push="push",readyState="readyState",onreadystatechange="onreadystatechange",list={},ids={},delay={},scripts={};function every(ar,fn){for(var i=0,j=ar.length;i<j;++i)if(!fn(ar[i]))return f;return 1}function each(ar,fn){every(ar,function(el){return!fn(el)})}function $script(paths,idOrDone,optDone){paths=paths[push]?paths:[paths];var idOrDoneIsDone=idOrDone&&idOrDone.call,done=idOrDoneIsDone?idOrDone:optDone,id=idOrDoneIsDone?paths.join(""):idOrDone,queue=paths.length;function loopFn(item){return item.call?item():list[item]}function callback(){if(!--queue){list[id]=1;done&&done();for(var dset in delay)every(dset.split("|"),loopFn)&&!each(delay[dset],loopFn)&&(delay[dset]=[])}}setTimeout(function(){each(paths,function loading(path,force){if(null===path)return callback();force||/^https?:\/\//.test(path)||!scriptpath||(path=-1===path.indexOf(".js")?scriptpath+path+".js":scriptpath+path);if(scripts[path]){id&&(ids[id]=1);return 2==scripts[path]?callback():setTimeout(function(){loading(path,true)},0)}scripts[path]=1;id&&(ids[id]=1);create(path,callback)})},0);return $script}function create(path,fn){var loaded,el=doc.createElement("script");el.onload=el.onerror=el[onreadystatechange]=function(){if(el[readyState]&&!/^c|loade/.test(el[readyState])||loaded)return;el.onload=el[onreadystatechange]=null;loaded=1;scripts[path]=2;fn()};el.async=1;el.src=urlArgs?path+(-1===path.indexOf("?")?"?":"&")+urlArgs:path;head.insertBefore(el,head.lastChild)}$script.get=create;$script.order=function(scripts,id,done){(function callback(s){s=scripts.shift();scripts.length?$script(s,callback):$script(s,id,done)})()};$script.path=function(p){scriptpath=p};$script.urlArgs=function(str){urlArgs=str};$script.ready=function(deps,ready,req){deps=deps[push]?deps:[deps];var missing=[];!each(deps,function(dep){list[dep]||missing[push](dep)})&&every(deps,function(dep){return list[dep]})?ready():!function(key){delay[key]=delay[key]||[];delay[key][push](ready);req&&req(missing)}(deps.join("|"));return $script};$script.done=function(idOrDone){$script([null],idOrDone)};return $script})},6075:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.RenderToDom=void 0;var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;"value"in descriptor&&(descriptor.writable=true);Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){protoProps&&defineProperties(Constructor.prototype,protoProps);staticProps&&defineProperties(Constructor,staticProps);return Constructor}}();var _react=__webpack_require__(0);var _react2=_interopRequireDefault(_react);var _propTypes=__webpack_require__(4);var _propTypes2=_interopRequireDefault(_propTypes);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(self,call){if(!self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!call||"object"!==typeof call&&"function"!==typeof call?self:call}function _inherits(subClass,superClass){if("function"!==typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function, not "+typeof superClass);subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:false,writable:true,configurable:true}});superClass&&(Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass)}var RenderToDom=exports.RenderToDom=function(_React$Component){_inherits(RenderToDom,_React$Component);function RenderToDom(){_classCallCheck(this,RenderToDom);return _possibleConstructorReturn(this,(RenderToDom.__proto__||Object.getPrototypeOf(RenderToDom)).apply(this,arguments))}_createClass(RenderToDom,[{key:"shouldComponentUpdate",value:function shouldComponentUpdate(nextProps){return this.props.domNode!==nextProps.domNode}},{key:"componentDidUpdate",value:function componentDidUpdate(){this.props.domNode&&this.props.render(this.props.domNode)}},{key:"render",value:function render(){var _props=this.props,domNode=_props.domNode,setDomNode=_props.setDomNode,style=_props.style;var linkRef=function linkRef(refNode){!domNode&&refNode&&setDomNode(refNode)};return _react2.default.createElement("div",{className:"render_to_dom",ref:linkRef,style:style})}}]);return RenderToDom}(_react2.default.Component);RenderToDom.propTypes={domNode:_propTypes2.default.object,setDomNode:_propTypes2.default.func.isRequired,render:_propTypes2.default.func.isRequired,style:_propTypes2.default.object}},6076:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.ArgAddPopover=void 0;var _recompose=__webpack_require__(24);var _arg_add_popover=__webpack_require__(6077);exports.ArgAddPopover=(0,_recompose.pure)(_arg_add_popover.ArgAddPopover)},6077:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.ArgAddPopover=void 0;var _react=__webpack_require__(0);var _react2=_interopRequireDefault(_react);var _propTypes=__webpack_require__(4);var _eui=__webpack_require__(2);var _popover=__webpack_require__(810);var _arg_add=__webpack_require__(6079);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var ArgAddPopover=exports.ArgAddPopover=function ArgAddPopover(_ref){var options=_ref.options;var button=function button(handleClick){return _react2.default.createElement(_eui.EuiButtonIcon,{iconType:"plusInCircle","aria-label":"Add Argument",onClick:handleClick})};return _react2.default.createElement(_popover.Popover,{id:"arg-add-popover",panelClassName:"canvasArg__addPopover",panelPaddingSize:"none",button:button},function(_ref2){var closePopover=_ref2.closePopover;return options.map(function(opt){return _react2.default.createElement(_arg_add.ArgAdd,{key:opt.arg.name+"-add",displayName:opt.arg.displayName,help:opt.arg.help,onValueAdd:function onValueAdd(){opt.onValueAdd();closePopover()}})})})};ArgAddPopover.propTypes={options:_propTypes.PropTypes.array.isRequired}},6078:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.Popover=void 0;var _extends=Object.assign||function(target){for(var i=1;i<arguments.length;i++){var source=arguments[i];for(var key in source)Object.prototype.hasOwnProperty.call(source,key)&&(target[key]=source[key])}return target};var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;"value"in descriptor&&(descriptor.writable=true);Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){protoProps&&defineProperties(Constructor.prototype,protoProps);staticProps&&defineProperties(Constructor,staticProps);return Constructor}}();var _react=__webpack_require__(0);var _react2=_interopRequireDefault(_react);var _propTypes=__webpack_require__(4);var _propTypes2=_interopRequireDefault(_propTypes);var _eui=__webpack_require__(2);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _objectWithoutProperties(obj,keys){var target={};for(var i in obj){if(keys.indexOf(i)>=0)continue;if(!Object.prototype.hasOwnProperty.call(obj,i))continue;target[i]=obj[i]}return target}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(self,call){if(!self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!call||"object"!==typeof call&&"function"!==typeof call?self:call}function _inherits(subClass,superClass){if("function"!==typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function, not "+typeof superClass);subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:false,writable:true,configurable:true}});superClass&&(Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass)}var Popover=exports.Popover=function(_Component){_inherits(Popover,_Component);function Popover(){var _ref;var _temp,_this,_ret;_classCallCheck(this,Popover);for(var _len=arguments.length,args=Array(_len),_key=0;_key<_len;_key++)args[_key]=arguments[_key];return _ret=(_temp=(_this=_possibleConstructorReturn(this,(_ref=Popover.__proto__||Object.getPrototypeOf(Popover)).call.apply(_ref,[this].concat(args))),_this),_this.state={isPopoverOpen:false},_this.handleClick=function(){_this.setState(function(state){return{isPopoverOpen:!state.isPopoverOpen}})},_this.closePopover=function(){_this.setState({isPopoverOpen:false})},_temp),_possibleConstructorReturn(_this,_ret)}_createClass(Popover,[{key:"componentDidMount",value:function componentDidMount(){this.props.isOpen&&this.setState({isPopoverOpen:true})}},{key:"render",value:function render(){var _this2=this;var _props=this.props,button=_props.button,children=_props.children,tooltip=_props.tooltip,tooltipPosition=_props.tooltipPosition,rest=_objectWithoutProperties(_props,["button","children","tooltip","tooltipPosition"]);var wrappedButton=function wrappedButton(handleClick){if(!_this2.state.isPopoverOpen&&tooltip.length)return _react2.default.createElement(_eui.EuiToolTip,{position:tooltipPosition,content:tooltip},button(handleClick));return button(handleClick)};var appWrapper=document.querySelector(".app-wrapper");return _react2.default.createElement(_eui.EuiPopover,_extends({},rest,{button:wrappedButton(this.handleClick),isOpen:this.state.isPopoverOpen,closePopover:this.closePopover,container:appWrapper}),children({closePopover:this.closePopover}))}}]);return Popover}(_react.Component);Popover.propTypes={isOpen:_propTypes2.default.bool,ownFocus:_propTypes2.default.bool,button:_propTypes2.default.func.isRequired,children:_propTypes2.default.func.isRequired,tooltip:_propTypes2.default.string,tooltipPosition:_propTypes2.default.oneOf(["top","bottom","left","right"])};Popover.defaultProps={isOpen:false,ownFocus:true,tooltip:"",tooltipPosition:"top"}},6079:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.ArgAdd=void 0;var _recompose=__webpack_require__(24);var _arg_add=__webpack_require__(6080);exports.ArgAdd=(0,_recompose.pure)(_arg_add.ArgAdd)},6080:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.ArgAdd=void 0;var _react=__webpack_require__(0);var _react2=_interopRequireDefault(_react);var _propTypes=__webpack_require__(4);var _propTypes2=_interopRequireDefault(_propTypes);var _eui=__webpack_require__(2);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var ArgAdd=exports.ArgAdd=function ArgAdd(_ref){var onValueAdd=_ref.onValueAdd,displayName=_ref.displayName,help=_ref.help;return _react2.default.createElement("button",{className:"canvasArg__add",onClick:onValueAdd},_react2.default.createElement(_eui.EuiDescriptionList,{compressed:true},_react2.default.createElement(_eui.EuiDescriptionListTitle,null,displayName),_react2.default.createElement(_eui.EuiDescriptionListDescription,null,_react2.default.createElement("small",null,help))))};ArgAdd.propTypes={displayName:_propTypes2.default.string,help:_propTypes2.default.string,onValueAdd:_propTypes2.default.func}},6081:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.SidebarSectionTitle=void 0;var _react=__webpack_require__(0);var _react2=_interopRequireDefault(_react);var _propTypes=__webpack_require__(4);var _propTypes2=_interopRequireDefault(_propTypes);var _eui=__webpack_require__(2);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var SidebarSectionTitle=exports.SidebarSectionTitle=function SidebarSectionTitle(_ref){var title=_ref.title,tip=_ref.tip,children=_ref.children;var formattedTitle=_react2.default.createElement(_eui.EuiTitle,{size:"xs"},_react2.default.createElement("h4",null,title));var renderTitle=function renderTitle(){if(tip)return _react2.default.createElement(_eui.EuiToolTip,{position:"left",content:tip},formattedTitle);return formattedTitle};return _react2.default.createElement(_eui.EuiFlexGroup,{alignItems:"center",justifyContent:"spaceBetween"},_react2.default.createElement(_eui.EuiFlexItem,{grow:false},renderTitle(tip)),_react2.default.createElement(_eui.EuiFlexItem,{grow:false},children))};SidebarSectionTitle.propTypes={children:_propTypes2.default.node,title:_propTypes2.default.string,tip:_propTypes2.default.string}},6082:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.ArgForm=void 0;var _propTypes=__webpack_require__(4);var _propTypes2=_interopRequireDefault(_propTypes);var _reactRedux=__webpack_require__(19);var _recompose=__webpack_require__(24);var _workpad=__webpack_require__(54);var _arg_form=__webpack_require__(6083);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var ArgForm=exports.ArgForm=(0,_recompose.compose)((0,_recompose.withState)("label","setLabel",function(_ref){var label=_ref.label,argTypeInstance=_ref.argTypeInstance;return label||argTypeInstance.displayName||argTypeInstance.name}),(0,_recompose.withState)("resolvedArgValue","setResolvedArgValue"),(0,_recompose.withState)("renderError","setRenderError",false),(0,_recompose.lifecycle)({componentDidUpdate:function componentDidUpdate(prevProps){if(prevProps.templateProps.argValue!==this.props.templateProps.argValue){this.props.setRenderError(false);this.props.setResolvedArgValue()}}}),(0,_reactRedux.connect)(function(state){return{workpad:(0,_workpad.getWorkpadInfo)(state)}}))(_arg_form.ArgForm);ArgForm.propTypes={label:_propTypes2.default.string,argTypeInstance:_propTypes2.default.shape({name:_propTypes2.default.string.isRequired,displayName:_propTypes2.default.string,expanded:_propTypes2.default.bool}).isRequired}},6083:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.ArgForm=void 0;var _extends=Object.assign||function(target){for(var i=1;i<arguments.length;i++){var source=arguments[i];for(var key in source)Object.prototype.hasOwnProperty.call(source,key)&&(target[key]=source[key])}return target};var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;"value"in descriptor&&(descriptor.writable=true);Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){protoProps&&defineProperties(Constructor.prototype,protoProps);staticProps&&defineProperties(Constructor,staticProps);return Constructor}}();var _react=__webpack_require__(0);var _react2=_interopRequireDefault(_react);var _propTypes=__webpack_require__(4);var _propTypes2=_interopRequireDefault(_propTypes);var _recompose=__webpack_require__(24);var _error_boundary=__webpack_require__(2060);var _arg_simple_form=__webpack_require__(6084);var _arg_template_form=__webpack_require__(6086);var _simple_failure=__webpack_require__(6087);var _advanced_failure=__webpack_require__(6088);var _arg_label=__webpack_require__(2061);var _pending_arg_value=__webpack_require__(6090);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(self,call){if(!self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!call||"object"!==typeof call&&"function"!==typeof call?self:call}function _inherits(subClass,superClass){if("function"!==typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function, not "+typeof superClass);subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:false,writable:true,configurable:true}});superClass&&(Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass)}var branches=[(0,_recompose.branch)(function(_ref){var argTypeInstance=_ref.argTypeInstance,resolvedArgValue=_ref.resolvedArgValue;var argType=argTypeInstance.argType;if(!argType.resolveArgValue)return false;return"undefined"===typeof resolvedArgValue},(0,_recompose.renderComponent)(_pending_arg_value.PendingArgValue))];var ArgFormComponent=function(_PureComponent){_inherits(ArgFormComponent,_PureComponent);function ArgFormComponent(){_classCallCheck(this,ArgFormComponent);return _possibleConstructorReturn(this,(ArgFormComponent.__proto__||Object.getPrototypeOf(ArgFormComponent)).apply(this,arguments))}_createClass(ArgFormComponent,[{key:"componentDidMount",value:function componentDidMount(){this._isMounted=true}},{key:"componentWillUnmount",value:function componentWillUnmount(){this._isMounted=false}},{key:"render",value:function render(){var _this2=this;var _props=this.props,argId=_props.argId,argTypeInstance=_props.argTypeInstance,templateProps=_props.templateProps,valueMissing=_props.valueMissing,label=_props.label,_setLabel=_props.setLabel,onValueRemove=_props.onValueRemove,workpad=_props.workpad,renderError=_props.renderError,setRenderError=_props.setRenderError,resolvedArgValue=_props.resolvedArgValue;return _react2.default.createElement(_error_boundary.ErrorBoundary,null,function(_ref2){var error=_ref2.error,_resetErrorState=_ref2.resetErrorState;var _argTypeInstance$argT=argTypeInstance.argType,template=_argTypeInstance$argT.template,simpleTemplate=_argTypeInstance$argT.simpleTemplate;var hasError=Boolean(error)||renderError;var argumentProps=_extends({},templateProps,{resolvedArgValue:resolvedArgValue,defaultValue:argTypeInstance.default,renderError:function renderError(){Promise.resolve().then(function(){_this2._isMounted&&setRenderError(true)})},error:hasError,setLabel:function setLabel(label){return _this2._isMounted&&_setLabel(label)},resetErrorState:function resetErrorState(){_resetErrorState();_this2._isMounted&&setRenderError(false)},label:label,workpad:workpad,argId:argId});var expandableLabel=Boolean(hasError||template);var simpleArg=_react2.default.createElement(_arg_simple_form.ArgSimpleForm,{required:argTypeInstance.required,valueMissing:valueMissing,onRemove:onValueRemove},_react2.default.createElement(_arg_template_form.ArgTemplateForm,{template:simpleTemplate,errorTemplate:_simple_failure.SimpleFailure,error:hasError,argumentProps:argumentProps}));var extendedArg=_react2.default.createElement("div",{className:"canvasArg--controls"},_react2.default.createElement(_arg_template_form.ArgTemplateForm,{template:template,errorTemplate:_advanced_failure.AdvancedFailure,error:hasError,argumentProps:argumentProps}));return _react2.default.createElement("div",{className:"canvasArg "+(expandableLabel?"canvasArg--expandable":null)},_react2.default.createElement(_arg_label.ArgLabel,{className:"resolved",argId:argId,label:label,help:argTypeInstance.help,expandable:expandableLabel,simpleArg:simpleArg,initialIsOpen:!simpleTemplate},extendedArg))})}}]);return ArgFormComponent}(_react.PureComponent);ArgFormComponent.propTypes={argId:_propTypes2.default.string.isRequired,workpad:_propTypes2.default.object.isRequired,argTypeInstance:_propTypes2.default.shape({argType:_propTypes2.default.object.isRequired,help:_propTypes2.default.string.isRequired,required:_propTypes2.default.bool,default:_propTypes2.default.any}).isRequired,templateProps:_propTypes2.default.object,valueMissing:_propTypes2.default.bool,label:_propTypes2.default.string,setLabel:_propTypes2.default.func.isRequired,expand:_propTypes2.default.bool,setExpand:_propTypes2.default.func,onValueRemove:_propTypes2.default.func,renderError:_propTypes2.default.bool.isRequired,setRenderError:_propTypes2.default.func.isRequired,resolvedArgValue:_propTypes2.default.any};exports.ArgForm=_recompose.compose.apply(void 0,branches)(ArgFormComponent)},6084:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.ArgSimpleForm=void 0;var _react=__webpack_require__(0);var _react2=_interopRequireDefault(_react);var _propTypes=__webpack_require__(4);var _propTypes2=_interopRequireDefault(_propTypes);var _eui=__webpack_require__(2);var _tooltip_icon=__webpack_require__(1173);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var ArgSimpleForm=exports.ArgSimpleForm=function ArgSimpleForm(_ref){var children=_ref.children,required=_ref.required,valueMissing=_ref.valueMissing,onRemove=_ref.onRemove;return _react2.default.createElement(_eui.EuiFlexGroup,{alignItems:"center",gutterSize:"s",className:"canvasArg__form"},_react2.default.createElement(_eui.EuiFlexItem,null,children),valueMissing&&_react2.default.createElement(_eui.EuiFlexItem,{grow:false},_react2.default.createElement(_tooltip_icon.TooltipIcon,{position:"left",icon:"error",content:"This argument is required, you should specify a value."})),!required&&_react2.default.createElement(_eui.EuiButtonIcon,{color:"danger",onClick:onRemove,iconType:"trash","aria-label":"Remove",className:"canvasArg__remove"}))};ArgSimpleForm.propTypes={children:_propTypes2.default.node,required:_propTypes2.default.bool,valueMissing:_propTypes2.default.bool,onRemove:_propTypes2.default.func.isRequired}},6085:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.TooltipIcon=void 0;var _extends=Object.assign||function(target){for(var i=1;i<arguments.length;i++){var source=arguments[i];for(var key in source)Object.prototype.hasOwnProperty.call(source,key)&&(target[key]=source[key])}return target};var _react=__webpack_require__(0);var _react2=_interopRequireDefault(_react);var _propTypes=__webpack_require__(4);var _eui=__webpack_require__(2);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _objectWithoutProperties(obj,keys){var target={};for(var i in obj){if(keys.indexOf(i)>=0)continue;if(!Object.prototype.hasOwnProperty.call(obj,i))continue;target[i]=obj[i]}return target}var TooltipIcon=function TooltipIcon(_ref){var _ref$icon=_ref.icon,icon=void 0===_ref$icon?"info":_ref$icon,rest=_objectWithoutProperties(_ref,["icon"]);var icons={error:{type:"alert",color:"danger"},warning:{type:"alert",color:"warning"},info:{type:"iInCircle",color:"default"}};if(!Object.keys(icons).includes(icon))throw new Error("Unsupported icon type: "+icon);return _react2.default.createElement(_eui.EuiIconTip,_extends({},rest,{type:icons[icon].type,color:icons[icon].color}))};exports.TooltipIcon=TooltipIcon;TooltipIcon.propTypes={icon:_propTypes.PropTypes.string}},6086:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.ArgTemplateForm=void 0;var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;"value"in descriptor&&(descriptor.writable=true);Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){protoProps&&defineProperties(Constructor.prototype,protoProps);staticProps&&defineProperties(Constructor,staticProps);return Constructor}}();var _react=__webpack_require__(0);var _react2=_interopRequireDefault(_react);var _propTypes=__webpack_require__(4);var _propTypes2=_interopRequireDefault(_propTypes);var _recompose=__webpack_require__(24);var _render_to_dom=__webpack_require__(1170);var _expression_form_handlers=__webpack_require__(2056);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(self,call){if(!self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!call||"object"!==typeof call&&"function"!==typeof call?self:call}function _inherits(subClass,superClass){if("function"!==typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function, not "+typeof superClass);subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:false,writable:true,configurable:true}});superClass&&(Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass)}var ArgTemplateFormComponent=function(_React$Component){_inherits(ArgTemplateFormComponent,_React$Component);function ArgTemplateFormComponent(){var _ref;var _temp,_this,_ret;_classCallCheck(this,ArgTemplateFormComponent);for(var _len=arguments.length,args=Array(_len),_key=0;_key<_len;_key++)args[_key]=arguments[_key];return _ret=(_temp=(_this=_possibleConstructorReturn(this,(_ref=ArgTemplateFormComponent.__proto__||Object.getPrototypeOf(ArgTemplateFormComponent)).call.apply(_ref,[this].concat(args))),_this),_this.renderTemplate=function(domNode){var _this$props=_this.props,template=_this$props.template,argumentProps=_this$props.argumentProps,handlers=_this$props.handlers;if(template)return template(domNode,argumentProps,handlers)},_this.renderErrorTemplate=function(){var _this$props2=_this.props,errorTemplate=_this$props2.errorTemplate,argumentProps=_this$props2.argumentProps;return _react2.default.createElement(errorTemplate,argumentProps)},_temp),_possibleConstructorReturn(_this,_ret)}_createClass(ArgTemplateFormComponent,[{key:"componentWillUpdate",value:function componentWillUpdate(prevProps){this.props.error!==prevProps.error&&this.props.handlers.destroy()}},{key:"componentDidUpdate",value:function componentDidUpdate(){if(this.props.error)return this.renderErrorTemplate();this.renderTemplate(this.domNode)}},{key:"componentWillUnmount",value:function componentWillUnmount(){this.props.handlers.destroy()}},{key:"render",value:function render(){var _this2=this;var _props=this.props,template=_props.template,error=_props.error;if(error)return this.renderErrorTemplate();if(!template)return null;return _react2.default.createElement(_render_to_dom.RenderToDom,{render:function render(domNode){_this2.domNode=domNode;_this2.renderTemplate(domNode)}})}}]);return ArgTemplateFormComponent}(_react2.default.Component);ArgTemplateFormComponent.propTypes={template:_propTypes2.default.func,argumentProps:_propTypes2.default.shape({valueMissing:_propTypes2.default.bool,label:_propTypes2.default.string,setLabel:_propTypes2.default.func.isRequired,expand:_propTypes2.default.bool,setExpand:_propTypes2.default.func,onValueRemove:_propTypes2.default.func,resetErrorState:_propTypes2.default.func.isRequired,renderError:_propTypes2.default.func.isRequired}),handlers:_propTypes2.default.object.isRequired,error:_propTypes2.default.oneOfType([_propTypes2.default.object,_propTypes2.default.bool]).isRequired,errorTemplate:_propTypes2.default.oneOfType([_propTypes2.default.element,_propTypes2.default.func]).isRequired};ArgTemplateFormComponent.domNode=null;exports.ArgTemplateForm=(0,_recompose.compose)((0,_recompose.withPropsOnChange)(function(){return false},function(){return{expressionFormHandlers:new _expression_form_handlers.ExpressionFormHandlers}}),(0,_recompose.withProps)(function(_ref2){var handlers=_ref2.handlers,expressionFormHandlers=_ref2.expressionFormHandlers;return{handlers:Object.assign(expressionFormHandlers,handlers)}}))(ArgTemplateFormComponent)},6087:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.SimpleFailure=void 0;var _react=__webpack_require__(0);var _react2=_interopRequireDefault(_react);var _tooltip_icon=__webpack_require__(1173);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}exports.SimpleFailure=function SimpleFailure(){return _react2.default.createElement("div",{className:"canvasArg--error canvasArg--error-simple"},_react2.default.createElement(_tooltip_icon.TooltipIcon,{position:"left",icon:"warning",content:"The interface for this argument could not parse the value, so a fallback input is being used"}))}},6088:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.AdvancedFailure=exports.AdvancedFailureComponent=void 0;var _react=__webpack_require__(0);var _react2=_interopRequireDefault(_react);var _propTypes=__webpack_require__(4);var _propTypes2=_interopRequireDefault(_propTypes);var _recompose=__webpack_require__(24);var _eui=__webpack_require__(2);var _stateful_prop=__webpack_require__(6089);var _ast=__webpack_require__(343);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var AdvancedFailureComponent=exports.AdvancedFailureComponent=function AdvancedFailureComponent(props){var onValueChange=props.onValueChange,defaultValue=props.defaultValue,argExpression=props.argExpression,updateArgExpression=props.updateArgExpression,resetErrorState=props.resetErrorState,valid=props.valid,argId=props.argId;var valueChange=function valueChange(ev){ev.preventDefault();resetErrorState();if(valid)return onValueChange((0,_ast.fromExpression)(argExpression.trim(),"argument"))};var confirmReset=function confirmReset(ev){ev.preventDefault();resetErrorState();onValueChange((0,_ast.fromExpression)(defaultValue,"argument"))};return _react2.default.createElement(_eui.EuiForm,null,_react2.default.createElement(_eui.EuiFormRow,{id:argId,isInvalid:!valid,error:"Invalid Expression"},_react2.default.createElement(_eui.EuiTextArea,{id:argId,isInvalid:!valid,value:argExpression,onChange:updateArgExpression,rows:3})),_react2.default.createElement("div",null,_react2.default.createElement(_eui.EuiButton,{disabled:!valid,onClick:function onClick(e){return valueChange(e)},size:"s",type:"submit"},"Apply"),defaultValue&&defaultValue.length&&_react2.default.createElement(_eui.EuiButtonEmpty,{size:"s",color:"danger",onClick:confirmReset},"Reset")))};AdvancedFailureComponent.propTypes={defaultValue:_propTypes2.default.string,onValueChange:_propTypes2.default.func.isRequired,argExpression:_propTypes2.default.string.isRequired,updateArgExpression:_propTypes2.default.func.isRequired,resetErrorState:_propTypes2.default.func.isRequired,valid:_propTypes2.default.bool.isRequired,argId:_propTypes2.default.string.isRequired};var AdvancedFailure=exports.AdvancedFailure=(0,_recompose.compose)((0,_recompose.withProps)(function(_ref){var argValue=_ref.argValue;return{argExpression:(0,_ast.toExpression)(argValue,"argument")}}),(0,_stateful_prop.createStatefulPropHoc)("argExpression","updateArgExpression"),(0,_recompose.withPropsOnChange)(["argExpression"],function(_ref2){var argExpression=_ref2.argExpression;return{valid:function(){try{(0,_ast.fromExpression)(argExpression,"argument");return true}catch(e){return false}}()}}))(AdvancedFailureComponent);AdvancedFailure.propTypes={argValue:_propTypes2.default.any.isRequired}},6089:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var _extends=Object.assign||function(target){for(var i=1;i<arguments.length;i++){var source=arguments[i];for(var key in source)Object.prototype.hasOwnProperty.call(source,key)&&(target[key]=source[key])}return target};var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;"value"in descriptor&&(descriptor.writable=true);Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){protoProps&&defineProperties(Constructor.prototype,protoProps);staticProps&&defineProperties(Constructor,staticProps);return Constructor}}();exports.createStatefulPropHoc=createStatefulPropHoc;var _react=__webpack_require__(0);var _react2=_interopRequireDefault(_react);var _propTypes=__webpack_require__(4);var _propTypes2=_interopRequireDefault(_propTypes);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _defineProperty(obj,key,value){key in obj?Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true}):obj[key]=value;return obj}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(self,call){if(!self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!call||"object"!==typeof call&&"function"!==typeof call?self:call}function _inherits(subClass,superClass){if("function"!==typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function, not "+typeof superClass);subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:false,writable:true,configurable:true}});superClass&&(Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass)}var getDisplayName=function getDisplayName(Comp){return Comp.displayName||Comp.name||"UnnamedComponent"};function createStatefulPropHoc(fieldname){var updater=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"updateValue";return function(Comp){var WrappedControlledInput=function(_React$PureComponent){_inherits(WrappedControlledInput,_React$PureComponent);function WrappedControlledInput(props){_classCallCheck(this,WrappedControlledInput);var _this=_possibleConstructorReturn(this,(WrappedControlledInput.__proto__||Object.getPrototypeOf(WrappedControlledInput)).call(this,props));_this.handleChange=function(ev){ev.target?_this.setState({value:ev.target.value}):_this.setState({value:ev})};_this.state={value:props[fieldname]};return _this}_createClass(WrappedControlledInput,[{key:"componentWillReceiveProps",value:function componentWillReceiveProps(nextProps){this.setState({value:nextProps[fieldname]})}},{key:"render",value:function render(){var _extends2;var passedProps=_extends({},this.props,(_extends2={},_defineProperty(_extends2,fieldname,this.state.value),_defineProperty(_extends2,updater,this.handleChange),_extends2));return _react2.default.createElement(Comp,passedProps)}}]);return WrappedControlledInput}(_react2.default.PureComponent);WrappedControlledInput.propTypes=_defineProperty({},fieldname,_propTypes2.default.any);WrappedControlledInput.displayName="statefulProp("+getDisplayName(Comp)+")";return WrappedControlledInput}}},6090:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.PendingArgValue=void 0;var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;"value"in descriptor&&(descriptor.writable=true);Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){protoProps&&defineProperties(Constructor.prototype,protoProps);staticProps&&defineProperties(Constructor,staticProps);return Constructor}}();var _react=__webpack_require__(0);var _react2=_interopRequireDefault(_react);var _propTypes=__webpack_require__(4);var _propTypes2=_interopRequireDefault(_propTypes);var _loading=__webpack_require__(811);var _arg_label=__webpack_require__(2061);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(self,call){if(!self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!call||"object"!==typeof call&&"function"!==typeof call?self:call}function _inherits(subClass,superClass){if("function"!==typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function, not "+typeof superClass);subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:false,writable:true,configurable:true}});superClass&&(Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass)}var PendingArgValue=exports.PendingArgValue=function(_React$PureComponent){_inherits(PendingArgValue,_React$PureComponent);function PendingArgValue(){_classCallCheck(this,PendingArgValue);return _possibleConstructorReturn(this,(PendingArgValue.__proto__||Object.getPrototypeOf(PendingArgValue)).apply(this,arguments))}_createClass(PendingArgValue,[{key:"componentDidMount",value:function componentDidMount(){var _props=this.props,setResolvedArgValue=_props.setResolvedArgValue,templateProps=_props.templateProps;var argResolver=templateProps.argResolver,argValue=templateProps.argValue;null==argValue?setResolvedArgValue(null):argResolver(argValue).then(function(val){return setResolvedArgValue(null!=val?val:null)}).catch(function(){return setResolvedArgValue(null)})}},{key:"render",value:function render(){var _props2=this.props,label=_props2.label,argTypeInstance=_props2.argTypeInstance;return _react2.default.createElement("div",{className:"canvasArg"},_react2.default.createElement(_arg_label.ArgLabel,{className:"resolve-pending",label:label,help:argTypeInstance.help,expandable:false},_react2.default.createElement("div",{className:"canvasArg--pending"},_react2.default.createElement(_loading.Loading,{animated:true,text:"Loading"}))))}}]);return PendingArgValue}(_react2.default.PureComponent);PendingArgValue.propTypes={label:_propTypes2.default.string,argTypeInstance:_propTypes2.default.shape({help:_propTypes2.default.string.isRequired}).isRequired,setResolvedArgValue:_propTypes2.default.func.isRequired,templateProps:_propTypes2.default.shape({argResolver:_propTypes2.default.func.isRequired,argValue:_propTypes2.default.any})}},6091:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.Loading=void 0;var _react=__webpack_require__(0);var _react2=_interopRequireDefault(_react);var _propTypes=__webpack_require__(4);var _propTypes2=_interopRequireDefault(_propTypes);var _eui=__webpack_require__(2);var _hex_to_rgb=__webpack_require__(6092);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _toConsumableArray(arr){if(Array.isArray(arr)){for(var i=0,arr2=Array(arr.length);i<arr.length;i++)arr2[i]=arr[i];return arr2}return Array.from(arr)}var Loading=exports.Loading=function Loading(_ref){var animated=_ref.animated,text=_ref.text,backgroundColor=_ref.backgroundColor;if(animated)return _react2.default.createElement("div",{className:"canvasLoading"},text&&_react2.default.createElement("span",null,text," "),_react2.default.createElement(_eui.EuiLoadingSpinner,{size:"m"}));var rgb=(0,_hex_to_rgb.hexToRgb)(backgroundColor);return _react2.default.createElement("div",{className:"canvasLoading"},text&&_react2.default.createElement("span",null,text," "),_react2.default.createElement(_eui.EuiIcon,{color:rgb&&_eui.isColorDark.apply(void 0,_toConsumableArray(rgb))?"ghost":"text",type:"clock"}))};Loading.propTypes={animated:_propTypes2.default.bool,backgroundColor:_propTypes2.default.string,text:_propTypes2.default.string};Loading.defaultProps={animated:false,backgroundColor:"#000000",text:""}},6092:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.hexToRgb=function hexToRgb(hex){var shorthandHexColor=/^#?([a-f\d]{1})([a-f\d]{1})([a-f\d]{1})$/i;var hexColor=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i;var shorthandMatches=shorthandHexColor.exec(hex);if(shorthandMatches)return shorthandMatches.slice(1,4).map(function(hex){return parseInt(hex+hex,16)});var hexMatches=hexColor.exec(hex);if(hexMatches)return hexMatches.slice(1,4).map(function(hex){return parseInt(hex,16)});return null}},6093:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.Element=Element;var _default_header=__webpack_require__(6094);var _default_header2=_interopRequireDefault(_default_header);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function Element(config){this.name=config.name;this.displayName=config.displayName||this.name;this.image=config.image||_default_header2.default;this.help=config.help;if(!config.expression)throw new Error("Element types must have a default expression");this.expression=config.expression;this.filter=config.filter;this.width=config.width||500;this.height=config.height||300}},6094:function(module,exports){module.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAZAAAACgBAMAAADQnCfmAAAABGdBTUEAALGPC/xhBQAAAAFzUkdCAK7OHOkAAAASUExURUdwTAB4pgB6pwB5pgB5pgB4pSFSg2UAAAAFdFJOUwDXMaFmT4xB8wAAAepJREFUeNrtms1OwlAQRkt/9qB2DybdN/7sUcKeIvP+ryIYbS90Kpq48Juc8wQc7sx8t9NmGQAAAAAAAAD8kvx+GUBis7Aj3e2rtsemti/e1roa5aBx4iGIh9mNaHtceqiajD3MFPtk5XjYm2CDmItecT37Ip1aNhY2wTzGgRyPJESHnGilRJppkb1qhnSPT5tatbaSVr/7GFMvoqHYjHJjO4jsFGfWwbl4CaV77pRRodgkxehAzvp/qdciaWZUgknSt4ifkTq3lNqprKS29nK9fv7Xb831U7honUdfJSdS+OOpkAuSmf+DSzmRxi+hXC4Rt/500hW5vB2aFy8KeTiPItJOiHTiIno9UgcX0cuRxSfrTDzZrwS+zl3rSryIbbbGyK5/p+7EYkvT6Qd5oeXD9w/yXZTKOgQ5EPFeT9bayyAHol1ZK4sxfJNdvPbMaixGq5fC79n966LsB0LjA8mCHEgb5EC0nw0r7c+14oV6HuWWNYsxepOZpZ2FSWWJL0/KICNraBH1/WITZAk09Lq4Rx+H6gvf/h3DXF0kSovkQfakfYx0WRAR9RTpN4yHKCL7KCI7dZFZlBhB5L+KtIgAAAAA/DVVlI+0EEEEEUQQQQQRRBBBBBFEEAEAAAAAAAAAAAAAAACAH/EOe5WV1HX1GeIAAAAASUVORK5CYII="},6095:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.RenderFunction=RenderFunction;function RenderFunction(config){this.name=config.name;this.displayName=config.displayName||this.name;this.help=config.help;this.validate=config.validate||function validate(){};this.reuseDomNode=Boolean(config.reuseDomNode);this.render=config.render||function render(domNode,data,done){done()}}},6096:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.loadPrivateBrowserFunctions=void 0;var _functions=__webpack_require__(6097);var _functions2=__webpack_require__(6099);var _functions_registry=__webpack_require__(1174);function addFunction(fnDef){_functions_registry.functionsRegistry.register(fnDef)}exports.loadPrivateBrowserFunctions=function loadPrivateBrowserFunctions(){_functions2.clientFunctions.forEach(addFunction);_functions.commonFunctions.forEach(addFunction)}},6097:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.commonFunctions=void 0;var _to=__webpack_require__(6098);exports.commonFunctions=[_to.to]},6098:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.to=void 0;var _cast=__webpack_require__(2040);exports.to=function to(){return{name:"to",aliases:[],help:"Explicitly cast from one type to another",context:{},args:{type:{types:["string"],help:"A known type",aliases:["_"],multi:true}},fn:function fn(context,args,_ref){var types=_ref.types;if(!args.type)throw new Error("Must specify a casting type");return(0,_cast.castProvider)(types)(context,args.type)}}}},6099:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.clientFunctions=void 0;var _asset=__webpack_require__(6100);var _filters=__webpack_require__(6101);exports.clientFunctions=[_asset.asset,_filters.filters]},6100:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.asset=void 0;var _store=__webpack_require__(1162);var _assets=__webpack_require__(524);exports.asset=function asset(){return{name:"asset",aliases:[],context:{types:["null"]},type:"string",help:"Use Canvas workpad asset objects to provide argument values. Usually images",args:{id:{aliases:["_"],types:["string"],help:"The ID of the asset value to return",multi:false}},fn:function fn(context,args){var assetId=args.id;var asset=(0,_assets.getAssetById)((0,_store.getState)(),assetId);if(void 0!==asset)return asset.value;throw new Error("Could not get the asset by ID: "+assetId)}}}},6101:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.filters=void 0;var _ast=__webpack_require__(343);var _types_registry=__webpack_require__(805);var _store=__webpack_require__(1162);var _workpad=__webpack_require__(54);var _interpreter=__webpack_require__(526);exports.filters=function filters(){return{name:"filters",type:"filter",context:{types:["null"]},help:"Collect element filters on the workpad, usually to provide them to a data source",fn:function fn(){var filterExpression=(0,_workpad.getGlobalFilterExpression)((0,_store.getState)());if(filterExpression&&filterExpression.length){var filterAST=(0,_ast.fromExpression)(filterExpression);return(0,_interpreter.interpretAst)(filterAST)}var filterType=_types_registry.typesRegistry.get("filter");return filterType.from(null)}}}},6102:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.createHandlers=createHandlers;function createHandlers(){return{environment:"client"}}},6103:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.esPersistMiddleware=void 0;var _lodash=__webpack_require__(1);var _workpad=__webpack_require__(54);var _assets=__webpack_require__(524);var _workpad2=__webpack_require__(233);var _assets2=__webpack_require__(442);var _transient=__webpack_require__(345);var transientActions=_interopRequireWildcard(_transient);var _resolved_args=__webpack_require__(630);var resolvedArgsActions=_interopRequireWildcard(_resolved_args);var _workpad_service=__webpack_require__(632);var _notify=__webpack_require__(293);var _app=__webpack_require__(119);function _interopRequireWildcard(obj){if(obj&&obj.__esModule)return obj;var newObj={};if(null!=obj)for(var key in obj)Object.prototype.hasOwnProperty.call(obj,key)&&(newObj[key]=obj[key]);newObj.default=obj;return newObj}function _toConsumableArray(arr){if(Array.isArray(arr)){for(var i=0,arr2=Array(arr.length);i<arr.length;i++)arr2[i]=arr[i];return arr2}return Array.from(arr)}var workpadChanged=function workpadChanged(before,after){var workpad=(0,_workpad.getWorkpad)(before);return(0,_workpad.getWorkpad)(after)!==workpad};var assetsChanged=function assetsChanged(before,after){var assets=(0,_assets.getAssetIds)(before);return!(0,_lodash.isEqual)(assets,(0,_assets.getAssetIds)(after))};exports.esPersistMiddleware=function esPersistMiddleware(_ref){var getState=_ref.getState;var skippedActions=[_workpad2.setWorkpad,_assets2.setAssets,_assets2.resetAssets].concat(_toConsumableArray(Object.values(resolvedArgsActions)),_toConsumableArray(Object.values(transientActions))).map(function(a){return a.toString()});return function(next){return function(action){if(skippedActions.indexOf(action.type)>=0)return next(action);var curState=getState();next(action);var newState=getState();if(!(0,_app.canUserWrite)(newState))return;if(workpadChanged(curState,newState)||assetsChanged(curState,newState)){var persistedWorkpad=(0,_workpad.getWorkpadPersisted)(getState());return(0,_workpad_service.update)(persistedWorkpad.id,persistedWorkpad).catch(function(err){if(400===err.response.status)return _notify.notify.error(err.response,{title:"Couldn't save your changes to Elasticsearch"});if(413===err.response.status)return _notify.notify.error("The server gave a response that the workpad data was too large. This\n            usually means uploaded image assets that are too large for Kibana or\n            a proxy. Try removing some assets in the asset manager.",{title:"Couldn't save your changes to Elasticsearch"});return _notify.notify.error(err.response,{title:"Couldn't update workpad"})})}}}}},6121:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.fullscreen=void 0;var _fullscreen2=__webpack_require__(6122);var _transient=__webpack_require__(345);var _app=__webpack_require__(119);exports.fullscreen=function fullscreen(_ref){var getState=_ref.getState;return function(next){return function(action){next(action);if(action.type===_transient.setFullscreen.toString()){var _fullscreen=(0,_app.getFullscreen)(getState());(0,_fullscreen2.setFullscreen)(_fullscreen)}}}}},6122:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.setFullscreen=setFullscreen;var fullscreenClass=exports.fullscreenClass="canvas-isFullscreen";function setFullscreen(fullscreen){var doc=arguments.length>1&&void 0!==arguments[1]?arguments[1]:document;var enabled=Boolean(fullscreen);var body=doc.querySelector("body");var bodyClassList=body.classList;var isFullscreen=bodyClassList.contains(fullscreenClass);enabled&&!isFullscreen?bodyClassList.add(fullscreenClass):!enabled&&isFullscreen&&bodyClassList.remove(fullscreenClass)}},6123:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.historyMiddleware=void 0;var _extends=Object.assign||function(target){for(var i=1;i<arguments.length;i++){var source=arguments[i];for(var key in source)Object.prototype.hasOwnProperty.call(source,key)&&(target[key]=source[key])}return target};var _lodash=__webpack_require__(1);var _apps=__webpack_require__(2073);var _history_provider=__webpack_require__(2093);var _router_provider=__webpack_require__(1181);var _workpad_service=__webpack_require__(632);var _history=__webpack_require__(631);var _workpad=__webpack_require__(233);var _assets=__webpack_require__(442);var _app=__webpack_require__(119);var _workpad2=__webpack_require__(54);function _asyncToGenerator(fn){return function(){var gen=fn.apply(this,arguments);return new Promise(function(resolve,reject){function step(key,arg){try{var info=gen[key](arg);var value=info.value}catch(error){reject(error);return}if(!info.done)return Promise.resolve(value).then(function(value){step("next",value)},function(err){step("throw",err)});resolve(value)}return step("next")})}}function getHistoryState(state){return state.persistent}exports.historyMiddleware=function historyMiddleware(_ref){var dispatch=_ref.dispatch,getState=_ref.getState;var reduxInject=function reduxInject(routes){return routes.map(function(route){if(route.children)return _extends({},route,{children:reduxInject(route.children)});if(!route.action)return route;return _extends({},route,{action:route.action(dispatch,getState)})})};var handlerState={pendingCount:0};var router=(0,_router_provider.routerProvider)(reduxInject(_apps.routes));var history=(0,_history_provider.historyProvider)();var handleHistoryChanges=(_ref2=_asyncToGenerator(regeneratorRuntime.mark(function _callee(location,prevLocation){var pathname,historyState,historyAction,isBrowserNav,isUrlChange,currentWorkpadId,newWorkpad;return regeneratorRuntime.wrap(function _callee$(_context){while(1)switch(_context.prev=_context.next){case 0:pathname=location.pathname,historyState=location.state,historyAction=location.action;isBrowserNav="pop"===historyAction&&null!=historyState;isUrlChange=!isBrowserNav&&"pop"===historyAction||("push"===historyAction||"replace"===historyAction)&&prevLocation.pathname!==pathname;if(!isBrowserNav){_context.next=11;break}currentWorkpadId=(0,_workpad2.getWorkpad)(getState()).id;if(!(currentWorkpadId!==historyState.workpad.id)){_context.next=10;break}_context.next=8;return(0,_workpad_service.get)(historyState.workpad.id);case 8:newWorkpad=_context.sent;dispatch((0,_assets.setAssets)(newWorkpad.assets));case 10:return _context.abrupt("return",dispatch((0,_history.restoreHistory)(historyState)));case 11:if(!isUrlChange){_context.next=15;break}_context.next=14;return router.parse(pathname);case 14:return _context.abrupt("return",_context.sent);case 15:case"end":return _context.stop()}},_callee,void 0)})),function handleHistoryChanges(_x,_x2){return _ref2.apply(this,arguments)});var _ref2;history.onChange(_asyncToGenerator(regeneratorRuntime.mark(function _callee2(){var _args2=arguments;return regeneratorRuntime.wrap(function _callee2$(_context2){while(1)switch(_context2.prev=_context2.next){case 0:handlerState.pendingCount+=1;_context2.prev=1;_context2.next=4;return handleHistoryChanges.apply(void 0,_args2);case 4:_context2.next=8;break;case 6:_context2.prev=6;_context2.t0=_context2["catch"](1);case 8:_context2.prev=8;handlerState.pendingCount-=1;return _context2.finish(8);case 11:case"end":return _context2.stop()}},_callee2,void 0,[[1,6,8,11]])})));return function(next){return function(action){var oldState=getState();switch(action.type){case _history.undoHistory.toString():return history.undo();case _history.redoHistory.toString():return history.redo();case _history.restoreHistory.toString():next(action);dispatch((0,_workpad.initializeWorkpad)());return}next(action);var newState=getState();if(!(0,_app.isAppReady)(newState))return;if(!(0,_app.isAppReady)(oldState)&&(0,_app.isAppReady)(newState)){history.replace(getHistoryState(newState));return}var oldHistoryState=getHistoryState(oldState);var historyState=getHistoryState(newState);if(!(0,_lodash.isEqual)(historyState,oldHistoryState)){var useReplaceState=0!==handlerState.pendingCount;useReplaceState?history.replace(historyState):history.push(historyState)}}}}},6124:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var _routes=__webpack_require__(6125);Object.defineProperty(exports,"routes",{enumerable:true,get:function get(){return _routes.routes}});var _home_app=__webpack_require__(2074);Object.defineProperty(exports,"HomeApp",{enumerable:true,get:function get(){return _home_app.HomeApp}})},6125:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.routes=void 0;var _home_app=__webpack_require__(2074);exports.routes=[{name:"home",path:"/",meta:{component:_home_app.HomeApp}}]},6126:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.WorkpadLoader=void 0;var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;"value"in descriptor&&(descriptor.writable=true);Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){protoProps&&defineProperties(Constructor.prototype,protoProps);staticProps&&defineProperties(Constructor,staticProps);return Constructor}}();var _react=__webpack_require__(0);var _react2=_interopRequireDefault(_react);var _propTypes=__webpack_require__(4);var _propTypes2=_interopRequireDefault(_propTypes);var _eui=__webpack_require__(2);var _lodash=__webpack_require__(1);var _moment=__webpack_require__(12);var _moment2=_interopRequireDefault(_moment);var _documentation_links=__webpack_require__(6127);var _confirm_modal=__webpack_require__(1177);var _link=__webpack_require__(1178);var _paginate=__webpack_require__(2077);var _workpad_dropzone=__webpack_require__(6131);var _workpad_create=__webpack_require__(6137);var _workpad_search=__webpack_require__(6138);var _workpad_upload=__webpack_require__(6139);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _asyncToGenerator(fn){return function(){var gen=fn.apply(this,arguments);return new Promise(function(resolve,reject){function step(key,arg){try{var info=gen[key](arg);var value=info.value}catch(error){reject(error);return}if(!info.done)return Promise.resolve(value).then(function(value){step("next",value)},function(err){step("throw",err)});resolve(value)}return step("next")})}}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(self,call){if(!self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!call||"object"!==typeof call&&"function"!==typeof call?self:call}function _inherits(subClass,superClass){if("function"!==typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function, not "+typeof superClass);subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:false,writable:true,configurable:true}});superClass&&(Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass)}var formatDate=function formatDate(date){return date&&(0,_moment2.default)(date).format("MMM D, YYYY @ h:mma")};var WorkpadLoader=exports.WorkpadLoader=function(_React$PureComponent){_inherits(WorkpadLoader,_React$PureComponent);function WorkpadLoader(){var _ref,_this2=this;var _temp,_this,_ret;_classCallCheck(this,WorkpadLoader);for(var _len=arguments.length,args=Array(_len),_key=0;_key<_len;_key++)args[_key]=arguments[_key];return _ret=(_temp=(_this=_possibleConstructorReturn(this,(_ref=WorkpadLoader.__proto__||Object.getPrototypeOf(WorkpadLoader)).call.apply(_ref,[this].concat(args))),_this),_this.state={createPending:false,deletingWorkpad:false,sortField:"@timestamp",sortDirection:"desc",selectedWorkpads:[],pageSize:10},_this.createWorkpad=_asyncToGenerator(regeneratorRuntime.mark(function _callee(){return regeneratorRuntime.wrap(function _callee$(_context){while(1)switch(_context.prev=_context.next){case 0:_this.setState({createPending:true});_context.next=3;return _this.props.createWorkpad();case 3:_this._isMounted&&_this.setState({createPending:false});case 4:case"end":return _context.stop()}},_callee,_this2)})),_this.uploadWorkpad=(_ref3=_asyncToGenerator(regeneratorRuntime.mark(function _callee2(workpad){return regeneratorRuntime.wrap(function _callee2$(_context2){while(1)switch(_context2.prev=_context2.next){case 0:_this.setState({createPending:true});_context2.next=3;return _this.props.createWorkpad(workpad);case 3:_this._isMounted&&_this.setState({createPending:false});case 4:case"end":return _context2.stop()}},_callee2,_this2)})),function(_x){return _ref3.apply(this,arguments)}),_this.cloneWorkpad=(_ref4=_asyncToGenerator(regeneratorRuntime.mark(function _callee3(workpad){return regeneratorRuntime.wrap(function _callee3$(_context3){while(1)switch(_context3.prev=_context3.next){case 0:_this.setState({createPending:true});_context3.next=3;return _this.props.cloneWorkpad(workpad.id);case 3:_this._isMounted&&_this.setState({createPending:false});case 4:case"end":return _context3.stop()}},_callee3,_this2)})),function(_x2){return _ref4.apply(this,arguments)}),_this.openRemoveConfirm=function(){return _this.setState({deletingWorkpad:true})},_this.closeRemoveConfirm=function(){return _this.setState({deletingWorkpad:false})},_this.removeWorkpads=function(){var selectedWorkpads=_this.state.selectedWorkpads;_this.props.removeWorkpads(selectedWorkpads.map(function(_ref5){var id=_ref5.id;return id})).then(function(remainingIds){var remainingWorkpads=remainingIds.length>0?selectedWorkpads.filter(function(_ref6){var id=_ref6.id;return remainingIds.includes(id)}):[];_this._isMounted&&_this.setState({deletingWorkpad:false,selectedWorkpads:remainingWorkpads})})},_this.downloadWorkpads=function(){_this.state.selectedWorkpads.forEach(function(_ref7){var id=_ref7.id;return _this.props.downloadWorkpad(id)})},_this.onSelectionChange=function(selectedWorkpads){_this.setState({selectedWorkpads:selectedWorkpads})},_this.onTableChange=function(_ref8){var _ref8$sort=_ref8.sort,sort=void 0===_ref8$sort?{}:_ref8$sort;var sortField=sort.field,sortDirection=sort.direction;_this.setState({sortField:sortField,sortDirection:sortDirection})},_this.renderWorkpadTable=function(_ref9){var rows=_ref9.rows,pageNumber=_ref9.pageNumber,totalPages=_ref9.totalPages,setPage=_ref9.setPage;var _this$state=_this.state,sortField=_this$state.sortField,sortDirection=_this$state.sortDirection;var _this$props=_this.props,canUserWrite=_this$props.canUserWrite,createPending=_this$props.createPending;var actions=[{render:function render(workpad){return _react2.default.createElement(_eui.EuiFlexGroup,{gutterSize:"xs",alignItems:"center"},_react2.default.createElement(_eui.EuiFlexItem,{grow:false},_react2.default.createElement(_eui.EuiToolTip,{content:"Download"},_react2.default.createElement(_eui.EuiButtonIcon,{iconType:"sortDown",onClick:function onClick(){return _this.props.downloadWorkpad(workpad.id)},"aria-label":"Download Workpad"}))),_react2.default.createElement(_eui.EuiFlexItem,{grow:false},_react2.default.createElement(_eui.EuiToolTip,{content:canUserWrite?"Clone":"You don't have permission to clone workpads"},_react2.default.createElement(_eui.EuiButtonIcon,{iconType:"copy",onClick:function onClick(){return _this.cloneWorkpad(workpad)},"aria-label":"Clone Workpad",disabled:!canUserWrite}))))}}];var columns=[{field:"name",name:"Workpad Name",sortable:true,dataType:"string",render:function render(name,workpad){var workpadName=workpad.name.length?workpad.name:_react2.default.createElement("em",null,workpad.id);return _react2.default.createElement(_link.Link,{"data-test-subj":"canvasWorkpadLoaderWorkpad",name:"loadWorkpad",params:{id:workpad.id},"aria-label":"Load workpad "+workpadName},workpadName)}},{field:"@created",name:"Created",sortable:true,dataType:"date",width:"20%",render:function render(date){return formatDate(date)}},{field:"@timestamp",name:"Updated",sortable:true,dataType:"date",width:"20%",render:function render(date){return formatDate(date)}},{name:"",actions:actions,width:"5%"}];var sorting={sort:{field:sortField,direction:sortDirection}};var selection={itemId:"id",onSelectionChange:_this.onSelectionChange};var emptyTable=_react2.default.createElement(_eui.EuiEmptyPrompt,{iconType:"importAction",title:_react2.default.createElement("h2",null,"Add your first workpad"),titleSize:"s",body:_react2.default.createElement(_react.Fragment,null,_react2.default.createElement("p",null,"Create a new workpad or drag and drop previously built workpad JSON files here."))});return _react2.default.createElement(_react.Fragment,null,_react2.default.createElement(_workpad_dropzone.WorkpadDropzone,{onUpload:_this.uploadWorkpad,disabled:createPending||!canUserWrite},_react2.default.createElement(_eui.EuiBasicTable,{compressed:true,items:rows,itemId:"id",columns:columns,sorting:sorting,noItemsMessage:emptyTable,onChange:_this.onTableChange,isSelectable:true,selection:selection,className:"canvasWorkpad__dropzoneTable","data-test-subj":"canvasWorkpadLoaderTable"}),_react2.default.createElement(_eui.EuiSpacer,null),_react2.default.createElement(_eui.EuiFlexGroup,{gutterSize:"none",justifyContent:"flexEnd"},_react2.default.createElement(_eui.EuiFlexItem,{grow:false},_react2.default.createElement(_eui.EuiPagination,{activePage:pageNumber,onPageClick:setPage,pageCount:totalPages})))))},_temp),_possibleConstructorReturn(_this,_ret);var _ref4;var _ref3}_createClass(WorkpadLoader,[{key:"componentDidMount",value:function(){var _ref10=_asyncToGenerator(regeneratorRuntime.mark(function _callee4(){return regeneratorRuntime.wrap(function _callee4$(_context4){while(1)switch(_context4.prev=_context4.next){case 0:this.props.findWorkpads();this._isMounted=true;case 2:case"end":return _context4.stop()}},_callee4,this)}));function componentDidMount(){return _ref10.apply(this,arguments)}return componentDidMount}()},{key:"componentWillReceiveProps",value:function componentWillReceiveProps(newProps){var _props=this.props,workpadId=_props.workpadId,onClose=_props.onClose;workpadId!==newProps.workpadId&&onClose()}},{key:"componentWillUnmount",value:function componentWillUnmount(){this._isMounted=false}},{key:"render",value:function render(){var _this3=this;var _state=this.state,deletingWorkpad=_state.deletingWorkpad,createPending=_state.createPending,selectedWorkpads=_state.selectedWorkpads,sortField=_state.sortField,sortDirection=_state.sortDirection;var canUserWrite=this.props.canUserWrite;var isLoading=null==this.props.workpads;var createButton=_react2.default.createElement(_workpad_create.WorkpadCreate,{createPending:createPending,onCreate:this.createWorkpad,disabled:!canUserWrite});var deleteButton=_react2.default.createElement(_eui.EuiButton,{size:"s",color:"danger",iconType:"trash",onClick:this.openRemoveConfirm,disabled:!canUserWrite},"Delete ("+selectedWorkpads.length+")");var downloadButton=_react2.default.createElement(_eui.EuiButton,{size:"s",color:"secondary",onClick:this.downloadWorkpads,iconType:"sortDown"},"Download ("+selectedWorkpads.length+")");var uploadButton=_react2.default.createElement(_workpad_upload.WorkpadUpload,{onUpload:this.uploadWorkpad,disabled:createPending||!canUserWrite});if(!canUserWrite){createButton=_react2.default.createElement(_eui.EuiToolTip,{content:"You don't have permission to create workpads"},createButton);deleteButton=_react2.default.createElement(_eui.EuiToolTip,{content:"You don't have permission to delete workpads"},deleteButton);uploadButton=_react2.default.createElement(_eui.EuiToolTip,{content:"You don't have permission to upload workpads"},uploadButton)}var modalTitle=1===selectedWorkpads.length?"Delete workpad '"+selectedWorkpads[0].name+"'?":"Delete "+selectedWorkpads.length+" workpads?";var confirmModal=_react2.default.createElement(_confirm_modal.ConfirmModal,{isOpen:deletingWorkpad,title:modalTitle,message:"You can't recover deleted workpads.",confirmButtonText:"Delete",onConfirm:this.removeWorkpads,onCancel:this.closeRemoveConfirm});var sortedWorkpads=[];if(!createPending&&!isLoading){var workpads=this.props.workpads.workpads;sortedWorkpads=(0,_lodash.sortByOrder)(workpads,[sortField,"@timestamp"],[sortDirection,"desc"])}return _react2.default.createElement(_paginate.Paginate,{rows:sortedWorkpads},function(pagination){return _react2.default.createElement(_react.Fragment,null,_react2.default.createElement(_eui.EuiModalHeader,{className:"canvasHomeApp__modalHeader"},_react2.default.createElement("div",{style:{width:"100%"}},_react2.default.createElement(_eui.EuiFlexGroup,{alignItems:"center",gutterSize:"m"},_react2.default.createElement(_eui.EuiFlexItem,{grow:false},_react2.default.createElement(_eui.EuiModalHeaderTitle,null,"Canvas workpads")),_react2.default.createElement(_eui.EuiFlexItem,{grow:false},_react2.default.createElement(_eui.EuiBetaBadge,{label:"Beta",tooltipContent:"Canvas is still in beta. Please help us improve by reporting issues or bugs in the Kibana repo."})),_react2.default.createElement(_eui.EuiFlexItem,{grow:false},_react2.default.createElement(_eui.EuiLink,{href:_documentation_links.documentationLinks.canvas,target:"_blank"},"Docs"))),_react2.default.createElement(_eui.EuiSpacer,{size:"l"}),_react2.default.createElement(_eui.EuiFlexGroup,{justifyContent:"spaceBetween"},_react2.default.createElement(_eui.EuiFlexItem,{grow:2},_react2.default.createElement(_eui.EuiFlexGroup,{gutterSize:"s"},selectedWorkpads.length>0&&_react2.default.createElement(_react.Fragment,null,_react2.default.createElement(_eui.EuiFlexItem,{grow:false},downloadButton),_react2.default.createElement(_eui.EuiFlexItem,{grow:false},deleteButton)),_react2.default.createElement(_eui.EuiFlexItem,{grow:1},_react2.default.createElement(_workpad_search.WorkpadSearch,{onChange:function onChange(text){pagination.setPage(0);_this3.props.findWorkpads(text)}})))),_react2.default.createElement(_eui.EuiFlexItem,{grow:2},_react2.default.createElement(_eui.EuiFlexGroup,{gutterSize:"s",justifyContent:"flexEnd",wrap:true},_react2.default.createElement(_eui.EuiFlexItem,{grow:false},uploadButton),_react2.default.createElement(_eui.EuiFlexItem,{grow:false},createButton)))))),_react2.default.createElement(_eui.EuiModalBody,null,createPending&&_react2.default.createElement("div",null,"Creating Workpad..."),!createPending&&isLoading&&_react2.default.createElement("div",null,"Fetching Workpads..."),!createPending&&!isLoading&&_this3.renderWorkpadTable(pagination),confirmModal))})}}]);return WorkpadLoader}(_react2.default.PureComponent);WorkpadLoader.propTypes={workpadId:_propTypes2.default.string.isRequired,canUserWrite:_propTypes2.default.bool.isRequired,createWorkpad:_propTypes2.default.func.isRequired,findWorkpads:_propTypes2.default.func.isRequired,downloadWorkpad:_propTypes2.default.func.isRequired,cloneWorkpad:_propTypes2.default.func.isRequired,removeWorkpads:_propTypes2.default.func.isRequired,onClose:_propTypes2.default.func.isRequired,workpads:_propTypes2.default.object}},6127:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.documentationLinks=void 0;var _documentation_links=__webpack_require__(242);exports.documentationLinks={canvas:_documentation_links.ELASTIC_WEBSITE_URL+"guide/en/kibana/"+_documentation_links.DOC_LINK_VERSION+"/canvas.html"}},6128:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.ConfirmModal=void 0;var _extends=Object.assign||function(target){for(var i=1;i<arguments.length;i++){var source=arguments[i];for(var key in source)Object.prototype.hasOwnProperty.call(source,key)&&(target[key]=source[key])}return target};var _react=__webpack_require__(0);var _react2=_interopRequireDefault(_react);var _propTypes=__webpack_require__(4);var _propTypes2=_interopRequireDefault(_propTypes);var _eui=__webpack_require__(2);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _objectWithoutProperties(obj,keys){var target={};for(var i in obj){if(keys.indexOf(i)>=0)continue;if(!Object.prototype.hasOwnProperty.call(obj,i))continue;target[i]=obj[i]}return target}var ConfirmModal=function ConfirmModal(props){var isOpen=props.isOpen,title=props.title,message=props.message,onConfirm=props.onConfirm,onCancel=props.onCancel,confirmButtonText=props.confirmButtonText,cancelButtonText=props.cancelButtonText,className=props.className,rest=_objectWithoutProperties(props,["isOpen","title","message","onConfirm","onCancel","confirmButtonText","cancelButtonText","className"]);var confirm=function confirm(ev){onConfirm&&onConfirm(ev)};var cancel=function cancel(ev){onCancel&&onCancel(ev)};if(!isOpen)return null;return _react2.default.createElement(_eui.EuiOverlayMask,null,_react2.default.createElement(_eui.EuiConfirmModal,_extends({},rest,{className:"canvasConfirmModal "+(className||""),title:title,onCancel:cancel,onConfirm:confirm,confirmButtonText:confirmButtonText,cancelButtonText:cancelButtonText,defaultFocusedButton:"confirm",buttonColor:"danger"}),message))};exports.ConfirmModal=ConfirmModal;ConfirmModal.propTypes={isOpen:_propTypes2.default.bool,title:_propTypes2.default.string,message:_propTypes2.default.string.isRequired,onConfirm:_propTypes2.default.func.isRequired,onCancel:_propTypes2.default.func.isRequired,cancelButtonText:_propTypes2.default.string,confirmButtonText:_propTypes2.default.string,className:_propTypes2.default.string};ConfirmModal.defaultProps={title:"Confirm",confirmButtonText:"Confirm",cancelButtonText:"Cancel"}},6129:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.Link=void 0;var _extends=Object.assign||function(target){for(var i=1;i<arguments.length;i++){var source=arguments[i];for(var key in source)Object.prototype.hasOwnProperty.call(source,key)&&(target[key]=source[key])}return target};var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;"value"in descriptor&&(descriptor.writable=true);Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){protoProps&&defineProperties(Constructor.prototype,protoProps);staticProps&&defineProperties(Constructor,staticProps);return Constructor}}();var _react=__webpack_require__(0);var _react2=_interopRequireDefault(_react);var _propTypes=__webpack_require__(4);var _propTypes2=_interopRequireDefault(_propTypes);var _eui=__webpack_require__(2);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _objectWithoutProperties(obj,keys){var target={};for(var i in obj){if(keys.indexOf(i)>=0)continue;if(!Object.prototype.hasOwnProperty.call(obj,i))continue;target[i]=obj[i]}return target}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(self,call){if(!self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!call||"object"!==typeof call&&"function"!==typeof call?self:call}function _inherits(subClass,superClass){if("function"!==typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function, not "+typeof superClass);subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:false,writable:true,configurable:true}});superClass&&(Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass)}var isModifiedEvent=function isModifiedEvent(ev){return!!(ev.metaKey||ev.altKey||ev.ctrlKey||ev.shiftKey)};var Link=exports.Link=function(_React$PureComponent){_inherits(Link,_React$PureComponent);function Link(){var _ref;var _temp,_this,_ret;_classCallCheck(this,Link);for(var _len=arguments.length,args=Array(_len),_key=0;_key<_len;_key++)args[_key]=arguments[_key];return _ret=(_temp=(_this=_possibleConstructorReturn(this,(_ref=Link.__proto__||Object.getPrototypeOf(Link)).call.apply(_ref,[this].concat(args))),_this),_this.navigateTo=function(name,params){return function(ev){_this.props.onClick&&_this.props.onClick(ev);if(!ev.defaultPrevented&&0===ev.button&&!_this.props.target&&!isModifiedEvent(ev)){ev.preventDefault();_this.context.router.navigateTo(name,params)}}},_temp),_possibleConstructorReturn(_this,_ret)}_createClass(Link,[{key:"render",value:function render(){try{var _props=this.props,name=_props.name,params=_props.params,children=_props.children,linkArgs=_objectWithoutProperties(_props,["name","params","children"]);var router=this.context.router;var href=router.getFullPath(router.create(name,params));var props=_extends({},linkArgs,{href:href,onClick:this.navigateTo(name,params)});return _react2.default.createElement(_eui.EuiLink,props,children)}catch(e){console.error(e);return _react2.default.createElement("div",null,"LINK ERROR: ",e.message)}}}]);return Link}(_react2.default.PureComponent);Link.propTypes={target:_propTypes2.default.string,onClick:_propTypes2.default.func,name:_propTypes2.default.string.isRequired,params:_propTypes2.default.object,children:_propTypes2.default.oneOfType([_propTypes2.default.string,_propTypes2.default.number,_propTypes2.default.node]).isRequired};Link.contextTypes={router:_propTypes2.default.object}},6130:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.Paginate=void 0;var _propTypes=__webpack_require__(4);var _propTypes2=_interopRequireDefault(_propTypes);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var Paginate=exports.Paginate=function Paginate(props){return props.children({rows:props.partialRows,perPage:props.perPage,pageNumber:props.pageNumber,totalPages:props.totalPages,nextPageEnabled:props.nextPageEnabled,prevPageEnabled:props.prevPageEnabled,setPage:function setPage(num){return props.setPage(num)},nextPage:props.nextPage,prevPage:props.prevPage})};Paginate.propTypes={children:_propTypes2.default.func.isRequired,partialRows:_propTypes2.default.array.isRequired,perPage:_propTypes2.default.number.isRequired,pageNumber:_propTypes2.default.number.isRequired,totalPages:_propTypes2.default.number.isRequired,nextPageEnabled:_propTypes2.default.bool.isRequired,prevPageEnabled:_propTypes2.default.bool.isRequired,setPage:_propTypes2.default.func.isRequired,nextPage:_propTypes2.default.func.isRequired,prevPage:_propTypes2.default.func.isRequired}},6131:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.WorkpadDropzone=void 0;var _slicedToArray=function(){function sliceIterator(arr,i){var _arr=[];var _n=true;var _d=false;var _e=void 0;try{for(var _s,_i=arr[Symbol.iterator]();!(_n=(_s=_i.next()).done);_n=true){_arr.push(_s.value);if(i&&_arr.length===i)break}}catch(err){_d=true;_e=err}finally{try{!_n&&_i["return"]&&_i["return"]()}finally{if(_d)throw _e}}return _arr}return function(arr,i){if(Array.isArray(arr))return arr;if(Symbol.iterator in Object(arr))return sliceIterator(arr,i);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}();var _propTypes=__webpack_require__(4);var _propTypes2=_interopRequireDefault(_propTypes);var _recompose=__webpack_require__(24);var _notify=__webpack_require__(293);var _upload_workpad=__webpack_require__(2078);var _workpad_dropzone=__webpack_require__(6132);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var WorkpadDropzone=exports.WorkpadDropzone=(0,_recompose.compose)((0,_recompose.withHandlers)({onDropAccepted:function onDropAccepted(_ref){var onUpload=_ref.onUpload;return function(_ref2){var _ref3=_slicedToArray(_ref2,1),file=_ref3[0];return(0,_upload_workpad.uploadWorkpad)(file,onUpload)}},onDropRejected:function onDropRejected(){return function(_ref4){var _ref5=_slicedToArray(_ref4,1),file=_ref5[0];_notify.notify.warning("Only JSON files are accepted",{title:"Couldn't upload '"+(file.name||"file")+"'"})}}}))(_workpad_dropzone.WorkpadDropzone);WorkpadDropzone.propTypes={onUpload:_propTypes2.default.func.isRequired}},6132:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.WorkpadDropzone=void 0;var _react=__webpack_require__(0);var _react2=_interopRequireDefault(_react);var _propTypes=__webpack_require__(4);var _propTypes2=_interopRequireDefault(_propTypes);var _reactDropzone=__webpack_require__(6133);var _reactDropzone2=_interopRequireDefault(_reactDropzone);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var WorkpadDropzone=exports.WorkpadDropzone=function WorkpadDropzone(_ref){var onDropAccepted=_ref.onDropAccepted,onDropRejected=_ref.onDropRejected,disabled=_ref.disabled,children=_ref.children;return _react2.default.createElement(_reactDropzone2.default,{accept:"application/json",onDropAccepted:onDropAccepted,onDropRejected:onDropRejected,disableClick:true,disabled:disabled,className:"canvasWorkpad__dropzone",activeClassName:"canvasWorkpad__dropzone--active"},children)};WorkpadDropzone.propTypes={onDropAccepted:_propTypes2.default.func.isRequired,onDropRejected:_propTypes2.default.func.isRequired,disabled:_propTypes2.default.bool.isRequired,children:_propTypes2.default.node.isRequired}},6133:function(module,exports,__webpack_require__){!(0,t=function(e,t){return function(e){function t(r){if(n[r])return n[r].exports;var o=n[r]={i:r,l:!1,exports:{}};return e[r].call(o.exports,o,o.exports,t),o.l=!0,o.exports}var n={};return t.m=e,t.c=n,t.d=function(e,n,r){t.o(e,n)||Object.defineProperty(e,n,{configurable:!1,enumerable:!0,get:r})},t.n=function(e){var n=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(n,"a",n),n},t.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},t.p="",t(t.s=0)}([function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function o(e,t){var n={};for(var r in e)t.indexOf(r)>=0||Object.prototype.hasOwnProperty.call(e,r)&&(n[r]=e[r]);return n}function i(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function u(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function c(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var s=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},l=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),f=n(1),p=r(f),d=n(2),v=r(d),h=n(3),g=n(5),y=r(g),m=function(e){function t(e,n){a(this,t);var r=u(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,n));return r.renderChildren=function(e,t,n,o){return"function"==typeof e?e(s({},r.state,{isDragActive:t,isDragAccept:n,isDragReject:o})):e},r.composeHandlers=r.composeHandlers.bind(r),r.onClick=r.onClick.bind(r),r.onDocumentDrop=r.onDocumentDrop.bind(r),r.onDragEnter=r.onDragEnter.bind(r),r.onDragLeave=r.onDragLeave.bind(r),r.onDragOver=r.onDragOver.bind(r),r.onDragStart=r.onDragStart.bind(r),r.onDrop=r.onDrop.bind(r),r.onFileDialogCancel=r.onFileDialogCancel.bind(r),r.onInputElementClick=r.onInputElementClick.bind(r),r.setRef=r.setRef.bind(r),r.setRefs=r.setRefs.bind(r),r.isFileDialogActive=!1,r.state={draggedFiles:[],acceptedFiles:[],rejectedFiles:[]},r}return c(t,e),l(t,[{key:"componentDidMount",value:function(){var e=this.props.preventDropOnDocument;this.dragTargets=[],e&&(document.addEventListener("dragover",h.onDocumentDragOver,!1),document.addEventListener("drop",this.onDocumentDrop,!1)),this.fileInputEl.addEventListener("click",this.onInputElementClick,!1),window.addEventListener("focus",this.onFileDialogCancel,!1)}},{key:"componentWillUnmount",value:function(){this.props.preventDropOnDocument&&(document.removeEventListener("dragover",h.onDocumentDragOver),document.removeEventListener("drop",this.onDocumentDrop)),null!=this.fileInputEl&&this.fileInputEl.removeEventListener("click",this.onInputElementClick,!1),window.removeEventListener("focus",this.onFileDialogCancel,!1)}},{key:"composeHandlers",value:function(e){return this.props.disabled?null:e}},{key:"onDocumentDrop",value:function(e){this.node&&this.node.contains(e.target)||(e.preventDefault(),this.dragTargets=[])}},{key:"onDragStart",value:function(e){this.props.onDragStart&&this.props.onDragStart.call(this,e)}},{key:"onDragEnter",value:function(e){var t=this;e.preventDefault(),-1===this.dragTargets.indexOf(e.target)&&this.dragTargets.push(e.target),Promise.resolve(this.props.getDataTransferItems(e)).then(function(e){t.setState({isDragActive:!0,draggedFiles:e})}),this.props.onDragEnter&&this.props.onDragEnter.call(this,e)}},{key:"onDragOver",value:function(e){e.preventDefault(),e.stopPropagation();try{e.dataTransfer.dropEffect=this.isFileDialogActive?"none":"copy"}catch(e){}return this.props.onDragOver&&this.props.onDragOver.call(this,e),!1}},{key:"onDragLeave",value:function(e){var t=this;e.preventDefault(),this.dragTargets=this.dragTargets.filter(function(n){return n!==e.target&&t.node.contains(n)}),this.dragTargets.length>0||(this.setState({isDragActive:!1,draggedFiles:[]}),this.props.onDragLeave&&this.props.onDragLeave.call(this,e))}},{key:"onDrop",value:function(e){var t=this,n=this.props,r=n.onDrop,o=n.onDropAccepted,a=n.onDropRejected,u=n.multiple,c=n.disablePreview,s=n.accept,l=n.getDataTransferItems;e.preventDefault(),this.dragTargets=[],this.isFileDialogActive=!1,this.draggedFiles=null,this.setState({isDragActive:!1,draggedFiles:[]}),Promise.resolve(l(e)).then(function(n){var l=[],f=[];n.forEach(function(e){if(!c)try{e.preview=window.URL.createObjectURL(e)}catch(e){}(0,h.fileAccepted)(e,s)&&(0,h.fileMatchSize)(e,t.props.maxSize,t.props.minSize)?l.push(e):f.push(e)}),u||f.push.apply(f,i(l.splice(1))),r&&r.call(t,l,f,e),f.length>0&&a&&a.call(t,f,e),l.length>0&&o&&o.call(t,l,e)})}},{key:"onClick",value:function(e){var t=this.props,n=t.onClick;t.disableClick||(e.stopPropagation(),n&&n.call(this,e),(0,h.isIeOrEdge)()?setTimeout(this.open.bind(this),0):this.open())}},{key:"onInputElementClick",value:function(e){e.stopPropagation(),this.props.inputProps&&this.props.inputProps.onClick&&this.props.inputProps.onClick()}},{key:"onFileDialogCancel",value:function(){var e=this,t=this.props.onFileDialogCancel;this.isFileDialogActive&&setTimeout(function(){null!=e.fileInputEl&&(e.fileInputEl.files.length||(e.isFileDialogActive=!1));"function"==typeof t&&t()},300)}},{key:"setRef",value:function(e){this.node=e}},{key:"setRefs",value:function(e){this.fileInputEl=e}},{key:"open",value:function(){this.isFileDialogActive=!0,this.fileInputEl.value=null,this.fileInputEl.click()}},{key:"render",value:function(){var e=this.props,t=e.accept,n=e.acceptClassName,r=e.activeClassName,i=e.children,a=e.disabled,u=e.disabledClassName,c=e.inputProps,l=e.multiple,f=e.name,d=e.rejectClassName,v=o(e,["accept","acceptClassName","activeClassName","children","disabled","disabledClassName","inputProps","multiple","name","rejectClassName"]),g=v.acceptStyle,m=v.activeStyle,b=v.className,D=void 0===b?"":b,x=v.disabledStyle,O=v.rejectStyle,S=v.style,C=o(v,["acceptStyle","activeStyle","className","disabledStyle","rejectStyle","style"]),j=this.state,E=j.isDragActive,w=j.draggedFiles,_=w.length,k=l||_<=1,P=_>0&&(0,h.allFilesAccepted)(w,this.props.accept),A=_>0&&(!P||!k),F=!(D||S||m||g||O||x);E&&r&&(D+=" "+r),P&&n&&(D+=" "+n),A&&d&&(D+=" "+d),a&&u&&(D+=" "+u),F&&(S=y.default.default,m=y.default.active,g=y.default.active,O=y.default.rejected,x=y.default.disabled);var T=s({position:"relative"},S);m&&E&&(T=s({},T,m)),g&&P&&(T=s({},T,g)),O&&A&&(T=s({},T,O)),x&&a&&(T=s({},T,x));var I={accept:t,disabled:a,type:"file",style:s({position:"absolute",top:0,right:0,bottom:0,left:0,opacity:1e-5,pointerEvents:"none"},c.style),multiple:h.supportMultiple&&l,ref:this.setRefs,onChange:this.onDrop,autoComplete:"off"};f&&f.length&&(I.name=f);var M=(C.acceptedFiles,C.preventDropOnDocument,C.disablePreview,C.disableClick,C.onDropAccepted,C.onDropRejected,C.onFileDialogCancel,C.maxSize,C.minSize,C.getDataTransferItems,o(C,["acceptedFiles","preventDropOnDocument","disablePreview","disableClick","onDropAccepted","onDropRejected","onFileDialogCancel","maxSize","minSize","getDataTransferItems"]));return p.default.createElement("div",s({className:D,style:T},M,{onClick:this.composeHandlers(this.onClick),onDragStart:this.composeHandlers(this.onDragStart),onDragEnter:this.composeHandlers(this.onDragEnter),onDragOver:this.composeHandlers(this.onDragOver),onDragLeave:this.composeHandlers(this.onDragLeave),onDrop:this.composeHandlers(this.onDrop),ref:this.setRef,"aria-disabled":a}),this.renderChildren(i,E,P,A),p.default.createElement("input",s({},c,I)))}}]),t}(p.default.Component);t.default=m,m.propTypes={accept:v.default.oneOfType([v.default.string,v.default.arrayOf(v.default.string)]),children:v.default.oneOfType([v.default.node,v.default.func]),disableClick:v.default.bool,disabled:v.default.bool,disablePreview:v.default.bool,preventDropOnDocument:v.default.bool,inputProps:v.default.object,multiple:v.default.bool,name:v.default.string,maxSize:v.default.number,minSize:v.default.number,className:v.default.string,activeClassName:v.default.string,acceptClassName:v.default.string,rejectClassName:v.default.string,disabledClassName:v.default.string,style:v.default.object,activeStyle:v.default.object,acceptStyle:v.default.object,rejectStyle:v.default.object,disabledStyle:v.default.object,getDataTransferItems:v.default.func,onClick:v.default.func,onDrop:v.default.func,onDropAccepted:v.default.func,onDropRejected:v.default.func,onDragStart:v.default.func,onDragEnter:v.default.func,onDragOver:v.default.func,onDragLeave:v.default.func,onFileDialogCancel:v.default.func},m.defaultProps={preventDropOnDocument:!0,disabled:!1,disablePreview:!1,disableClick:!1,inputProps:{},multiple:!0,maxSize:1/0,minSize:0,getDataTransferItems:h.getDataTransferItems},e.exports=t.default},function(t,n){t.exports=e},function(e,n){e.exports=t},function(e,t,n){"use strict";function r(e){var t=[];if(e.dataTransfer){var n=e.dataTransfer;n.files&&n.files.length?t=n.files:n.items&&n.items.length&&(t=n.items)}else e.target&&e.target.files&&(t=e.target.files);return Array.prototype.slice.call(t)}function o(e,t){return"application/x-moz-file"===e.type||(0,p.default)(e,t)}function i(e,t,n){return e.size<=t&&e.size>=n}function a(e,t){return e.every(function(e){return o(e,t)})}function u(e){e.preventDefault()}function c(e){return-1!==e.indexOf("MSIE")||-1!==e.indexOf("Trident/")}function s(e){return-1!==e.indexOf("Edge/")}function l(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:window.navigator.userAgent;return c(e)||s(e)}Object.defineProperty(t,"__esModule",{value:!0}),t.supportMultiple=void 0,t.getDataTransferItems=r,t.fileAccepted=o,t.fileMatchSize=i,t.allFilesAccepted=a,t.onDocumentDragOver=u,t.isIeOrEdge=l;var f=n(4),p=function(e){return e&&e.__esModule?e:{default:e}}(f);t.supportMultiple="undefined"==typeof document||!document||!document.createElement||"multiple"in document.createElement("input")},function(e,t){e.exports=function(e){function t(r){if(n[r])return n[r].exports;var o=n[r]={i:r,l:!1,exports:{}};return e[r].call(o.exports,o,o.exports,t),o.l=!0,o.exports}var n={};return t.m=e,t.c=n,t.d=function(e,n,r){t.o(e,n)||Object.defineProperty(e,n,{configurable:!1,enumerable:!0,get:r})},t.n=function(e){var n=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(n,"a",n),n},t.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},t.p="",t(t.s=13)}([function(e,t){var n=e.exports="undefined"!=typeof window&&window.Math==Math?window:"undefined"!=typeof self&&self.Math==Math?self:Function("return this")();"number"==typeof __g&&(__g=n)},function(e,t){e.exports=function(e){return"object"==typeof e?null!==e:"function"==typeof e}},function(e,t){var n=e.exports={version:"2.5.0"};"number"==typeof __e&&(__e=n)},function(e,t,n){e.exports=!n(4)(function(){return 7!=Object.defineProperty({},"a",{get:function(){return 7}}).a})},function(e,t){e.exports=function(e){try{return!!e()}catch(e){return!0}}},function(e,t){var n={}.toString;e.exports=function(e){return n.call(e).slice(8,-1)}},function(e,t,n){var r=n(32)("wks"),o=n(9),i=n(0).Symbol,a="function"==typeof i;(e.exports=function(e){return r[e]||(r[e]=a&&i[e]||(a?i:o)("Symbol."+e))}).store=r},function(e,t,n){var r=n(0),o=n(2),i=n(8),a=n(22),u=n(10),c=function(e,t,n){var s,l,f,p,d=e&c.F,v=e&c.G,h=e&c.S,g=e&c.P,y=e&c.B,m=v?r:h?r[t]||(r[t]={}):(r[t]||{}).prototype,b=v?o:o[t]||(o[t]={}),D=b.prototype||(b.prototype={});v&&(n=t);for(s in n)l=!d&&m&&void 0!==m[s],f=(l?m:n)[s],p=y&&l?u(f,r):g&&"function"==typeof f?u(Function.call,f):f,m&&a(m,s,f,e&c.U),b[s]!=f&&i(b,s,p),g&&D[s]!=f&&(D[s]=f)};r.core=o,c.F=1,c.G=2,c.S=4,c.P=8,c.B=16,c.W=32,c.U=64,c.R=128,e.exports=c},function(e,t,n){var r=n(16),o=n(21);e.exports=n(3)?function(e,t,n){return r.f(e,t,o(1,n))}:function(e,t,n){return e[t]=n,e}},function(e,t){var n=0,r=Math.random();e.exports=function(e){return"Symbol(".concat(void 0===e?"":e,")_",(++n+r).toString(36))}},function(e,t,n){var r=n(24);e.exports=function(e,t,n){if(r(e),void 0===t)return e;switch(n){case 1:return function(n){return e.call(t,n)};case 2:return function(n,r){return e.call(t,n,r)};case 3:return function(n,r,o){return e.call(t,n,r,o)}}return function(){return e.apply(t,arguments)}}},function(e,t){e.exports=function(e){if(void 0==e)throw TypeError("Can't call method on  "+e);return e}},function(e,t,n){var r=n(28),o=Math.min;e.exports=function(e){return e>0?o(r(e),9007199254740991):0}},function(e,t,n){"use strict";t.__esModule=!0,t.default=function(e,t){if(e&&t){var n=Array.isArray(t)?t:t.split(","),r=e.name||"",o=e.type||"",i=o.replace(/\/.*$/,"");return n.some(function(e){var t=e.trim();return"."===t.charAt(0)?r.toLowerCase().endsWith(t.toLowerCase()):t.endsWith("/*")?i===t.replace(/\/.*$/,""):o===t})}return!0},n(14),n(34)},function(e,t,n){n(15),e.exports=n(2).Array.some},function(e,t,n){"use strict";var r=n(7),o=n(25)(3);r(r.P+r.F*!n(33)([].some,!0),"Array",{some:function(e){return o(this,e,arguments[1])}})},function(e,t,n){var r=n(17),o=n(18),i=n(20),a=Object.defineProperty;t.f=n(3)?Object.defineProperty:function(e,t,n){if(r(e),t=i(t,!0),r(n),o)try{return a(e,t,n)}catch(e){}if("get"in n||"set"in n)throw TypeError("Accessors not supported!");return"value"in n&&(e[t]=n.value),e}},function(e,t,n){var r=n(1);e.exports=function(e){if(!r(e))throw TypeError(e+" is not an object!");return e}},function(e,t,n){e.exports=!n(3)&&!n(4)(function(){return 7!=Object.defineProperty(n(19)("div"),"a",{get:function(){return 7}}).a})},function(e,t,n){var r=n(1),o=n(0).document,i=r(o)&&r(o.createElement);e.exports=function(e){return i?o.createElement(e):{}}},function(e,t,n){var r=n(1);e.exports=function(e,t){if(!r(e))return e;var n,o;if(t&&"function"==typeof(n=e.toString)&&!r(o=n.call(e)))return o;if("function"==typeof(n=e.valueOf)&&!r(o=n.call(e)))return o;if(!t&&"function"==typeof(n=e.toString)&&!r(o=n.call(e)))return o;throw TypeError("Can't convert object to primitive value")}},function(e,t){e.exports=function(e,t){return{enumerable:!(1&e),configurable:!(2&e),writable:!(4&e),value:t}}},function(e,t,n){var r=n(0),o=n(8),i=n(23),a=n(9)("src"),u=Function.toString,c=(""+u).split("toString");n(2).inspectSource=function(e){return u.call(e)},(e.exports=function(e,t,n,u){var s="function"==typeof n;s&&(i(n,"name")||o(n,"name",t)),e[t]!==n&&(s&&(i(n,a)||o(n,a,e[t]?""+e[t]:c.join(String(t)))),e===r?e[t]=n:u?e[t]?e[t]=n:o(e,t,n):(delete e[t],o(e,t,n)))})(Function.prototype,"toString",function(){return"function"==typeof this&&this[a]||u.call(this)})},function(e,t){var n={}.hasOwnProperty;e.exports=function(e,t){return n.call(e,t)}},function(e,t){e.exports=function(e){if("function"!=typeof e)throw TypeError(e+" is not a function!");return e}},function(e,t,n){var r=n(10),o=n(26),i=n(27),a=n(12),u=n(29);e.exports=function(e,t){var n=1==e,c=2==e,s=3==e,l=4==e,f=6==e,p=5==e||f,d=t||u;return function(t,u,v){for(var h,g,y=i(t),m=o(y),b=r(u,v,3),D=a(m.length),x=0,O=n?d(t,D):c?d(t,0):void 0;D>x;x++)if((p||x in m)&&(h=m[x],g=b(h,x,y),e))if(n)O[x]=g;else if(g)switch(e){case 3:return!0;case 5:return h;case 6:return x;case 2:O.push(h)}else if(l)return!1;return f?-1:s||l?l:O}}},function(e,t,n){var r=n(5);e.exports=Object("z").propertyIsEnumerable(0)?Object:function(e){return"String"==r(e)?e.split(""):Object(e)}},function(e,t,n){var r=n(11);e.exports=function(e){return Object(r(e))}},function(e,t){var n=Math.ceil,r=Math.floor;e.exports=function(e){return isNaN(e=+e)?0:(e>0?r:n)(e)}},function(e,t,n){var r=n(30);e.exports=function(e,t){return new(r(e))(t)}},function(e,t,n){var r=n(1),o=n(31),i=n(6)("species");e.exports=function(e){var t;return o(e)&&(t=e.constructor,"function"!=typeof t||t!==Array&&!o(t.prototype)||(t=void 0),r(t)&&null===(t=t[i])&&(t=void 0)),void 0===t?Array:t}},function(e,t,n){var r=n(5);e.exports=Array.isArray||function(e){return"Array"==r(e)}},function(e,t,n){var r=n(0),o=r["__core-js_shared__"]||(r["__core-js_shared__"]={});e.exports=function(e){return o[e]||(o[e]={})}},function(e,t,n){"use strict";var r=n(4);e.exports=function(e,t){return!!e&&r(function(){t?e.call(null,function(){},1):e.call(null)})}},function(e,t,n){n(35),e.exports=n(2).String.endsWith},function(e,t,n){"use strict";var r=n(7),o=n(12),i=n(36),a="".endsWith;r(r.P+r.F*n(38)("endsWith"),"String",{endsWith:function(e){var t=i(this,e,"endsWith"),n=arguments.length>1?arguments[1]:void 0,r=o(t.length),u=void 0===n?r:Math.min(o(n),r),c=String(e);return a?a.call(t,c,u):t.slice(u-c.length,u)===c}})},function(e,t,n){var r=n(37),o=n(11);e.exports=function(e,t,n){if(r(t))throw TypeError("String#"+n+" doesn't accept regex!");return String(o(e))}},function(e,t,n){var r=n(1),o=n(5),i=n(6)("match");e.exports=function(e){var t;return r(e)&&(void 0!==(t=e[i])?!!t:"RegExp"==o(e))}},function(e,t,n){var r=n(6)("match");e.exports=function(e){var t=/./;try{"/./"[e](t)}catch(n){try{return t[r]=!1,!"/./"[e](t)}catch(e){}}return!0}}])},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={rejected:{borderStyle:"solid",borderColor:"#c66",backgroundColor:"#eee"},disabled:{opacity:.5},active:{borderStyle:"solid",borderColor:"#6c6",backgroundColor:"#eee"},default:{width:200,height:200,borderWidth:2,borderColor:"#666",borderStyle:"dashed",borderRadius:5}},e.exports=t.default}])},void(module.exports=t(__webpack_require__(0),__webpack_require__(6134))));var t},6134:function(module,exports,__webpack_require__){false;module.exports=__webpack_require__(6135)()},6135:function(module,exports,__webpack_require__){"use strict";var ReactPropTypesSecret=__webpack_require__(6136);function emptyFunction(){}module.exports=function(){function shim(props,propName,componentName,location,propFullName,secret){if(secret===ReactPropTypesSecret)return;var err=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");err.name="Invariant Violation";throw err}shim.isRequired=shim;function getShim(){return shim}var ReactPropTypes={array:shim,bool:shim,func:shim,number:shim,object:shim,string:shim,symbol:shim,any:shim,arrayOf:getShim,element:shim,instanceOf:getShim,node:shim,objectOf:getShim,oneOf:getShim,oneOfType:getShim,shape:getShim,exact:getShim};ReactPropTypes.checkPropTypes=emptyFunction;ReactPropTypes.PropTypes=ReactPropTypes;return ReactPropTypes}},6136:function(module,exports,__webpack_require__){"use strict";var ReactPropTypesSecret="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED";module.exports=ReactPropTypesSecret},6137:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.WorkpadCreate=void 0;var _extends=Object.assign||function(target){for(var i=1;i<arguments.length;i++){var source=arguments[i];for(var key in source)Object.prototype.hasOwnProperty.call(source,key)&&(target[key]=source[key])}return target};var _react=__webpack_require__(0);var _react2=_interopRequireDefault(_react);var _propTypes=__webpack_require__(4);var _propTypes2=_interopRequireDefault(_propTypes);var _eui=__webpack_require__(2);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _objectWithoutProperties(obj,keys){var target={};for(var i in obj){if(keys.indexOf(i)>=0)continue;if(!Object.prototype.hasOwnProperty.call(obj,i))continue;target[i]=obj[i]}return target}var WorkpadCreate=function WorkpadCreate(_ref){var createPending=_ref.createPending,onCreate=_ref.onCreate,rest=_objectWithoutProperties(_ref,["createPending","onCreate"]);return _react2.default.createElement(_eui.EuiButton,_extends({},rest,{iconType:"plusInCircle",size:"s",fill:true,onClick:onCreate,isLoading:createPending}),"Create workpad")};exports.WorkpadCreate=WorkpadCreate;WorkpadCreate.propTypes={onCreate:_propTypes2.default.func.isRequired,createPending:_propTypes2.default.bool}},6138:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.WorkpadSearch=void 0;var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;"value"in descriptor&&(descriptor.writable=true);Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){protoProps&&defineProperties(Constructor.prototype,protoProps);staticProps&&defineProperties(Constructor,staticProps);return Constructor}}();var _react=__webpack_require__(0);var _react2=_interopRequireDefault(_react);var _propTypes=__webpack_require__(4);var _propTypes2=_interopRequireDefault(_propTypes);var _eui=__webpack_require__(2);var _lodash=__webpack_require__(1);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(self,call){if(!self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!call||"object"!==typeof call&&"function"!==typeof call?self:call}function _inherits(subClass,superClass){if("function"!==typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function, not "+typeof superClass);subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:false,writable:true,configurable:true}});superClass&&(Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass)}var WorkpadSearch=exports.WorkpadSearch=function(_React$PureComponent){_inherits(WorkpadSearch,_React$PureComponent);function WorkpadSearch(){var _ref;var _temp,_this,_ret;_classCallCheck(this,WorkpadSearch);for(var _len=arguments.length,args=Array(_len),_key=0;_key<_len;_key++)args[_key]=arguments[_key];return _ret=(_temp=(_this=_possibleConstructorReturn(this,(_ref=WorkpadSearch.__proto__||Object.getPrototypeOf(WorkpadSearch)).call.apply(_ref,[this].concat(args))),_this),_this.state={searchText:_this.props.initialText||""},_this.triggerChange=(0,_lodash.debounce)(_this.props.onChange,150),_this.setSearchText=function(ev){var text=ev.target.value;_this.setState({searchText:text});_this.triggerChange(text)},_temp),_possibleConstructorReturn(_this,_ret)}_createClass(WorkpadSearch,[{key:"render",value:function render(){return _react2.default.createElement(_eui.EuiFieldSearch,{compressed:true,placeholder:"Find workpad",value:this.state.searchText,onChange:this.setSearchText,fullWidth:true,incremental:true})}}]);return WorkpadSearch}(_react2.default.PureComponent);WorkpadSearch.propTypes={onChange:_propTypes2.default.func.isRequired,initialText:_propTypes2.default.string}},6139:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.WorkpadUpload=void 0;var _extends=Object.assign||function(target){for(var i=1;i<arguments.length;i++){var source=arguments[i];for(var key in source)Object.prototype.hasOwnProperty.call(source,key)&&(target[key]=source[key])}return target};var _slicedToArray=function(){function sliceIterator(arr,i){var _arr=[];var _n=true;var _d=false;var _e=void 0;try{for(var _s,_i=arr[Symbol.iterator]();!(_n=(_s=_i.next()).done);_n=true){_arr.push(_s.value);if(i&&_arr.length===i)break}}catch(err){_d=true;_e=err}finally{try{!_n&&_i["return"]&&_i["return"]()}finally{if(_d)throw _e}}return _arr}return function(arr,i){if(Array.isArray(arr))return arr;if(Symbol.iterator in Object(arr))return sliceIterator(arr,i);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}();var _react=__webpack_require__(0);var _react2=_interopRequireDefault(_react);var _propTypes=__webpack_require__(4);var _propTypes2=_interopRequireDefault(_propTypes);var _eui=__webpack_require__(2);var _upload_workpad=__webpack_require__(2078);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _objectWithoutProperties(obj,keys){var target={};for(var i in obj){if(keys.indexOf(i)>=0)continue;if(!Object.prototype.hasOwnProperty.call(obj,i))continue;target[i]=obj[i]}return target}var WorkpadUpload=function WorkpadUpload(_ref){var onUpload=_ref.onUpload,rest=_objectWithoutProperties(_ref,["onUpload"]);return _react2.default.createElement(_eui.EuiFilePicker,_extends({},rest,{compressed:true,initialPromptText:"Import workpad JSON file",onChange:function onChange(_ref2){var _ref3=_slicedToArray(_ref2,1),file=_ref3[0];return(0,_upload_workpad.uploadWorkpad)(file,onUpload)}}))};exports.WorkpadUpload=WorkpadUpload;WorkpadUpload.propTypes={onUpload:_propTypes2.default.func.isRequired}},6140:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var _routes=__webpack_require__(6141);Object.defineProperty(exports,"routes",{enumerable:true,get:function get(){return _routes.routes}});var _workpad_app=__webpack_require__(2080);Object.defineProperty(exports,"WorkpadApp",{enumerable:true,get:function get(){return _workpad_app.WorkpadApp}})},6141:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.routes=void 0;var _workpad_service=__webpack_require__(632);var workpadService=_interopRequireWildcard(_workpad_service);var _notify=__webpack_require__(293);var _defaults=__webpack_require__(804);var _workpad2=__webpack_require__(233);var _assets=__webpack_require__(442);var _pages=__webpack_require__(441);var _workpad3=__webpack_require__(54);var _transient=__webpack_require__(345);var _workpad_app=__webpack_require__(2080);function _interopRequireWildcard(obj){if(obj&&obj.__esModule)return obj;var newObj={};if(null!=obj)for(var key in obj)Object.prototype.hasOwnProperty.call(obj,key)&&(newObj[key]=obj[key]);newObj.default=obj;return newObj}function _objectWithoutProperties(obj,keys){var target={};for(var i in obj){if(keys.indexOf(i)>=0)continue;if(!Object.prototype.hasOwnProperty.call(obj,i))continue;target[i]=obj[i]}return target}function _asyncToGenerator(fn){return function(){var gen=fn.apply(this,arguments);return new Promise(function(resolve,reject){function step(key,arg){try{var info=gen[key](arg);var value=info.value}catch(error){reject(error);return}if(!info.done)return Promise.resolve(value).then(function(value){step("next",value)},function(err){step("throw",err)});resolve(value)}return step("next")})}}var routes=[{path:"/workpad",children:[{name:"createWorkpad",path:"/create",action:function action(dispatch){return _ref2=_asyncToGenerator(regeneratorRuntime.mark(function _callee(_ref){var router=_ref.router;var newWorkpad;return regeneratorRuntime.wrap(function _callee$(_context){while(1)switch(_context.prev=_context.next){case 0:newWorkpad=(0,_defaults.getDefaultWorkpad)();_context.prev=1;_context.next=4;return workpadService.create(newWorkpad);case 4:dispatch((0,_workpad2.setWorkpad)(newWorkpad));dispatch((0,_assets.resetAssets)());router.redirectTo("loadWorkpad",{id:newWorkpad.id,page:1});_context.next=14;break;case 9:_context.prev=9;_context.t0=_context["catch"](1);_notify.notify.error(_context.t0,{title:"Couldn't create workpad"});403===_context.t0.response.status&&dispatch((0,_transient.setCanUserWrite)(false));router.redirectTo("home");case 14:case"end":return _context.stop()}},_callee,void 0,[[1,9]])})),function(_x){return _ref2.apply(this,arguments)};var _ref2},meta:{component:_workpad_app.WorkpadApp}},{name:"loadWorkpad",path:"/:id(/page/:page)",action:function action(dispatch,getState){return _ref4=_asyncToGenerator(regeneratorRuntime.mark(function _callee2(_ref3){var params=_ref3.params,router=_ref3.router;var currentWorkpad,fetchedWorkpad,assets,_workpad,workpad,pageNumber,pageIndex;return regeneratorRuntime.wrap(function _callee2$(_context2){while(1)switch(_context2.prev=_context2.next){case 0:currentWorkpad=(0,_workpad3.getWorkpad)(getState());if(!(params.id!==currentWorkpad.id)){_context2.next=16;break}_context2.prev=2;_context2.next=5;return workpadService.get(params.id);case 5:fetchedWorkpad=_context2.sent;assets=fetchedWorkpad.assets,_workpad=_objectWithoutProperties(fetchedWorkpad,["assets"]);dispatch((0,_workpad2.setWorkpad)(_workpad));dispatch((0,_assets.setAssets)(assets));workpadService.update(params.id,fetchedWorkpad).catch(function(err){403===err.response.status&&dispatch((0,_transient.setCanUserWrite)(false))});_context2.next=16;break;case 12:_context2.prev=12;_context2.t0=_context2["catch"](2);_notify.notify.error(_context2.t0,{title:"Couldn't load workpad with ID"});return _context2.abrupt("return",router.redirectTo("home"));case 16:workpad=(0,_workpad3.getWorkpad)(getState());pageNumber=parseInt(params.page,10);if(!isNaN(pageNumber)){_context2.next=20;break}return _context2.abrupt("return",router.redirectTo("loadWorkpad",{id:workpad.id,page:workpad.page+1}));case 20:pageIndex=pageNumber-1;pageIndex!==workpad.page&&dispatch((0,_pages.gotoPage)(pageIndex));case 22:case"end":return _context2.stop()}},_callee2,void 0,[[2,12]])})),function(_x2){return _ref4.apply(this,arguments)};var _ref4},meta:{component:_workpad_app.WorkpadApp}}]}];exports.routes=routes},6142:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.LoadWorkpad=void 0;var _react=__webpack_require__(0);var _react2=_interopRequireDefault(_react);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}exports.LoadWorkpad=function LoadWorkpad(){return _react2.default.createElement("div",null,"Load a workpad...")}},6143:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.WorkpadApp=void 0;var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;"value"in descriptor&&(descriptor.writable=true);Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){protoProps&&defineProperties(Constructor.prototype,protoProps);staticProps&&defineProperties(Constructor,staticProps);return Constructor}}();var _react=__webpack_require__(0);var _react2=_interopRequireDefault(_react);var _propTypes=__webpack_require__(4);var _propTypes2=_interopRequireDefault(_propTypes);var _sidebar=__webpack_require__(6144);var _toolbar=__webpack_require__(6188);var _workpad=__webpack_require__(6225);var _workpad_header=__webpack_require__(6294);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(self,call){if(!self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!call||"object"!==typeof call&&"function"!==typeof call?self:call}function _inherits(subClass,superClass){if("function"!==typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function, not "+typeof superClass);subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:false,writable:true,configurable:true}});superClass&&(Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass)}var WorkpadApp=exports.WorkpadApp=function(_React$PureComponent){_inherits(WorkpadApp,_React$PureComponent);function WorkpadApp(){_classCallCheck(this,WorkpadApp);return _possibleConstructorReturn(this,(WorkpadApp.__proto__||Object.getPrototypeOf(WorkpadApp)).apply(this,arguments))}_createClass(WorkpadApp,[{key:"componentDidMount",value:function componentDidMount(){this.props.initializeWorkpad()}},{key:"render",value:function render(){var _props=this.props,isWriteable=_props.isWriteable,deselectElement=_props.deselectElement;return _react2.default.createElement("div",{className:"canvasLayout"},_react2.default.createElement("div",{className:"canvasLayout__rows"},_react2.default.createElement("div",{className:"canvasLayout__cols"},_react2.default.createElement("div",{className:"canvasLayout__stage"},_react2.default.createElement("div",{className:"canvasLayout__stageHeader"},_react2.default.createElement(_workpad_header.WorkpadHeader,null)),_react2.default.createElement("div",{className:"canvasLayout__stageContent",onMouseDown:deselectElement},_react2.default.createElement("div",{className:"canvasWorkpadContainer canvasLayout__stageContentOverflow"},_react2.default.createElement(_workpad.Workpad,null)))),isWriteable&&_react2.default.createElement("div",{className:"canvasLayout__sidebar hide-for-sharing"},_react2.default.createElement(_sidebar.Sidebar,null))),_react2.default.createElement("div",{className:"canvasLayout__footer hide-for-sharing"},_react2.default.createElement(_toolbar.Toolbar,null))))}}]);return WorkpadApp}(_react2.default.PureComponent);WorkpadApp.propTypes={isWriteable:_propTypes2.default.bool.isRequired,deselectElement:_propTypes2.default.func,initializeWorkpad:_propTypes2.default.func.isRequired}},6144:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.Sidebar=void 0;var _extends=Object.assign||function(target){for(var i=1;i<arguments.length;i++){var source=arguments[i];for(var key in source)Object.prototype.hasOwnProperty.call(source,key)&&(target[key]=source[key])}return target};var _reactRedux=__webpack_require__(19);var _elements=__webpack_require__(109);var _workpad=__webpack_require__(54);var _sidebar=__webpack_require__(6145);var mapStateToProps=function mapStateToProps(state){return{selectedPage:(0,_workpad.getSelectedPage)(state),selectedElement:(0,_workpad.getSelectedElement)(state)}};var mapDispatchToProps=function mapDispatchToProps(dispatch){return{duplicateElement:function duplicateElement(pageId,selectedElement){return function(){return dispatch((0,_elements.duplicateElement)(selectedElement,pageId))}},elementLayer:function elementLayer(pageId,selectedElement){return function(movement){return dispatch((0,_elements.elementLayer)({pageId:pageId,elementId:selectedElement.id,movement:movement}))}}}};var mergeProps=function mergeProps(stateProps,dispatchProps,ownProps){var selectedElement=stateProps.selectedElement,selectedPage=stateProps.selectedPage;return _extends({},stateProps,dispatchProps,ownProps,{elementIsSelected:Boolean(selectedElement),duplicateElement:dispatchProps.duplicateElement(selectedPage,selectedElement),elementLayer:dispatchProps.elementLayer(selectedPage,selectedElement)})};exports.Sidebar=(0,_reactRedux.connect)(mapStateToProps,mapDispatchToProps,mergeProps)(_sidebar.Sidebar)},6145:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.Sidebar=void 0;var _recompose=__webpack_require__(24);var _sidebar_component=__webpack_require__(6146);var _global_config=__webpack_require__(6170);var branches=[(0,_recompose.branch)(function(props){return!props.selectedElement},(0,_recompose.renderComponent)(_global_config.GlobalConfig))];exports.Sidebar=_recompose.compose.apply(void 0,branches)(_sidebar_component.SidebarComponent)},6146:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.SidebarComponent=void 0;var _react=__webpack_require__(0);var _react2=_interopRequireDefault(_react);var _propTypes=__webpack_require__(4);var _propTypes2=_interopRequireDefault(_propTypes);var _eui=__webpack_require__(2);var _datasource=__webpack_require__(6147);var _function_form_list=__webpack_require__(6161);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var SidebarComponent=exports.SidebarComponent=function SidebarComponent(_ref){var selectedElement=_ref.selectedElement,duplicateElement=_ref.duplicateElement,elementLayer=_ref.elementLayer,elementIsSelected=_ref.elementIsSelected;var tabs=[{id:"edit",name:"Display",content:_react2.default.createElement("div",{className:"canvasSidebar__pop"},_react2.default.createElement(_eui.EuiSpacer,{size:"s"}),_react2.default.createElement("div",{className:"canvasSidebar--args"},_react2.default.createElement(_function_form_list.FunctionFormList,{element:selectedElement})))},{id:"data",name:"Data",content:_react2.default.createElement("div",{className:"canvasSidebar__pop"},_react2.default.createElement(_eui.EuiSpacer,{size:"s"}),_react2.default.createElement(_datasource.Datasource,null))}];return _react2.default.createElement("div",{className:"canvasSidebar"},elementIsSelected&&_react2.default.createElement("div",null,_react2.default.createElement(_eui.EuiFlexGroup,{gutterSize:"none",alignItems:"center",justifyContent:"spaceBetween"},_react2.default.createElement(_eui.EuiFlexItem,{grow:false},_react2.default.createElement(_eui.EuiTitle,{size:"s"},_react2.default.createElement("h3",null,"Selected layer"))),_react2.default.createElement(_eui.EuiFlexItem,{grow:false},_react2.default.createElement(_eui.EuiFlexGroup,{alignItems:"center",gutterSize:"none"},_react2.default.createElement(_eui.EuiFlexItem,{grow:false},_react2.default.createElement(_eui.EuiFlexGroup,{alignItems:"center",gutterSize:"none"},_react2.default.createElement(_eui.EuiFlexItem,{grow:false},_react2.default.createElement(_eui.EuiToolTip,{position:"bottom",content:"Move element to top layer"},_react2.default.createElement(_eui.EuiButtonIcon,{color:"text",iconType:"sortUp",onClick:function onClick(){return elementLayer(Infinity)},"aria-label":"Move element to top layer"}))),_react2.default.createElement(_eui.EuiFlexItem,{grow:false},_react2.default.createElement(_eui.EuiToolTip,{position:"bottom",content:"Move element up one layer"},_react2.default.createElement(_eui.EuiButtonIcon,{color:"text",iconType:"arrowUp",onClick:function onClick(){return elementLayer(1)},"aria-label":"Move element up one layer"}))),_react2.default.createElement(_eui.EuiFlexItem,{grow:false},_react2.default.createElement(_eui.EuiToolTip,{position:"bottom",content:"Move element down one layer"},_react2.default.createElement(_eui.EuiButtonIcon,{color:"text",iconType:"arrowDown",onClick:function onClick(){return elementLayer(-1)},"aria-label":"Move element down one layer"}))),_react2.default.createElement(_eui.EuiFlexItem,{grow:false},_react2.default.createElement(_eui.EuiToolTip,{position:"bottom",content:"Move element to bottom layer"},_react2.default.createElement(_eui.EuiButtonIcon,{color:"text",iconType:"sortDown",onClick:function onClick(){return elementLayer(-Infinity)},"aria-label":"Move element to bottom layer"}))),_react2.default.createElement(_eui.EuiFlexItem,{grow:false},_react2.default.createElement(_eui.EuiToolTip,{position:"bottom",content:"Duplicate this element into a new layer"},_react2.default.createElement(_eui.EuiButtonIcon,{color:"text",iconType:"copy",onClick:function onClick(){return duplicateElement()},"aria-label":"Duplicate this element into a new layer"})))))))),_react2.default.createElement(_eui.EuiTabbedContent,{tabs:tabs,initialSelectedTab:tabs[0]})))};SidebarComponent.propTypes={selectedElement:_propTypes2.default.object,duplicateElement:_propTypes2.default.func.isRequired,elementLayer:_propTypes2.default.func,elementIsSelected:_propTypes2.default.bool.isRequired}},6147:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.Datasource=void 0;var _extends=Object.assign||function(target){for(var i=1;i<arguments.length;i++){var source=arguments[i];for(var key in source)Object.prototype.hasOwnProperty.call(source,key)&&(target[key]=source[key])}return target};var _propTypes=__webpack_require__(4);var _reactRedux=__webpack_require__(19);var _recompose=__webpack_require__(24);var _lodash=__webpack_require__(1);var _expression_types=__webpack_require__(809);var _app=__webpack_require__(119);var _workpad=__webpack_require__(54);var _elements=__webpack_require__(109);var _datasource=__webpack_require__(6148);var mapStateToProps=function mapStateToProps(state){return{element:(0,_workpad.getSelectedElement)(state),pageId:(0,_workpad.getSelectedPage)(state),functionDefinitions:(0,_app.getServerFunctions)(state)}};var mapDispatchToProps=function mapDispatchToProps(dispatch){return{dispatchArgumentAtIndex:function dispatchArgumentAtIndex(props){return function(arg){return dispatch((0,_elements.setArgumentAtIndex)(_extends({},props,{arg:arg})))}},dispatchAstAtIndex:function dispatchAstAtIndex(_ref){var index=_ref.index,element=_ref.element,pageId=_ref.pageId;return function(ast){dispatch((0,_elements.flushContext)(element.id));dispatch((0,_elements.setAstAtIndex)(index,ast,element,pageId))}}}};var mergeProps=function mergeProps(stateProps,dispatchProps,ownProps){var element=stateProps.element,pageId=stateProps.pageId,functionDefinitions=stateProps.functionDefinitions;var dispatchArgumentAtIndex=dispatchProps.dispatchArgumentAtIndex,dispatchAstAtIndex=dispatchProps.dispatchAstAtIndex;var getDataTableFunctionsByName=function getDataTableFunctionsByName(name){return functionDefinitions.find(function(fn){return fn.name===name&&"datatable"===fn.type})};var datasourceAst=(0,_lodash.get)(element,"ast.chain",[]).map(function(astDef,i){if("function"!==astDef.type)return;var args=astDef.arguments;var datasource=_expression_types.datasourceRegistry.get(astDef.function);if(!datasource)return;var datasourceDef=getDataTableFunctionsByName(datasource.name);return{datasource:datasource,datasourceDef:datasourceDef,args:args,expressionIndex:i}}).filter(Boolean)[0];return _extends({},ownProps,stateProps,dispatchProps,datasourceAst,{datasources:_expression_types.datasourceRegistry.toArray(),setDatasourceAst:dispatchAstAtIndex({pageId:pageId,element:element,index:datasourceAst&&datasourceAst.expressionIndex}),setDatasourceArgs:dispatchArgumentAtIndex({pageId:pageId,element:element,index:datasourceAst&&datasourceAst.expressionIndex})})};var Datasource=exports.Datasource=(0,_recompose.compose)((0,_reactRedux.connect)(mapStateToProps,mapDispatchToProps,mergeProps),(0,_recompose.withState)("stateArgs","updateArgs",function(_ref2){var args=_ref2.args;return args}),(0,_recompose.withState)("selecting","setSelecting",false),(0,_recompose.withState)("previewing","setPreviewing",false),(0,_recompose.withState)("isInvalid","setInvalid",false),(0,_recompose.withState)("stateDatasource","selectDatasource",function(_ref3){var datasource=_ref3.datasource;return datasource}),(0,_recompose.withHandlers)({resetArgs:function resetArgs(_ref4){var updateArgs=_ref4.updateArgs,args=_ref4.args;return function(){return updateArgs(args)}}}))(_datasource.Datasource);Datasource.propTypes={done:_propTypes.PropTypes.func}},6148:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.Datasource=void 0;var _recompose=__webpack_require__(24);var _propTypes=__webpack_require__(4);var _propTypes2=_interopRequireDefault(_propTypes);var _no_datasource=__webpack_require__(6149);var _datasource_component=__webpack_require__(6150);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var branches=[(0,_recompose.branch)(function(_ref){var datasource=_ref.datasource,stateDatasource=_ref.stateDatasource;return!datasource||!stateDatasource},(0,_recompose.renderComponent)(_no_datasource.NoDatasource))];var Datasource=exports.Datasource=_recompose.compose.apply(void 0,branches)(_datasource_component.DatasourceComponent);Datasource.propTypes={args:_propTypes2.default.object,datasource:_propTypes2.default.object,unknownArgs:_propTypes2.default.array}},6149:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.NoDatasource=void 0;var _react=__webpack_require__(0);var _react2=_interopRequireDefault(_react);var _propTypes=__webpack_require__(4);var _propTypes2=_interopRequireDefault(_propTypes);var _eui=__webpack_require__(2);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var NoDatasource=exports.NoDatasource=function NoDatasource(){return _react2.default.createElement(_eui.EuiPanel,null,_react2.default.createElement(_eui.EuiText,null,_react2.default.createElement("h4",null,"No data source present"),_react2.default.createElement("p",null,"This element does not have an attached data source. This is usually because the element is an image or other static asset. If that's not the case you might want to check your expression to make sure it is not malformed.")))};NoDatasource.propTypes={done:_propTypes2.default.func}},6150:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.DatasourceComponent=void 0;var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;"value"in descriptor&&(descriptor.writable=true);Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){protoProps&&defineProperties(Constructor.prototype,protoProps);staticProps&&defineProperties(Constructor,staticProps);return Constructor}}();var _react=__webpack_require__(0);var _react2=_interopRequireDefault(_react);var _propTypes=__webpack_require__(4);var _propTypes2=_interopRequireDefault(_propTypes);var _eui=__webpack_require__(2);var _lodash=__webpack_require__(1);var _datasource_selector=__webpack_require__(6151);var _datasource_preview=__webpack_require__(6152);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(self,call){if(!self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!call||"object"!==typeof call&&"function"!==typeof call?self:call}function _inherits(subClass,superClass){if("function"!==typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function, not "+typeof superClass);subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:false,writable:true,configurable:true}});superClass&&(Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass)}var DatasourceComponent=exports.DatasourceComponent=function(_PureComponent){_inherits(DatasourceComponent,_PureComponent);function DatasourceComponent(){var _ref;var _temp,_this,_ret;_classCallCheck(this,DatasourceComponent);for(var _len=arguments.length,args=Array(_len),_key=0;_key<_len;_key++)args[_key]=arguments[_key];return _ret=(_temp=(_this=_possibleConstructorReturn(this,(_ref=DatasourceComponent.__proto__||Object.getPrototypeOf(DatasourceComponent)).call.apply(_ref,[this].concat(args))),_this),_initialiseProps.call(_this),_temp),_possibleConstructorReturn(_this,_ret)}_createClass(DatasourceComponent,[{key:"componentDidUpdate",value:function componentDidUpdate(prevProps){var _props=this.props,args=_props.args,resetArgs=_props.resetArgs,datasource=_props.datasource,selectDatasource=_props.selectDatasource;(0,_lodash.isEqual)(prevProps.args,args)||resetArgs();(0,_lodash.isEqual)(prevProps.datasource,datasource)||selectDatasource(datasource)}},{key:"render",value:function render(){var _props2=this.props,datasources=_props2.datasources,datasourceDef=_props2.datasourceDef,stateDatasource=_props2.stateDatasource,stateArgs=_props2.stateArgs,updateArgs=_props2.updateArgs,selecting=_props2.selecting,setSelecting=_props2.setSelecting,previewing=_props2.previewing,setPreviewing=_props2.setPreviewing,isInvalid=_props2.isInvalid,setInvalid=_props2.setInvalid;if(selecting)return _react2.default.createElement(_datasource_selector.DatasourceSelector,{datasources:datasources,onSelect:this.setSelectedDatasource});var datasourcePreview=previewing?_react2.default.createElement(_datasource_preview.DatasourcePreview,{show:previewing,done:function done(){return setPreviewing(false)},function:this.getDatasourceFunctionNode(stateDatasource.name,stateArgs)}):null;return _react2.default.createElement(_react.Fragment,null,_react2.default.createElement(_eui.EuiPanel,null,_react2.default.createElement(_eui.EuiButtonEmpty,{iconSide:"right",flush:"left",iconType:"sortRight",onClick:function onClick(){return setSelecting(!selecting)}},"Change your data source"),_react2.default.createElement(_eui.EuiSpacer,{size:"s"}),stateDatasource.render({args:stateArgs,updateArgs:updateArgs,datasourceDef:datasourceDef,isInvalid:isInvalid,setInvalid:setInvalid}),_react2.default.createElement(_eui.EuiSpacer,{size:"m"}),_react2.default.createElement(_eui.EuiFlexGroup,{justifyContent:"flexEnd",gutterSize:"s"},_react2.default.createElement(_eui.EuiFlexItem,{grow:false},_react2.default.createElement(_eui.EuiButton,{size:"s",onClick:function onClick(){return setPreviewing(true)},icon:"check"},"Preview")),_react2.default.createElement(_eui.EuiFlexItem,{grow:false},_react2.default.createElement(_eui.EuiButton,{disabled:isInvalid,size:"s",color:"secondary",fill:true,onClick:this.save,icon:"check"},"Save")))),datasourcePreview)}}]);return DatasourceComponent}(_react.PureComponent);DatasourceComponent.propTypes={args:_propTypes2.default.object.isRequired,datasources:_propTypes2.default.array.isRequired,datasource:_propTypes2.default.object.isRequired,datasourceDef:_propTypes2.default.object.isRequired,stateDatasource:_propTypes2.default.shape({name:_propTypes2.default.string.isRequired,render:_propTypes2.default.func.isRequired}).isRequired,selectDatasource:_propTypes2.default.func,setDatasourceAst:_propTypes2.default.func,stateArgs:_propTypes2.default.object.isRequired,updateArgs:_propTypes2.default.func,resetArgs:_propTypes2.default.func.isRequired,selecting:_propTypes2.default.bool,setSelecting:_propTypes2.default.func,previewing:_propTypes2.default.bool,setPreviewing:_propTypes2.default.func,isInvalid:_propTypes2.default.bool,setInvalid:_propTypes2.default.func};var _initialiseProps=function _initialiseProps(){var _this2=this;this.getDatasourceFunctionNode=function(name,args){return{arguments:args,function:name,type:"function"}};this.setSelectedDatasource=function(value){var _props3=_this2.props,datasource=_props3.datasource,resetArgs=_props3.resetArgs,updateArgs=_props3.updateArgs,selectDatasource=_props3.selectDatasource,datasources=_props3.datasources,setSelecting=_props3.setSelecting;datasource.name===value?resetArgs&&resetArgs():updateArgs&&updateArgs({});selectDatasource&&selectDatasource(datasources.find(function(d){return d.name===value}));setSelecting(false)};this.save=function(){var _props4=_this2.props,stateDatasource=_props4.stateDatasource,stateArgs=_props4.stateArgs,setDatasourceAst=_props4.setDatasourceAst;var datasourceAst=_this2.getDatasourceFunctionNode(stateDatasource.name,stateArgs);setDatasourceAst&&setDatasourceAst(datasourceAst)}}},6151:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.DatasourceSelector=void 0;var _react=__webpack_require__(0);var _react2=_interopRequireDefault(_react);var _propTypes=__webpack_require__(4);var _propTypes2=_interopRequireDefault(_propTypes);var _eui=__webpack_require__(2);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var DatasourceSelector=exports.DatasourceSelector=function DatasourceSelector(_ref){var onSelect=_ref.onSelect,datasources=_ref.datasources;return _react2.default.createElement("div",null,datasources.map(function(d){return _react2.default.createElement(_eui.EuiCard,{key:d.name,title:d.displayName,icon:_react2.default.createElement(_eui.EuiIcon,{type:d.image,size:"xxl"}),onClick:function onClick(){return onSelect(d.name)},description:d.help,layout:"horizontal",className:"canvasDataSource__card"})}))};DatasourceSelector.propTypes={onSelect:_propTypes2.default.func.isRequired,datasources:_propTypes2.default.array.isRequired}},6152:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.DatasourcePreview=void 0;var _recompose=__webpack_require__(24);var _propTypes=__webpack_require__(4);var _loading=__webpack_require__(811);var _interpreter=__webpack_require__(526);var _datasource_preview=__webpack_require__(6153);var DatasourcePreview=exports.DatasourcePreview=(0,_recompose.compose)(_recompose.pure,(0,_recompose.withState)("datatable","setDatatable"),(0,_recompose.lifecycle)({componentDidMount:function componentDidMount(){(0,_interpreter.interpretAst)({type:"expression",chain:[this.props.function]}).then(this.props.setDatatable)}}),(0,_recompose.branch)(function(_ref){var datatable=_ref.datatable;return!datatable},(0,_recompose.renderComponent)(_loading.Loading)))(_datasource_preview.DatasourcePreview);DatasourcePreview.propTypes={function:_propTypes.PropTypes.object}},6153:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.DatasourcePreview=void 0;var _react=__webpack_require__(0);var _react2=_interopRequireDefault(_react);var _propTypes=__webpack_require__(4);var _propTypes2=_interopRequireDefault(_propTypes);var _eui=__webpack_require__(2);var _datatable=__webpack_require__(6154);var _error=__webpack_require__(6156);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var DatasourcePreview=exports.DatasourcePreview=function DatasourcePreview(_ref){var done=_ref.done,datatable=_ref.datatable;return _react2.default.createElement(_eui.EuiOverlayMask,null,_react2.default.createElement(_eui.EuiModal,{onClose:done,maxWidth:"1000px"},_react2.default.createElement(_eui.EuiModalHeader,null,_react2.default.createElement(_eui.EuiModalHeaderTitle,null,"Datasource Preview")),_react2.default.createElement(_eui.EuiModalBody,{className:"canvasDatasourcePreview"},_react2.default.createElement(_eui.EuiText,{size:"s",color:"subdued"},_react2.default.createElement("p",null,"Click ",_react2.default.createElement("strong",null,"Save")," in the sidebar to use this data.")),"error"===datatable.type?_react2.default.createElement(_error.Error,{payload:datatable}):_react2.default.createElement(_eui.EuiPanel,{className:"canvasDatasourcePreview__panel"},datatable.rows.length>0?_react2.default.createElement(_datatable.Datatable,{datatable:datatable,showHeader:true,paginate:true}):_react2.default.createElement(_eui.EuiEmptyPrompt,{title:_react2.default.createElement("h2",null,"No documents found"),titleSize:"s",body:_react2.default.createElement("p",null,"We couldn't find any documents matching your search criteria.",_react2.default.createElement("br",null)," Check your datasource settings and try again.")})))))};DatasourcePreview.propTypes={datatable:_propTypes2.default.object,done:_propTypes2.default.func}},6154:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.Datatable=void 0;var _recompose=__webpack_require__(24);var _datatable=__webpack_require__(6155);exports.Datatable=(0,_recompose.pure)(_datatable.Datatable)},6155:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.Datatable=void 0;var _react=__webpack_require__(0);var _react2=_interopRequireDefault(_react);var _eui=__webpack_require__(2);var _propTypes=__webpack_require__(4);var _propTypes2=_interopRequireDefault(_propTypes);var _moment=__webpack_require__(12);var _moment2=_interopRequireDefault(_moment);var _paginate=__webpack_require__(2077);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var getIcon=function getIcon(type){if(null===type)return;var icon=void 0;switch(type){case"string":icon="string";break;case"number":icon="number";break;case"date":icon="calendar";break;case"boolean":icon="invert";break;default:icon="questionInCircle"}return _react2.default.createElement(_eui.EuiIcon,{type:icon,color:"subdued"})};var getColumnName=function getColumnName(col){return"string"===typeof col?col:col.name};var getColumnType=function getColumnType(col){return col.type||null};var getFormattedValue=function getFormattedValue(val,type){if("date"===type)return(0,_moment2.default)(val).format();return String(val)};var Datatable=exports.Datatable=function Datatable(_ref){var datatable=_ref.datatable,perPage=_ref.perPage,paginate=_ref.paginate,showHeader=_ref.showHeader;return _react2.default.createElement(_paginate.Paginate,{rows:datatable.rows,perPage:perPage||10},function(_ref2){var rows=_ref2.rows,setPage=_ref2.setPage,pageNumber=_ref2.pageNumber,totalPages=_ref2.totalPages;return _react2.default.createElement("div",{className:"canvasDataTable"},_react2.default.createElement("div",{className:"canvasDataTable__tableWrapper"},_react2.default.createElement("table",{className:"canvasDataTable__table"},showHeader?_react2.default.createElement("thead",{className:"canvasDataTable__thead"},_react2.default.createElement("tr",{className:"canvasDataTable__tr"},datatable.columns.map(function(col){return _react2.default.createElement("th",{key:"header-"+getColumnName(col),className:"canvasDataTable__th"},getColumnName(col)," ",getIcon(getColumnType(col)))}))):null,_react2.default.createElement("tbody",{className:"canvasDataTable__tbody"},rows.map(function(row,i){return _react2.default.createElement("tr",{key:i,className:"canvasDataTable__tr"},datatable.columns.map(function(col){return _react2.default.createElement("td",{key:"row-"+i+"-"+getColumnName(col),className:"canvasDataTable__td"},getFormattedValue(row[getColumnName(col)],getColumnType(col)))}))})))),paginate&&_react2.default.createElement("div",{className:"canvasDataTable__footer"},_react2.default.createElement(_eui.EuiPagination,{pageCount:totalPages,activePage:pageNumber,onPageClick:setPage})))})};Datatable.propTypes={datatable:_propTypes2.default.object.isRequired,perPage:_propTypes2.default.number,paginate:_propTypes2.default.bool,showHeader:_propTypes2.default.bool}},6156:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var _error=__webpack_require__(6157);Object.defineProperty(exports,"Error",{enumerable:true,get:function get(){return _error.Error}})},6157:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.Error=void 0;var _react=__webpack_require__(0);var _react2=_interopRequireDefault(_react);var _propTypes=__webpack_require__(4);var _propTypes2=_interopRequireDefault(_propTypes);var _eui=__webpack_require__(2);var _lodash=__webpack_require__(1);var _show_debugging=__webpack_require__(6158);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var Error=exports.Error=function Error(_ref){var payload=_ref.payload;var message=(0,_lodash.get)(payload,"error.message");return _react2.default.createElement(_eui.EuiCallOut,{style:{maxWidth:500},color:"danger",iconType:"cross",title:"Whoops! Expression failed"},_react2.default.createElement("p",null,message?"Expression failed with the message:":""),message&&_react2.default.createElement("p",{style:{padding:"0 16px"}},message),_react2.default.createElement(_show_debugging.ShowDebugging,{payload:payload}))};Error.propTypes={payload:_propTypes2.default.object.isRequired}},6158:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.ShowDebugging=void 0;var _react=__webpack_require__(0);_interopRequireDefault(_react);var _propTypes=__webpack_require__(4);var _propTypes2=_interopRequireDefault(_propTypes);var _recompose=__webpack_require__(24);__webpack_require__(2);__webpack_require__(6159);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var ShowDebuggingComponent=function ShowDebuggingComponent(_ref){_ref.payload,_ref.expanded,_ref.setExpanded;return null};ShowDebuggingComponent.propTypes={expanded:_propTypes2.default.bool.isRequired,setExpanded:_propTypes2.default.func.isRequired,payload:_propTypes2.default.object.isRequired};exports.ShowDebugging=(0,_recompose.withState)("expanded","setExpanded",false)(ShowDebuggingComponent)},6159:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var _debug=__webpack_require__(6160);Object.defineProperty(exports,"Debug",{enumerable:true,get:function get(){return _debug.Debug}})},6160:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.Debug=void 0;var _react=__webpack_require__(0);var _react2=_interopRequireDefault(_react);var _propTypes=__webpack_require__(4);var _propTypes2=_interopRequireDefault(_propTypes);var _eui=__webpack_require__(2);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var Debug=exports.Debug=function Debug(_ref){var payload=_ref.payload;return _react2.default.createElement(_eui.EuiCode,{className:"canvasDebug"},_react2.default.createElement("pre",{className:"canvasDebug__content"},JSON.stringify(payload,null,2)))};Debug.propTypes={payload:_propTypes2.default.object.isRequired}},6161:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.FunctionFormList=void 0;var _recompose=__webpack_require__(24);var _lodash=__webpack_require__(1);var _expression_types=__webpack_require__(809);var _interpreter=__webpack_require__(526);var _ast=__webpack_require__(343);var _function_form_list=__webpack_require__(6162);function normalizeContext(chain){if(!Array.isArray(chain)||!chain.length)return null;return{type:"expression",chain:chain}}function getExpression(ast){return null!=ast&&"expression"===ast.type?(0,_ast.toExpression)(ast):ast}function getArgTypeDef(fn){return _expression_types.modelRegistry.get(fn)||_expression_types.viewRegistry.get(fn)||_expression_types.transformRegistry.get(fn)}var functionFormItems=(0,_recompose.withProps)(function(props){var selectedElement=props.element;var FunctionFormChain=(0,_lodash.get)(selectedElement,"ast.chain",[]);var FunctionFormListItems=FunctionFormChain.reduce(function(acc,argType,i){var argTypeDef=getArgTypeDef(argType.function);var prevContext=normalizeContext(acc.context);var nextArg=FunctionFormChain[i+1]||null;if(argTypeDef){var component={args:argType.arguments,argType:argType.function,argTypeDef:argTypeDef,argResolver:function argResolver(argAst){return(0,_interpreter.interpretAst)(argAst,prevContext)},contextExpression:getExpression(prevContext),expressionIndex:i,nextArgType:nextArg&&nextArg.function};acc.mapped.push(component)}acc.context=acc.context.concat(argType);return acc},{mapped:[],context:[]});return{functionFormItems:FunctionFormListItems.mapped}});exports.FunctionFormList=(0,_recompose.compose)(functionFormItems)(_function_form_list.FunctionFormList)},6162:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.FunctionFormList=void 0;var _extends=Object.assign||function(target){for(var i=1;i<arguments.length;i++){var source=arguments[i];for(var key in source)Object.prototype.hasOwnProperty.call(source,key)&&(target[key]=source[key])}return target};var _react=__webpack_require__(0);var _react2=_interopRequireDefault(_react);var _propTypes=__webpack_require__(4);var _propTypes2=_interopRequireDefault(_propTypes);var _function_form=__webpack_require__(6163);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var FunctionFormList=exports.FunctionFormList=function FunctionFormList(_ref){var functionFormItems=_ref.functionFormItems;var argTypeComponents=functionFormItems.map(function(functionFormProps){return _react2.default.createElement(_function_form.FunctionForm,_extends({},functionFormProps,{key:functionFormProps.argType+"-"+functionFormProps.expressionIndex}))});return _react2.default.createElement("div",null,argTypeComponents)};FunctionFormList.propTypes={functionFormItems:_propTypes2.default.array.isRequired}},6163:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.FunctionForm=void 0;var _extends=Object.assign||function(target){for(var i=1;i<arguments.length;i++){var source=arguments[i];for(var key in source)Object.prototype.hasOwnProperty.call(source,key)&&(target[key]=source[key])}return target};var _propTypes=__webpack_require__(4);var _propTypes2=_interopRequireDefault(_propTypes);var _reactRedux=__webpack_require__(19);var _find_expression_type=__webpack_require__(6164);var _get_id=__webpack_require__(525);var _assets=__webpack_require__(442);var _elements=__webpack_require__(109);var _workpad=__webpack_require__(54);var _assets2=__webpack_require__(524);var _function_form=__webpack_require__(6165);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _objectWithoutProperties(obj,keys){var target={};for(var i in obj){if(keys.indexOf(i)>=0)continue;if(!Object.prototype.hasOwnProperty.call(obj,i))continue;target[i]=obj[i]}return target}var mapStateToProps=function mapStateToProps(state,_ref){var expressionIndex=_ref.expressionIndex;return{context:(0,_workpad.getContextForIndex)(state,expressionIndex),element:(0,_workpad.getSelectedElement)(state),pageId:(0,_workpad.getSelectedPage)(state),assets:(0,_assets2.getAssets)(state)}};var mapDispatchToProps=function mapDispatchToProps(dispatch,_ref2){var expressionIndex=_ref2.expressionIndex;return{addArgument:function addArgument(element,pageId){return function(argName,argValue){return function(){dispatch((0,_elements.addArgumentValueAtIndex)({index:expressionIndex,element:element,pageId:pageId,argName:argName,value:argValue}))}}},updateContext:function updateContext(element){return function(){return dispatch((0,_elements.fetchContext)(expressionIndex,element))}},setArgument:function setArgument(element,pageId){return function(argName,valueIndex){return function(value){dispatch((0,_elements.setArgumentAtIndex)({index:expressionIndex,element:element,pageId:pageId,argName:argName,value:value,valueIndex:valueIndex}))}}},deleteArgument:function deleteArgument(element,pageId){return function(argName,argIndex){return function(){dispatch((0,_elements.deleteArgumentAtIndex)({index:expressionIndex,element:element,pageId:pageId,argName:argName,argIndex:argIndex}))}}},onAssetAdd:function onAssetAdd(type,content){var assetId=(0,_get_id.getId)("asset");dispatch((0,_assets.createAsset)(type,content,assetId));return assetId}}};var mergeProps=function mergeProps(stateProps,dispatchProps,ownProps){var element=stateProps.element,pageId=stateProps.pageId,assets=stateProps.assets;var argType=ownProps.argType,nextArgType=ownProps.nextArgType;var updateContext=dispatchProps.updateContext,setArgument=dispatchProps.setArgument,addArgument=dispatchProps.addArgument,deleteArgument=dispatchProps.deleteArgument,_onAssetAdd=dispatchProps.onAssetAdd,dispatchers=_objectWithoutProperties(dispatchProps,["updateContext","setArgument","addArgument","deleteArgument","onAssetAdd"]);return _extends({},stateProps,dispatchers,ownProps,{updateContext:updateContext(element),expressionType:(0,_find_expression_type.findExpressionType)(argType),nextExpressionType:nextArgType?(0,_find_expression_type.findExpressionType)(nextArgType):nextArgType,onValueChange:setArgument(element,pageId),onValueAdd:addArgument(element,pageId),onValueRemove:deleteArgument(element,pageId),onAssetAdd:function onAssetAdd(type,content){var existingId=Object.keys(assets).find(function(assetId){return assets[assetId].type===type&&assets[assetId].value===content});if(existingId)return existingId;return _onAssetAdd(type,content)}})};var FunctionForm=exports.FunctionForm=(0,_reactRedux.connect)(mapStateToProps,mapDispatchToProps,mergeProps)(_function_form.FunctionForm);FunctionForm.propTypes={expressionIndex:_propTypes2.default.number,argType:_propTypes2.default.string,nextArgType:_propTypes2.default.string}},6164:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.findExpressionType=findExpressionType;var _datasource=__webpack_require__(2055);var _transform=__webpack_require__(2057);var _model=__webpack_require__(2063);var _view=__webpack_require__(2064);var expressionTypes=["view","model","transform","datasource"];function findExpressionType(name,type){var checkTypes=expressionTypes.filter(function(expressionType){return null==type||expressionType===type});var matches=checkTypes.reduce(function(acc,checkType){var expression=void 0;switch(checkType){case"view":expression=_view.viewRegistry.get(name);return expression?acc.concat(expression):acc;case"model":expression=_model.modelRegistry.get(name);return expression?acc.concat(expression):acc;case"transform":expression=_transform.transformRegistry.get(name);return expression?acc.concat(expression):acc;case"datasource":expression=_datasource.datasourceRegistry.get(name);return expression?acc.concat(expression):acc;default:return acc}},[]);if(matches.length>1)throw new Error('Found multiple expressions with name "'+name+'"');return matches[0]||null}},6165:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.FunctionForm=void 0;var _propTypes=__webpack_require__(4);var _propTypes2=_interopRequireDefault(_propTypes);var _recompose=__webpack_require__(24);var _function_form_component=__webpack_require__(6166);var _function_unknown=__webpack_require__(6167);var _function_form_context_pending=__webpack_require__(6168);var _function_form_context_error=__webpack_require__(6169);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _defineProperty(obj,key,value){key in obj?Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true}):obj[key]=value;return obj}function checkState(state){return function(_ref){var context=_ref.context,expressionType=_ref.expressionType;var matchState=!context||context.state===state;return expressionType&&expressionType.requiresContext&&matchState}}var branches=[(0,_recompose.branch)(function(props){return!props.expressionType},(0,_recompose.renderComponent)(_function_unknown.FunctionUnknown)),(0,_recompose.branch)(checkState("pending"),(0,_recompose.renderComponent)(_function_form_context_pending.FunctionFormContextPending)),(0,_recompose.branch)(checkState("error"),(0,_recompose.renderComponent)(_function_form_context_error.FunctionFormContextError))];var FunctionForm=exports.FunctionForm=_recompose.compose.apply(void 0,branches)(_function_form_component.FunctionFormComponent);FunctionForm.propTypes=_defineProperty({expressionType:_propTypes2.default.object,context:_propTypes2.default.object},"expressionType",_propTypes2.default.object)},6166:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.FunctionFormComponent=void 0;var _FunctionFormComponen;var _react=__webpack_require__(0);var _react2=_interopRequireDefault(_react);var _propTypes=__webpack_require__(4);var _propTypes2=_interopRequireDefault(_propTypes);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _defineProperty(obj,key,value){key in obj?Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true}):obj[key]=value;return obj}var FunctionFormComponent=exports.FunctionFormComponent=function FunctionFormComponent(props){var passedProps={argResolver:props.argResolver,args:props.args,argType:props.argType,argTypeDef:props.argTypeDef,context:props.context,expressionIndex:props.expressionIndex,expressionType:props.expressionType,nextArgType:props.nextArgType,nextExpressionType:props.nextExpressionType,onAssetAdd:props.onAssetAdd,onValueAdd:props.onValueAdd,onValueChange:props.onValueChange,onValueRemove:props.onValueRemove};return _react2.default.createElement("div",{className:"canvasFunctionForm"},props.expressionType.render(passedProps))};FunctionFormComponent.propTypes=(_FunctionFormComponen={argResolver:_propTypes2.default.func.isRequired,args:_propTypes2.default.object.isRequired,argType:_propTypes2.default.string.isRequired,argTypeDef:_propTypes2.default.object.isRequired,context:_propTypes2.default.object,expressionIndex:_propTypes2.default.number.isRequired,expressionType:_propTypes2.default.object.isRequired,nextArgType:_propTypes2.default.string,nextExpressionType:_propTypes2.default.object,onAssetAdd:_propTypes2.default.func.isRequired,onValueAdd:_propTypes2.default.func.isRequired,onValueChange:_propTypes2.default.func.isRequired},_defineProperty(_FunctionFormComponen,"onValueChange",_propTypes2.default.func.isRequired),_defineProperty(_FunctionFormComponen,"onValueRemove",_propTypes2.default.func.isRequired),_defineProperty(_FunctionFormComponen,"onValueRemove",_propTypes2.default.func.isRequired),_FunctionFormComponen)},6167:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.FunctionUnknown=void 0;var _react=__webpack_require__(0);var _react2=_interopRequireDefault(_react);var _propTypes=__webpack_require__(4);var _propTypes2=_interopRequireDefault(_propTypes);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var FunctionUnknown=exports.FunctionUnknown=function FunctionUnknown(_ref){var argType=_ref.argType;return _react2.default.createElement("div",{className:"canvasFunctionForm canvasFunctionForm--unknown-expression"},'Unknown expression type "',argType,'"')};FunctionUnknown.propTypes={argType:_propTypes2.default.string}},6168:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.FunctionFormContextPending=void 0;var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;"value"in descriptor&&(descriptor.writable=true);Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){protoProps&&defineProperties(Constructor.prototype,protoProps);staticProps&&defineProperties(Constructor,staticProps);return Constructor}}();var _react=__webpack_require__(0);var _react2=_interopRequireDefault(_react);var _propTypes=__webpack_require__(4);var _propTypes2=_interopRequireDefault(_propTypes);var _loading=__webpack_require__(811);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(self,call){if(!self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!call||"object"!==typeof call&&"function"!==typeof call?self:call}function _inherits(subClass,superClass){if("function"!==typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function, not "+typeof superClass);subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:false,writable:true,configurable:true}});superClass&&(Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass)}var FunctionFormContextPending=exports.FunctionFormContextPending=function(_React$PureComponent){_inherits(FunctionFormContextPending,_React$PureComponent);function FunctionFormContextPending(){var _ref;var _temp,_this,_ret;_classCallCheck(this,FunctionFormContextPending);for(var _len=arguments.length,args=Array(_len),_key=0;_key<_len;_key++)args[_key]=arguments[_key];return _ret=(_temp=(_this=_possibleConstructorReturn(this,(_ref=FunctionFormContextPending.__proto__||Object.getPrototypeOf(FunctionFormContextPending)).call.apply(_ref,[this].concat(args))),_this),_this.fetchContext=function(props){var force=arguments.length>1&&void 0!==arguments[1]&&arguments[1];var expressionType=props.expressionType,context=props.context,updateContext=props.updateContext;(force||null==context&&expressionType.requiresContext)&&updateContext()},_temp),_possibleConstructorReturn(_this,_ret)}_createClass(FunctionFormContextPending,[{key:"componentDidMount",value:function componentDidMount(){this.fetchContext(this.props)}},{key:"componentWillReceiveProps",value:function componentWillReceiveProps(newProps){var oldContext=this.props.contextExpression;var newContext=newProps.contextExpression;var forceUpdate=newProps.expressionType.requiresContext&&oldContext!==newContext;this.fetchContext(newProps,forceUpdate)}},{key:"render",value:function render(){return _react2.default.createElement("div",{className:"canvasFunctionForm canvasFunctionForm--loading"},_react2.default.createElement(_loading.Loading,null))}}]);return FunctionFormContextPending}(_react2.default.PureComponent);FunctionFormContextPending.propTypes={context:_propTypes2.default.object,contextExpression:_propTypes2.default.string,expressionType:_propTypes2.default.object.isRequired,updateContext:_propTypes2.default.func.isRequired}},6169:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.FunctionFormContextError=void 0;var _react=__webpack_require__(0);var _react2=_interopRequireDefault(_react);var _propTypes=__webpack_require__(4);var _propTypes2=_interopRequireDefault(_propTypes);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var FunctionFormContextError=exports.FunctionFormContextError=function FunctionFormContextError(_ref){var context=_ref.context;return _react2.default.createElement("div",{className:"canvasFunctionForm canvasFunctionForm--error"},"ERROR: ",context.error)};FunctionFormContextError.propTypes={context:_propTypes2.default.object}},6170:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.GlobalConfig=void 0;var _react=__webpack_require__(0);var _react2=_interopRequireDefault(_react);var _page_config=__webpack_require__(6171);var _workpad_config=__webpack_require__(6186);var _sidebar_section=__webpack_require__(2058);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}exports.GlobalConfig=function GlobalConfig(){return _react2.default.createElement("div",{className:"canvasSidebar"},_react2.default.createElement(_sidebar_section.SidebarSection,null,_react2.default.createElement(_workpad_config.WorkpadConfig,null)),_react2.default.createElement(_sidebar_section.SidebarSection,null,_react2.default.createElement(_page_config.PageConfig,null)))}},6171:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.PageConfig=void 0;var _extends=Object.assign||function(target){for(var i=1;i<arguments.length;i++){var source=arguments[i];for(var key in source)Object.prototype.hasOwnProperty.call(source,key)&&(target[key]=source[key])}return target};var _reactRedux=__webpack_require__(19);var _lodash=__webpack_require__(1);var _transitions_registry=__webpack_require__(1179);var _workpad=__webpack_require__(54);var _pages=__webpack_require__(441);var _page_config=__webpack_require__(6173);var mapStateToProps=function mapStateToProps(state){var pageIndex=(0,_workpad.getSelectedPageIndex)(state);var page=(0,_workpad.getPages)(state)[pageIndex];return{page:page,pageIndex:pageIndex}};var mapDispatchToProps={stylePage:_pages.stylePage,setPageTransition:_pages.setPageTransition};var mergeProps=function mergeProps(stateProps,dispatchProps){return{pageIndex:stateProps.pageIndex,setBackground:function setBackground(background){var itsTheNewStyle=_extends({},stateProps.page.style,{background:background});dispatchProps.stylePage(stateProps.page.id,itsTheNewStyle)},background:(0,_lodash.get)(stateProps,"page.style.background"),transition:_transitions_registry.transitionsRegistry.get((0,_lodash.get)(stateProps,"page.transition.name")),transitions:[{value:"",text:"None"}].concat(_transitions_registry.transitionsRegistry.toArray().map(function(_ref){var name=_ref.name,displayName=_ref.displayName;return{value:name,text:displayName}})),setTransition:function setTransition(name){dispatchProps.setPageTransition(stateProps.page.id,{name:name})}}};exports.PageConfig=(0,_reactRedux.connect)(mapStateToProps,mapDispatchToProps,mergeProps)(_page_config.PageConfig)},6172:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.Transition=Transition;function Transition(config){this.name=config.name;this.displayName=config.displayName||this.name;this.help=config.help||"";this.enter=config.enter||"";this.exit=config.exit||""}},6173:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.PageConfig=void 0;var _react=__webpack_require__(0);var _react2=_interopRequireDefault(_react);var _propTypes=__webpack_require__(4);var _propTypes2=_interopRequireDefault(_propTypes);var _eui=__webpack_require__(2);var _color_picker_mini=__webpack_require__(529);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var PageConfig=exports.PageConfig=function PageConfig(_ref){var pageIndex=_ref.pageIndex,setBackground=_ref.setBackground,background=_ref.background,transition=_ref.transition,transitions=_ref.transitions,setTransition=_ref.setTransition;return _react2.default.createElement(_react.Fragment,null,_react2.default.createElement(_eui.EuiTitle,{size:"xs"},_react2.default.createElement("h4",null,"Page")),_react2.default.createElement(_eui.EuiSpacer,{size:"m"}),_react2.default.createElement(_eui.EuiFormRow,{label:"Background"},_react2.default.createElement(_color_picker_mini.ColorPickerMini,{onChange:setBackground,value:background})),pageIndex>0?_react2.default.createElement("div",null,_react2.default.createElement(_eui.EuiFormRow,{label:"Transition",compressed:true},_react2.default.createElement(_eui.EuiSelect,{value:transition?transition.name:"",options:transitions,onChange:function onChange(e){return setTransition(e.target.value)}})),transition?_react2.default.createElement(_eui.EuiFormRow,{label:"Preview"},_react2.default.createElement(_eui.EuiCard,{title:"",description:"",className:transition.enter,style:{height:"72px",width:"128px",background:background,animationDuration:"1s"}})):""):"")};PageConfig.propTypes={pageIndex:_propTypes2.default.number.isRequired,background:_propTypes2.default.string,setBackground:_propTypes2.default.func.isRequired,transition:_propTypes2.default.shape({name:_propTypes2.default.string}),transitions:_propTypes2.default.arrayOf(_propTypes2.default.shape({text:_propTypes2.default.string.isRequired,value:_propTypes2.default.string.isRequired})).isRequired,setTransition:_propTypes2.default.func.isRequired}},6174:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.ColorPickerMini=void 0;var _react=__webpack_require__(0);var _react2=_interopRequireDefault(_react);var _propTypes=__webpack_require__(4);var _propTypes2=_interopRequireDefault(_propTypes);var _eui=__webpack_require__(2);var _popover=__webpack_require__(810);var _color_picker=__webpack_require__(2081);var _color_dot=__webpack_require__(2082);var _workpad_color_picker=__webpack_require__(6184);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var ColorPickerMini=exports.ColorPickerMini=function ColorPickerMini(_ref){var onChange=_ref.onChange,value=_ref.value,anchorPosition=_ref.anchorPosition,colors=_ref.colors;var button=function button(handleClick){return _react2.default.createElement(_eui.EuiLink,{style:{fontSize:0},onClick:handleClick},_react2.default.createElement(_color_dot.ColorDot,{value:value,clickable:true}))};return _react2.default.createElement(_popover.Popover,{id:"color-picker-mini-popover",panelClassName:"canvas canvasColorPickerMini__popover",button:button,anchorPosition:anchorPosition},function(){return colors?_react2.default.createElement(_color_picker.ColorPicker,{onChange:onChange,value:value,colors:colors}):_react2.default.createElement(_workpad_color_picker.WorkpadColorPicker,{onChange:onChange,value:value})})};ColorPickerMini.propTypes={colors:_propTypes2.default.array,value:_propTypes2.default.string,onChange:_propTypes2.default.func,anchorPosition:_propTypes2.default.string}},6175:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.ColorPicker=void 0;var _react=__webpack_require__(0);var _react2=_interopRequireDefault(_react);var _propTypes=__webpack_require__(4);var _propTypes2=_interopRequireDefault(_propTypes);var _color_palette=__webpack_require__(6176);var _color_manager=__webpack_require__(6182);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var ColorPicker=exports.ColorPicker=function ColorPicker(_ref){var onChange=_ref.onChange,value=_ref.value,colors=_ref.colors,addColor=_ref.addColor,removeColor=_ref.removeColor;return _react2.default.createElement("div",null,_react2.default.createElement(_color_palette.ColorPalette,{onChange:onChange,value:value,colors:colors}),_react2.default.createElement(_color_manager.ColorManager,{onChange:onChange,value:value,addColor:addColor,removeColor:removeColor}))};ColorPicker.propTypes={value:_propTypes2.default.string,onChange:_propTypes2.default.func,colors:_propTypes2.default.array,addColor:_propTypes2.default.func,removeColor:_propTypes2.default.func}},6176:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.ColorPalette=void 0;var _recompose=__webpack_require__(24);var _color_palette=__webpack_require__(6177);exports.ColorPalette=(0,_recompose.pure)(_color_palette.ColorPalette)},6177:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.ColorPalette=void 0;var _react=__webpack_require__(0);var _react2=_interopRequireDefault(_react);var _propTypes=__webpack_require__(4);var _propTypes2=_interopRequireDefault(_propTypes);var _eui=__webpack_require__(2);var _readable_color=__webpack_require__(6178);var _color_dot=__webpack_require__(2082);var _item_grid=__webpack_require__(6180);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var ColorPalette=exports.ColorPalette=function ColorPalette(_ref){var value=_ref.value,colors=_ref.colors,colorsPerRow=_ref.colorsPerRow,onChange=_ref.onChange;return _react2.default.createElement("div",{className:"canvasColorPalette"},_react2.default.createElement(_item_grid.ItemGrid,{items:colors,itemsPerRow:colorsPerRow||6},function(_ref2){var color=_ref2.item;return _react2.default.createElement(_eui.EuiLink,{style:{fontSize:0},key:color,onClick:function onClick(){return onChange(color)},className:"canvasColorPalette__dot"},_react2.default.createElement(_color_dot.ColorDot,{value:color},color===value&&_react2.default.createElement(_eui.EuiIcon,{type:"check",className:"selected-color",color:(0,_readable_color.readableColor)(value)})))}))};ColorPalette.propTypes={colors:_propTypes2.default.array.isRequired,onChange:_propTypes2.default.func.isRequired,value:_propTypes2.default.string,colorsPerRow:_propTypes2.default.number}},6178:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.readableColor=readableColor;var _chromaJs=__webpack_require__(6179);var _chromaJs2=_interopRequireDefault(_chromaJs);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function readableColor(background,light,dark){light=light||"#FFF";dark=dark||"#333";try{return _chromaJs2.default.contrast(background,"#000")<7?light:dark}catch(e){return dark}}},6179:function(module,exports,__webpack_require__){(function(module){var __WEBPACK_AMD_DEFINE_ARRAY__,__WEBPACK_AMD_DEFINE_RESULT__;
/**
 * @license
 *
 * chroma.js - JavaScript library for color conversions
 * 
 * Copyright (c) 2011-2017, Gregor Aisch
 * All rights reserved.
 * 
 * Redistribution and use in source and binary forms, with or without
 * modification, are permitted provided that the following conditions are met:
 * 
 * 1. Redistributions of source code must retain the above copyright notice, this
 *    list of conditions and the following disclaimer.
 * 
 * 2. Redistributions in binary form must reproduce the above copyright notice,
 *    this list of conditions and the following disclaimer in the documentation
 *    and/or other materials provided with the distribution.
 * 
 * 3. The name Gregor Aisch may not be used to endorse or promote products
 *    derived from this software without specific prior written permission.
 * 
 * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS "AS IS"
 * AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE
 * IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE
 * DISCLAIMED. IN NO EVENT SHALL GREGOR AISCH OR CONTRIBUTORS BE LIABLE FOR ANY DIRECT,
 * INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING,
 * BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE,
 * DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY
 * OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING
 * NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS SOFTWARE,
 * EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
 *
 */
/**
 * @license
 *
 * chroma.js - JavaScript library for color conversions
 * 
 * Copyright (c) 2011-2017, Gregor Aisch
 * All rights reserved.
 * 
 * Redistribution and use in source and binary forms, with or without
 * modification, are permitted provided that the following conditions are met:
 * 
 * 1. Redistributions of source code must retain the above copyright notice, this
 *    list of conditions and the following disclaimer.
 * 
 * 2. Redistributions in binary form must reproduce the above copyright notice,
 *    this list of conditions and the following disclaimer in the documentation
 *    and/or other materials provided with the distribution.
 * 
 * 3. The name Gregor Aisch may not be used to endorse or promote products
 *    derived from this software without specific prior written permission.
 * 
 * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS "AS IS"
 * AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE
 * IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE
 * DISCLAIMED. IN NO EVENT SHALL GREGOR AISCH OR CONTRIBUTORS BE LIABLE FOR ANY DIRECT,
 * INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING,
 * BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE,
 * DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY
 * OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING
 * NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS SOFTWARE,
 * EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
 *
 */
(function(){var Color,DEG2RAD,LAB_CONSTANTS,PI,PITHIRD,RAD2DEG,TWOPI,_average_lrgb,_guess_formats,_guess_formats_sorted,_input,_interpolators,abs,atan2,bezier,blend,blend_f,brewer,burn,chroma,clip_rgb,cmyk2rgb,cos,css2rgb,darken,dodge,each,floor,hcg2rgb,hex2rgb,hsi2rgb,hsl2css,hsl2rgb,hsv2rgb,interpolate,interpolate_hsx,interpolate_lab,interpolate_lrgb,interpolate_num,interpolate_rgb,lab2lch,lab2rgb,lab_xyz,lch2lab,lch2rgb,lighten,limit,log,luminance_x,m,max,multiply,normal,num2rgb,overlay,pow,rgb2cmyk,rgb2css,rgb2hcg,rgb2hex,rgb2hsi,rgb2hsl,rgb2hsv,rgb2lab,rgb2lch,rgb2luminance,rgb2num,rgb2temperature,rgb2xyz,rgb_xyz,rnd,round,screen,sin,sqrt,temperature2rgb,type,unpack,w3cx11,xyz_lab,xyz_rgb,slice=[].slice;type=function(){var classToType,len,name,o,ref;classToType={};ref="Boolean Number String Function Array Date RegExp Undefined Null".split(" ");for(o=0,len=ref.length;o<len;o++){name=ref[o];classToType["[object "+name+"]"]=name.toLowerCase()}return function(obj){var strType;strType=Object.prototype.toString.call(obj);return classToType[strType]||"object"}}();limit=function(x,min,max){null==min&&(min=0);null==max&&(max=1);x<min&&(x=min);x>max&&(x=max);return x};unpack=function(args){return args.length>=3?Array.prototype.slice.call(args):args[0]};clip_rgb=function(rgb){var i,o;rgb._clipped=false;rgb._unclipped=rgb.slice(0);for(i=o=0;o<3;i=++o)if(i<3){(rgb[i]<0||rgb[i]>255)&&(rgb._clipped=true);rgb[i]<0&&(rgb[i]=0);rgb[i]>255&&(rgb[i]=255)}else if(3===i){rgb[i]<0&&(rgb[i]=0);rgb[i]>1&&(rgb[i]=1)}rgb._clipped||delete rgb._unclipped;return rgb};PI=Math.PI,round=Math.round,cos=Math.cos,floor=Math.floor,pow=Math.pow,log=Math.log,sin=Math.sin,sqrt=Math.sqrt,atan2=Math.atan2,max=Math.max,abs=Math.abs;TWOPI=2*PI;PITHIRD=PI/3;DEG2RAD=PI/180;RAD2DEG=180/PI;chroma=function(){if(arguments[0]instanceof Color)return arguments[0];return function(func,args,ctor){ctor.prototype=func.prototype;var child=new ctor,result=func.apply(child,args);return Object(result)===result?result:child}(Color,arguments,function(){})};chroma["default"]=chroma;_interpolators=[];"undefined"!==typeof module&&null!==module&&null!=module.exports&&(module.exports=chroma);true;!(__WEBPACK_AMD_DEFINE_ARRAY__=[],__WEBPACK_AMD_DEFINE_RESULT__=function(){return chroma}.apply(exports,__WEBPACK_AMD_DEFINE_ARRAY__),void 0!==__WEBPACK_AMD_DEFINE_RESULT__&&(module.exports=__WEBPACK_AMD_DEFINE_RESULT__));chroma.version="1.3.7";_input={};_guess_formats=[];_guess_formats_sorted=false;Color=function(){function Color(){var arg,args,chk,len,len1,me,mode,o,w;me=this;args=[];for(o=0,len=arguments.length;o<len;o++){arg=arguments[o];null!=arg&&args.push(arg)}args.length>1&&(mode=args[args.length-1]);if(null!=_input[mode])me._rgb=clip_rgb(_input[mode](unpack(args.slice(0,-1))));else{if(!_guess_formats_sorted){_guess_formats=_guess_formats.sort(function(a,b){return b.p-a.p});_guess_formats_sorted=true}for(w=0,len1=_guess_formats.length;w<len1;w++){chk=_guess_formats[w];mode=chk.test.apply(chk,args);if(mode)break}mode&&(me._rgb=clip_rgb(_input[mode].apply(_input,args)))}null==me._rgb&&console.warn("unknown format: "+args);null==me._rgb&&(me._rgb=[0,0,0]);3===me._rgb.length&&me._rgb.push(1)}Color.prototype.toString=function(){return this.hex()};Color.prototype.clone=function(){return chroma(me._rgb)};return Color}();chroma._input=_input;
/**
  	ColorBrewer colors for chroma.js
  
  	Copyright (c) 2002 Cynthia Brewer, Mark Harrower, and The 
  	Pennsylvania State University.
  
  	Licensed under the Apache License, Version 2.0 (the "License"); 
  	you may not use this file except in compliance with the License.
  	You may obtain a copy of the License at	
  	http://www.apache.org/licenses/LICENSE-2.0
  
  	Unless required by applicable law or agreed to in writing, software distributed
  	under the License is distributed on an "AS IS" BASIS, WITHOUT WARRANTIES OR
  	CONDITIONS OF ANY KIND, either express or implied. See the License for the
  	specific language governing permissions and limitations under the License.
  
      @preserve
   */chroma.brewer=brewer={OrRd:["#fff7ec","#fee8c8","#fdd49e","#fdbb84","#fc8d59","#ef6548","#d7301f","#b30000","#7f0000"],PuBu:["#fff7fb","#ece7f2","#d0d1e6","#a6bddb","#74a9cf","#3690c0","#0570b0","#045a8d","#023858"],BuPu:["#f7fcfd","#e0ecf4","#bfd3e6","#9ebcda","#8c96c6","#8c6bb1","#88419d","#810f7c","#4d004b"],Oranges:["#fff5eb","#fee6ce","#fdd0a2","#fdae6b","#fd8d3c","#f16913","#d94801","#a63603","#7f2704"],BuGn:["#f7fcfd","#e5f5f9","#ccece6","#99d8c9","#66c2a4","#41ae76","#238b45","#006d2c","#00441b"],YlOrBr:["#ffffe5","#fff7bc","#fee391","#fec44f","#fe9929","#ec7014","#cc4c02","#993404","#662506"],YlGn:["#ffffe5","#f7fcb9","#d9f0a3","#addd8e","#78c679","#41ab5d","#238443","#006837","#004529"],Reds:["#fff5f0","#fee0d2","#fcbba1","#fc9272","#fb6a4a","#ef3b2c","#cb181d","#a50f15","#67000d"],RdPu:["#fff7f3","#fde0dd","#fcc5c0","#fa9fb5","#f768a1","#dd3497","#ae017e","#7a0177","#49006a"],Greens:["#f7fcf5","#e5f5e0","#c7e9c0","#a1d99b","#74c476","#41ab5d","#238b45","#006d2c","#00441b"],YlGnBu:["#ffffd9","#edf8b1","#c7e9b4","#7fcdbb","#41b6c4","#1d91c0","#225ea8","#253494","#081d58"],Purples:["#fcfbfd","#efedf5","#dadaeb","#bcbddc","#9e9ac8","#807dba","#6a51a3","#54278f","#3f007d"],GnBu:["#f7fcf0","#e0f3db","#ccebc5","#a8ddb5","#7bccc4","#4eb3d3","#2b8cbe","#0868ac","#084081"],Greys:["#ffffff","#f0f0f0","#d9d9d9","#bdbdbd","#969696","#737373","#525252","#252525","#000000"],YlOrRd:["#ffffcc","#ffeda0","#fed976","#feb24c","#fd8d3c","#fc4e2a","#e31a1c","#bd0026","#800026"],PuRd:["#f7f4f9","#e7e1ef","#d4b9da","#c994c7","#df65b0","#e7298a","#ce1256","#980043","#67001f"],Blues:["#f7fbff","#deebf7","#c6dbef","#9ecae1","#6baed6","#4292c6","#2171b5","#08519c","#08306b"],PuBuGn:["#fff7fb","#ece2f0","#d0d1e6","#a6bddb","#67a9cf","#3690c0","#02818a","#016c59","#014636"],Viridis:["#440154","#482777","#3f4a8a","#31678e","#26838f","#1f9d8a","#6cce5a","#b6de2b","#fee825"],Spectral:["#9e0142","#d53e4f","#f46d43","#fdae61","#fee08b","#ffffbf","#e6f598","#abdda4","#66c2a5","#3288bd","#5e4fa2"],RdYlGn:["#a50026","#d73027","#f46d43","#fdae61","#fee08b","#ffffbf","#d9ef8b","#a6d96a","#66bd63","#1a9850","#006837"],RdBu:["#67001f","#b2182b","#d6604d","#f4a582","#fddbc7","#f7f7f7","#d1e5f0","#92c5de","#4393c3","#2166ac","#053061"],PiYG:["#8e0152","#c51b7d","#de77ae","#f1b6da","#fde0ef","#f7f7f7","#e6f5d0","#b8e186","#7fbc41","#4d9221","#276419"],PRGn:["#40004b","#762a83","#9970ab","#c2a5cf","#e7d4e8","#f7f7f7","#d9f0d3","#a6dba0","#5aae61","#1b7837","#00441b"],RdYlBu:["#a50026","#d73027","#f46d43","#fdae61","#fee090","#ffffbf","#e0f3f8","#abd9e9","#74add1","#4575b4","#313695"],BrBG:["#543005","#8c510a","#bf812d","#dfc27d","#f6e8c3","#f5f5f5","#c7eae5","#80cdc1","#35978f","#01665e","#003c30"],RdGy:["#67001f","#b2182b","#d6604d","#f4a582","#fddbc7","#ffffff","#e0e0e0","#bababa","#878787","#4d4d4d","#1a1a1a"],PuOr:["#7f3b08","#b35806","#e08214","#fdb863","#fee0b6","#f7f7f7","#d8daeb","#b2abd2","#8073ac","#542788","#2d004b"],Set2:["#66c2a5","#fc8d62","#8da0cb","#e78ac3","#a6d854","#ffd92f","#e5c494","#b3b3b3"],Accent:["#7fc97f","#beaed4","#fdc086","#ffff99","#386cb0","#f0027f","#bf5b17","#666666"],Set1:["#e41a1c","#377eb8","#4daf4a","#984ea3","#ff7f00","#ffff33","#a65628","#f781bf","#999999"],Set3:["#8dd3c7","#ffffb3","#bebada","#fb8072","#80b1d3","#fdb462","#b3de69","#fccde5","#d9d9d9","#bc80bd","#ccebc5","#ffed6f"],Dark2:["#1b9e77","#d95f02","#7570b3","#e7298a","#66a61e","#e6ab02","#a6761d","#666666"],Paired:["#a6cee3","#1f78b4","#b2df8a","#33a02c","#fb9a99","#e31a1c","#fdbf6f","#ff7f00","#cab2d6","#6a3d9a","#ffff99","#b15928"],Pastel2:["#b3e2cd","#fdcdac","#cbd5e8","#f4cae4","#e6f5c9","#fff2ae","#f1e2cc","#cccccc"],Pastel1:["#fbb4ae","#b3cde3","#ccebc5","#decbe4","#fed9a6","#ffffcc","#e5d8bd","#fddaec","#f2f2f2"]};(function(){var key,results;results=[];for(key in brewer)results.push(brewer[key.toLowerCase()]=brewer[key]);return results})();w3cx11={aliceblue:"#f0f8ff",antiquewhite:"#faebd7",aqua:"#00ffff",aquamarine:"#7fffd4",azure:"#f0ffff",beige:"#f5f5dc",bisque:"#ffe4c4",black:"#000000",blanchedalmond:"#ffebcd",blue:"#0000ff",blueviolet:"#8a2be2",brown:"#a52a2a",burlywood:"#deb887",cadetblue:"#5f9ea0",chartreuse:"#7fff00",chocolate:"#d2691e",coral:"#ff7f50",cornflower:"#6495ed",cornflowerblue:"#6495ed",cornsilk:"#fff8dc",crimson:"#dc143c",cyan:"#00ffff",darkblue:"#00008b",darkcyan:"#008b8b",darkgoldenrod:"#b8860b",darkgray:"#a9a9a9",darkgreen:"#006400",darkgrey:"#a9a9a9",darkkhaki:"#bdb76b",darkmagenta:"#8b008b",darkolivegreen:"#556b2f",darkorange:"#ff8c00",darkorchid:"#9932cc",darkred:"#8b0000",darksalmon:"#e9967a",darkseagreen:"#8fbc8f",darkslateblue:"#483d8b",darkslategray:"#2f4f4f",darkslategrey:"#2f4f4f",darkturquoise:"#00ced1",darkviolet:"#9400d3",deeppink:"#ff1493",deepskyblue:"#00bfff",dimgray:"#696969",dimgrey:"#696969",dodgerblue:"#1e90ff",firebrick:"#b22222",floralwhite:"#fffaf0",forestgreen:"#228b22",fuchsia:"#ff00ff",gainsboro:"#dcdcdc",ghostwhite:"#f8f8ff",gold:"#ffd700",goldenrod:"#daa520",gray:"#808080",green:"#008000",greenyellow:"#adff2f",grey:"#808080",honeydew:"#f0fff0",hotpink:"#ff69b4",indianred:"#cd5c5c",indigo:"#4b0082",ivory:"#fffff0",khaki:"#f0e68c",laserlemon:"#ffff54",lavender:"#e6e6fa",lavenderblush:"#fff0f5",lawngreen:"#7cfc00",lemonchiffon:"#fffacd",lightblue:"#add8e6",lightcoral:"#f08080",lightcyan:"#e0ffff",lightgoldenrod:"#fafad2",lightgoldenrodyellow:"#fafad2",lightgray:"#d3d3d3",lightgreen:"#90ee90",lightgrey:"#d3d3d3",lightpink:"#ffb6c1",lightsalmon:"#ffa07a",lightseagreen:"#20b2aa",lightskyblue:"#87cefa",lightslategray:"#778899",lightslategrey:"#778899",lightsteelblue:"#b0c4de",lightyellow:"#ffffe0",lime:"#00ff00",limegreen:"#32cd32",linen:"#faf0e6",magenta:"#ff00ff",maroon:"#800000",maroon2:"#7f0000",maroon3:"#b03060",mediumaquamarine:"#66cdaa",mediumblue:"#0000cd",mediumorchid:"#ba55d3",mediumpurple:"#9370db",mediumseagreen:"#3cb371",mediumslateblue:"#7b68ee",mediumspringgreen:"#00fa9a",mediumturquoise:"#48d1cc",mediumvioletred:"#c71585",midnightblue:"#191970",mintcream:"#f5fffa",mistyrose:"#ffe4e1",moccasin:"#ffe4b5",navajowhite:"#ffdead",navy:"#000080",oldlace:"#fdf5e6",olive:"#808000",olivedrab:"#6b8e23",orange:"#ffa500",orangered:"#ff4500",orchid:"#da70d6",palegoldenrod:"#eee8aa",palegreen:"#98fb98",paleturquoise:"#afeeee",palevioletred:"#db7093",papayawhip:"#ffefd5",peachpuff:"#ffdab9",peru:"#cd853f",pink:"#ffc0cb",plum:"#dda0dd",powderblue:"#b0e0e6",purple:"#800080",purple2:"#7f007f",purple3:"#a020f0",rebeccapurple:"#663399",red:"#ff0000",rosybrown:"#bc8f8f",royalblue:"#4169e1",saddlebrown:"#8b4513",salmon:"#fa8072",sandybrown:"#f4a460",seagreen:"#2e8b57",seashell:"#fff5ee",sienna:"#a0522d",silver:"#c0c0c0",skyblue:"#87ceeb",slateblue:"#6a5acd",slategray:"#708090",slategrey:"#708090",snow:"#fffafa",springgreen:"#00ff7f",steelblue:"#4682b4",tan:"#d2b48c",teal:"#008080",thistle:"#d8bfd8",tomato:"#ff6347",turquoise:"#40e0d0",violet:"#ee82ee",wheat:"#f5deb3",white:"#ffffff",whitesmoke:"#f5f5f5",yellow:"#ffff00",yellowgreen:"#9acd32"};chroma.colors=w3cx11;lab2rgb=function(){var a,args,b,g,l,r,x,y,z;args=unpack(arguments);l=args[0],a=args[1],b=args[2];y=(l+16)/116;x=isNaN(a)?y:y+a/500;z=isNaN(b)?y:y-b/200;y=LAB_CONSTANTS.Yn*lab_xyz(y);x=LAB_CONSTANTS.Xn*lab_xyz(x);z=LAB_CONSTANTS.Zn*lab_xyz(z);r=xyz_rgb(3.2404542*x-1.5371385*y-.4985314*z);g=xyz_rgb(-.969266*x+1.8760108*y+.041556*z);b=xyz_rgb(.0556434*x-.2040259*y+1.0572252*z);return[r,g,b,args.length>3?args[3]:1]};xyz_rgb=function(r){return 255*(r<=.00304?12.92*r:1.055*pow(r,1/2.4)-.055)};lab_xyz=function(t){return t>LAB_CONSTANTS.t1?t*t*t:LAB_CONSTANTS.t2*(t-LAB_CONSTANTS.t0)};LAB_CONSTANTS={Kn:18,Xn:.95047,Yn:1,Zn:1.08883,t0:.137931034,t1:.206896552,t2:.12841855,t3:.008856452};rgb2lab=function(){var b,g,r,ref,ref1,x,y,z;ref=unpack(arguments),r=ref[0],g=ref[1],b=ref[2];ref1=rgb2xyz(r,g,b),x=ref1[0],y=ref1[1],z=ref1[2];return[116*y-16,500*(x-y),200*(y-z)]};rgb_xyz=function(r){return(r/=255)<=.04045?r/12.92:pow((r+.055)/1.055,2.4)};xyz_lab=function(t){return t>LAB_CONSTANTS.t3?pow(t,1/3):t/LAB_CONSTANTS.t2+LAB_CONSTANTS.t0};rgb2xyz=function(){var b,g,r,ref,x,y,z;ref=unpack(arguments),r=ref[0],g=ref[1],b=ref[2];r=rgb_xyz(r);g=rgb_xyz(g);b=rgb_xyz(b);x=xyz_lab((.4124564*r+.3575761*g+.1804375*b)/LAB_CONSTANTS.Xn);y=xyz_lab((.2126729*r+.7151522*g+.072175*b)/LAB_CONSTANTS.Yn);z=xyz_lab((.0193339*r+.119192*g+.9503041*b)/LAB_CONSTANTS.Zn);return[x,y,z]};chroma.lab=function(){return function(func,args,ctor){ctor.prototype=func.prototype;var child=new ctor,result=func.apply(child,args);return Object(result)===result?result:child}(Color,slice.call(arguments).concat(["lab"]),function(){})};_input.lab=lab2rgb;Color.prototype.lab=function(){return rgb2lab(this._rgb)};bezier=function(colors){var I,I0,I1,c,lab0,lab1,lab2,lab3,ref,ref1,ref2;colors=function(){var len,o,results;results=[];for(o=0,len=colors.length;o<len;o++){c=colors[o];results.push(chroma(c))}return results}();if(2===colors.length){ref=function(){var len,o,results;results=[];for(o=0,len=colors.length;o<len;o++){c=colors[o];results.push(c.lab())}return results}(),lab0=ref[0],lab1=ref[1];I=function(t){var i,lab;lab=function(){var o,results;results=[];for(i=o=0;o<=2;i=++o)results.push(lab0[i]+t*(lab1[i]-lab0[i]));return results}();return chroma.lab.apply(chroma,lab)}}else if(3===colors.length){ref1=function(){var len,o,results;results=[];for(o=0,len=colors.length;o<len;o++){c=colors[o];results.push(c.lab())}return results}(),lab0=ref1[0],lab1=ref1[1],lab2=ref1[2];I=function(t){var i,lab;lab=function(){var o,results;results=[];for(i=o=0;o<=2;i=++o)results.push((1-t)*(1-t)*lab0[i]+2*(1-t)*t*lab1[i]+t*t*lab2[i]);return results}();return chroma.lab.apply(chroma,lab)}}else if(4===colors.length){ref2=function(){var len,o,results;results=[];for(o=0,len=colors.length;o<len;o++){c=colors[o];results.push(c.lab())}return results}(),lab0=ref2[0],lab1=ref2[1],lab2=ref2[2],lab3=ref2[3];I=function(t){var i,lab;lab=function(){var o,results;results=[];for(i=o=0;o<=2;i=++o)results.push((1-t)*(1-t)*(1-t)*lab0[i]+3*(1-t)*(1-t)*t*lab1[i]+3*(1-t)*t*t*lab2[i]+t*t*t*lab3[i]);return results}();return chroma.lab.apply(chroma,lab)}}else if(5===colors.length){I0=bezier(colors.slice(0,3));I1=bezier(colors.slice(2,5));I=function(t){return t<.5?I0(2*t):I1(2*(t-.5))}}return I};chroma.bezier=function(colors){var f;f=bezier(colors);f.scale=function(){return chroma.scale(f)};return f};chroma.cubehelix=function(start,rotations,hue,gamma,lightness){var dh,dl,f;null==start&&(start=300);null==rotations&&(rotations=-1.5);null==hue&&(hue=1);null==gamma&&(gamma=1);null==lightness&&(lightness=[0,1]);dh=0;if("array"===type(lightness))dl=lightness[1]-lightness[0];else{dl=0;lightness=[lightness,lightness]}f=function(fract){var a,amp,b,cos_a,g,h,l,r,sin_a;a=TWOPI*((start+120)/360+rotations*fract);l=pow(lightness[0]+dl*fract,gamma);h=0!==dh?hue[0]+fract*dh:hue;amp=h*l*(1-l)/2;cos_a=cos(a);sin_a=sin(a);r=l+amp*(-.14861*cos_a+1.78277*sin_a);g=l+amp*(-.29227*cos_a-.90649*sin_a);b=l+amp*(1.97294*cos_a);return chroma(clip_rgb([255*r,255*g,255*b]))};f.start=function(s){if(null==s)return start;start=s;return f};f.rotations=function(r){if(null==r)return rotations;rotations=r;return f};f.gamma=function(g){if(null==g)return gamma;gamma=g;return f};f.hue=function(h){if(null==h)return hue;hue=h;if("array"===type(hue)){dh=hue[1]-hue[0];0===dh&&(hue=hue[1])}else dh=0;return f};f.lightness=function(h){if(null==h)return lightness;if("array"===type(h)){lightness=h;dl=h[1]-h[0]}else{lightness=[h,h];dl=0}return f};f.scale=function(){return chroma.scale(f)};f.hue(hue);return f};chroma.random=function(){var code,digits,o;digits="0123456789abcdef";code="#";for(o=0;o<6;++o)code+=digits.charAt(floor(16*Math.random()));return new Color(code)};_interpolators=[];interpolate=function(col1,col2,f,m){var interpol,len,o,res;null==f&&(f=.5);null==m&&(m="rgb");"object"!==type(col1)&&(col1=chroma(col1));"object"!==type(col2)&&(col2=chroma(col2));for(o=0,len=_interpolators.length;o<len;o++){interpol=_interpolators[o];if(m===interpol[0]){res=interpol[1](col1,col2,f,m);break}}if(null==res)throw"color mode "+m+" is not supported";return res.alpha(col1.alpha()+f*(col2.alpha()-col1.alpha()))};chroma.interpolate=interpolate;Color.prototype.interpolate=function(col2,f,m){return interpolate(this,col2,f,m)};chroma.mix=interpolate;Color.prototype.mix=Color.prototype.interpolate;_input.rgb=function(){var k,ref,results,v;ref=unpack(arguments);results=[];for(k in ref){v=ref[k];results.push(v)}return results};chroma.rgb=function(){return function(func,args,ctor){ctor.prototype=func.prototype;var child=new ctor,result=func.apply(child,args);return Object(result)===result?result:child}(Color,slice.call(arguments).concat(["rgb"]),function(){})};Color.prototype.rgb=function(round){null==round&&(round=true);return round?this._rgb.map(Math.round).slice(0,3):this._rgb.slice(0,3)};Color.prototype.rgba=function(round){null==round&&(round=true);if(!round)return this._rgb.slice(0);return[Math.round(this._rgb[0]),Math.round(this._rgb[1]),Math.round(this._rgb[2]),this._rgb[3]]};_guess_formats.push({p:3,test:function(n){var a;a=unpack(arguments);if("array"===type(a)&&3===a.length)return"rgb";if(4===a.length&&"number"===type(a[3])&&a[3]>=0&&a[3]<=1)return"rgb"}});_input.lrgb=_input.rgb;interpolate_lrgb=function(col1,col2,f,m){var xyz0,xyz1;xyz0=col1._rgb;xyz1=col2._rgb;return new Color(sqrt(pow(xyz0[0],2)*(1-f)+pow(xyz1[0],2)*f),sqrt(pow(xyz0[1],2)*(1-f)+pow(xyz1[1],2)*f),sqrt(pow(xyz0[2],2)*(1-f)+pow(xyz1[2],2)*f),m)};_average_lrgb=function(colors){var col,f,len,o,rgb,xyz;f=1/colors.length;xyz=[0,0,0,0];for(o=0,len=colors.length;o<len;o++){col=colors[o];rgb=col._rgb;xyz[0]+=pow(rgb[0],2)*f;xyz[1]+=pow(rgb[1],2)*f;xyz[2]+=pow(rgb[2],2)*f;xyz[3]+=rgb[3]*f}xyz[0]=sqrt(xyz[0]);xyz[1]=sqrt(xyz[1]);xyz[2]=sqrt(xyz[2]);return new Color(xyz)};_interpolators.push(["lrgb",interpolate_lrgb]);chroma.average=function(colors,mode){var A,alpha,c,cnt,dx,dy,first,i,l,len,o,xyz,xyz2;null==mode&&(mode="rgb");l=colors.length;colors=colors.map(function(c){return chroma(c)});first=colors.splice(0,1)[0];if("lrgb"===mode)return _average_lrgb(colors);xyz=first.get(mode);cnt=[];dx=0;dy=0;for(i in xyz){xyz[i]=xyz[i]||0;cnt.push(isNaN(xyz[i])?0:1);if("h"===mode.charAt(i)&&!isNaN(xyz[i])){A=xyz[i]/180*PI;dx+=cos(A);dy+=sin(A)}}alpha=first.alpha();for(o=0,len=colors.length;o<len;o++){c=colors[o];xyz2=c.get(mode);alpha+=c.alpha();for(i in xyz)if(!isNaN(xyz2[i])){cnt[i]+=1;if("h"===mode.charAt(i)){A=xyz2[i]/180*PI;dx+=cos(A);dy+=sin(A)}else xyz[i]+=xyz2[i]}}for(i in xyz)if("h"===mode.charAt(i)){A=atan2(dy/cnt[i],dx/cnt[i])/PI*180;while(A<0)A+=360;while(A>=360)A-=360;xyz[i]=A}else xyz[i]=xyz[i]/cnt[i];return chroma(xyz,mode).alpha(alpha/l)};hex2rgb=function(hex){var a,b,g,r,rgb,u;if(hex.match(/^#?([A-Fa-f0-9]{6}|[A-Fa-f0-9]{3})$/)){4!==hex.length&&7!==hex.length||(hex=hex.substr(1));if(3===hex.length){hex=hex.split("");hex=hex[0]+hex[0]+hex[1]+hex[1]+hex[2]+hex[2]}u=parseInt(hex,16);r=u>>16;g=u>>8&255;b=255&u;return[r,g,b,1]}if(hex.match(/^#?([A-Fa-f0-9]{8})$/)){9===hex.length&&(hex=hex.substr(1));u=parseInt(hex,16);r=u>>24&255;g=u>>16&255;b=u>>8&255;a=round((255&u)/255*100)/100;return[r,g,b,a]}if(null!=_input.css&&(rgb=_input.css(hex)))return rgb;throw"unknown color: "+hex};rgb2hex=function(channels,mode){var a,b,g,hxa,r,str,u;null==mode&&(mode="rgb");r=channels[0],g=channels[1],b=channels[2],a=channels[3];r=Math.round(r);g=Math.round(g);b=Math.round(b);u=r<<16|g<<8|b;str="000000"+u.toString(16);str=str.substr(str.length-6);hxa="0"+round(255*a).toString(16);hxa=hxa.substr(hxa.length-2);return"#"+function(){switch(mode.toLowerCase()){case"rgba":return str+hxa;case"argb":return hxa+str;default:return str}}()};_input.hex=function(h){return hex2rgb(h)};chroma.hex=function(){return function(func,args,ctor){ctor.prototype=func.prototype;var child=new ctor,result=func.apply(child,args);return Object(result)===result?result:child}(Color,slice.call(arguments).concat(["hex"]),function(){})};Color.prototype.hex=function(mode){null==mode&&(mode="rgb");return rgb2hex(this._rgb,mode)};_guess_formats.push({p:4,test:function(n){if(1===arguments.length&&"string"===type(n))return"hex"}});hsl2rgb=function(){var args,b,c,g,h,i,l,o,r,ref,s,t1,t2,t3;args=unpack(arguments);h=args[0],s=args[1],l=args[2];if(0===s)r=g=b=255*l;else{t3=[0,0,0];c=[0,0,0];t2=l<.5?l*(1+s):l+s-l*s;t1=2*l-t2;h/=360;t3[0]=h+1/3;t3[1]=h;t3[2]=h-1/3;for(i=o=0;o<=2;i=++o){t3[i]<0&&(t3[i]+=1);t3[i]>1&&(t3[i]-=1);6*t3[i]<1?c[i]=t1+6*(t2-t1)*t3[i]:2*t3[i]<1?c[i]=t2:3*t3[i]<2?c[i]=t1+(t2-t1)*(2/3-t3[i])*6:c[i]=t1}ref=[round(255*c[0]),round(255*c[1]),round(255*c[2])],r=ref[0],g=ref[1],b=ref[2]}return args.length>3?[r,g,b,args[3]]:[r,g,b]};rgb2hsl=function(r,g,b){var h,l,min,ref,s;void 0!==r&&r.length>=3&&(ref=r,r=ref[0],g=ref[1],b=ref[2]);r/=255;g/=255;b/=255;min=Math.min(r,g,b);max=Math.max(r,g,b);l=(max+min)/2;if(max===min){s=0;h=Number.NaN}else s=l<.5?(max-min)/(max+min):(max-min)/(2-max-min);r===max?h=(g-b)/(max-min):g===max?h=2+(b-r)/(max-min):b===max&&(h=4+(r-g)/(max-min));h*=60;h<0&&(h+=360);return[h,s,l]};chroma.hsl=function(){return function(func,args,ctor){ctor.prototype=func.prototype;var child=new ctor,result=func.apply(child,args);return Object(result)===result?result:child}(Color,slice.call(arguments).concat(["hsl"]),function(){})};_input.hsl=hsl2rgb;Color.prototype.hsl=function(){return rgb2hsl(this._rgb)};hsv2rgb=function(){var args,b,f,g,h,i,p,q,r,ref,ref1,ref2,ref3,ref4,ref5,s,t,v;args=unpack(arguments);h=args[0],s=args[1],v=args[2];v*=255;if(0===s)r=g=b=v;else{360===h&&(h=0);h>360&&(h-=360);h<0&&(h+=360);h/=60;i=floor(h);f=h-i;p=v*(1-s);q=v*(1-s*f);t=v*(1-s*(1-f));switch(i){case 0:ref=[v,t,p],r=ref[0],g=ref[1],b=ref[2];break;case 1:ref1=[q,v,p],r=ref1[0],g=ref1[1],b=ref1[2];break;case 2:ref2=[p,v,t],r=ref2[0],g=ref2[1],b=ref2[2];break;case 3:ref3=[p,q,v],r=ref3[0],g=ref3[1],b=ref3[2];break;case 4:ref4=[t,p,v],r=ref4[0],g=ref4[1],b=ref4[2];break;case 5:ref5=[v,p,q],r=ref5[0],g=ref5[1],b=ref5[2]}}return[r,g,b,args.length>3?args[3]:1]};rgb2hsv=function(){var b,delta,g,h,min,r,ref,s,v;ref=unpack(arguments),r=ref[0],g=ref[1],b=ref[2];min=Math.min(r,g,b);max=Math.max(r,g,b);delta=max-min;v=max/255;if(0===max){h=Number.NaN;s=0}else{s=delta/max;r===max&&(h=(g-b)/delta);g===max&&(h=2+(b-r)/delta);b===max&&(h=4+(r-g)/delta);h*=60;h<0&&(h+=360)}return[h,s,v]};chroma.hsv=function(){return function(func,args,ctor){ctor.prototype=func.prototype;var child=new ctor,result=func.apply(child,args);return Object(result)===result?result:child}(Color,slice.call(arguments).concat(["hsv"]),function(){})};_input.hsv=hsv2rgb;Color.prototype.hsv=function(){return rgb2hsv(this._rgb)};num2rgb=function(num){var b,g,r;if("number"===type(num)&&num>=0&&num<=16777215){r=num>>16;g=num>>8&255;b=255&num;return[r,g,b,1]}console.warn("unknown num color: "+num);return[0,0,0,1]};rgb2num=function(){var b,g,r,ref;ref=unpack(arguments),r=ref[0],g=ref[1],b=ref[2];return(r<<16)+(g<<8)+b};chroma.num=function(num){return new Color(num,"num")};Color.prototype.num=function(mode){null==mode&&(mode="rgb");return rgb2num(this._rgb,mode)};_input.num=num2rgb;_guess_formats.push({p:1,test:function(n){if(1===arguments.length&&"number"===type(n)&&n>=0&&n<=16777215)return"num"}});hcg2rgb=function(){var _c,_g,args,b,c,f,g,h,i,p,q,r,ref,ref1,ref2,ref3,ref4,ref5,t,v;args=unpack(arguments);h=args[0],c=args[1],_g=args[2];c/=100;g=g/100*255;_c=255*c;if(0===c)r=g=b=_g;else{360===h&&(h=0);h>360&&(h-=360);h<0&&(h+=360);h/=60;i=floor(h);f=h-i;p=_g*(1-c);q=p+_c*(1-f);t=p+_c*f;v=p+_c;switch(i){case 0:ref=[v,t,p],r=ref[0],g=ref[1],b=ref[2];break;case 1:ref1=[q,v,p],r=ref1[0],g=ref1[1],b=ref1[2];break;case 2:ref2=[p,v,t],r=ref2[0],g=ref2[1],b=ref2[2];break;case 3:ref3=[p,q,v],r=ref3[0],g=ref3[1],b=ref3[2];break;case 4:ref4=[t,p,v],r=ref4[0],g=ref4[1],b=ref4[2];break;case 5:ref5=[v,p,q],r=ref5[0],g=ref5[1],b=ref5[2]}}return[r,g,b,args.length>3?args[3]:1]};rgb2hcg=function(){var _g,b,c,delta,g,h,min,r,ref;ref=unpack(arguments),r=ref[0],g=ref[1],b=ref[2];min=Math.min(r,g,b);max=Math.max(r,g,b);delta=max-min;c=100*delta/255;_g=min/(255-delta)*100;if(0===delta)h=Number.NaN;else{r===max&&(h=(g-b)/delta);g===max&&(h=2+(b-r)/delta);b===max&&(h=4+(r-g)/delta);h*=60;h<0&&(h+=360)}return[h,c,_g]};chroma.hcg=function(){return function(func,args,ctor){ctor.prototype=func.prototype;var child=new ctor,result=func.apply(child,args);return Object(result)===result?result:child}(Color,slice.call(arguments).concat(["hcg"]),function(){})};_input.hcg=hcg2rgb;Color.prototype.hcg=function(){return rgb2hcg(this._rgb)};css2rgb=function(css){var aa,ab,hsl,i,m,o,rgb,w;css=css.toLowerCase();if(null!=chroma.colors&&chroma.colors[css])return hex2rgb(chroma.colors[css]);if(m=css.match(/rgb\(\s*(\-?\d+),\s*(\-?\d+)\s*,\s*(\-?\d+)\s*\)/)){rgb=m.slice(1,4);for(i=o=0;o<=2;i=++o)rgb[i]=+rgb[i];rgb[3]=1}else if(m=css.match(/rgba\(\s*(\-?\d+),\s*(\-?\d+)\s*,\s*(\-?\d+)\s*,\s*([01]|[01]?\.\d+)\)/)){rgb=m.slice(1,5);for(i=w=0;w<=3;i=++w)rgb[i]=+rgb[i]}else if(m=css.match(/rgb\(\s*(\-?\d+(?:\.\d+)?)%,\s*(\-?\d+(?:\.\d+)?)%\s*,\s*(\-?\d+(?:\.\d+)?)%\s*\)/)){rgb=m.slice(1,4);for(i=aa=0;aa<=2;i=++aa)rgb[i]=round(2.55*rgb[i]);rgb[3]=1}else if(m=css.match(/rgba\(\s*(\-?\d+(?:\.\d+)?)%,\s*(\-?\d+(?:\.\d+)?)%\s*,\s*(\-?\d+(?:\.\d+)?)%\s*,\s*([01]|[01]?\.\d+)\)/)){rgb=m.slice(1,5);for(i=ab=0;ab<=2;i=++ab)rgb[i]=round(2.55*rgb[i]);rgb[3]=+rgb[3]}else if(m=css.match(/hsl\(\s*(\-?\d+(?:\.\d+)?),\s*(\-?\d+(?:\.\d+)?)%\s*,\s*(\-?\d+(?:\.\d+)?)%\s*\)/)){hsl=m.slice(1,4);hsl[1]*=.01;hsl[2]*=.01;rgb=hsl2rgb(hsl);rgb[3]=1}else if(m=css.match(/hsla\(\s*(\-?\d+(?:\.\d+)?),\s*(\-?\d+(?:\.\d+)?)%\s*,\s*(\-?\d+(?:\.\d+)?)%\s*,\s*([01]|[01]?\.\d+)\)/)){hsl=m.slice(1,4);hsl[1]*=.01;hsl[2]*=.01;rgb=hsl2rgb(hsl);rgb[3]=+m[4]}return rgb};rgb2css=function(rgba){var mode;mode=rgba[3]<1?"rgba":"rgb";if("rgb"===mode)return mode+"("+rgba.slice(0,3).map(round).join(",")+")";if("rgba"===mode)return mode+"("+rgba.slice(0,3).map(round).join(",")+","+rgba[3]+")"};rnd=function(a){return round(100*a)/100};hsl2css=function(hsl,alpha){var mode;mode=alpha<1?"hsla":"hsl";hsl[0]=rnd(hsl[0]||0);hsl[1]=rnd(100*hsl[1])+"%";hsl[2]=rnd(100*hsl[2])+"%";"hsla"===mode&&(hsl[3]=alpha);return mode+"("+hsl.join(",")+")"};_input.css=function(h){return css2rgb(h)};chroma.css=function(){return function(func,args,ctor){ctor.prototype=func.prototype;var child=new ctor,result=func.apply(child,args);return Object(result)===result?result:child}(Color,slice.call(arguments).concat(["css"]),function(){})};Color.prototype.css=function(mode){null==mode&&(mode="rgb");if("rgb"===mode.slice(0,3))return rgb2css(this._rgb);if("hsl"===mode.slice(0,3))return hsl2css(this.hsl(),this.alpha())};_input.named=function(name){return hex2rgb(w3cx11[name])};_guess_formats.push({p:5,test:function(n){if(1===arguments.length&&null!=w3cx11[n])return"named"}});Color.prototype.name=function(n){var h,k;if(arguments.length){w3cx11[n]&&(this._rgb=hex2rgb(w3cx11[n]));this._rgb[3]=1;this}h=this.hex();for(k in w3cx11)if(h===w3cx11[k])return k;return h};lch2lab=function(){var c,h,l,ref;ref=unpack(arguments),l=ref[0],c=ref[1],h=ref[2];h*=DEG2RAD;return[l,cos(h)*c,sin(h)*c]};lch2rgb=function(){var L,a,args,b,c,g,h,l,r,ref,ref1;args=unpack(arguments);l=args[0],c=args[1],h=args[2];ref=lch2lab(l,c,h),L=ref[0],a=ref[1],b=ref[2];ref1=lab2rgb(L,a,b),r=ref1[0],g=ref1[1],b=ref1[2];return[r,g,b,args.length>3?args[3]:1]};lab2lch=function(){var a,b,c,h,l,ref;ref=unpack(arguments),l=ref[0],a=ref[1],b=ref[2];c=sqrt(a*a+b*b);h=(atan2(b,a)*RAD2DEG+360)%360;0===round(1e4*c)&&(h=Number.NaN);return[l,c,h]};rgb2lch=function(){var a,b,g,l,r,ref,ref1;ref=unpack(arguments),r=ref[0],g=ref[1],b=ref[2];ref1=rgb2lab(r,g,b),l=ref1[0],a=ref1[1],b=ref1[2];return lab2lch(l,a,b)};chroma.lch=function(){var args;args=unpack(arguments);return new Color(args,"lch")};chroma.hcl=function(){var args;args=unpack(arguments);return new Color(args,"hcl")};_input.lch=lch2rgb;_input.hcl=function(){var c,h,l,ref;ref=unpack(arguments),h=ref[0],c=ref[1],l=ref[2];return lch2rgb([l,c,h])};Color.prototype.lch=function(){return rgb2lch(this._rgb)};Color.prototype.hcl=function(){return rgb2lch(this._rgb).reverse()};rgb2cmyk=function(mode){var b,c,f,g,k,m,r,ref,y;null==mode&&(mode="rgb");ref=unpack(arguments),r=ref[0],g=ref[1],b=ref[2];r/=255;g/=255;b/=255;k=1-Math.max(r,Math.max(g,b));f=k<1?1/(1-k):0;c=(1-r-k)*f;m=(1-g-k)*f;y=(1-b-k)*f;return[c,m,y,k]};cmyk2rgb=function(){var alpha,args,b,c,g,k,m,r,y;args=unpack(arguments);c=args[0],m=args[1],y=args[2],k=args[3];alpha=args.length>4?args[4]:1;if(1===k)return[0,0,0,alpha];r=c>=1?0:255*(1-c)*(1-k);g=m>=1?0:255*(1-m)*(1-k);b=y>=1?0:255*(1-y)*(1-k);return[r,g,b,alpha]};_input.cmyk=function(){return cmyk2rgb(unpack(arguments))};chroma.cmyk=function(){return function(func,args,ctor){ctor.prototype=func.prototype;var child=new ctor,result=func.apply(child,args);return Object(result)===result?result:child}(Color,slice.call(arguments).concat(["cmyk"]),function(){})};Color.prototype.cmyk=function(){return rgb2cmyk(this._rgb)};_input.gl=function(){var i,k,o,rgb,v;rgb=function(){var ref,results;ref=unpack(arguments);results=[];for(k in ref){v=ref[k];results.push(v)}return results}.apply(this,arguments);for(i=o=0;o<=2;i=++o)rgb[i]*=255;return rgb};chroma.gl=function(){return function(func,args,ctor){ctor.prototype=func.prototype;var child=new ctor,result=func.apply(child,args);return Object(result)===result?result:child}(Color,slice.call(arguments).concat(["gl"]),function(){})};Color.prototype.gl=function(){var rgb;rgb=this._rgb;return[rgb[0]/255,rgb[1]/255,rgb[2]/255,rgb[3]]};rgb2luminance=function(r,g,b){var ref;ref=unpack(arguments),r=ref[0],g=ref[1],b=ref[2];r=luminance_x(r);g=luminance_x(g);b=luminance_x(b);return.2126*r+.7152*g+.0722*b};luminance_x=function(x){x/=255;return x<=.03928?x/12.92:pow((x+.055)/1.055,2.4)};interpolate_rgb=function(col1,col2,f,m){var xyz0,xyz1;xyz0=col1._rgb;xyz1=col2._rgb;return new Color(xyz0[0]+f*(xyz1[0]-xyz0[0]),xyz0[1]+f*(xyz1[1]-xyz0[1]),xyz0[2]+f*(xyz1[2]-xyz0[2]),m)};_interpolators.push(["rgb",interpolate_rgb]);Color.prototype.luminance=function(lum,mode){var cur_lum,eps,max_iter,rgba,test;null==mode&&(mode="rgb");if(!arguments.length)return rgb2luminance(this._rgb);rgba=this._rgb;if(0===lum)rgba=[0,0,0,this._rgb[3]];else if(1===lum)rgba=[255,255,255,this[3]];else{cur_lum=rgb2luminance(this._rgb);eps=1e-7;max_iter=20;test=function(l,h){var lm,m;m=l.interpolate(h,.5,mode);lm=m.luminance();if(Math.abs(lum-lm)<eps||!max_iter--)return m;if(lm>lum)return test(l,m);return test(m,h)};rgba=cur_lum>lum?test(chroma("black"),this).rgba():test(this,chroma("white")).rgba()}return chroma(rgba).alpha(this.alpha())};temperature2rgb=function(kelvin){var b,g,r,temp;temp=kelvin/100;if(temp<66){r=255;g=-155.25485562709179-.44596950469579133*(g=temp-2)+104.49216199393888*log(g);b=temp<20?0:.8274096064007395*(b=temp-10)-254.76935184120902+115.67994401066147*log(b)}else{r=351.97690566805693+.114206453784165*(r=temp-55)-40.25366309332127*log(r);g=325.4494125711974+.07943456536662342*(g=temp-50)-28.0852963507957*log(g);b=255}return[r,g,b]};rgb2temperature=function(){var b,eps,maxTemp,minTemp,r,ref,rgb,temp;ref=unpack(arguments),r=ref[0],ref[1],b=ref[2];minTemp=1e3;maxTemp=4e4;eps=.4;while(maxTemp-minTemp>eps){temp=.5*(maxTemp+minTemp);rgb=temperature2rgb(temp);rgb[2]/rgb[0]>=b/r?maxTemp=temp:minTemp=temp}return round(temp)};chroma.temperature=chroma.kelvin=function(){return function(func,args,ctor){ctor.prototype=func.prototype;var child=new ctor,result=func.apply(child,args);return Object(result)===result?result:child}(Color,slice.call(arguments).concat(["temperature"]),function(){})};_input.temperature=_input.kelvin=_input.K=temperature2rgb;Color.prototype.temperature=function(){return rgb2temperature(this._rgb)};Color.prototype.kelvin=Color.prototype.temperature;chroma.contrast=function(a,b){var l1,l2,ref,ref1;"string"!==(ref=type(a))&&"number"!==ref||(a=new Color(a));"string"!==(ref1=type(b))&&"number"!==ref1||(b=new Color(b));l1=a.luminance();l2=b.luminance();return l1>l2?(l1+.05)/(l2+.05):(l2+.05)/(l1+.05)};chroma.distance=function(a,b,mode){var d,i,l1,l2,ref,ref1,sum_sq;null==mode&&(mode="lab");"string"!==(ref=type(a))&&"number"!==ref||(a=new Color(a));"string"!==(ref1=type(b))&&"number"!==ref1||(b=new Color(b));l1=a.get(mode);l2=b.get(mode);sum_sq=0;for(i in l1){d=(l1[i]||0)-(l2[i]||0);sum_sq+=d*d}return Math.sqrt(sum_sq)};chroma.deltaE=function(a,b,L,C){var L1,L2,a1,a2,b1,b2,c1,c2,c4,dH2,delA,delB,delC,delL,f,h1,ref,ref1,ref2,ref3,sc,sh,sl,t,v1,v2,v3;null==L&&(L=1);null==C&&(C=1);"string"!==(ref=type(a))&&"number"!==ref||(a=new Color(a));"string"!==(ref1=type(b))&&"number"!==ref1||(b=new Color(b));ref2=a.lab(),L1=ref2[0],a1=ref2[1],b1=ref2[2];ref3=b.lab(),L2=ref3[0],a2=ref3[1],b2=ref3[2];c1=sqrt(a1*a1+b1*b1);c2=sqrt(a2*a2+b2*b2);sl=L1<16?.511:.040975*L1/(1+.01765*L1);sc=.0638*c1/(1+.0131*c1)+.638;h1=c1<1e-6?0:180*atan2(b1,a1)/PI;while(h1<0)h1+=360;while(h1>=360)h1-=360;t=h1>=164&&h1<=345?.56+abs(.2*cos(PI*(h1+168)/180)):.36+abs(.4*cos(PI*(h1+35)/180));c4=c1*c1*c1*c1;f=sqrt(c4/(c4+1900));sh=sc*(f*t+1-f);delL=L1-L2;delC=c1-c2;delA=a1-a2;delB=b1-b2;dH2=delA*delA+delB*delB-delC*delC;v1=delL/(L*sl);v2=delC/(C*sc);v3=sh;return sqrt(v1*v1+v2*v2+dH2/(v3*v3))};Color.prototype.get=function(modechan){var channel,i,me,mode,ref,src;me=this;ref=modechan.split("."),mode=ref[0],channel=ref[1];src=me[mode]();if(channel){i=mode.indexOf(channel);return i>-1?src[i]:console.warn("unknown channel "+channel+" in mode "+mode)}return src};Color.prototype.set=function(modechan,value){var channel,i,me,mode,ref,src;me=this;ref=modechan.split("."),mode=ref[0],channel=ref[1];if(channel){src=me[mode]();i=mode.indexOf(channel);if(i>-1)if("string"===type(value))switch(value.charAt(0)){case"+":case"-":src[i]+=+value;break;case"*":src[i]*=+value.substr(1);break;case"/":src[i]/=+value.substr(1);break;default:src[i]=+value}else src[i]=value;else console.warn("unknown channel "+channel+" in mode "+mode)}else src=value;return chroma(src,mode).alpha(me.alpha())};Color.prototype.clipped=function(){return this._rgb._clipped||false};Color.prototype.alpha=function(a){if(arguments.length)return chroma.rgb([this._rgb[0],this._rgb[1],this._rgb[2],a]);return this._rgb[3]};Color.prototype.darken=function(amount){var lab,me;null==amount&&(amount=1);me=this;lab=me.lab();lab[0]-=LAB_CONSTANTS.Kn*amount;return chroma.lab(lab).alpha(me.alpha())};Color.prototype.brighten=function(amount){null==amount&&(amount=1);return this.darken(-amount)};Color.prototype.darker=Color.prototype.darken;Color.prototype.brighter=Color.prototype.brighten;Color.prototype.saturate=function(amount){var lch,me;null==amount&&(amount=1);me=this;lch=me.lch();lch[1]+=amount*LAB_CONSTANTS.Kn;lch[1]<0&&(lch[1]=0);return chroma.lch(lch).alpha(me.alpha())};Color.prototype.desaturate=function(amount){null==amount&&(amount=1);return this.saturate(-amount)};Color.prototype.premultiply=function(){var a,rgb;rgb=this.rgb();a=this.alpha();return chroma(rgb[0]*a,rgb[1]*a,rgb[2]*a,a)};blend=function(bottom,top,mode){if(!blend[mode])throw"unknown blend mode "+mode;return blend[mode](bottom,top)};blend_f=function(f){return function(bottom,top){var c0,c1;c0=chroma(top).rgb();c1=chroma(bottom).rgb();return chroma(f(c0,c1),"rgb")}};each=function(f){return function(c0,c1){var i,o,out;out=[];for(i=o=0;o<=3;i=++o)out[i]=f(c0[i],c1[i]);return out}};normal=function(a,b){return a};multiply=function(a,b){return a*b/255};darken=function(a,b){return a>b?b:a};lighten=function(a,b){return a>b?a:b};screen=function(a,b){return 255*(1-(1-a/255)*(1-b/255))};overlay=function(a,b){return b<128?2*a*b/255:255*(1-2*(1-a/255)*(1-b/255))};burn=function(a,b){return 255*(1-(1-b/255)/(a/255))};dodge=function(a,b){if(255===a)return 255;a=b/255*255/(1-a/255);return a>255?255:a};blend.normal=blend_f(each(normal));blend.multiply=blend_f(each(multiply));blend.screen=blend_f(each(screen));blend.overlay=blend_f(each(overlay));blend.darken=blend_f(each(darken));blend.lighten=blend_f(each(lighten));blend.dodge=blend_f(each(dodge));blend.burn=blend_f(each(burn));chroma.blend=blend;chroma.analyze=function(data){var len,o,r,val;r={min:Number.MAX_VALUE,max:-1*Number.MAX_VALUE,sum:0,values:[],count:0};for(o=0,len=data.length;o<len;o++){val=data[o];if(null!=val&&!isNaN(val)){r.values.push(val);r.sum+=val;val<r.min&&(r.min=val);val>r.max&&(r.max=val);r.count+=1}}r.domain=[r.min,r.max];r.limits=function(mode,num){return chroma.limits(r,mode,num)};return r};chroma.scale=function(colors,positions){var _classes,_colorCache,_colors,_correctLightness,_domain,_gamma,_max,_min,_mode,_nacol,_out,_padding,_pos,_spread,_useCache,f,getClass,getColor,resetCache,setColors,tmap;_mode="rgb";_nacol=chroma("#ccc");_spread=0;false;_domain=[0,1];_pos=[];_padding=[0,0];_classes=false;_colors=[];_out=false;_min=0;_max=1;_correctLightness=false;_colorCache={};_useCache=true;_gamma=1;setColors=function(colors){var c,col,o,ref,ref1,w;null==colors&&(colors=["#fff","#000"]);null!=colors&&"string"===type(colors)&&null!=chroma.brewer&&(colors=chroma.brewer[colors]||chroma.brewer[colors.toLowerCase()]||colors);if("array"===type(colors)){colors=colors.slice(0);for(c=o=0,ref=colors.length-1;0<=ref?o<=ref:o>=ref;c=0<=ref?++o:--o){col=colors[c];"string"===type(col)&&(colors[c]=chroma(col))}_pos.length=0;for(c=w=0,ref1=colors.length-1;0<=ref1?w<=ref1:w>=ref1;c=0<=ref1?++w:--w)_pos.push(c/(colors.length-1))}resetCache();return _colors=colors};getClass=function(value){var i,n;if(null!=_classes){n=_classes.length-1;i=0;while(i<n&&value>=_classes[i])i++;return i-1}return 0};tmap=function(t){return t};(function(value){var i,maxc,minc,n,val;val=value;if(_classes.length>2){n=_classes.length-1;i=getClass(value);minc=_classes[0]+(_classes[1]-_classes[0])*(0+.5*_spread);maxc=_classes[n-1]+(_classes[n]-_classes[n-1])*(1-.5*_spread);val=_min+(_classes[i]+.5*(_classes[i+1]-_classes[i])-minc)/(maxc-minc)*(_max-_min)}return val});getColor=function(val,bypassMap){var c,col,i,k,o,p,ref,t;null==bypassMap&&(bypassMap=false);if(isNaN(val))return _nacol;if(bypassMap)t=val;else if(_classes&&_classes.length>2){c=getClass(val);t=c/(_classes.length-2)}else t=_max!==_min?(val-_min)/(_max-_min):1;bypassMap||(t=tmap(t));1!==_gamma&&(t=pow(t,_gamma));t=_padding[0]+t*(1-_padding[0]-_padding[1]);t=Math.min(1,Math.max(0,t));k=Math.floor(1e4*t);if(_useCache&&_colorCache[k])col=_colorCache[k];else{if("array"===type(_colors))for(i=o=0,ref=_pos.length-1;0<=ref?o<=ref:o>=ref;i=0<=ref?++o:--o){p=_pos[i];if(t<=p){col=_colors[i];break}if(t>=p&&i===_pos.length-1){col=_colors[i];break}if(t>p&&t<_pos[i+1]){t=(t-p)/(_pos[i+1]-p);col=chroma.interpolate(_colors[i],_colors[i+1],t,_mode);break}}else"function"===type(_colors)&&(col=_colors(t));_useCache&&(_colorCache[k]=col)}return col};resetCache=function(){return _colorCache={}};setColors(colors);f=function(v){var c;c=chroma(getColor(v));return _out&&c[_out]?c[_out]():c};f.classes=function(classes){var d;if(null!=classes){if("array"===type(classes)){_classes=classes;_domain=[classes[0],classes[classes.length-1]]}else{d=chroma.analyze(_domain);_classes=0===classes?[d.min,d.max]:chroma.limits(d,"e",classes)}return f}return _classes};f.domain=function(domain){var c,d,k,len,o,ref,w;if(!arguments.length)return _domain;_min=domain[0];_max=domain[domain.length-1];_pos=[];k=_colors.length;if(domain.length===k&&_min!==_max)for(o=0,len=domain.length;o<len;o++){d=domain[o];_pos.push((d-_min)/(_max-_min))}else for(c=w=0,ref=k-1;0<=ref?w<=ref:w>=ref;c=0<=ref?++w:--w)_pos.push(c/(k-1));_domain=[_min,_max];return f};f.mode=function(_m){if(!arguments.length)return _mode;_mode=_m;resetCache();return f};f.range=function(colors,_pos){setColors(colors,_pos);return f};f.out=function(_o){_out=_o;return f};f.spread=function(val){if(!arguments.length)return _spread;_spread=val;return f};f.correctLightness=function(v){null==v&&(v=true);_correctLightness=v;resetCache();tmap=_correctLightness?function(t){var L0,L1,L_actual,L_diff,L_ideal,max_iter,pol,t0,t1;L0=getColor(0,true).lab()[0];L1=getColor(1,true).lab()[0];pol=L0>L1;L_actual=getColor(t,true).lab()[0];L_ideal=L0+(L1-L0)*t;L_diff=L_actual-L_ideal;t0=0;t1=1;max_iter=20;while(Math.abs(L_diff)>.01&&max_iter-- >0)(function(){pol&&(L_diff*=-1);if(L_diff<0){t0=t;t+=.5*(t1-t)}else{t1=t;t+=.5*(t0-t)}L_actual=getColor(t,true).lab()[0];return L_diff=L_actual-L_ideal})();return t}:function(t){return t};return f};f.padding=function(p){if(null!=p){"number"===type(p)&&(p=[p,p]);_padding=p;return f}return _padding};f.colors=function(numColors,out){var dd,dm,i,ref,result,results,samples,w;arguments.length<2&&(out="hex");result=[];if(0===arguments.length)result=_colors.slice(0);else if(1===numColors)result=[f(.5)];else if(numColors>1){dm=_domain[0];dd=_domain[1]-dm;result=function(){results=[];for(var o=0;0<=numColors?o<numColors:o>numColors;0<=numColors?o++:o--)results.push(o);return results}.apply(this).map(function(i){return f(dm+i/(numColors-1)*dd)})}else{colors=[];samples=[];if(_classes&&_classes.length>2)for(i=w=1,ref=_classes.length;1<=ref?w<ref:w>ref;i=1<=ref?++w:--w)samples.push(.5*(_classes[i-1]+_classes[i]));else samples=_domain;result=samples.map(function(v){return f(v)})}chroma[out]&&(result=result.map(function(c){return c[out]()}));return result};f.cache=function(c){if(null!=c){_useCache=c;return f}return _useCache};f.gamma=function(g){if(null!=g){_gamma=g;return f}return _gamma};return f};null==chroma.scales&&(chroma.scales={});chroma.scales.cool=function(){return chroma.scale([chroma.hsl(180,1,.9),chroma.hsl(250,.7,.4)])};chroma.scales.hot=function(){return chroma.scale(["#000","#f00","#ff0","#fff"],[0,.25,.75,1]).mode("rgb")};chroma.analyze=function(data,key,filter){var add,k,len,o,r,val,visit;r={min:Number.MAX_VALUE,max:-1*Number.MAX_VALUE,sum:0,values:[],count:0};null==filter&&(filter=function(){return true});add=function(val){if(null!=val&&!isNaN(val)){r.values.push(val);r.sum+=val;val<r.min&&(r.min=val);val>r.max&&(r.max=val);r.count+=1}};visit=function(val,k){if(filter(val,k))return null!=key&&"function"===type(key)?add(key(val)):null!=key&&"string"===type(key)||"number"===type(key)?add(val[key]):add(val)};if("array"===type(data))for(o=0,len=data.length;o<len;o++){val=data[o];visit(val)}else for(k in data){val=data[k];visit(val,k)}r.domain=[r.min,r.max];r.limits=function(mode,num){return chroma.limits(r,mode,num)};return r};chroma.limits=function(data,mode,num){var aa,ab,ac,ad,ae,af,ag,ah,ai,aj,ak,al,am,assignments,best,centroids,cluster,clusterSizes,dist,i,j,kClusters,limits,max_log,min,min_log,mindist,n,nb_iters,newCentroids,o,p,pb,pr,ref,ref1,ref10,ref11,ref12,ref13,ref14,ref2,ref3,ref4,ref5,ref6,ref7,ref8,ref9,repeat,tmpKMeansBreaks,v,value,values,w;null==mode&&(mode="equal");null==num&&(num=7);"array"===type(data)&&(data=chroma.analyze(data));min=data.min;max=data.max;data.sum;values=data.values.sort(function(a,b){return a-b});if(1===num)return[min,max];limits=[];if("c"===mode.substr(0,1)){limits.push(min);limits.push(max)}if("e"===mode.substr(0,1)){limits.push(min);for(i=o=1,ref=num-1;1<=ref?o<=ref:o>=ref;i=1<=ref?++o:--o)limits.push(min+i/num*(max-min));limits.push(max)}else if("l"===mode.substr(0,1)){if(min<=0)throw"Logarithmic scales are only possible for values > 0";min_log=Math.LOG10E*log(min);max_log=Math.LOG10E*log(max);limits.push(min);for(i=w=1,ref1=num-1;1<=ref1?w<=ref1:w>=ref1;i=1<=ref1?++w:--w)limits.push(pow(10,min_log+i/num*(max_log-min_log)));limits.push(max)}else if("q"===mode.substr(0,1)){limits.push(min);for(i=aa=1,ref2=num-1;1<=ref2?aa<=ref2:aa>=ref2;i=1<=ref2?++aa:--aa){p=(values.length-1)*i/num;pb=floor(p);if(pb===p)limits.push(values[pb]);else{pr=p-pb;limits.push(values[pb]*(1-pr)+values[pb+1]*pr)}}limits.push(max)}else if("k"===mode.substr(0,1)){n=values.length;assignments=new Array(n);clusterSizes=new Array(num);repeat=true;nb_iters=0;centroids=null;centroids=[];centroids.push(min);for(i=ab=1,ref3=num-1;1<=ref3?ab<=ref3:ab>=ref3;i=1<=ref3?++ab:--ab)centroids.push(min+i/num*(max-min));centroids.push(max);while(repeat){for(j=ac=0,ref4=num-1;0<=ref4?ac<=ref4:ac>=ref4;j=0<=ref4?++ac:--ac)clusterSizes[j]=0;for(i=ad=0,ref5=n-1;0<=ref5?ad<=ref5:ad>=ref5;i=0<=ref5?++ad:--ad){value=values[i];mindist=Number.MAX_VALUE;for(j=ae=0,ref6=num-1;0<=ref6?ae<=ref6:ae>=ref6;j=0<=ref6?++ae:--ae){dist=abs(centroids[j]-value);if(dist<mindist){mindist=dist;best=j}}clusterSizes[best]++;assignments[i]=best}newCentroids=new Array(num);for(j=af=0,ref7=num-1;0<=ref7?af<=ref7:af>=ref7;j=0<=ref7?++af:--af)newCentroids[j]=null;for(i=ag=0,ref8=n-1;0<=ref8?ag<=ref8:ag>=ref8;i=0<=ref8?++ag:--ag){cluster=assignments[i];null===newCentroids[cluster]?newCentroids[cluster]=values[i]:newCentroids[cluster]+=values[i]}for(j=ah=0,ref9=num-1;0<=ref9?ah<=ref9:ah>=ref9;j=0<=ref9?++ah:--ah)newCentroids[j]*=1/clusterSizes[j];repeat=false;for(j=ai=0,ref10=num-1;0<=ref10?ai<=ref10:ai>=ref10;j=0<=ref10?++ai:--ai)if(newCentroids[j]!==centroids[i]){repeat=true;break}centroids=newCentroids;nb_iters++;nb_iters>200&&(repeat=false)}kClusters={};for(j=aj=0,ref11=num-1;0<=ref11?aj<=ref11:aj>=ref11;j=0<=ref11?++aj:--aj)kClusters[j]=[];for(i=ak=0,ref12=n-1;0<=ref12?ak<=ref12:ak>=ref12;i=0<=ref12?++ak:--ak){cluster=assignments[i];kClusters[cluster].push(values[i])}tmpKMeansBreaks=[];for(j=al=0,ref13=num-1;0<=ref13?al<=ref13:al>=ref13;j=0<=ref13?++al:--al){tmpKMeansBreaks.push(kClusters[j][0]);tmpKMeansBreaks.push(kClusters[j][kClusters[j].length-1])}tmpKMeansBreaks=tmpKMeansBreaks.sort(function(a,b){return a-b});limits.push(tmpKMeansBreaks[0]);for(i=am=1,ref14=tmpKMeansBreaks.length-1;am<=ref14;i=am+=2){v=tmpKMeansBreaks[i];isNaN(v)||-1!==limits.indexOf(v)||limits.push(v)}}return limits};hsi2rgb=function(h,s,i){var args,b,g,r;args=unpack(arguments);h=args[0],s=args[1],i=args[2];isNaN(h)&&(h=0);h/=360;if(h<1/3){b=(1-s)/3;r=(1+s*cos(TWOPI*h)/cos(PITHIRD-TWOPI*h))/3;g=1-(b+r)}else if(h<2/3){h-=1/3;r=(1-s)/3;g=(1+s*cos(TWOPI*h)/cos(PITHIRD-TWOPI*h))/3;b=1-(r+g)}else{h-=2/3;g=(1-s)/3;b=(1+s*cos(TWOPI*h)/cos(PITHIRD-TWOPI*h))/3;r=1-(g+b)}r=limit(i*r*3);g=limit(i*g*3);b=limit(i*b*3);return[255*r,255*g,255*b,args.length>3?args[3]:1]};rgb2hsi=function(){var b,g,h,i,min,r,ref,s;ref=unpack(arguments),r=ref[0],g=ref[1],b=ref[2];TWOPI=2*Math.PI;r/=255;g/=255;b/=255;min=Math.min(r,g,b);i=(r+g+b)/3;s=1-min/i;if(0===s)h=0;else{h=(r-g+(r-b))/2;h/=Math.sqrt((r-g)*(r-g)+(r-b)*(g-b));h=Math.acos(h);b>g&&(h=TWOPI-h);h/=TWOPI}return[360*h,s,i]};chroma.hsi=function(){return function(func,args,ctor){ctor.prototype=func.prototype;var child=new ctor,result=func.apply(child,args);return Object(result)===result?result:child}(Color,slice.call(arguments).concat(["hsi"]),function(){})};_input.hsi=hsi2rgb;Color.prototype.hsi=function(){return rgb2hsi(this._rgb)};interpolate_hsx=function(col1,col2,f,m){var dh,hue,hue0,hue1,lbv,lbv0,lbv1,sat,sat0,sat1,xyz0,xyz1;if("hsl"===m){xyz0=col1.hsl();xyz1=col2.hsl()}else if("hsv"===m){xyz0=col1.hsv();xyz1=col2.hsv()}else if("hcg"===m){xyz0=col1.hcg();xyz1=col2.hcg()}else if("hsi"===m){xyz0=col1.hsi();xyz1=col2.hsi()}else if("lch"===m||"hcl"===m){m="hcl";xyz0=col1.hcl();xyz1=col2.hcl()}if("h"===m.substr(0,1)){hue0=xyz0[0],sat0=xyz0[1],lbv0=xyz0[2];hue1=xyz1[0],sat1=xyz1[1],lbv1=xyz1[2]}if(isNaN(hue0)||isNaN(hue1))if(isNaN(hue0))if(isNaN(hue1))hue=Number.NaN;else{hue=hue1;1!==lbv0&&0!==lbv0||"hsv"===m||(sat=sat1)}else{hue=hue0;1!==lbv1&&0!==lbv1||"hsv"===m||(sat=sat0)}else{dh=hue1>hue0&&hue1-hue0>180?hue1-(hue0+360):hue1<hue0&&hue0-hue1>180?hue1+360-hue0:hue1-hue0;hue=hue0+f*dh}null==sat&&(sat=sat0+f*(sat1-sat0));lbv=lbv0+f*(lbv1-lbv0);return chroma[m](hue,sat,lbv)};_interpolators=_interpolators.concat(function(){var len,o,ref,results;ref=["hsv","hsl","hsi","hcl","lch","hcg"];results=[];for(o=0,len=ref.length;o<len;o++){m=ref[o];results.push([m,interpolate_hsx])}return results}());interpolate_num=function(col1,col2,f,m){var n1,n2;n1=col1.num();n2=col2.num();return chroma.num(n1+(n2-n1)*f,"num")};_interpolators.push(["num",interpolate_num]);interpolate_lab=function(col1,col2,f,m){var xyz0,xyz1;xyz0=col1.lab();xyz1=col2.lab();return new Color(xyz0[0]+f*(xyz1[0]-xyz0[0]),xyz0[1]+f*(xyz1[1]-xyz0[1]),xyz0[2]+f*(xyz1[2]-xyz0[2]),m)};_interpolators.push(["lab",interpolate_lab])}).call(this)}).call(exports,__webpack_require__(66)(module))},6180:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.ItemGrid=void 0;var _recompose=__webpack_require__(24);var _item_grid=__webpack_require__(6181);exports.ItemGrid=(0,_recompose.pure)(_item_grid.ItemGrid)},6181:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.ItemGrid=void 0;var _react=__webpack_require__(0);var _react2=_interopRequireDefault(_react);var _propTypes=__webpack_require__(4);var _propTypes2=_interopRequireDefault(_propTypes);var _lodash=__webpack_require__(1);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var defaultPerRow=6;var ItemGrid=exports.ItemGrid=function ItemGrid(_ref){var items=_ref.items,itemsPerRow=_ref.itemsPerRow,children=_ref.children;if(!items)return null;var rows=items.reduce(function(rows,item){(0,_lodash.last)(rows).length>=(itemsPerRow||defaultPerRow)&&rows.push([]);(0,_lodash.last)(rows).push(children({item:item}));return rows},[[]]);return rows.map(function(row,i){return _react2.default.createElement("div",{key:"item-grid-row-"+i,className:"item-grid-row"},row)})};ItemGrid.propTypes={items:_propTypes2.default.array.isRequired,itemsPerRow:_propTypes2.default.oneOfType([_propTypes2.default.number,_propTypes2.default.string]),children:_propTypes2.default.func.isRequired}},6182:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.ColorManager=void 0;var _recompose=__webpack_require__(24);var _color_manager=__webpack_require__(6183);exports.ColorManager=(0,_recompose.compose)((0,_recompose.withState)("adding","setAdding",false))(_color_manager.ColorManager)},6183:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.ColorManager=void 0;var _react=__webpack_require__(0);var _react2=_interopRequireDefault(_react);var _propTypes=__webpack_require__(4);var _propTypes2=_interopRequireDefault(_propTypes);var _eui=__webpack_require__(2);var _color_dot=__webpack_require__(2083);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var ColorManager=exports.ColorManager=function ColorManager(_ref){var value=_ref.value,addColor=_ref.addColor,removeColor=_ref.removeColor,_onChange=_ref.onChange;return _react2.default.createElement(_eui.EuiFlexGroup,{gutterSize:"xs",alignItems:"center"},_react2.default.createElement(_eui.EuiFlexItem,{grow:1},_react2.default.createElement(_color_dot.ColorDot,{value:value})),_react2.default.createElement(_eui.EuiFlexItem,{grow:5,style:{display:"inline-block"}},_react2.default.createElement(_eui.EuiFieldText,{compressed:true,value:value||"",placeholder:"#hex color",onChange:function onChange(e){return _onChange(e.target.value)}})),(addColor||removeColor)&&_react2.default.createElement(_eui.EuiFlexItem,{grow:false},addColor&&_react2.default.createElement(_eui.EuiButtonIcon,{"aria-label":"Add Color",iconType:"plusInCircle",onClick:function onClick(){return addColor(value)}}),removeColor&&_react2.default.createElement(_eui.EuiButtonIcon,{"aria-label":"Remove Color",iconType:"minusInCircle",onClick:function onClick(){return removeColor(value)}})))};ColorManager.propTypes={value:_propTypes2.default.string,addColor:_propTypes2.default.func,removeColor:_propTypes2.default.func,onChange:_propTypes2.default.func.isRequired}},6184:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.WorkpadColorPicker=void 0;var _reactRedux=__webpack_require__(19);var _workpad=__webpack_require__(54);var _workpad2=__webpack_require__(233);var _workpad_color_picker=__webpack_require__(6185);var mapStateToProps=function mapStateToProps(state){return{colors:(0,_workpad.getWorkpadColors)(state)}};var mapDispatchToProps={addColor:_workpad2.addColor,removeColor:_workpad2.removeColor};exports.WorkpadColorPicker=(0,_reactRedux.connect)(mapStateToProps,mapDispatchToProps)(_workpad_color_picker.WorkpadColorPicker)},6185:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.WorkpadColorPicker=void 0;var _react=__webpack_require__(0);var _react2=_interopRequireDefault(_react);var _propTypes=__webpack_require__(4);var _propTypes2=_interopRequireDefault(_propTypes);var _color_picker=__webpack_require__(2081);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var WorkpadColorPicker=exports.WorkpadColorPicker=function WorkpadColorPicker(_ref){var onChange=_ref.onChange,value=_ref.value,colors=_ref.colors,addColor=_ref.addColor,removeColor=_ref.removeColor;return _react2.default.createElement("div",null,_react2.default.createElement(_color_picker.ColorPicker,{onChange:onChange,value:value,colors:colors,addColor:addColor,removeColor:removeColor}))};WorkpadColorPicker.propTypes={value:_propTypes2.default.string,onChange:_propTypes2.default.func,colors:_propTypes2.default.array,addColor:_propTypes2.default.func,removeColor:_propTypes2.default.func}},6186:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.WorkpadConfig=void 0;var _reactRedux=__webpack_require__(19);var _lodash=__webpack_require__(1);var _workpad=__webpack_require__(233);var _workpad2=__webpack_require__(54);var _workpad_config=__webpack_require__(6187);var mapStateToProps=function mapStateToProps(state){var workpad=(0,_workpad2.getWorkpad)(state);return{name:(0,_lodash.get)(workpad,"name"),size:{width:(0,_lodash.get)(workpad,"width"),height:(0,_lodash.get)(workpad,"height")}}};var mapDispatchToProps={setSize:function setSize(size){return(0,_workpad.sizeWorkpad)(size)},setName:function setName(name){return(0,_workpad.setName)(name)}};exports.WorkpadConfig=(0,_reactRedux.connect)(mapStateToProps,mapDispatchToProps)(_workpad_config.WorkpadConfig)},6187:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.WorkpadConfig=void 0;var _react=__webpack_require__(0);var _react2=_interopRequireDefault(_react);var _propTypes=__webpack_require__(4);var _propTypes2=_interopRequireDefault(_propTypes);var _eui=__webpack_require__(2);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var WorkpadConfig=exports.WorkpadConfig=function WorkpadConfig(_ref){var size=_ref.size,name=_ref.name,setSize=_ref.setSize,setName=_ref.setName;var rotate=function rotate(){return setSize({width:size.height,height:size.width})};var badges=[{name:"1080p",size:{height:1080,width:1920}},{name:"720p",size:{height:720,width:1280}},{name:"A4",size:{height:842,width:590}},{name:"US Letter",size:{height:792,width:612}}];return _react2.default.createElement("div",null,_react2.default.createElement(_eui.EuiTitle,{size:"xs"},_react2.default.createElement("h4",null,"Workpad")),_react2.default.createElement(_eui.EuiSpacer,{size:"m"}),_react2.default.createElement(_eui.EuiFormRow,{label:"Name",compressed:true},_react2.default.createElement(_eui.EuiFieldText,{value:name,onChange:function onChange(e){return setName(e.target.value)}})),_react2.default.createElement(_eui.EuiFlexGroup,{gutterSize:"s",alignItems:"center"},_react2.default.createElement(_eui.EuiFlexItem,null,_react2.default.createElement(_eui.EuiFormRow,{label:"Width",compressed:true},_react2.default.createElement(_eui.EuiFieldNumber,{onChange:function onChange(e){return setSize({width:Number(e.target.value),height:size.height})},value:size.width}))),_react2.default.createElement(_eui.EuiFlexItem,{grow:false},_react2.default.createElement(_eui.EuiFormRow,{hasEmptyLabelSpace:true},_react2.default.createElement(_eui.EuiToolTip,{position:"bottom",content:"Flip the width and height"},_react2.default.createElement(_eui.EuiButtonIcon,{iconType:"merge",color:"text",onClick:rotate,"aria-label":"Swap Page Dimensions",style:{marginBottom:12}})))),_react2.default.createElement(_eui.EuiFlexItem,null,_react2.default.createElement(_eui.EuiFormRow,{label:"Height",compressed:true},_react2.default.createElement(_eui.EuiFieldNumber,{onChange:function onChange(e){return setSize({height:Number(e.target.value),width:size.width})},value:size.height})))),_react2.default.createElement(_eui.EuiSpacer,{size:"m"}),_react2.default.createElement("div",null,badges.map(function(badge,i){return _react2.default.createElement(_eui.EuiBadge,{key:"page-size-badge-"+i,color:"hollow",onClick:function onClick(){return setSize(badge.size)},"aria-label":"Preset Page Size: "+badge.name,onClickAriaLabel:"Set page size to "+badge.name},badge.name)})))};WorkpadConfig.propTypes={size:_propTypes2.default.object.isRequired,name:_propTypes2.default.string.isRequired,setSize:_propTypes2.default.func.isRequired,setName:_propTypes2.default.func.isRequired}},6188:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.Toolbar=void 0;var _reactRedux=__webpack_require__(19);var _propTypes=__webpack_require__(4);var _propTypes2=_interopRequireDefault(_propTypes);var _recompose=__webpack_require__(24);var _workpad=__webpack_require__(54);var _toolbar=__webpack_require__(6189);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var mapStateToProps=function mapStateToProps(state){return{workpadName:(0,_workpad.getWorkpadName)(state),workpadId:(0,_workpad.getWorkpad)(state).id,totalPages:(0,_workpad.getWorkpad)(state).pages.length,selectedPageNumber:(0,_workpad.getSelectedPageIndex)(state)+1,selectedElement:(0,_workpad.getSelectedElement)(state)}};exports.Toolbar=(0,_recompose.compose)((0,_reactRedux.connect)(mapStateToProps),(0,_recompose.getContext)({router:_propTypes2.default.object}),(0,_recompose.withHandlers)({nextPage:function nextPage(props){return function(){var pageNumber=Math.min(props.selectedPageNumber+1,props.totalPages);props.router.navigateTo("loadWorkpad",{id:props.workpadId,page:pageNumber})}},previousPage:function previousPage(props){return function(){var pageNumber=Math.max(1,props.selectedPageNumber-1);props.router.navigateTo("loadWorkpad",{id:props.workpadId,page:pageNumber})}}}),(0,_recompose.withState)("tray","setTray",function(props){return props.tray}))(_toolbar.Toolbar)},6189:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.Toolbar=void 0;var _react=__webpack_require__(0);var _react2=_interopRequireDefault(_react);var _propTypes=__webpack_require__(4);var _propTypes2=_interopRequireDefault(_propTypes);var _eui=__webpack_require__(2);var _navbar=__webpack_require__(6190);var _workpad_loader=__webpack_require__(2075);var _page_manager=__webpack_require__(6192);var _expression=__webpack_require__(6211);var _tray=__webpack_require__(6223);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var Toolbar=exports.Toolbar=function Toolbar(props){var selectedElement=props.selectedElement,tray=props.tray,setTray=props.setTray,previousPage=props.previousPage,nextPage=props.nextPage,selectedPageNumber=props.selectedPageNumber,workpadName=props.workpadName,totalPages=props.totalPages;var elementIsSelected=Boolean(selectedElement);var done=function done(){return setTray(null)};var showHideTray=function showHideTray(exp){if(tray&&tray===exp)return done();setTray(exp)};var workpadLoader=_react2.default.createElement(_eui.EuiOverlayMask,null,_react2.default.createElement(_eui.EuiModal,{onClose:done,className:"canvasModal--fixedSize",maxWidth:"1000px"},_react2.default.createElement(_workpad_loader.WorkpadLoader,{onClose:done}),_react2.default.createElement(_eui.EuiModalFooter,null,_react2.default.createElement(_eui.EuiButton,{size:"s",onClick:done},"Dismiss"))));var trays={pageManager:_react2.default.createElement(_page_manager.PageManager,{previousPage:previousPage}),workpadloader:workpadLoader,expression:elementIsSelected?_react2.default.createElement(_expression.Expression,{done:done}):null};return _react2.default.createElement("div",{className:"canvasToolbar hide-for-sharing"},trays[tray]&&_react2.default.createElement(_tray.Tray,{done:done},trays[tray]),_react2.default.createElement(_navbar.Navbar,null,_react2.default.createElement(_eui.EuiFlexGroup,{alignItems:"center",gutterSize:"none",className:"canvasToolbar__controls"},_react2.default.createElement(_eui.EuiFlexItem,{grow:false},_react2.default.createElement(_eui.EuiButtonEmpty,{color:"text",iconType:"grid",onClick:function onClick(){return showHideTray("workpadloader")}},workpadName)),_react2.default.createElement(_eui.EuiFlexItem,{grow:false}),_react2.default.createElement(_eui.EuiFlexItem,{grow:false},_react2.default.createElement(_eui.EuiButtonIcon,{color:"text",onClick:previousPage,iconType:"arrowLeft",disabled:selectedPageNumber<=1,"aria-label":"Previous Page"})),_react2.default.createElement(_eui.EuiFlexItem,{grow:false},_react2.default.createElement(_eui.EuiButtonEmpty,{color:"text",onClick:function onClick(){return showHideTray("pageManager")}},"Page ",selectedPageNumber,totalPages>1?" of "+totalPages:null)),_react2.default.createElement(_eui.EuiFlexItem,{grow:false},_react2.default.createElement(_eui.EuiButtonIcon,{color:"text",onClick:nextPage,iconType:"arrowRight",disabled:selectedPageNumber>=totalPages,"aria-label":"Next Page"})),_react2.default.createElement(_eui.EuiFlexItem,null),elementIsSelected&&_react2.default.createElement(_eui.EuiFlexItem,{grow:false},_react2.default.createElement(_eui.EuiButtonEmpty,{color:"text",iconType:"editorCodeBlock",onClick:function onClick(){return showHideTray("expression")}},"Expression editor")))))};Toolbar.propTypes={workpadName:_propTypes2.default.string,tray:_propTypes2.default.node,setTray:_propTypes2.default.func.isRequired,nextPage:_propTypes2.default.func.isRequired,previousPage:_propTypes2.default.func.isRequired,selectedPageNumber:_propTypes2.default.number.isRequired,totalPages:_propTypes2.default.number.isRequired,selectedElement:_propTypes2.default.object}},6190:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.Navbar=void 0;var _recompose=__webpack_require__(24);var _navbar=__webpack_require__(6191);exports.Navbar=(0,_recompose.pure)(_navbar.Navbar)},6191:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.Navbar=void 0;var _react=__webpack_require__(0);var _react2=_interopRequireDefault(_react);var _propTypes=__webpack_require__(4);var _propTypes2=_interopRequireDefault(_propTypes);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var Navbar=exports.Navbar=function Navbar(_ref){var children=_ref.children;return _react2.default.createElement("div",{className:"canvasNavbar"},children)};Navbar.propTypes={children:_propTypes2.default.node}},6192:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.PageManager=void 0;var _reactRedux=__webpack_require__(19);var _recompose=__webpack_require__(24);var _pages=__webpack_require__(441);var pageActions=_interopRequireWildcard(_pages);var _app=__webpack_require__(119);var _workpad=__webpack_require__(54);var _page_manager=__webpack_require__(6193);function _interopRequireWildcard(obj){if(obj&&obj.__esModule)return obj;var newObj={};if(null!=obj)for(var key in obj)Object.prototype.hasOwnProperty.call(obj,key)&&(newObj[key]=obj[key]);newObj.default=obj;return newObj}var mapStateToProps=function mapStateToProps(state){return{isWriteable:(0,_workpad.isWriteable)(state)&&(0,_app.canUserWrite)(state),pages:(0,_workpad.getPages)(state),selectedPage:(0,_workpad.getSelectedPage)(state),workpadId:(0,_workpad.getWorkpad)(state).id}};var mapDispatchToProps=function mapDispatchToProps(dispatch){return{addPage:function addPage(){return dispatch(pageActions.addPage())},movePage:function movePage(id,position){return dispatch(pageActions.movePage(id,position))},duplicatePage:function duplicatePage(id){return dispatch(pageActions.duplicatePage(id))},removePage:function removePage(id){return dispatch(pageActions.removePage(id))}}};exports.PageManager=(0,_recompose.compose)((0,_reactRedux.connect)(mapStateToProps,mapDispatchToProps),(0,_recompose.withState)("deleteId","setDeleteId",null))(_page_manager.PageManager)},6193:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.PageManager=void 0;var _extends=Object.assign||function(target){for(var i=1;i<arguments.length;i++){var source=arguments[i];for(var key in source)Object.prototype.hasOwnProperty.call(source,key)&&(target[key]=source[key])}return target};var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;"value"in descriptor&&(descriptor.writable=true);Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){protoProps&&defineProperties(Constructor.prototype,protoProps);staticProps&&defineProperties(Constructor,staticProps);return Constructor}}();var _react=__webpack_require__(0);var _react2=_interopRequireDefault(_react);var _propTypes=__webpack_require__(4);var _propTypes2=_interopRequireDefault(_propTypes);var _eui=__webpack_require__(2);var _reactBeautifulDnd=__webpack_require__(6194);var _confirm_modal=__webpack_require__(1177);var _link=__webpack_require__(1178);var _page_preview=__webpack_require__(6206);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(self,call){if(!self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!call||"object"!==typeof call&&"function"!==typeof call?self:call}function _inherits(subClass,superClass){if("function"!==typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function, not "+typeof superClass);subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:false,writable:true,configurable:true}});superClass&&(Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass)}var PageManager=exports.PageManager=function(_React$PureComponent){_inherits(PageManager,_React$PureComponent);function PageManager(){var _ref;var _temp,_this,_ret;_classCallCheck(this,PageManager);for(var _len=arguments.length,args=Array(_len),_key=0;_key<_len;_key++)args[_key]=arguments[_key];return _ret=(_temp=(_this=_possibleConstructorReturn(this,(_ref=PageManager.__proto__||Object.getPrototypeOf(PageManager)).call.apply(_ref,[this].concat(args))),_this),_this.state={showTrayPop:true},_this.scrollToActivePage=function(){if(_this.activePageRef&&_this.pageListRef){if(!_this.pageListRef.scrollTo)return;var pageOffset=_this.activePageRef.offsetLeft;var _this$activePageRef$g=_this.activePageRef.getBoundingClientRect(),pageLeft=_this$activePageRef$g.left,pageRight=_this$activePageRef$g.right,pageWidth=_this$activePageRef$g.width;var _this$pageListRef$get=_this.pageListRef.getBoundingClientRect(),listLeft=_this$pageListRef$get.left,listRight=_this$pageListRef$get.right,listWidth=_this$pageListRef$get.width;pageLeft<listLeft&&_this.pageListRef.scrollTo({left:pageOffset,behavior:"smooth"});pageRight>listRight&&_this.pageListRef.scrollTo({left:pageOffset-listWidth+pageWidth,behavior:"smooth"})}},_this.confirmDelete=function(pageId){_this._isMounted&&_this.props.setDeleteId(pageId)},_this.resetDelete=function(){return _this._isMounted&&_this.props.setDeleteId(null)},_this.doDelete=function(){var _this$props=_this.props,previousPage=_this$props.previousPage,removePage=_this$props.removePage,deleteId=_this$props.deleteId,selectedPage=_this$props.selectedPage;_this.resetDelete();deleteId===selectedPage&&previousPage();removePage(deleteId)},_this.onDragEnd=function(_ref2){var pageId=_ref2.draggableId,source=_ref2.source,destination=_ref2.destination;if(!destination)return;var position=destination.index-source.index;_this.props.movePage(pageId,position)},_this.renderPage=function(page,i){var _this$props2=_this.props,isWriteable=_this$props2.isWriteable,selectedPage=_this$props2.selectedPage,workpadId=_this$props2.workpadId,movePage=_this$props2.movePage,duplicatePage=_this$props2.duplicatePage;var pageNumber=i+1;return _react2.default.createElement(_reactBeautifulDnd.Draggable,{key:page.id,draggableId:page.id,index:i,isDragDisabled:!isWriteable},function(provided){return _react2.default.createElement("div",_extends({key:page.id,className:"canvasPageManager__page "+(page.id===selectedPage?"canvasPageManager__page-isActive":""),ref:function ref(el){page.id===selectedPage&&(_this.activePageRef=el);provided.innerRef(el)}},provided.draggableProps,provided.dragHandleProps),_react2.default.createElement(_eui.EuiFlexGroup,{gutterSize:"s"},_react2.default.createElement(_eui.EuiFlexItem,{grow:false},_react2.default.createElement(_eui.EuiText,{size:"xs",className:"canvasPageManager__pageNumber"},pageNumber)),_react2.default.createElement(_eui.EuiFlexItem,{grow:false},_react2.default.createElement(_link.Link,{name:"loadWorkpad",params:{id:workpadId,page:pageNumber},"aria-label":"Load page number "+pageNumber},_react2.default.createElement(_page_preview.PagePreview,{isWriteable:isWriteable,page:page,height:100,pageNumber:pageNumber,movePage:movePage,selectedPage:selectedPage,duplicatePage:duplicatePage,confirmDelete:_this.confirmDelete})))))})},_temp),_possibleConstructorReturn(_this,_ret)}_createClass(PageManager,[{key:"componentDidMount",value:function componentDidMount(){var _this2=this;this._isMounted=true;setTimeout(function(){_this2.scrollToActivePage();_this2._isMounted&&_this2.setState({showTrayPop:false})},1e3)}},{key:"componentDidUpdate",value:function componentDidUpdate(prevProps){prevProps.selectedPage!==this.props.selectedPage&&setTimeout(this.scrollToActivePage,0)}},{key:"componentWillUnmount",value:function componentWillUnmount(){this._isMounted=false}},{key:"render",value:function render(){var _this3=this;var _props=this.props,pages=_props.pages,addPage=_props.addPage,deleteId=_props.deleteId,isWriteable=_props.isWriteable;var showTrayPop=this.state.showTrayPop;return _react2.default.createElement(_react.Fragment,null,_react2.default.createElement(_eui.EuiFlexGroup,{gutterSize:"none",className:"canvasPageManager"},_react2.default.createElement(_eui.EuiFlexItem,{className:"canvasPageManager__pages"},_react2.default.createElement(_reactBeautifulDnd.DragDropContext,{onDragEnd:this.onDragEnd},_react2.default.createElement(_reactBeautifulDnd.Droppable,{droppableId:"droppable-page-manager",direction:"horizontal"},function(provided){return _react2.default.createElement("div",_extends({className:"canvasPageManager__pageList "+(showTrayPop?"canvasPageManager--trayPop":""),ref:function ref(el){_this3.pageListRef=el;provided.innerRef(el)}},provided.droppableProps),pages.map(_this3.renderPage),provided.placeholder)}))),isWriteable&&_react2.default.createElement(_eui.EuiFlexItem,{grow:false},_react2.default.createElement(_eui.EuiToolTip,{anchorClassName:"canvasPageManager__addPageTip",content:"Add a new page to this workpad",position:"left"},_react2.default.createElement("button",{onClick:addPage,className:"canvasPageManager__addPage"},_react2.default.createElement(_eui.EuiIcon,{color:"ghost",type:"plusInCircle",size:"l"}))))),_react2.default.createElement(_confirm_modal.ConfirmModal,{isOpen:null!=deleteId,title:"Remove Page",message:"Are you sure you want to remove this page?",confirmButtonText:"Remove",onConfirm:this.doDelete,onCancel:this.resetDelete}))}}]);return PageManager}(_react2.default.PureComponent);PageManager.propTypes={isWriteable:_propTypes2.default.bool.isRequired,pages:_propTypes2.default.array.isRequired,workpadId:_propTypes2.default.string.isRequired,addPage:_propTypes2.default.func.isRequired,movePage:_propTypes2.default.func.isRequired,previousPage:_propTypes2.default.func.isRequired,duplicatePage:_propTypes2.default.func.isRequired,removePage:_propTypes2.default.func.isRequired,selectedPage:_propTypes2.default.string,deleteId:_propTypes2.default.string,setDeleteId:_propTypes2.default.func.isRequired}},6194:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});function _interopDefault(ex){return ex&&"object"===typeof ex&&"default"in ex?ex["default"]:ex}var _extends=_interopDefault(__webpack_require__(6195));var invariant=_interopDefault(__webpack_require__(6196));var cssBoxModel=__webpack_require__(6197);var _Object$keys=_interopDefault(__webpack_require__(6198));var memoizeOne=_interopDefault(__webpack_require__(6199));var redux=__webpack_require__(53);var _Object$assign=_interopDefault(__webpack_require__(2084));var rafSchd=_interopDefault(__webpack_require__(6200));var _inheritsLoose=_interopDefault(__webpack_require__(6201));var React=__webpack_require__(0);var React__default=_interopDefault(React);var PropTypes=_interopDefault(__webpack_require__(6203));var reactRedux=__webpack_require__(19);var reactMotion=__webpack_require__(954);var vertical={direction:"vertical",line:"y",crossAxisLine:"x",start:"top",end:"bottom",size:"height",crossAxisStart:"left",crossAxisEnd:"right",crossAxisSize:"width"};var horizontal={direction:"horizontal",line:"x",crossAxisLine:"y",start:"left",end:"right",size:"width",crossAxisStart:"top",crossAxisEnd:"bottom",crossAxisSize:"height"};var origin={x:0,y:0};var add=function add(point1,point2){return{x:point1.x+point2.x,y:point1.y+point2.y}};var subtract=function subtract(point1,point2){return{x:point1.x-point2.x,y:point1.y-point2.y}};var isEqual=function isEqual(point1,point2){return point1.x===point2.x&&point1.y===point2.y};var negate=function negate(point){return{x:0!==point.x?-point.x:0,y:0!==point.y?-point.y:0}};var absolute=function absolute(point){return{x:Math.abs(point.x),y:Math.abs(point.y)}};var patch=function patch(line,value,otherValue){var _ref;void 0===otherValue&&(otherValue=0);return _ref={},_ref[line]=value,_ref["x"===line?"y":"x"]=otherValue,_ref};var distance=function distance(point1,point2){return Math.sqrt(Math.pow(point2.x-point1.x,2)+Math.pow(point2.y-point1.y,2))};var closest=function closest(target,points){return Math.min.apply(Math,points.map(function(point){return distance(target,point)}))};var apply=function apply(fn){return function(point){return{x:fn(point.x),y:fn(point.y)}}};var offsetByPosition=function offsetByPosition(spacing,point){return{top:spacing.top+point.y,left:spacing.left+point.x,bottom:spacing.bottom+point.y,right:spacing.right+point.x}};var expandByPosition=function expandByPosition(spacing,position){return{top:spacing.top-position.y,left:spacing.left-position.x,right:spacing.right+position.x,bottom:spacing.bottom+position.y}};var getCorners=function getCorners(spacing){return[{x:spacing.left,y:spacing.top},{x:spacing.right,y:spacing.top},{x:spacing.left,y:spacing.bottom},{x:spacing.right,y:spacing.bottom}]};var getMaxScroll=function(_ref){var scrollHeight=_ref.scrollHeight,scrollWidth=_ref.scrollWidth,height=_ref.height,width=_ref.width;var maxScroll=subtract({x:scrollWidth,y:scrollHeight},{x:width,y:height});var adjustedMaxScroll={x:Math.max(0,maxScroll.x),y:Math.max(0,maxScroll.y)};return adjustedMaxScroll};var clip=function clip(frame,subject){var result=cssBoxModel.getRect({top:Math.max(subject.top,frame.top),right:Math.min(subject.right,frame.right),bottom:Math.min(subject.bottom,frame.bottom),left:Math.max(subject.left,frame.left)});if(result.width<=0||result.height<=0)return null;return result};var getDroppableDimension=function getDroppableDimension(_ref){var descriptor=_ref.descriptor,isEnabled=_ref.isEnabled,direction=_ref.direction,client=_ref.client,page=_ref.page,closest$$1=_ref.closest;var scrollable=function(){if(!closest$$1)return null;var maxScroll=getMaxScroll({scrollHeight:closest$$1.scrollHeight,scrollWidth:closest$$1.scrollWidth,height:closest$$1.client.paddingBox.height,width:closest$$1.client.paddingBox.width});return{framePageMarginBox:closest$$1.page.marginBox,shouldClipSubject:closest$$1.shouldClipSubject,scroll:{initial:closest$$1.scroll,current:closest$$1.scroll,max:maxScroll,diff:{value:origin,displacement:origin}}}}();var subjectPageMarginBox=page.marginBox;var clippedPageMarginBox=scrollable&&scrollable.shouldClipSubject?clip(scrollable.framePageMarginBox,subjectPageMarginBox):subjectPageMarginBox;var viewport={closestScrollable:scrollable,subjectPageMarginBox:subjectPageMarginBox,clippedPageMarginBox:clippedPageMarginBox};var dimension={descriptor:descriptor,axis:"vertical"===direction?vertical:horizontal,isEnabled:isEnabled,client:client,page:page,viewport:viewport};return dimension};var scrollDroppable=function scrollDroppable(droppable,newScroll){droppable.viewport.closestScrollable?void 0:invariant(false);var scrollable=droppable.viewport.closestScrollable;var framePageMarginBox=scrollable.framePageMarginBox;var scrollDiff=subtract(newScroll,scrollable.scroll.initial);var scrollDisplacement=negate(scrollDiff);var closestScrollable={framePageMarginBox:scrollable.framePageMarginBox,shouldClipSubject:scrollable.shouldClipSubject,scroll:{initial:scrollable.scroll.initial,current:newScroll,diff:{value:scrollDiff,displacement:scrollDisplacement},max:scrollable.scroll.max}};var displacedSubject=offsetByPosition(droppable.viewport.subjectPageMarginBox,scrollDisplacement);var clippedPageMarginBox=closestScrollable.shouldClipSubject?clip(framePageMarginBox,displacedSubject):cssBoxModel.getRect(displacedSubject);var viewport={closestScrollable:closestScrollable,subjectPageMarginBox:droppable.viewport.subjectPageMarginBox,clippedPageMarginBox:clippedPageMarginBox};var result=_extends({},droppable,{viewport:viewport});return result};memoizeOne(function(droppables){return droppables.reduce(function(previous,current){previous[current.descriptor.id]=current;return previous},{})});memoizeOne(function(draggables){return draggables.reduce(function(previous,current){previous[current.descriptor.id]=current;return previous},{})});var toDroppableList=memoizeOne(function(droppables){return _Object$keys(droppables).map(function(id){return droppables[id]})});var toDraggableList=memoizeOne(function(draggables){return _Object$keys(draggables).map(function(id){return draggables[id]})});var getDraggablesInsideDroppable=memoizeOne(function(droppable,draggables){return toDraggableList(draggables).filter(function(draggable){return droppable.descriptor.id===draggable.descriptor.droppableId}).sort(function(a,b){return a.descriptor.index-b.descriptor.index})});var isWithin=function(lowerBound,upperBound){return function(value){return value<=upperBound&&value>=lowerBound}};var isPositionInFrame=function(frame){var isWithinVertical=isWithin(frame.top,frame.bottom);var isWithinHorizontal=isWithin(frame.left,frame.right);return function(point){return isWithinVertical(point.y)&&isWithinVertical(point.y)&&isWithinHorizontal(point.x)&&isWithinHorizontal(point.x)}};var getRequiredGrowth=memoizeOne(function(draggable,draggables,droppable){var getResult=function getResult(existingSpace){var requiredSpace=draggable.page.marginBox[droppable.axis.size];if(requiredSpace<=existingSpace)return null;var requiredGrowth=patch(droppable.axis.line,requiredSpace-existingSpace);return requiredGrowth};var dimensions=getDraggablesInsideDroppable(droppable,draggables);if(!dimensions.length){var _existingSpace=droppable.page.marginBox[droppable.axis.size];return getResult(_existingSpace)}var endOfDraggables=dimensions[dimensions.length-1].page.marginBox[droppable.axis.end];var endOfDroppable=droppable.page.marginBox[droppable.axis.end];var existingSpace=endOfDroppable-endOfDraggables;return getResult(existingSpace)});var getWithGrowth=memoizeOne(function(area,growth){return cssBoxModel.getRect(expandByPosition(area,growth))});var getClippedRectWithPlaceholder=function getClippedRectWithPlaceholder(_ref){var draggable=_ref.draggable,draggables=_ref.draggables,droppable=_ref.droppable,previousDroppableOverId=_ref.previousDroppableOverId;var isHome=draggable.descriptor.droppableId===droppable.descriptor.id;var wasOver=Boolean(previousDroppableOverId&&previousDroppableOverId===droppable.descriptor.id);var clippedPageMarginBox=droppable.viewport.clippedPageMarginBox;if(!clippedPageMarginBox)return clippedPageMarginBox;if(isHome||!wasOver)return clippedPageMarginBox;var requiredGrowth=getRequiredGrowth(draggable,draggables,droppable);if(!requiredGrowth)return clippedPageMarginBox;var subjectWithGrowth=getWithGrowth(clippedPageMarginBox,requiredGrowth);var closestScrollable=droppable.viewport.closestScrollable;if(!closestScrollable)return subjectWithGrowth;if(!closestScrollable.shouldClipSubject)return subjectWithGrowth;return clip(closestScrollable.framePageMarginBox,subjectWithGrowth)};var getDroppableOver=function(_ref2){var target=_ref2.target,draggable=_ref2.draggable,draggables=_ref2.draggables,droppables=_ref2.droppables,previousDroppableOverId=_ref2.previousDroppableOverId;var maybe=toDroppableList(droppables).filter(function(droppable){return droppable.isEnabled}).find(function(droppable){var withPlaceholder=getClippedRectWithPlaceholder({draggable:draggable,draggables:draggables,droppable:droppable,previousDroppableOverId:previousDroppableOverId});if(!withPlaceholder)return false;return isPositionInFrame(withPlaceholder)(target)});return maybe?maybe.descriptor.id:null};var noMovement={displaced:[],amount:origin,isBeyondStartPosition:false};var noImpact={movement:noMovement,direction:null,destination:null};var getDisplacementMap=memoizeOne(function(displaced){return displaced.reduce(function(map,displacement){map[displacement.draggableId]=displacement;return map},{})});var isPartiallyVisibleThroughFrame=function(frame){var isWithinVertical=isWithin(frame.top,frame.bottom);var isWithinHorizontal=isWithin(frame.left,frame.right);return function(subject){var isContained=isWithinVertical(subject.top)&&isWithinVertical(subject.bottom)&&isWithinHorizontal(subject.left)&&isWithinHorizontal(subject.right);if(isContained)return true;var isPartiallyVisibleVertically=isWithinVertical(subject.top)||isWithinVertical(subject.bottom);var isPartiallyVisibleHorizontally=isWithinHorizontal(subject.left)||isWithinHorizontal(subject.right);var isPartiallyContained=isPartiallyVisibleVertically&&isPartiallyVisibleHorizontally;if(isPartiallyContained)return true;var isBiggerVertically=subject.top<frame.top&&subject.bottom>frame.bottom;var isBiggerHorizontally=subject.left<frame.left&&subject.right>frame.right;var isTargetBiggerThanFrame=isBiggerVertically&&isBiggerHorizontally;if(isTargetBiggerThanFrame)return true;var isTargetBiggerOnOneAxis=isBiggerVertically&&isPartiallyVisibleHorizontally||isBiggerHorizontally&&isPartiallyVisibleVertically;return isTargetBiggerOnOneAxis}};var isTotallyVisibleThroughFrame=function(frame){var isWithinVertical=isWithin(frame.top,frame.bottom);var isWithinHorizontal=isWithin(frame.left,frame.right);return function(subject){var isContained=isWithinVertical(subject.top)&&isWithinVertical(subject.bottom)&&isWithinHorizontal(subject.left)&&isWithinHorizontal(subject.right);return isContained}};var isVisible=function isVisible(_ref){var target=_ref.target,destination=_ref.destination,viewport=_ref.viewport,isVisibleThroughFrameFn=_ref.isVisibleThroughFrameFn;var displacement=destination.viewport.closestScrollable?destination.viewport.closestScrollable.scroll.diff.displacement:origin;var withDisplacement=offsetByPosition(target,displacement);if(!destination.viewport.clippedPageMarginBox)return false;var isVisibleInDroppable=isVisibleThroughFrameFn(destination.viewport.clippedPageMarginBox)(withDisplacement);var isVisibleInViewport=isVisibleThroughFrameFn(viewport)(withDisplacement);return isVisibleInDroppable&&isVisibleInViewport};var isPartiallyVisible=function isPartiallyVisible(_ref2){var target=_ref2.target,destination=_ref2.destination,viewport=_ref2.viewport;return isVisible({target:target,destination:destination,viewport:viewport,isVisibleThroughFrameFn:isPartiallyVisibleThroughFrame})};var isTotallyVisible=function isTotallyVisible(_ref3){var target=_ref3.target,destination=_ref3.destination,viewport=_ref3.viewport;return isVisible({target:target,destination:destination,viewport:viewport,isVisibleThroughFrameFn:isTotallyVisibleThroughFrame})};var getDisplacement=function(_ref){var draggable=_ref.draggable,destination=_ref.destination,previousImpact=_ref.previousImpact,viewport=_ref.viewport;var id=draggable.descriptor.id;var map=getDisplacementMap(previousImpact.movement.displaced);var isVisible=isPartiallyVisible({target:draggable.page.marginBox,destination:destination,viewport:viewport});var shouldAnimate=function(){if(!isVisible)return false;var previous=map[id];if(!previous)return true;return previous.shouldAnimate}();var displacement={draggableId:id,isVisible:isVisible,shouldAnimate:shouldAnimate};return displacement};var withDroppableScroll=function(droppable,point){var closestScrollable=droppable.viewport.closestScrollable;if(!closestScrollable)return point;return add(point,closestScrollable.scroll.diff.value)};var inHomeList=function(_ref){var pageBorderBoxCenter=_ref.pageBorderBoxCenter,draggable=_ref.draggable,home=_ref.home,insideHome=_ref.insideHome,previousImpact=_ref.previousImpact,viewport=_ref.viewport;var axis=home.axis;var originalCenter=draggable.page.borderBox.center;var currentCenter=withDroppableScroll(home,pageBorderBoxCenter);var isBeyondStartPosition=currentCenter[axis.line]-originalCenter[axis.line]>0;var amount=patch(axis.line,draggable.client.marginBox[axis.size]);var displaced=insideHome.filter(function(child){if(child===draggable)return false;var borderBox=child.page.borderBox;if(isBeyondStartPosition){if(borderBox.center[axis.line]<originalCenter[axis.line])return false;return currentCenter[axis.line]>borderBox[axis.start]}if(originalCenter[axis.line]<borderBox.center[axis.line])return false;return currentCenter[axis.line]<borderBox[axis.end]}).map(function(dimension){return getDisplacement({draggable:dimension,destination:home,previousImpact:previousImpact,viewport:viewport.frame})});var ordered=isBeyondStartPosition?displaced.reverse():displaced;var index=function(){var startIndex=draggable.descriptor.index;var length=ordered.length;if(!length)return startIndex;if(isBeyondStartPosition)return startIndex+length;return startIndex-length}();var movement={amount:amount,displaced:ordered,isBeyondStartPosition:isBeyondStartPosition};var impact={movement:movement,direction:axis.direction,destination:{droppableId:home.descriptor.id,index:index}};return impact};var inForeignList=function(_ref){var pageBorderBoxCenter=_ref.pageBorderBoxCenter,draggable=_ref.draggable,destination=_ref.destination,insideDestination=_ref.insideDestination,previousImpact=_ref.previousImpact,viewport=_ref.viewport;var axis=destination.axis;var currentCenter=withDroppableScroll(destination,pageBorderBoxCenter);var displaced=insideDestination.filter(function(child){var threshold=child.page.borderBox[axis.end];return threshold>currentCenter[axis.line]}).map(function(dimension){return getDisplacement({draggable:dimension,destination:destination,previousImpact:previousImpact,viewport:viewport.frame})});var newIndex=insideDestination.length-displaced.length;var movement={amount:patch(axis.line,draggable.page.marginBox[axis.size]),displaced:displaced,isBeyondStartPosition:false};var impact={movement:movement,direction:axis.direction,destination:{droppableId:destination.descriptor.id,index:newIndex}};return impact};var getDragImpact=function(_ref){var pageBorderBoxCenter=_ref.pageBorderBoxCenter,draggable=_ref.draggable,draggables=_ref.draggables,droppables=_ref.droppables,previousImpact=_ref.previousImpact,viewport=_ref.viewport;var previousDroppableOverId=previousImpact.destination&&previousImpact.destination.droppableId;var destinationId=getDroppableOver({target:pageBorderBoxCenter,draggable:draggable,draggables:draggables,droppables:droppables,previousDroppableOverId:previousDroppableOverId});if(!destinationId)return noImpact;var destination=droppables[destinationId];if(!destination.isEnabled)return noImpact;var home=droppables[draggable.descriptor.droppableId];var isWithinHomeDroppable=home.descriptor.id===destinationId;var insideDestination=getDraggablesInsideDroppable(destination,draggables);if(isWithinHomeDroppable)return inHomeList({pageBorderBoxCenter:pageBorderBoxCenter,draggable:draggable,home:home,insideHome:insideDestination,previousImpact:previousImpact||noImpact,viewport:viewport});return inForeignList({pageBorderBoxCenter:pageBorderBoxCenter,draggable:draggable,destination:destination,insideDestination:insideDestination,previousImpact:previousImpact||noImpact,viewport:viewport})};var getHomeLocation=function(critical){return{index:critical.draggable.index,droppableId:critical.droppable.id}};var getSafeClipped=function getSafeClipped(droppable){var rect=droppable.viewport.clippedPageMarginBox;rect?void 0:invariant(false);return rect};var getBestCrossAxisDroppable=function(_ref){var isMovingForward=_ref.isMovingForward,pageBorderBoxCenter=_ref.pageBorderBoxCenter,source=_ref.source,droppables=_ref.droppables,viewport=_ref.viewport;var sourceClipped=source.viewport.clippedPageMarginBox;if(!sourceClipped)return null;var axis=source.axis;var isBetweenSourceClipped=isWithin(sourceClipped[axis.start],sourceClipped[axis.end]);var candidates=toDroppableList(droppables).filter(function(droppable){return droppable!==source}).filter(function(droppable){return droppable.isEnabled}).filter(function(droppable){var clippedPageMarginBox=droppable.viewport.clippedPageMarginBox;if(!clippedPageMarginBox)return false;return isPartiallyVisibleThroughFrame(viewport.frame)(clippedPageMarginBox)}).filter(function(droppable){var targetClipped=getSafeClipped(droppable);if(isMovingForward)return sourceClipped[axis.crossAxisEnd]<targetClipped[axis.crossAxisEnd];return targetClipped[axis.crossAxisStart]<sourceClipped[axis.crossAxisStart]}).filter(function(droppable){var targetClipped=getSafeClipped(droppable);var isBetweenDestinationClipped=isWithin(targetClipped[axis.start],targetClipped[axis.end]);return isBetweenSourceClipped(targetClipped[axis.start])||isBetweenSourceClipped(targetClipped[axis.end])||isBetweenDestinationClipped(sourceClipped[axis.start])||isBetweenDestinationClipped(sourceClipped[axis.end])}).sort(function(a,b){var first=getSafeClipped(a)[axis.crossAxisStart];var second=getSafeClipped(b)[axis.crossAxisStart];if(isMovingForward)return first-second;return second-first}).filter(function(droppable,index,array){return getSafeClipped(droppable)[axis.crossAxisStart]===getSafeClipped(array[0])[axis.crossAxisStart]});if(!candidates.length)return null;if(1===candidates.length)return candidates[0];var contains=candidates.filter(function(droppable){var isWithinDroppable=isWithin(getSafeClipped(droppable)[axis.start],getSafeClipped(droppable)[axis.end]);return isWithinDroppable(pageBorderBoxCenter[axis.line])});if(1===contains.length)return contains[0];if(contains.length>1)return contains.sort(function(a,b){return getSafeClipped(a)[axis.start]-getSafeClipped(b)[axis.start]})[0];return candidates.sort(function(a,b){var first=closest(pageBorderBoxCenter,getCorners(getSafeClipped(a)));var second=closest(pageBorderBoxCenter,getCorners(getSafeClipped(b)));if(first!==second)return first-second;return getSafeClipped(a)[axis.start]-getSafeClipped(b)[axis.start]})[0]};var withDroppableDisplacement=function(droppable,point){var closestScrollable=droppable.viewport.closestScrollable;if(!closestScrollable)return point;return add(point,closestScrollable.scroll.diff.displacement)};var getClosestDraggable=function(_ref){var axis=_ref.axis,viewport=_ref.viewport,pageBorderBoxCenter=_ref.pageBorderBoxCenter,destination=_ref.destination,insideDestination=_ref.insideDestination;if(!insideDestination.length)return null;var result=insideDestination.filter(function(draggable){return isTotallyVisible({target:draggable.page.borderBox,destination:destination,viewport:viewport.frame})}).sort(function(a,b){var distanceToA=distance(pageBorderBoxCenter,withDroppableDisplacement(destination,a.page.borderBox.center));var distanceToB=distance(pageBorderBoxCenter,withDroppableDisplacement(destination,b.page.borderBox.center));if(distanceToA<distanceToB)return-1;if(distanceToB<distanceToA)return 1;return a.page.borderBox[axis.start]-b.page.borderBox[axis.start]});return result.length?result[0]:null};var moveToEdge=function(_ref){var source=_ref.source,sourceEdge=_ref.sourceEdge,destination=_ref.destination,destinationEdge=_ref.destinationEdge,destinationAxis=_ref.destinationAxis;var getCorner=function getCorner(area){return patch(destinationAxis.line,area[destinationAxis[destinationEdge]],area[destinationAxis.crossAxisStart])};var corner=getCorner(destination);var centerDiff=absolute(subtract(source.center,getCorner(source)));var signed=patch(destinationAxis.line,("end"===sourceEdge?-1:1)*centerDiff[destinationAxis.line],centerDiff[destinationAxis.crossAxisLine]);return add(corner,signed)};var toHomeList=function(_ref){var amount=_ref.amount,homeIndex=_ref.homeIndex,movingRelativeTo=_ref.movingRelativeTo,insideDestination=_ref.insideDestination,draggable=_ref.draggable,destination=_ref.destination,previousImpact=_ref.previousImpact,viewport=_ref.viewport;var axis=destination.axis;var targetIndex=insideDestination.indexOf(movingRelativeTo);-1!==targetIndex?void 0:invariant(false);if(targetIndex===homeIndex){var _newCenter=draggable.page.borderBox.center;var _newImpact={movement:{displaced:[],amount:amount,isBeyondStartPosition:false},direction:destination.axis.direction,destination:{droppableId:destination.descriptor.id,index:homeIndex}};return{pageBorderBoxCenter:withDroppableDisplacement(destination,_newCenter),impact:_newImpact}}var isMovingPastOriginalIndex=targetIndex>homeIndex;var edge=isMovingPastOriginalIndex?"end":"start";var newCenter=moveToEdge({source:draggable.page.borderBox,sourceEdge:edge,destination:isMovingPastOriginalIndex?movingRelativeTo.page.borderBox:movingRelativeTo.page.marginBox,destinationEdge:edge,destinationAxis:axis});var modified=function(){if(!isMovingPastOriginalIndex)return insideDestination.slice(targetIndex,homeIndex);var from=homeIndex+1;var to=targetIndex+1;return insideDestination.slice(from,to).reverse()}();var displaced=modified.map(function(dimension){return getDisplacement({draggable:dimension,destination:destination,previousImpact:previousImpact,viewport:viewport.frame})});var newImpact={movement:{displaced:displaced,amount:amount,isBeyondStartPosition:isMovingPastOriginalIndex},direction:axis.direction,destination:{droppableId:destination.descriptor.id,index:targetIndex}};return{pageBorderBoxCenter:withDroppableDisplacement(destination,newCenter),impact:newImpact}};var toForeignList=function(_ref){var amount=_ref.amount,pageBorderBoxCenter=_ref.pageBorderBoxCenter,movingRelativeTo=_ref.movingRelativeTo,insideDestination=_ref.insideDestination,draggable=_ref.draggable,destination=_ref.destination,previousImpact=_ref.previousImpact,viewport=_ref.viewport;var axis=destination.axis;var isGoingBeforeTarget=Boolean(movingRelativeTo&&pageBorderBoxCenter[destination.axis.line]<movingRelativeTo.page.borderBox.center[destination.axis.line]);if(!movingRelativeTo){var _newCenter=moveToEdge({source:draggable.page.borderBox,sourceEdge:"start",destination:destination.page.contentBox,destinationEdge:"start",destinationAxis:axis});var _newImpact={movement:{displaced:[],amount:amount,isBeyondStartPosition:false},direction:axis.direction,destination:{droppableId:destination.descriptor.id,index:0}};return{pageBorderBoxCenter:withDroppableDisplacement(destination,_newCenter),impact:_newImpact}}var targetIndex=insideDestination.indexOf(movingRelativeTo);-1!==targetIndex?void 0:invariant(false);var proposedIndex=isGoingBeforeTarget?targetIndex:targetIndex+1;var newCenter=moveToEdge({source:draggable.page.borderBox,sourceEdge:"start",destination:movingRelativeTo.page.marginBox,destinationEdge:isGoingBeforeTarget?"start":"end",destinationAxis:axis});var displaced=insideDestination.slice(proposedIndex,insideDestination.length).map(function(dimension){return getDisplacement({draggable:dimension,destination:destination,viewport:viewport.frame,previousImpact:previousImpact})});var newImpact={movement:{displaced:displaced,amount:amount,isBeyondStartPosition:false},direction:axis.direction,destination:{droppableId:destination.descriptor.id,index:proposedIndex}};return{pageBorderBoxCenter:withDroppableDisplacement(destination,newCenter),impact:newImpact}};var moveToNewDroppable=function(_ref){var pageBorderBoxCenter=_ref.pageBorderBoxCenter,destination=_ref.destination,insideDestination=_ref.insideDestination,draggable=_ref.draggable,movingRelativeTo=_ref.movingRelativeTo,home=_ref.home,previousImpact=_ref.previousImpact,viewport=_ref.viewport;var amount=patch(destination.axis.line,draggable.client.marginBox[destination.axis.size]);if(destination.descriptor.id===draggable.descriptor.droppableId){movingRelativeTo?void 0:invariant(false);return toHomeList({amount:amount,homeIndex:home.index,movingRelativeTo:movingRelativeTo,insideDestination:insideDestination,draggable:draggable,destination:destination,previousImpact:previousImpact,viewport:viewport})}return toForeignList({amount:amount,pageBorderBoxCenter:pageBorderBoxCenter,movingRelativeTo:movingRelativeTo,insideDestination:insideDestination,draggable:draggable,destination:destination,previousImpact:previousImpact,viewport:viewport})};var moveCrossAxis=function(_ref){var isMovingForward=_ref.isMovingForward,pageBorderBoxCenter=_ref.pageBorderBoxCenter,draggableId=_ref.draggableId,droppableId=_ref.droppableId,home=_ref.home,draggables=_ref.draggables,droppables=_ref.droppables,previousImpact=_ref.previousImpact,viewport=_ref.viewport;var draggable=draggables[draggableId];var source=droppables[droppableId];var destination=getBestCrossAxisDroppable({isMovingForward:isMovingForward,pageBorderBoxCenter:pageBorderBoxCenter,source:source,droppables:droppables,viewport:viewport});if(!destination)return null;var insideDestination=getDraggablesInsideDroppable(destination,draggables);var movingRelativeTo=getClosestDraggable({axis:destination.axis,pageBorderBoxCenter:pageBorderBoxCenter,destination:destination,insideDestination:insideDestination,viewport:viewport});if(insideDestination.length&&!movingRelativeTo)return null;return moveToNewDroppable({pageBorderBoxCenter:pageBorderBoxCenter,destination:destination,draggable:draggable,movingRelativeTo:movingRelativeTo,insideDestination:insideDestination,home:home,previousImpact:previousImpact||noImpact,viewport:viewport})};var isTotallyVisibleInNewLocation=function(_ref){var draggable=_ref.draggable,destination=_ref.destination,newPageBorderBoxCenter=_ref.newPageBorderBoxCenter,viewport=_ref.viewport;var diff=subtract(newPageBorderBoxCenter,draggable.page.borderBox.center);var shifted=offsetByPosition(draggable.page.borderBox,diff);return isTotallyVisible({target:shifted,destination:destination,viewport:viewport})};var withFirstAdded=function withFirstAdded(_ref){var add=_ref.add,previousImpact=_ref.previousImpact,droppable=_ref.droppable,draggables=_ref.draggables,viewport=_ref.viewport;var newDisplacement={draggableId:add,isVisible:true,shouldAnimate:true};var added=[newDisplacement].concat(previousImpact.movement.displaced);var withUpdatedVisibility=added.map(function(current){if(current===newDisplacement)return current;var updated=getDisplacement({draggable:draggables[current.draggableId],destination:droppable,previousImpact:previousImpact,viewport:viewport.frame});return updated});return withUpdatedVisibility};var forceVisibleDisplacement=function forceVisibleDisplacement(current){if(current.isVisible)return current;return{draggableId:current.draggableId,isVisible:true,shouldAnimate:false}};var withFirstRemoved=function withFirstRemoved(_ref2){var dragging=_ref2.dragging,isVisibleInNewLocation=_ref2.isVisibleInNewLocation,previousImpact=_ref2.previousImpact,droppable=_ref2.droppable,draggables=_ref2.draggables;var last=previousImpact.movement.displaced;last.length?void 0:invariant(false);var withFirstRestored=last.slice(1,last.length);if(!withFirstRestored.length)return withFirstRestored;if(isVisibleInNewLocation)return withFirstRestored;var axis=droppable.axis;var sizeOfRestored=draggables[last[0].draggableId].page.marginBox[axis.size];var sizeOfDragging=draggables[dragging].page.marginBox[axis.size];var buffer=sizeOfRestored+sizeOfDragging;var withUpdatedVisibility=withFirstRestored.map(function(displacement,index){if(0===index)return forceVisibleDisplacement(displacement);if(buffer>0){var current=draggables[displacement.draggableId];var size=current.page.marginBox[axis.size];buffer-=size;return forceVisibleDisplacement(displacement)}return{draggableId:displacement.draggableId,isVisible:false,shouldAnimate:false}});return withUpdatedVisibility};var inHomeList$1=function(_ref){var isMovingForward=_ref.isMovingForward,draggableId=_ref.draggableId,previousPageBorderBoxCenter=_ref.previousPageBorderBoxCenter,previousImpact=_ref.previousImpact,droppable=_ref.droppable,draggables=_ref.draggables,viewport=_ref.viewport;var location=previousImpact.destination;location?void 0:invariant(false);var draggable=draggables[draggableId];var axis=droppable.axis;var insideDroppable=getDraggablesInsideDroppable(droppable,draggables);var startIndex=draggable.descriptor.index;var currentIndex=location.index;var proposedIndex=isMovingForward?currentIndex+1:currentIndex-1;if(proposedIndex>insideDroppable.length-1)return null;if(proposedIndex<0)return null;var destination=insideDroppable[proposedIndex];var isMovingTowardStart=isMovingForward&&proposedIndex<=startIndex||!isMovingForward&&proposedIndex>=startIndex;var edge=function(){if(!isMovingTowardStart)return isMovingForward?"end":"start";return isMovingForward?"start":"end"}();var newPageBorderBoxCenter=moveToEdge({source:draggable.page.borderBox,sourceEdge:edge,destination:destination.page.borderBox,destinationEdge:edge,destinationAxis:droppable.axis});var isVisibleInNewLocation=isTotallyVisibleInNewLocation({draggable:draggable,destination:droppable,newPageBorderBoxCenter:newPageBorderBoxCenter,viewport:viewport.frame});var displaced=isMovingTowardStart?withFirstRemoved({dragging:draggableId,isVisibleInNewLocation:isVisibleInNewLocation,previousImpact:previousImpact,droppable:droppable,draggables:draggables}):withFirstAdded({add:destination.descriptor.id,previousImpact:previousImpact,droppable:droppable,draggables:draggables,viewport:viewport});var newImpact={movement:{displaced:displaced,amount:patch(axis.line,draggable.page.marginBox[axis.size]),isBeyondStartPosition:proposedIndex>startIndex},destination:{droppableId:droppable.descriptor.id,index:proposedIndex},direction:droppable.axis.direction};if(isVisibleInNewLocation)return{pageBorderBoxCenter:withDroppableDisplacement(droppable,newPageBorderBoxCenter),impact:newImpact,scrollJumpRequest:null};var distance$$1=subtract(newPageBorderBoxCenter,previousPageBorderBoxCenter);var distanceWithScroll=withDroppableDisplacement(droppable,distance$$1);return{pageBorderBoxCenter:previousPageBorderBoxCenter,impact:newImpact,scrollJumpRequest:distanceWithScroll}};var inForeignList$1=function(_ref){var isMovingForward=_ref.isMovingForward,draggableId=_ref.draggableId,previousImpact=_ref.previousImpact,previousPageBorderBoxCenter=_ref.previousPageBorderBoxCenter,droppable=_ref.droppable,draggables=_ref.draggables,viewport=_ref.viewport;previousImpact.destination?void 0:invariant(false);var location=previousImpact.destination;var draggable=draggables[draggableId];var axis=droppable.axis;var insideForeignDroppable=getDraggablesInsideDroppable(droppable,draggables);var currentIndex=location.index;var proposedIndex=isMovingForward?currentIndex+1:currentIndex-1;var lastIndex=insideForeignDroppable.length-1;if(proposedIndex>insideForeignDroppable.length)return null;if(proposedIndex<0)return null;var movingRelativeTo=insideForeignDroppable[Math.min(proposedIndex,lastIndex)];var isMovingPastLastIndex=proposedIndex>lastIndex;var sourceEdge="start";var destinationEdge=function(){if(isMovingPastLastIndex)return"end";return"start"}();var newPageBorderBoxCenter=moveToEdge({source:draggable.page.borderBox,sourceEdge:sourceEdge,destination:movingRelativeTo.page.marginBox,destinationEdge:destinationEdge,destinationAxis:droppable.axis});var isVisibleInNewLocation=isTotallyVisibleInNewLocation({draggable:draggable,destination:droppable,newPageBorderBoxCenter:newPageBorderBoxCenter,viewport:viewport.frame});var displaced=function(){if(isMovingForward)return withFirstRemoved({dragging:draggableId,isVisibleInNewLocation:isVisibleInNewLocation,previousImpact:previousImpact,droppable:droppable,draggables:draggables});return withFirstAdded({add:movingRelativeTo.descriptor.id,previousImpact:previousImpact,droppable:droppable,draggables:draggables,viewport:viewport})}();var newImpact={movement:{displaced:displaced,amount:patch(axis.line,draggable.page.marginBox[axis.size]),isBeyondStartPosition:false},destination:{droppableId:droppable.descriptor.id,index:proposedIndex},direction:droppable.axis.direction};if(isVisibleInNewLocation)return{pageBorderBoxCenter:withDroppableDisplacement(droppable,newPageBorderBoxCenter),impact:newImpact,scrollJumpRequest:null};var distanceMoving=subtract(newPageBorderBoxCenter,previousPageBorderBoxCenter);var distanceWithScroll=withDroppableDisplacement(droppable,distanceMoving);return{pageBorderBoxCenter:previousPageBorderBoxCenter,impact:newImpact,scrollJumpRequest:distanceWithScroll}};var moveToNextIndex=function(args){var draggableId=args.draggableId,draggables=args.draggables,droppable=args.droppable;var draggable=draggables[draggableId];var isInHomeList=draggable.descriptor.droppableId===droppable.descriptor.id;if(!droppable.isEnabled)return null;if(isInHomeList)return inHomeList$1(args);return inForeignList$1(args)};var getClientSelection=function getClientSelection(pageBorderBoxCenter,currentScroll){return subtract(pageBorderBoxCenter,currentScroll)};var moveInDirection=function(_ref){var state=_ref.state,type=_ref.type;var _ref2=function(){if(state.impact.destination)return{droppable:state.dimensions.droppables[state.impact.destination.droppableId],isMainAxisMovementAllowed:true};return{droppable:state.dimensions.droppables[state.critical.droppable.id],isMainAxisMovementAllowed:false}}(),droppable=_ref2.droppable,isMainAxisMovementAllowed=_ref2.isMainAxisMovementAllowed;var direction=droppable.axis.direction;var isMovingOnMainAxis="vertical"===direction&&("MOVE_UP"===type||"MOVE_DOWN"===type)||"horizontal"===direction&&("MOVE_LEFT"===type||"MOVE_RIGHT"===type);if(isMovingOnMainAxis&&!isMainAxisMovementAllowed)return null;var isMovingForward="MOVE_DOWN"===type||"MOVE_RIGHT"===type;if(isMovingOnMainAxis){var _result=moveToNextIndex({isMovingForward:isMovingForward,draggableId:state.critical.draggable.id,droppable:droppable,draggables:state.dimensions.draggables,previousPageBorderBoxCenter:state.current.page.borderBoxCenter,previousImpact:state.impact,viewport:state.viewport});if(!_result)return null;return{impact:_result.impact,clientSelection:getClientSelection(_result.pageBorderBoxCenter,state.viewport.scroll.current),scrollJumpRequest:_result.scrollJumpRequest}}var home=getHomeLocation(state.critical);var result=moveCrossAxis({isMovingForward:isMovingForward,pageBorderBoxCenter:state.current.page.borderBoxCenter,draggableId:state.critical.draggable.id,droppableId:droppable.descriptor.id,home:home,draggables:state.dimensions.draggables,droppables:state.dimensions.droppables,previousImpact:state.impact,viewport:state.viewport});if(!result)return null;return{clientSelection:getClientSelection(result.pageBorderBoxCenter,state.viewport.scroll.current),impact:result.impact,scrollJumpRequest:null}};var scrollViewport=function(viewport,newScroll){var diff=subtract(newScroll,viewport.scroll.initial);var displacement=negate(diff);var frame=cssBoxModel.getRect({top:newScroll.y,bottom:newScroll.y+viewport.frame.height,left:newScroll.x,right:newScroll.x+viewport.frame.width});var updated={frame:frame,scroll:{initial:viewport.scroll.initial,max:viewport.scroll.max,current:newScroll,diff:{value:diff,displacement:displacement}}};return updated};var getHomeImpact=function(critical,dimensions){var home=dimensions.droppables[critical.droppable.id];var axis=home.axis;var draggable=dimensions.draggables[critical.draggable.id];return{movement:{displaced:[],isBeyondStartPosition:false,amount:patch(axis.line,draggable.client.marginBox[axis.size])},direction:axis.direction,destination:getHomeLocation(critical)}};var getPageItemPositions=function(client,windowScroll){return{selection:add(client.selection,windowScroll),borderBoxCenter:add(client.borderBoxCenter,windowScroll),offset:add(client.offset,windowScroll)}};function isMovementAllowed(state){return"DRAGGING"===state.phase||"COLLECTING"===state.phase}var idle={phase:"IDLE"};var preparing={phase:"PREPARING"};var moveWithPositionUpdates=function moveWithPositionUpdates(_ref){var state=_ref.state,clientSelection=_ref.clientSelection,shouldAnimate=_ref.shouldAnimate,viewport=_ref.viewport,impact=_ref.impact,scrollJumpRequest=_ref.scrollJumpRequest;var newViewport=viewport||state.viewport;var currentWindowScroll=newViewport.scroll.current;var client=(offset=subtract(clientSelection,state.initial.client.selection),{offset:offset,selection:clientSelection,borderBoxCenter:add(state.initial.client.borderBoxCenter,offset)});var offset;var page=getPageItemPositions(client,currentWindowScroll);var current={client:client,page:page};if("COLLECTING"===state.phase)return _extends({phase:"COLLECTING"},state,{current:current});var newImpact=impact||getDragImpact({pageBorderBoxCenter:page.borderBoxCenter,draggable:state.dimensions.draggables[state.critical.draggable.id],draggables:state.dimensions.draggables,droppables:state.dimensions.droppables,previousImpact:state.impact,viewport:newViewport});var result=_extends({},state,{current:current,shouldAnimate:shouldAnimate,impact:newImpact,scrollJumpRequest:scrollJumpRequest||null,viewport:newViewport});return result};var reducer=function(state,action){void 0===state&&(state=idle);if("CLEAN"===action.type)return idle;if("PREPARE"===action.type)return preparing;if("INITIAL_PUBLISH"===action.type){"PREPARING"===state.phase?void 0:invariant(false);var _action$payload=action.payload,critical=_action$payload.critical,client=_action$payload.client,viewport=_action$payload.viewport,dimensions=_action$payload.dimensions,autoScrollMode=_action$payload.autoScrollMode;var initial={client:client,page:{selection:add(client.selection,viewport.scroll.initial),borderBoxCenter:add(client.selection,viewport.scroll.initial),offset:origin}};var result={phase:"DRAGGING",isDragging:true,critical:critical,autoScrollMode:autoScrollMode,dimensions:dimensions,initial:initial,current:initial,impact:getHomeImpact(critical,dimensions),viewport:viewport,scrollJumpRequest:null,shouldAnimate:false};return result}if("COLLECTION_STARTING"===action.type){var _extends2;if("COLLECTING"===state.phase||"DROP_PENDING"===state.phase)return state;"DRAGGING"===state.phase?void 0:invariant(false);var _result=_extends({phase:"COLLECTING"},state,(_extends2={},_extends2["phase"]="COLLECTING",_extends2));return _result}if("PUBLISH"===action.type){"COLLECTING"===state.phase||"DROP_PENDING"===state.phase?void 0:invariant(false);invariant(false)}if("MOVE"===action.type){if("PREPARING"===state.phase)return state;if("DROP_PENDING"===state.phase)return state;isMovementAllowed(state)?void 0:invariant(false);var _action$payload2=action.payload,_client=_action$payload2.client,shouldAnimate=_action$payload2.shouldAnimate;if(state.shouldAnimate===shouldAnimate&&isEqual(_client,state.current.client.selection))return state;var impact="JUMP"===state.autoScrollMode?state.impact:null;return moveWithPositionUpdates({state:state,clientSelection:_client,impact:impact,shouldAnimate:shouldAnimate})}if("UPDATE_DROPPABLE_SCROLL"===action.type){var _extends3,_extends4;if("PREPARING"===state.phase)return state;if("DROP_PENDING"===state.phase)return state;isMovementAllowed(state)?void 0:invariant(false);var _action$payload3=action.payload,id=_action$payload3.id,offset=_action$payload3.offset;var target=state.dimensions.droppables[id];if(!target)return state;var updated=scrollDroppable(target,offset);var _dimensions=_extends({},state.dimensions,{droppables:_extends({},state.dimensions.droppables,(_extends3={},_extends3[id]=updated,_extends3))});var _impact=function(){isMovementAllowed(state)?void 0:invariant(false);if("JUMP"===state.autoScrollMode)return state.impact;return getDragImpact({pageBorderBoxCenter:state.current.page.borderBoxCenter,draggable:_dimensions.draggables[state.critical.draggable.id],draggables:_dimensions.draggables,droppables:_dimensions.droppables,previousImpact:state.impact,viewport:state.viewport})}();return _extends({phase:"DRAGGING"},state,(_extends4={},_extends4["phase"]=state.phase,_extends4.impact=_impact,_extends4.dimensions=_dimensions,_extends4.scrollJumpRequest=null,_extends4))}if("UPDATE_DROPPABLE_IS_ENABLED"===action.type){var _extends5,_extends6;if("DROP_PENDING"===state.phase)return state;isMovementAllowed(state)?void 0:invariant(false);var _action$payload4=action.payload,_id=_action$payload4.id,isEnabled=_action$payload4.isEnabled;var _target=state.dimensions.droppables[_id];if(!_target)return state;_target.isEnabled!==isEnabled?void 0:invariant(false);var _updated=_extends({},_target,{isEnabled:isEnabled});var _dimensions2=_extends({},state.dimensions,{droppables:_extends({},state.dimensions.droppables,(_extends5={},_extends5[_id]=_updated,_extends5))});var _impact2=getDragImpact({pageBorderBoxCenter:state.current.page.borderBoxCenter,draggable:_dimensions2.draggables[state.critical.draggable.id],draggables:_dimensions2.draggables,droppables:_dimensions2.droppables,previousImpact:state.impact,viewport:state.viewport});return _extends({phase:"DRAGGING"},state,(_extends6={},_extends6["phase"]=state.phase,_extends6.impact=_impact2,_extends6.dimensions=_dimensions2,_extends6))}if("MOVE_BY_WINDOW_SCROLL"===action.type){if("PREPARING"===state.phase)return state;if("DROP_PENDING"===state.phase||"DROP_ANIMATING"===state.phase)return state;isMovementAllowed(state)?void 0:invariant(false);var newScroll=action.payload.scroll;if(isEqual(state.viewport.scroll.current,newScroll))return state;var isJumpScrolling="JUMP"===state.autoScrollMode;var _impact3=isJumpScrolling?state.impact:null;var _viewport=scrollViewport(state.viewport,newScroll);return moveWithPositionUpdates({state:state,clientSelection:state.current.client.selection,viewport:_viewport,shouldAnimate:false,impact:_impact3})}if("UPDATE_VIEWPORT_MAX_SCROLL"===action.type){var _extends7;state.isDragging?void 0:invariant(false);var existing=state.viewport;var _viewport2=_extends({},existing,{scroll:_extends({},existing.scroll,{max:action.payload})});return _extends({phase:"DRAGGING"},state,(_extends7={},_extends7["phase"]=state.phase,_extends7.viewport=_viewport2,_extends7))}if("MOVE_UP"===action.type||"MOVE_DOWN"===action.type||"MOVE_LEFT"===action.type||"MOVE_RIGHT"===action.type){if("PREPARING"===state.phase)return state;if("COLLECTING"===state.phase||"DROP_PENDING"===state.phase)return state;"DRAGGING"===state.phase?void 0:invariant(false);var _result2=moveInDirection({state:state,type:action.type});if(!_result2)return state;return moveWithPositionUpdates({state:state,impact:_result2.impact,clientSelection:_result2.clientSelection,shouldAnimate:true,scrollJumpRequest:_result2.scrollJumpRequest})}if("DROP_PENDING"===action.type){var _extends8;var reason=action.payload.reason;"COLLECTING"===state.phase?void 0:invariant(false);var newState=_extends({phase:"DROP_PENDING"},state,(_extends8={},_extends8["phase"]="DROP_PENDING",_extends8.isWaiting=true,_extends8.reason=reason,_extends8));return newState}if("DROP_ANIMATE"===action.type){var pending=action.payload;"DRAGGING"===state.phase||"DROP_PENDING"===state.phase?void 0:invariant(false);var _result3={phase:"DROP_ANIMATING",pending:pending,dimensions:state.dimensions};return _result3}if("DROP_COMPLETE"===action.type)return idle;return state};var lift=function lift(args){return{type:"LIFT",payload:args}};var initialPublish=function initialPublish(args){return{type:"INITIAL_PUBLISH",payload:args}};var publish=function publish(args){return{type:"PUBLISH",payload:args}};var collectionStarting=function collectionStarting(){return{type:"COLLECTION_STARTING",payload:null}};var updateDroppableScroll=function updateDroppableScroll(args){return{type:"UPDATE_DROPPABLE_SCROLL",payload:args}};var updateDroppableIsEnabled=function updateDroppableIsEnabled(args){return{type:"UPDATE_DROPPABLE_IS_ENABLED",payload:args}};var move=function move(args){return{type:"MOVE",payload:args}};var moveByWindowScroll=function moveByWindowScroll(args){return{type:"MOVE_BY_WINDOW_SCROLL",payload:args}};var updateViewportMaxScroll=function updateViewportMaxScroll(max){return{type:"UPDATE_VIEWPORT_MAX_SCROLL",payload:max}};var moveUp=function moveUp(){return{type:"MOVE_UP",payload:null}};var moveDown=function moveDown(){return{type:"MOVE_DOWN",payload:null}};var moveRight=function moveRight(){return{type:"MOVE_RIGHT",payload:null}};var moveLeft=function moveLeft(){return{type:"MOVE_LEFT",payload:null}};var clean=function clean(){return{type:"CLEAN",payload:null}};var prepare=function prepare(){return{type:"PREPARE",payload:null}};var animateDrop=function animateDrop(pending){return{type:"DROP_ANIMATE",payload:pending}};var completeDrop=function completeDrop(result){return{type:"DROP_COMPLETE",payload:result}};var drop=function drop(args){return{type:"DROP",payload:args}};var dropPending=function dropPending(args){return{type:"DROP_PENDING",payload:args}};var dropAnimationFinished=function dropAnimationFinished(){return{type:"DROP_ANIMATION_FINISHED",payload:null}};var lift$1=function(getMarshal){var timeoutId=null;var tryAbortCriticalCollection=function tryAbortCriticalCollection(){if(null==timeoutId)return;clearTimeout(timeoutId);timeoutId=null};return function(_ref){var getState=_ref.getState,dispatch=_ref.dispatch;return function(next){return function(action){if("CLEAN"===action.type){tryAbortCriticalCollection();next(action);return}if("LIFT"!==action.type){next(action);return}!timeoutId?void 0:invariant(false);var marshal=getMarshal();var _action$payload=action.payload,id=_action$payload.id,client=_action$payload.client,autoScrollMode=_action$payload.autoScrollMode,viewport=_action$payload.viewport;var initial=getState();"DROP_ANIMATING"===initial.phase&&dispatch(completeDrop(initial.pending.result));var postFlushState=getState();"IDLE"===postFlushState.phase?void 0:invariant(false);dispatch(prepare());timeoutId=setTimeout(function(){timeoutId=null;var state=getState();"PREPARING"===state.phase?void 0:invariant(false);var scrollOptions={shouldPublishImmediately:"JUMP"===autoScrollMode};var request={draggableId:id,scrollOptions:scrollOptions};var _marshal$startPublish=marshal.startPublishing(request,viewport.scroll.current),critical=_marshal$startPublish.critical,dimensions=_marshal$startPublish.dimensions;dispatch(initialPublish({critical:critical,dimensions:dimensions,client:client,autoScrollMode:autoScrollMode,viewport:viewport}))})}}}};var style=function(marshal){return function(){return function(next){return function(action){"INITIAL_PUBLISH"!==action.type&&"PUBLISH"!==action.type||marshal.dragging();"COLLECTION_STARTING"===action.type&&marshal.collecting();"DROP_ANIMATE"===action.type&&marshal.dropping(action.payload.result.reason);"CLEAN"!==action.type&&"DROP_COMPLETE"!==action.type||marshal.resting();next(action)}}}};var getNewHomeClientBorderBoxCenter=function(_ref){var movement=_ref.movement,draggable=_ref.draggable,draggables=_ref.draggables,destination=_ref.destination;var originalCenter=draggable.client.borderBox.center;if(null==destination)return originalCenter;var displaced=movement.displaced,isBeyondStartPosition=movement.isBeyondStartPosition;var axis=destination.axis;var isWithinHomeDroppable=destination.descriptor.id===draggable.descriptor.droppableId;if(isWithinHomeDroppable&&!displaced.length)return originalCenter;var draggablesInDestination=getDraggablesInsideDroppable(destination,draggables);var movingRelativeTo=function(){if(isWithinHomeDroppable)return draggables[displaced[0].draggableId].client.borderBox;if(displaced.length)return draggables[displaced[0].draggableId].client.borderBox;if(draggablesInDestination.length)return draggablesInDestination[draggablesInDestination.length-1].client.marginBox;return destination.client.contentBox}();var _ref2=function(){if(isWithinHomeDroppable){if(isBeyondStartPosition)return{sourceEdge:"end",destinationEdge:"end"};return{sourceEdge:"start",destinationEdge:"start"}}if(!displaced.length&&draggablesInDestination.length)return{sourceEdge:"start",destinationEdge:"end"};return{sourceEdge:"start",destinationEdge:"start"}}(),sourceEdge=_ref2.sourceEdge,destinationEdge=_ref2.destinationEdge;var source=draggable.client.borderBox;var targetCenter=moveToEdge({source:source,sourceEdge:sourceEdge,destination:movingRelativeTo,destinationEdge:destinationEdge,destinationAxis:axis});return targetCenter};var getScrollDisplacement=function getScrollDisplacement(droppable,viewport){return withDroppableDisplacement(droppable,viewport.scroll.diff.displacement)};var drop$1=function(_ref){var getState=_ref.getState,dispatch=_ref.dispatch;return function(next){return function(action){if("DROP"!==action.type){next(action);return}var state=getState();var reason=action.payload.reason;if("COLLECTING"===state.phase){dispatch(dropPending({reason:reason}));return}if("PREPARING"===state.phase){dispatch(clean());return}if("IDLE"===state.phase)return;var isWaitingForDrop="DROP_PENDING"===state.phase&&state.isWaiting;!isWaitingForDrop?void 0:invariant(false);"DRAGGING"===state.phase||"DROP_PENDING"===state.phase?void 0:invariant(false);var critical=state.critical;var dimensions=state.dimensions;var impact="DROP"===reason?state.impact:noImpact;var home=dimensions.droppables[state.critical.droppable.id];var draggable=dimensions.draggables[state.critical.draggable.id];var droppable=impact&&impact.destination?dimensions.droppables[impact.destination.droppableId]:null;var source={index:critical.draggable.index,droppableId:critical.droppable.id};var destination="DROP"===reason?impact.destination:null;var result={draggableId:draggable.descriptor.id,type:home.descriptor.type,source:source,destination:destination,reason:reason};var clientOffset=function(){if("CANCEL"===reason)return origin;var newBorderBoxClientCenter=getNewHomeClientBorderBoxCenter({movement:impact.movement,draggable:draggable,draggables:dimensions.draggables,destination:droppable});return subtract(newBorderBoxClientCenter,draggable.client.borderBox.center)}();var newHomeOffset=add(clientOffset,getScrollDisplacement(droppable||home,state.viewport));var isAnimationRequired=!isEqual(state.current.client.offset,newHomeOffset);var pending={newHomeOffset:newHomeOffset,result:result,impact:impact};if(isAnimationRequired){dispatch(animateDrop(pending));return}dispatch(completeDrop(result))}}};var onDragStart=function onDragStart(start){return"\n  You have lifted an item in position "+(start.source.index+1)+".\n  Use the arrow keys to move, space bar to drop, and escape to cancel.\n"};var onDragUpdate=function onDragUpdate(update){if(!update.destination)return"You are currently not dragging over a droppable area";if(update.source.droppableId===update.destination.droppableId)return"You have moved the item to position "+(update.destination.index+1);return"\n    You have moved the item from list "+update.source.droppableId+" in position "+(update.source.index+1)+"\n    to list "+update.destination.droppableId+" in position "+(update.destination.index+1)+"\n  "};var onDragEnd=function onDragEnd(result){if("CANCEL"===result.reason)return"\n      Movement cancelled.\n      The item has returned to its starting position of "+(result.source.index+1)+"\n    ";if(!result.destination)return"\n      The item has been dropped while not over a droppable location.\n      The item has returned to its starting position of "+(result.source.index+1)+"\n    ";if(result.source.droppableId===result.destination.droppableId){if(result.source.index===result.destination.index)return"\n        You have dropped the item.\n        It has been dropped on its starting position of "+(result.source.index+1)+"\n      ";return"\n      You have dropped the item.\n      It has moved from position "+(result.source.index+1)+" to "+(result.destination.index+1)+"\n    "}return"\n    You have dropped the item.\n    It has moved from position "+(result.source.index+1)+" in list "+result.source.droppableId+"\n    to position "+(result.destination.index+1)+" in list "+result.destination.droppableId+"\n  "};var preset={onDragStart:onDragStart,onDragUpdate:onDragUpdate,onDragEnd:onDragEnd};var start=function start(key){false};var finish=function finish(key){false};var withTimings=function withTimings(key,fn){start(key);fn();finish(key)};var areLocationsEqual=function areLocationsEqual(first,second){if(null==first&&null==second)return true;if(null==first||null==second)return false;return first.droppableId===second.droppableId&&first.index===second.index};var isCriticalEqual=function isCriticalEqual(first,second){if(first===second)return true;var isDraggableEqual=first.draggable.id===second.draggable.id&&first.draggable.droppableId===second.draggable.droppableId&&first.draggable.type===second.draggable.type&&first.draggable.index===second.draggable.index;var isDroppableEqual=first.droppable.id===second.droppable.id&&first.droppable.type===second.droppable.type;return isDraggableEqual&&isDroppableEqual};var getExpiringAnnounce=function getExpiringAnnounce(announce){var wasCalled=false;var isExpired=false;setTimeout(function(){isExpired=true});var result=function result(message){if(wasCalled){false;return}if(isExpired){false;return}wasCalled=true;announce(message)};result.wasCalled=function(){return wasCalled};return result};var getDragStart=function getDragStart(critical){return{draggableId:critical.draggable.id,type:critical.droppable.type,source:{droppableId:critical.droppable.id,index:critical.draggable.index}}};var hooks=function(getHooks,announce){var execute=function execute(hook,data,getDefaultMessage){if(!hook){announce(getDefaultMessage(data));return}var willExpire=getExpiringAnnounce(announce);var provided={announce:willExpire};hook(data,provided);willExpire.wasCalled()||announce(getDefaultMessage(data))};var publisher=(lastLocation=null,lastCritical=null,_isDragStartPublished=false,start$$1=function start$$1(critical){!_isDragStartPublished?void 0:invariant(false);var data=getDragStart(critical);_isDragStartPublished=true;lastCritical=critical;lastLocation=data.source;withTimings("onDragStart",function(){return execute(getHooks().onDragStart,data,preset.onDragStart)})},move=function move(critical,location){_isDragStartPublished&&lastCritical?void 0:invariant(false);var hasCriticalChanged=!isCriticalEqual(critical,lastCritical);hasCriticalChanged&&(lastCritical=critical);var hasLocationChanged=!areLocationsEqual(lastLocation,location);hasLocationChanged&&(lastLocation=location);if(!hasCriticalChanged&&!hasLocationChanged)return;var data=_extends({},getDragStart(critical),{destination:location});withTimings("onDragUpdate",function(){return execute(getHooks().onDragUpdate,data,preset.onDragUpdate)})},drop=function drop(result){_isDragStartPublished?void 0:invariant(false);_isDragStartPublished=false;lastLocation=null;lastCritical=null;withTimings("onDragEnd",function(){return execute(getHooks().onDragEnd,result,preset.onDragEnd)})},abort=function abort(){_isDragStartPublished&&lastCritical?void 0:invariant(false);var result=_extends({},getDragStart(lastCritical),{destination:null,reason:"CANCEL"});drop(result)},{start:start$$1,move:move,drop:drop,abort:abort,isDragStartPublished:function isDragStartPublished(){return _isDragStartPublished}});var lastLocation,lastCritical,_isDragStartPublished,start$$1,move,drop,abort;return function(store){return function(next){return function(action){if("INITIAL_PUBLISH"===action.type){var critical=action.payload.critical;publisher.start(critical);next(action);return}next(action);if("DROP_COMPLETE"===action.type){var result=action.payload;publisher.drop(result);return}if("CLEAN"===action.type){publisher.isDragStartPublished()&&publisher.abort();return}if(!publisher.isDragStartPublished())return;var state=store.getState();"DRAGGING"===state.phase&&publisher.move(state.critical,state.impact.destination)}}}};var dropAnimationFinish=function(store){return function(next){return function(action){if("DROP_ANIMATION_FINISHED"!==action.type){next(action);return}var state=store.getState();"DROP_ANIMATING"===state.phase?void 0:invariant(false);store.dispatch(completeDrop(state.pending.result))}}};var dimensionMarshalStopper=function(getMarshal){return function(){return function(next){return function(action){if("DROP_COMPLETE"===action.type||"CLEAN"===action.type||"DROP_ANIMATE"===action.type){var marshal=getMarshal();marshal.stopPublishing()}next(action)}}}};var shouldCancel=function shouldCancel(action){return"CANCEL"===action.type||"DROP_ANIMATE"===action.type||"DROP"===action.type||"DROP_COMPLETE"===action.type||"COLLECTION_STARTING"===action.type};var autoScroll=function(getScroller){return function(store){return function(next){return function(action){if(shouldCancel(action)){getScroller().cancel();next(action);return}next(action);var state=store.getState();if("DRAGGING"!==state.phase)return;if("FLUID"===state.autoScrollMode){getScroller().fluidScroll(state);return}if(!state.scrollJumpRequest)return;getScroller().jumpScroll(state)}}}};var shouldCheckOnAction=function shouldCheckOnAction(action){return"MOVE"===action.type||"MOVE_UP"===action.type||"MOVE_RIGHT"===action.type||"MOVE_DOWN"===action.type||"MOVE_LEFT"===action.type||"MOVE_BY_WINDOW_SCROLL"===action.type};var hasDroppableOverChanged=function hasDroppableOverChanged(previous,current){if(!previous)return Boolean(current);if(!current)return Boolean(previous);return previous.droppableId!==current.droppableId};var getNewMaxScroll=function getNewMaxScroll(previous,current,action){if(!shouldCheckOnAction(action))return null;if(!isMovementAllowed(previous)||!isMovementAllowed(current))return null;if(!hasDroppableOverChanged(previous.impact.destination,current.impact.destination))return null;var viewport=current.viewport;var doc=document.documentElement;doc?void 0:invariant(false);var maxScroll=getMaxScroll({scrollHeight:doc.scrollHeight,scrollWidth:doc.scrollWidth,width:viewport.frame.width,height:viewport.frame.height});if(isEqual(maxScroll,viewport.scroll.max))return null;return maxScroll};var maxScrollUpdater=function(store){return function(next){return function(action){var previous=store.getState();next(action);var current=store.getState();var maxScroll=getNewMaxScroll(previous,current,action);maxScroll&&next(updateViewportMaxScroll(maxScroll))}}};var composeEnhancers="object"===typeof window&&window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__?window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__:redux.compose;var createStore=function(_ref){var getDimensionMarshal=_ref.getDimensionMarshal,styleMarshal=_ref.styleMarshal,getHooks=_ref.getHooks,announce=_ref.announce,getScroller=_ref.getScroller;return redux.createStore(reducer,composeEnhancers(redux.applyMiddleware(style(styleMarshal),dimensionMarshalStopper(getDimensionMarshal),lift$1(getDimensionMarshal),drop$1,dropAnimationFinish,maxScrollUpdater,autoScroll(getScroller),hooks(getHooks,announce))))};var getEmptyMap=function getEmptyMap(){return{draggables:{},droppables:{}}};var timingKey="Publish collection from DOM";var createPublisher=function(_ref){var getProvided=_ref.getProvided,callbacks=_ref.callbacks;var advancedUsageWarning=function(){true;return function(){}}();var additions=getEmptyMap();var removals=getEmptyMap();var frameId=null;var reset=function reset(){additions=getEmptyMap();removals=getEmptyMap()};var collect=function collect(){advancedUsageWarning();if(frameId)return;frameId=requestAnimationFrame(function(){frameId=null;callbacks.collectionStarting();start(timingKey);var _getProvided=getProvided(),entries=_getProvided.entries,collection=_getProvided.collection;var windowScroll=collection.initialWindowScroll;var draggables=_Object$keys(additions.draggables).map(function(id){return entries.draggables[id].getDimension(windowScroll)});var droppables=_Object$keys(additions.droppables).map(function(id){return entries.droppables[id].callbacks.getDimensionAndWatchScroll(windowScroll,collection.scrollOptions)});var result={additions:{draggables:draggables,droppables:droppables},removals:{draggables:_Object$keys(removals.draggables),droppables:_Object$keys(removals.droppables)}};reset();finish(timingKey);callbacks.publish(result)})};var addDraggable=function addDraggable(id){additions.draggables[id]=true;removals.draggables[id]&&delete removals.draggables[id];collect()};var removeDraggable=function removeDraggable(id){removals.draggables[id]=true;additions.draggables[id]&&delete additions.draggables[id];collect()};var addDroppable=function addDroppable(id){additions.droppables[id]=true;removals.droppables[id]&&delete removals.droppables[id];collect()};var removeDroppable=function removeDroppable(id){removals.droppables[id]=true;additions.droppables[id]&&delete additions.droppables[id];collect()};var stop=function stop(){if(!frameId)return;cancelAnimationFrame(frameId);frameId=null;reset()};return{addDraggable:addDraggable,removeDraggable:removeDraggable,addDroppable:addDroppable,removeDroppable:removeDroppable,stop:stop}};var createDimensionMarshal=function(callbacks){var entries={droppables:{},draggables:{}};var collection=null;var publisher=createPublisher({callbacks:{publish:callbacks.publish,collectionStarting:callbacks.collectionStarting},getProvided:function getProvided(){collection?void 0:invariant(false);return{entries:entries,collection:collection}}});var registerDraggable=function registerDraggable(descriptor,getDimension){var entry={descriptor:descriptor,getDimension:getDimension};entries.draggables[descriptor.id]=entry;if(!collection)return;if(collection.critical.draggable.type!==descriptor.type)return;publisher.addDraggable(descriptor.id)};var updateDraggable=function updateDraggable(previous,descriptor,getDimension){entries.draggables[previous.id]?void 0:invariant(false);delete entries.draggables[previous.id];var entry={descriptor:descriptor,getDimension:getDimension};entries.draggables[descriptor.id]=entry};var unregisterDraggable=function unregisterDraggable(descriptor){var entry=entries.draggables[descriptor.id];entry?void 0:invariant(false);if(entry.descriptor!==descriptor)return;delete entries.draggables[descriptor.id];if(!collection)return;collection.critical.draggable.id!==descriptor.id?void 0:invariant(false);if(descriptor.type!==collection.critical.draggable.type)return;publisher.removeDraggable(descriptor.id)};var registerDroppable=function registerDroppable(descriptor,droppableCallbacks){var id=descriptor.id;entries.droppables[id]={descriptor:descriptor,callbacks:droppableCallbacks};if(!collection)return;if(descriptor.type!==collection.critical.droppable.type)return;publisher.addDroppable(id)};var updateDroppable=function updateDroppable(previous,descriptor,droppableCallbacks){entries.droppables[previous.id]?void 0:invariant(false);delete entries.droppables[previous.id];var entry={descriptor:descriptor,callbacks:droppableCallbacks};entries.droppables[descriptor.id]=entry;collection&&invariant(false)};var unregisterDroppable=function unregisterDroppable(descriptor){var entry=entries.droppables[descriptor.id];entry?void 0:invariant(false);if(entry.descriptor!==descriptor)return;delete entries.droppables[descriptor.id];if(!collection)return;collection.critical.droppable.id!==descriptor.id?void 0:invariant(false);if(collection.critical.droppable.type!==descriptor.type)return;publisher.removeDroppable(descriptor.id)};var updateDroppableIsEnabled=function updateDroppableIsEnabled(id,isEnabled){entries.droppables[id]?void 0:invariant(false);if(!collection)return;callbacks.updateDroppableIsEnabled({id:id,isEnabled:isEnabled})};var updateDroppableScroll=function updateDroppableScroll(id,newScroll){entries.droppables[id]?void 0:invariant(false);if(!collection)return;callbacks.updateDroppableScroll({id:id,offset:newScroll})};var scrollDroppable=function scrollDroppable(id,change){var entry=entries.droppables[id];entry?void 0:invariant(false);if(!collection)return;entry.callbacks.scroll(change)};var getInitialPublish=function getInitialPublish(args){var critical=args.critical,scrollOptions=args.scrollOptions,windowScroll=args.initialWindowScroll;var timingKey="Initial collection from DOM";start(timingKey);var home=critical.droppable;var droppables=_Object$keys(entries.droppables).map(function(id){return entries.droppables[id]}).filter(function(entry){return entry.descriptor.type===home.type}).map(function(entry){return entry.callbacks.getDimensionAndWatchScroll(windowScroll,scrollOptions)}).reduce(function(previous,dimension){previous[dimension.descriptor.id]=dimension;return previous},{});var draggables=_Object$keys(entries.draggables).map(function(id){return entries.draggables[id]}).filter(function(entry){return entry.descriptor.type===critical.draggable.type}).map(function(entry){return entry.getDimension(windowScroll)}).reduce(function(previous,dimension){previous[dimension.descriptor.id]=dimension;return previous},{});finish(timingKey);var dimensions={draggables:draggables,droppables:droppables};var result={dimensions:dimensions,critical:critical};return result};var stopPublishing=function stopPublishing(){if(!collection)return;publisher.stop();var home=collection.critical.droppable;_Object$keys(entries.droppables).filter(function(id){return entries.droppables[id].descriptor.type===home.type}).forEach(function(id){return entries.droppables[id].callbacks.unwatchScroll()});collection=null};var startPublishing=function startPublishing(request,windowScroll){!collection?void 0:invariant(false);var entry=entries.draggables[request.draggableId];entry?void 0:invariant(false);var home=entries.droppables[entry.descriptor.droppableId];home?void 0:invariant(false);var critical={draggable:entry.descriptor,droppable:home.descriptor};collection={scrollOptions:request.scrollOptions,critical:critical,initialWindowScroll:windowScroll};return getInitialPublish(collection)};var marshal={registerDraggable:registerDraggable,updateDraggable:updateDraggable,unregisterDraggable:unregisterDraggable,registerDroppable:registerDroppable,updateDroppable:updateDroppable,unregisterDroppable:unregisterDroppable,updateDroppableIsEnabled:updateDroppableIsEnabled,scrollDroppable:scrollDroppable,updateDroppableScroll:updateDroppableScroll,startPublishing:startPublishing,stopPublishing:stopPublishing};return marshal};var physics=(base={stiffness:1e3,damping:60,precision:.99},standard=_extends({},base),fast=_extends({},base,{stiffness:2*base.stiffness}),{standard:standard,fast:fast});var base,standard,fast;var css={outOfTheWay:"transform 0.2s cubic-bezier(0.2, 0, 0, 1)"};var prefix="data-react-beautiful-dnd";var dragHandle=prefix+"-drag-handle";var draggable=prefix+"-draggable";var droppable=prefix+"-droppable";var getStyles=function(styleContext){var dragHandleSelector="["+dragHandle+'="'+styleContext+'"]';var draggableSelector="["+draggable+'="'+styleContext+'"]';var droppableSelector="["+droppable+'="'+styleContext+'"]';var dragHandleStyles={base:"\n      "+dragHandleSelector+" {\n        -webkit-touch-callout: none;\n        -webkit-tap-highlight-color: rgba(0,0,0,0);\n        touch-action: manipulation;\n      }\n    ",grabCursor:"\n      "+dragHandleSelector+" {\n        cursor: -webkit-grab;\n        cursor: grab;\n      }\n    ",blockPointerEvents:"\n      "+dragHandleSelector+" {\n        pointer-events: none;\n      }\n    "};var draggableStyles={animateMovement:"\n      "+draggableSelector+" {\n        transition: "+css.outOfTheWay+";\n      }\n    "};var droppableStyles={base:"\n      "+droppableSelector+" {\n        overflow-anchor: none;\n      }\n    "};var bodyStyles={whileActiveDragging:"\n      body {\n        cursor: grabbing;\n        cursor: -webkit-grabbing;\n        user-select: none;\n        -webkit-user-select: none;\n        -moz-user-select: none;\n        -ms-user-select: none;\n      }\n    "};var base=[dragHandleStyles.base,droppableStyles.base];var resting=base.concat([dragHandleStyles.grabCursor]);var collecting=base.concat([dragHandleStyles.blockPointerEvents,bodyStyles.whileActiveDragging]);var dragging=collecting.concat([draggableStyles.animateMovement]);var dropAnimating=base.concat([dragHandleStyles.grabCursor,draggableStyles.animateMovement]);var userCancel=base.concat([draggableStyles.animateMovement]);return{resting:resting.join(""),dragging:dragging.join(""),dropAnimating:dropAnimating.join(""),collecting:collecting.join(""),userCancel:userCancel.join("")}};var count=0;var resetStyleContext=function resetStyleContext(){count=0};var getHead=function getHead(){var head=document.querySelector("head");head?void 0:invariant(false);return head};var createStyleMarshal=function(){var context=""+count++;var styles=getStyles(context);var el=null;var setStyle=memoizeOne(function(proposed){el?void 0:invariant(false);el.innerHTML=proposed});var mount=function mount(){!el?void 0:invariant(false);el=document.createElement("style");el.type="text/css";el.setAttribute(prefix,context);getHead().appendChild(el);setStyle(styles.resting)};var collecting=function collecting(){return setStyle(styles.collecting)};var dragging=function dragging(){return setStyle(styles.dragging)};var dropping=function dropping(reason){if("DROP"===reason){setStyle(styles.dropAnimating);return}setStyle(styles.userCancel)};var resting=function resting(){return setStyle(styles.resting)};var unmount=function unmount(){el?void 0:invariant(false);getHead().removeChild(el);el=null};var marshal={collecting:collecting,dragging:dragging,dropping:dropping,resting:resting,styleContext:context,mount:mount,unmount:unmount};return marshal};var canStartDrag=function(state,id){if("IDLE"===state.phase)return true;if("DROP_ANIMATING"!==state.phase)return false;if(state.pending.result.draggableId===id)return false;return"DROP"===state.pending.result.reason};var scrollWindow=function(change){window.scrollBy(change.x,change.y)};var count$1=0;var visuallyHidden={position:"absolute",width:"1px",height:"1px",margin:"-1px",border:"0",padding:"0",overflow:"hidden",clip:"rect(0 0 0 0)","clip-path":"inset(100%)"};var getBody=function getBody(){document.body?void 0:invariant(false);return document.body};var createAnnouncer=function(){var id="react-beautiful-dnd-announcement-"+count$1++;var el=null;var announce=function announce(message){el?void 0:invariant(false);el.textContent=message};var mount=function mount(){!el?void 0:invariant(false);el=document.createElement("div");el.id=id;el.setAttribute("aria-live","assertive");el.setAttribute("role","log");el.setAttribute("aria-atomic","true");_Object$assign(el.style,visuallyHidden);getBody().appendChild(el)};var unmount=function unmount(){el?void 0:invariant(false);getBody().removeChild(el);el=null};var announcer={announce:announce,id:id,mount:mount,unmount:unmount};return announcer};var getScrollableDroppables=memoizeOne(function(droppables){return toDroppableList(droppables).filter(function(droppable){if(!droppable.isEnabled)return false;if(!droppable.viewport.closestScrollable)return false;return true})});var getScrollableDroppableOver=function getScrollableDroppableOver(target,droppables){var maybe=getScrollableDroppables(droppables).find(function(droppable){droppable.viewport.closestScrollable?void 0:invariant(false);return isPositionInFrame(droppable.viewport.closestScrollable.framePageMarginBox)(target)});return maybe};var getBestScrollableDroppable=function(_ref){var center=_ref.center,destination=_ref.destination,droppables=_ref.droppables;if(destination){var _dimension=droppables[destination.droppableId];if(!_dimension.viewport.closestScrollable)return null;return _dimension}var dimension=getScrollableDroppableOver(center,droppables);return dimension};var smallestSigned=apply(function(value){if(0===value)return 0;return value>0?1:-1});var getOverlap=(getRemainder=function getRemainder(target,max){if(target<0)return target;if(target>max)return target-max;return 0},function(_ref){var current=_ref.current,max=_ref.max,change=_ref.change;var targetScroll=add(current,change);var overlap={x:getRemainder(targetScroll.x,max.x),y:getRemainder(targetScroll.y,max.y)};if(isEqual(overlap,origin))return null;return overlap});var getRemainder;var canPartiallyScroll=function canPartiallyScroll(_ref2){var rawMax=_ref2.max,current=_ref2.current,change=_ref2.change;var max={x:Math.max(current.x,rawMax.x),y:Math.max(current.y,rawMax.y)};var smallestChange=smallestSigned(change);var overlap=getOverlap({max:max,current:current,change:smallestChange});if(!overlap)return true;if(0!==smallestChange.x&&0===overlap.x)return true;if(0!==smallestChange.y&&0===overlap.y)return true;return false};var canScrollWindow=function canScrollWindow(viewport,change){return canPartiallyScroll({current:viewport.scroll.current,max:viewport.scroll.max,change:change})};var getWindowOverlap=function getWindowOverlap(viewport,change){if(!canScrollWindow(viewport,change))return null;var max=viewport.scroll.max;var current=viewport.scroll.current;return getOverlap({current:current,max:max,change:change})};var canScrollDroppable=function canScrollDroppable(droppable,change){var closest$$1=droppable.viewport.closestScrollable;if(!closest$$1)return false;return canPartiallyScroll({current:closest$$1.scroll.current,max:closest$$1.scroll.max,change:change})};var getDroppableOverlap=function getDroppableOverlap(droppable,change){var closest$$1=droppable.viewport.closestScrollable;if(!closest$$1)return null;if(!canScrollDroppable(droppable,change))return null;return getOverlap({current:closest$$1.scroll.current,max:closest$$1.scroll.max,change:change})};var config={startFrom:.25,maxSpeedAt:.05,maxScrollSpeed:28,ease:function ease(percentage){return Math.pow(percentage,2)}};var clean$1=apply(function(value){return 0===value?0:value});var getPixelThresholds=function getPixelThresholds(container,axis){var startFrom=container[axis.size]*config.startFrom;var maxSpeedAt=container[axis.size]*config.maxSpeedAt;var accelerationPlane=startFrom-maxSpeedAt;var thresholds={startFrom:startFrom,maxSpeedAt:maxSpeedAt,accelerationPlane:accelerationPlane};return thresholds};var getSpeed=function getSpeed(distance$$1,thresholds){if(distance$$1>=thresholds.startFrom)return 0;if(distance$$1<=thresholds.maxSpeedAt)return config.maxScrollSpeed;var distancePastStart=thresholds.startFrom-distance$$1;var percentage=distancePastStart/thresholds.accelerationPlane;var transformed=config.ease(percentage);var speed=config.maxScrollSpeed*transformed;return speed};var adjustForSizeLimits=function adjustForSizeLimits(_ref){var container=_ref.container,subject=_ref.subject,proposedScroll=_ref.proposedScroll;var isTooBigVertically=subject.height>container.height;var isTooBigHorizontally=subject.width>container.width;if(!isTooBigHorizontally&&!isTooBigVertically)return proposedScroll;if(isTooBigHorizontally&&isTooBigVertically)return null;return{x:isTooBigHorizontally?0:proposedScroll.x,y:isTooBigVertically?0:proposedScroll.y}};var getRequiredScroll=function getRequiredScroll(_ref2){var container=_ref2.container,subject=_ref2.subject,center=_ref2.center;var distance$$1={top:center.y-container.top,right:container.right-center.x,bottom:container.bottom-center.y,left:center.x-container.left};var y=function(){var thresholds=getPixelThresholds(container,vertical);var isCloserToBottom=distance$$1.bottom<distance$$1.top;if(isCloserToBottom)return getSpeed(distance$$1.bottom,thresholds);return-1*getSpeed(distance$$1.top,thresholds)}();var x=function(){var thresholds=getPixelThresholds(container,horizontal);var isCloserToRight=distance$$1.right<distance$$1.left;if(isCloserToRight)return getSpeed(distance$$1.right,thresholds);return-1*getSpeed(distance$$1.left,thresholds)}();var required=clean$1({x:x,y:y});if(isEqual(required,origin))return null;var limited=adjustForSizeLimits({container:container,subject:subject,proposedScroll:required});if(!limited)return null;return isEqual(limited,origin)?null:limited};var withPlaceholder=function withPlaceholder(droppable,draggable){var closest$$1=droppable.viewport.closestScrollable;if(!closest$$1)return null;var isOverHome=droppable.descriptor.id===draggable.descriptor.droppableId;var max=closest$$1.scroll.max;var current=closest$$1.scroll.current;if(isOverHome)return{max:max,current:current};var spaceForPlaceholder=patch(droppable.axis.line,draggable.placeholder.client.borderBox[droppable.axis.size]);var newMax=add(max,spaceForPlaceholder);var newCurrent={x:Math.min(current.x,newMax.x),y:Math.min(current.y,newMax.y)};return{max:newMax,current:newCurrent}};var createFluidScroller=function(_ref3){var scrollWindow=_ref3.scrollWindow,scrollDroppable=_ref3.scrollDroppable;var scheduleWindowScroll=rafSchd(scrollWindow);var scheduleDroppableScroll=rafSchd(scrollDroppable);var scroller=function scroller(state){var center=state.current.page.borderBoxCenter;var draggable=state.dimensions.draggables[state.critical.draggable.id];var subject=draggable.page.marginBox;var viewport=state.viewport;var requiredWindowScroll=getRequiredScroll({container:viewport.frame,subject:subject,center:center});if(requiredWindowScroll&&canScrollWindow(viewport,requiredWindowScroll)){scheduleWindowScroll(requiredWindowScroll);return}var droppable=getBestScrollableDroppable({center:center,destination:state.impact.destination,droppables:state.dimensions.droppables});if(!droppable)return;var closestScrollable=droppable.viewport.closestScrollable;if(!closestScrollable)return;var requiredFrameScroll=getRequiredScroll({container:closestScrollable.framePageMarginBox,subject:subject,center:center});if(!requiredFrameScroll)return;var result=withPlaceholder(droppable,draggable);if(!result)return;var closest$$1=droppable.viewport.closestScrollable;if(!closest$$1)return;var canScrollDroppable$$1=canPartiallyScroll({current:result.current,max:result.max,change:requiredFrameScroll});canScrollDroppable$$1&&scheduleDroppableScroll(droppable.descriptor.id,requiredFrameScroll)};scroller.cancel=function(){scheduleWindowScroll.cancel();scheduleDroppableScroll.cancel()};return scroller};var createJumpScroller=function(_ref){var move=_ref.move,scrollDroppable=_ref.scrollDroppable,scrollWindow=_ref.scrollWindow;var moveByOffset=function moveByOffset(state,offset){var client=add(state.current.client.selection,offset);move({client:client,shouldAnimate:true})};var scrollDroppableAsMuchAsItCan=function scrollDroppableAsMuchAsItCan(droppable,change){if(!canScrollDroppable(droppable,change))return change;var overlap=getDroppableOverlap(droppable,change);if(!overlap){scrollDroppable(droppable.descriptor.id,change);return null}var whatTheDroppableCanScroll=subtract(change,overlap);scrollDroppable(droppable.descriptor.id,whatTheDroppableCanScroll);var remainder=subtract(change,whatTheDroppableCanScroll);return remainder};var scrollWindowAsMuchAsItCan=function scrollWindowAsMuchAsItCan(viewport,change){if(!canScrollWindow(viewport,change))return change;var overlap=getWindowOverlap(viewport,change);if(!overlap){scrollWindow(change);return null}var whatTheWindowCanScroll=subtract(change,overlap);scrollWindow(whatTheWindowCanScroll);var remainder=subtract(change,whatTheWindowCanScroll);return remainder};var jumpScroller=function jumpScroller(state){var request=state.scrollJumpRequest;if(!request)return;var destination=state.impact.destination;destination?void 0:invariant(false);var droppableRemainder=scrollDroppableAsMuchAsItCan(state.dimensions.droppables[destination.droppableId],request);if(!droppableRemainder)return;var viewport=state.viewport;var windowRemainder=scrollWindowAsMuchAsItCan(viewport,droppableRemainder);if(!windowRemainder)return;moveByOffset(state,windowRemainder)};return jumpScroller};var createAutoScroller=function(_ref){var scrollDroppable=_ref.scrollDroppable,scrollWindow=_ref.scrollWindow,move=_ref.move;var fluidScroll=createFluidScroller({scrollWindow:scrollWindow,scrollDroppable:scrollDroppable});var jumpScroll=createJumpScroller({move:move,scrollWindow:scrollWindow,scrollDroppable:scrollDroppable});var marshal={cancel:fluidScroll.cancel,fluidScroll:fluidScroll,jumpScroll:jumpScroll};return marshal};var prefix$1=function prefix(key){return"private-react-beautiful-dnd-key-do-not-use-"+key};var storeKey=prefix$1("store");var droppableIdKey=prefix$1("droppable-id");var droppableTypeKey=prefix$1("droppable-type");var dimensionMarshalKey=prefix$1("dimension-marshal");var styleContextKey=prefix$1("style-context");var canLiftContextKey=prefix$1("can-lift");var _DragDropContext$chil;var resetServerContext=function resetServerContext(){resetStyleContext()};var printFatalDevError=function printFatalDevError(error){true;return};var DragDropContext=function(_React$Component){_inheritsLoose(DragDropContext,_React$Component);function DragDropContext(props,context){var _this;_this=_React$Component.call(this,props,context)||this;_this.store=void 0;_this.dimensionMarshal=void 0;_this.styleMarshal=void 0;_this.autoScroller=void 0;_this.announcer=void 0;_this.unsubscribe=void 0;_this.canLift=function(id){return canStartDrag(_this.store.getState(),id)};_this.onFatalError=function(error){printFatalDevError(error);var state=_this.store.getState();"IDLE"!==state.phase&&_this.store.dispatch(clean())};_this.onWindowError=function(error){return _this.onFatalError(error)};_this.announcer=createAnnouncer();_this.styleMarshal=createStyleMarshal();_this.store=createStore({getDimensionMarshal:function getDimensionMarshal(){return _this.dimensionMarshal},styleMarshal:_this.styleMarshal,getHooks:function getHooks(){return{onDragStart:_this.props.onDragStart,onDragEnd:_this.props.onDragEnd,onDragUpdate:_this.props.onDragUpdate}},announce:_this.announcer.announce,getScroller:function getScroller(){return _this.autoScroller}});var callbacks=redux.bindActionCreators({collectionStarting:collectionStarting,publish:publish,updateDroppableScroll:updateDroppableScroll,updateDroppableIsEnabled:updateDroppableIsEnabled},_this.store.dispatch);_this.dimensionMarshal=createDimensionMarshal(callbacks);_this.autoScroller=createAutoScroller(_extends({scrollWindow:scrollWindow,scrollDroppable:_this.dimensionMarshal.scrollDroppable},redux.bindActionCreators({move:move},_this.store.dispatch)));return _this}var _proto=DragDropContext.prototype;_proto.getChildContext=function getChildContext(){var _ref;return _ref={},_ref[storeKey]=this.store,_ref[dimensionMarshalKey]=this.dimensionMarshal,_ref[styleContextKey]=this.styleMarshal.styleContext,_ref[canLiftContextKey]=this.canLift,_ref};_proto.componentDidMount=function componentDidMount(){window.addEventListener("error",this.onWindowError);this.styleMarshal.mount();this.announcer.mount()};_proto.componentDidCatch=function componentDidCatch(error){this.onFatalError(error);if(-1!==error.message.indexOf("Invariant failed")){this.setState({});return}throw error};_proto.componentWillUnmount=function componentWillUnmount(){window.addEventListener("error",this.onWindowError);var state=this.store.getState();"IDLE"!==state.phase&&this.store.dispatch(clean());this.styleMarshal.unmount();this.announcer.unmount()};_proto.render=function render(){return this.props.children};return DragDropContext}(React__default.Component);DragDropContext.childContextTypes=(_DragDropContext$chil={},_DragDropContext$chil[storeKey]=PropTypes.shape({dispatch:PropTypes.func.isRequired,subscribe:PropTypes.func.isRequired,getState:PropTypes.func.isRequired}).isRequired,_DragDropContext$chil[dimensionMarshalKey]=PropTypes.object.isRequired,_DragDropContext$chil[styleContextKey]=PropTypes.string.isRequired,_DragDropContext$chil[canLiftContextKey]=PropTypes.func.isRequired,_DragDropContext$chil);var isScrollable=function isScrollable(){for(var _len=arguments.length,values=new Array(_len),_key=0;_key<_len;_key++)values[_key]=arguments[_key];return values.some(function(value){return"auto"===value||"scroll"===value})};var isElementScrollable=function isElementScrollable(el){var style=window.getComputedStyle(el);return isScrollable(style.overflow,style.overflowY,style.overflowX)};var getClosestScrollable=function getClosestScrollable(el){if(null==el)return null;if(!isElementScrollable(el))return getClosestScrollable(el.parentElement);return el};var _DroppableDimensionPu;var getScroll=function getScroll(el){return{x:el.scrollLeft,y:el.scrollTop}};var checkForNestedScrollContainers=function checkForNestedScrollContainers(scrollable){true;return};var listenerOptions={passive:true};var DroppableDimensionPublisher=function(_React$Component){_inheritsLoose(DroppableDimensionPublisher,_React$Component);function DroppableDimensionPublisher(props,context){var _this;_this=_React$Component.call(this,props,context)||this;_this.watchingScroll=null;_this.callbacks=void 0;_this.publishedDescriptor=null;_this.getClosestScroll=function(){if(!_this.watchingScroll)return origin;return getScroll(_this.watchingScroll.closestScrollable)};_this.memoizedUpdateScroll=memoizeOne(function(x,y){_this.publishedDescriptor?void 0:invariant(false);var newScroll={x:x,y:y};var marshal=_this.context[dimensionMarshalKey];marshal.updateDroppableScroll(_this.publishedDescriptor.id,newScroll)});_this.updateScroll=function(){var offset=_this.getClosestScroll();_this.memoizedUpdateScroll(offset.x,offset.y)};_this.scheduleScrollUpdate=rafSchd(_this.updateScroll);_this.onClosestScroll=function(){_this.watchingScroll?void 0:invariant(false);var options=_this.watchingScroll.options;if(options.shouldPublishImmediately){_this.updateScroll();return}_this.scheduleScrollUpdate()};_this.scroll=function(change){_this.watchingScroll?void 0:invariant(false);var closestScrollable=_this.watchingScroll.closestScrollable;closestScrollable.scrollTop+=change.y;closestScrollable.scrollLeft+=change.x};_this.watchScroll=function(closestScrollable,options){!_this.watchingScroll?void 0:invariant(false);if(!closestScrollable)return;_this.watchingScroll={options:options,closestScrollable:closestScrollable};closestScrollable.addEventListener("scroll",_this.onClosestScroll,listenerOptions)};_this.unwatchScroll=function(){var watching=_this.watchingScroll;if(!watching)return;_this.scheduleScrollUpdate.cancel();watching.closestScrollable.removeEventListener("scroll",_this.onClosestScroll,listenerOptions);_this.watchingScroll=null};_this.getMemoizedDescriptor=memoizeOne(function(id,type){return{id:id,type:type}});_this.publish=function(){var marshal=_this.context[dimensionMarshalKey];var descriptor=_this.getMemoizedDescriptor(_this.props.droppableId,_this.props.type);if(!_this.publishedDescriptor){marshal.registerDroppable(descriptor,_this.callbacks);_this.publishedDescriptor=descriptor;return}if(_this.publishedDescriptor===descriptor)return;marshal.updateDroppable(_this.publishedDescriptor,descriptor,_this.callbacks);_this.publishedDescriptor=descriptor};_this.unpublish=function(){_this.publishedDescriptor?void 0:invariant(false);var marshal=_this.context[dimensionMarshalKey];marshal.unregisterDroppable(_this.publishedDescriptor);_this.publishedDescriptor=null};_this.getDimensionAndWatchScroll=function(windowScroll,options){var _this$props=_this.props,direction=_this$props.direction,ignoreContainerClipping=_this$props.ignoreContainerClipping,isDropDisabled=_this$props.isDropDisabled,getDroppableRef=_this$props.getDroppableRef;var targetRef=getDroppableRef();var descriptor=_this.publishedDescriptor;targetRef?void 0:invariant(false);descriptor?void 0:invariant(false);var scrollableRef=getClosestScrollable(targetRef);checkForNestedScrollContainers(scrollableRef);_this.watchScroll(scrollableRef,options);var client=function(){var base=cssBoxModel.getBox(targetRef);if(!scrollableRef)return base;if(targetRef!==scrollableRef)return base;var top=base.paddingBox.top-scrollableRef.scrollTop;var left=base.paddingBox.left-scrollableRef.scrollLeft;var bottom=top+scrollableRef.scrollHeight;var right=left+scrollableRef.scrollWidth;var paddingBox={top:top,right:right,bottom:bottom,left:left};var borderBox={top:paddingBox.top-base.border.top,right:paddingBox.right+base.border.right,bottom:paddingBox.bottom+base.border.bottom,left:paddingBox.left-base.border.left};return cssBoxModel.createBox({borderBox:borderBox,margin:base.margin,border:base.border,padding:base.padding})}();var page=cssBoxModel.withScroll(client,windowScroll);var closest$$1=function(){if(!scrollableRef)return null;var frameClient=cssBoxModel.getBox(scrollableRef);return{client:frameClient,page:cssBoxModel.withScroll(frameClient),scrollHeight:scrollableRef.scrollHeight,scrollWidth:scrollableRef.scrollWidth,scroll:getScroll(scrollableRef),shouldClipSubject:!ignoreContainerClipping}}();return getDroppableDimension({descriptor:descriptor,isEnabled:!isDropDisabled,direction:direction,client:client,page:page,closest:closest$$1})};var callbacks={getDimensionAndWatchScroll:_this.getDimensionAndWatchScroll,unwatchScroll:_this.unwatchScroll,scroll:_this.scroll};_this.callbacks=callbacks;return _this}var _proto=DroppableDimensionPublisher.prototype;_proto.componentDidMount=function componentDidMount(){this.publish()};_proto.componentDidUpdate=function componentDidUpdate(prevProps){this.publish();if(this.props.isDropDisabled===prevProps.isDropDisabled)return;var marshal=this.context[dimensionMarshalKey];marshal.updateDroppableIsEnabled(this.props.droppableId,!this.props.isDropDisabled)};_proto.componentWillUnmount=function componentWillUnmount(){if(this.watchingScroll){false;this.unwatchScroll()}this.unpublish()};_proto.render=function render(){return this.props.children};return DroppableDimensionPublisher}(React__default.Component);DroppableDimensionPublisher.contextTypes=(_DroppableDimensionPu={},_DroppableDimensionPu[dimensionMarshalKey]=PropTypes.object.isRequired,_DroppableDimensionPu);var Placeholder=function(_PureComponent){_inheritsLoose(Placeholder,_PureComponent);function Placeholder(){return _PureComponent.apply(this,arguments)||this}var _proto=Placeholder.prototype;_proto.componentDidMount=function componentDidMount(){this.props.onMount&&this.props.onMount()};_proto.componentWillUnmount=function componentWillUnmount(){this.props.onUnmount&&this.props.onUnmount()};_proto.render=function render(){var placeholder=this.props.placeholder;var client=placeholder.client,display=placeholder.display,tagName=placeholder.tagName;var style={display:display,boxSizing:"border-box",width:client.borderBox.width,height:client.borderBox.height,marginTop:client.margin.top,marginRight:client.margin.right,marginBottom:client.margin.bottom,marginLeft:client.margin.left,flexShrink:"0",flexGrow:"0",pointerEvents:"none"};return React__default.createElement(tagName,{style:style})};return Placeholder}(React.PureComponent);var throwIfRefIsInvalid=function(ref){ref&&ref instanceof HTMLElement?void 0:invariant(false)};var _Droppable$contextTyp,_Droppable$childConte;var Droppable=function(_Component){_inheritsLoose(Droppable,_Component);function Droppable(props,context){var _this;_this=_Component.call(this,props,context)||this;_this.styleContext=void 0;_this.ref=null;_this.isPlaceholderMounted=false;_this.onPlaceholderMount=function(){_this.isPlaceholderMounted=true};_this.onPlaceholderUnmount=function(){_this.isPlaceholderMounted=false};_this.setRef=function(ref){if(null===ref)return;if(ref===_this.ref)return;_this.ref=ref;throwIfRefIsInvalid(ref)};_this.getDroppableRef=function(){return _this.ref};_this.styleContext=context[styleContextKey];return _this}var _proto=Droppable.prototype;_proto.getChildContext=function getChildContext(){var _value;var value=(_value={},_value[droppableIdKey]=this.props.droppableId,_value[droppableTypeKey]=this.props.type,_value);return value};_proto.componentDidMount=function componentDidMount(){throwIfRefIsInvalid(this.ref);this.warnIfPlaceholderNotMounted()};_proto.componentDidUpdate=function componentDidUpdate(){this.warnIfPlaceholderNotMounted()};_proto.warnIfPlaceholderNotMounted=function warnIfPlaceholderNotMounted(){true;return};_proto.getPlaceholder=function getPlaceholder(){if(!this.props.placeholder)return null;return React__default.createElement(Placeholder,{placeholder:this.props.placeholder,onMount:this.onPlaceholderMount,onUnmount:this.onPlaceholderUnmount})};_proto.render=function render(){var _this$props=this.props,children=_this$props.children,direction=_this$props.direction,droppableId=_this$props.droppableId,ignoreContainerClipping=_this$props.ignoreContainerClipping,isDraggingOver=_this$props.isDraggingOver,isDropDisabled=_this$props.isDropDisabled,draggingOverWith=_this$props.draggingOverWith,type=_this$props.type;var provided={innerRef:this.setRef,placeholder:this.getPlaceholder(),droppableProps:{"data-react-beautiful-dnd-droppable":this.styleContext}};var snapshot={isDraggingOver:isDraggingOver,draggingOverWith:draggingOverWith};return React__default.createElement(DroppableDimensionPublisher,{droppableId:droppableId,type:type,direction:direction,ignoreContainerClipping:ignoreContainerClipping,isDropDisabled:isDropDisabled,getDroppableRef:this.getDroppableRef},children(provided,snapshot))};return Droppable}(React.Component);Droppable.contextTypes=(_Droppable$contextTyp={},_Droppable$contextTyp[styleContextKey]=PropTypes.string.isRequired,_Droppable$contextTyp);Droppable.childContextTypes=(_Droppable$childConte={},_Droppable$childConte[droppableIdKey]=PropTypes.string.isRequired,_Droppable$childConte[droppableTypeKey]=PropTypes.string.isRequired,_Droppable$childConte);var isStrictEqual=function(a,b){return a===b};var makeMapStateToProps=function makeMapStateToProps(){var getIsDraggingOver=function getIsDraggingOver(id,destination){if(!destination)return false;return destination.droppableId===id};var shouldUsePlaceholder=function shouldUsePlaceholder(id,descriptor,destination){if(!destination)return false;if(id===descriptor.droppableId)return false;return id===destination.droppableId};var getMapProps=memoizeOne(function(isDraggingOver,draggingOverWith,placeholder){return{isDraggingOver:isDraggingOver,draggingOverWith:draggingOverWith,placeholder:placeholder}});var selector=function selector(state,ownProps){if(ownProps.isDropDisabled)return getMapProps(false,null,null);var id=ownProps.droppableId;if(state.isDragging){var destination=state.impact.destination;var isDraggingOver=getIsDraggingOver(id,destination);var draggableId=state.critical.draggable.id;var draggingOverWith=isDraggingOver?draggableId:null;var draggable=state.dimensions.draggables[draggableId];var placeholder=shouldUsePlaceholder(id,draggable.descriptor,destination)?draggable.placeholder:null;return getMapProps(isDraggingOver,draggingOverWith,placeholder)}if("DROP_ANIMATING"===state.phase){var _destination=state.pending.impact.destination;var _isDraggingOver=getIsDraggingOver(id,_destination);var _draggableId=state.pending.result.draggableId;var _draggingOverWith=_isDraggingOver?_draggableId:null;var _draggable=state.dimensions.draggables[_draggableId];var _placeholder=shouldUsePlaceholder(id,_draggable.descriptor,_destination)?_draggable.placeholder:null;return getMapProps(_isDraggingOver,_draggingOverWith,_placeholder)}return getMapProps(false,null,null)};return selector};var connectedDroppable=reactRedux.connect(makeMapStateToProps,null,null,{storeKey:storeKey,pure:true,areStatePropsEqual:isStrictEqual})(Droppable);connectedDroppable.defaultProps={type:"DEFAULT",isDropDisabled:false,direction:"vertical",ignoreContainerClipping:false};var _DraggableDimensionPu;var DraggableDimensionPublisher=function(_Component){_inheritsLoose(DraggableDimensionPublisher,_Component);function DraggableDimensionPublisher(){var _this;for(var _len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++)args[_key]=arguments[_key];_this=_Component.call.apply(_Component,[this].concat(args))||this;_this.publishedDescriptor=null;_this.getMemoizedDescriptor=memoizeOne(function(id,index,droppableId,type){return{id:id,index:index,droppableId:droppableId,type:type}});_this.publish=function(){var marshal=_this.context[dimensionMarshalKey];var descriptor=_this.getMemoizedDescriptor(_this.props.draggableId,_this.props.index,_this.props.droppableId,_this.props.type);if(!_this.publishedDescriptor){marshal.registerDraggable(descriptor,_this.getDimension);_this.publishedDescriptor=descriptor;return}if(descriptor===_this.publishedDescriptor)return;marshal.updateDraggable(_this.publishedDescriptor,descriptor,_this.getDimension);_this.publishedDescriptor=descriptor};_this.unpublish=function(){_this.publishedDescriptor?void 0:invariant(false);var marshal=_this.context[dimensionMarshalKey];marshal.unregisterDraggable(_this.publishedDescriptor);_this.publishedDescriptor=null};_this.getDimension=function(windowScroll){var targetRef=_this.props.getDraggableRef();var descriptor=_this.publishedDescriptor;targetRef?void 0:invariant(false);descriptor?void 0:invariant(false);var computedStyles=window.getComputedStyle(targetRef);var borderBox=targetRef.getBoundingClientRect();var client=cssBoxModel.calculateBox(borderBox,computedStyles);var page=cssBoxModel.withScroll(client,windowScroll);var placeholder={client:client,tagName:targetRef.tagName.toLowerCase(),display:computedStyles.display};var dimension={descriptor:descriptor,placeholder:placeholder,client:client,page:page};return dimension};return _this}var _proto=DraggableDimensionPublisher.prototype;_proto.componentDidMount=function componentDidMount(){this.publish()};_proto.componentDidUpdate=function componentDidUpdate(){this.publish()};_proto.componentWillUnmount=function componentWillUnmount(){this.unpublish()};_proto.render=function render(){return this.props.children};return DraggableDimensionPublisher}(React.Component);DraggableDimensionPublisher.contextTypes=(_DraggableDimensionPu={},_DraggableDimensionPu[dimensionMarshalKey]=PropTypes.object.isRequired,_DraggableDimensionPu);var DoubleRenderBlocker=function(_React$Component){_inheritsLoose(DoubleRenderBlocker,_React$Component);function DoubleRenderBlocker(){return _React$Component.apply(this,arguments)||this}var _proto=DoubleRenderBlocker.prototype;_proto.shouldComponentUpdate=function shouldComponentUpdate(nextProps){if(isEqual(origin,nextProps.change))return true;if(isEqual(this.props.change,nextProps.change))return false;return true};_proto.render=function render(){return this.props.children(this.props.change)};return DoubleRenderBlocker}(React__default.Component);var Moveable=function(_Component){_inheritsLoose(Moveable,_Component);function Moveable(){return _Component.apply(this,arguments)||this}var _proto2=Moveable.prototype;_proto2.getFinal=function getFinal(){var destination=this.props.destination;var speed=this.props.speed;if("INSTANT"===speed)return destination;var config="FAST"===speed?physics.fast:physics.standard;return{x:reactMotion.spring(destination.x,config),y:reactMotion.spring(destination.y,config)}};_proto2.render=function render(){var _this=this;var final=this.getFinal();return React__default.createElement(reactMotion.Motion,{defaultStyle:origin,style:final,onRest:this.props.onMoveEnd},function(current){var _this$props=_this.props,speed=_this$props.speed,destination=_this$props.destination,children=_this$props.children;var target="INSTANT"===speed?destination:current;return React__default.createElement(DoubleRenderBlocker,{change:target},children)})};return Moveable}(React.Component);Moveable.defaultProps={destination:origin};var getWindowFromRef=function(ref){return ref?ref.ownerDocument.defaultView:window};var selector="["+dragHandle+"]";var isSVG=function isSVG(el){if("undefined"===typeof SVGElement)return false;return el instanceof SVGElement};var throwIfSVG=function throwIfSVG(el){!isSVG(el)?void 0:invariant(false)};var getDragHandleRef=function getDragHandleRef(draggableRef){if(draggableRef.hasAttribute(dragHandle)){throwIfSVG(draggableRef);return draggableRef}var el=draggableRef.querySelector(selector);throwIfSVG(draggableRef);el?void 0:invariant(false);el instanceof HTMLElement?void 0:invariant(false);return el};var retainingFocusFor=null;var listenerOptions$1={capture:true};var clearRetentionOnFocusChange=function(){var isBound=false;var bind=function bind(){if(isBound)return;isBound=true;window.addEventListener("focus",onWindowFocusChange,listenerOptions$1)};var unbind=function unbind(){if(!isBound)return;isBound=false;window.removeEventListener("focus",onWindowFocusChange,listenerOptions$1)};var onWindowFocusChange=function onWindowFocusChange(){unbind();retainingFocusFor=null};var result=function result(){return bind()};result.cancel=function(){return unbind()};return result}();var retain=function retain(id){retainingFocusFor=id;clearRetentionOnFocusChange()};var tryRestoreFocus=function tryRestoreFocus(id,draggableRef){if(!retainingFocusFor)return;if(id!==retainingFocusFor)return;retainingFocusFor=null;clearRetentionOnFocusChange.cancel();var dragHandleRef=getDragHandleRef(draggableRef);if(!dragHandleRef){console.warn("Could not find drag handle in the DOM to focus on it");return}dragHandleRef.focus()};var retainer={retain:retain,tryRestoreFocus:tryRestoreFocus};var interactiveTagNames={input:true,button:true,textarea:true,select:true,option:true,optgroup:true,video:true,audio:true};var isAnInteractiveElement=function isAnInteractiveElement(parent,current){if(null==current)return false;var hasAnInteractiveTag=Boolean(interactiveTagNames[current.tagName.toLowerCase()]);if(hasAnInteractiveTag)return true;var attribute=current.getAttribute("contenteditable");if("true"===attribute||""===attribute)return true;if(current===parent)return false;return isAnInteractiveElement(parent,current.parentElement)};var shouldAllowDraggingFromTarget=function(event,props){if(props.canDragInteractiveElements)return true;var target=event.target,currentTarget=event.currentTarget;if(!(target instanceof Element)||!(currentTarget instanceof Element))return true;return!isAnInteractiveElement(currentTarget,target)};var createScheduler=function(callbacks){var memoizedMove=memoizeOne(function(x,y){var point={x:x,y:y};callbacks.onMove(point)});var move=rafSchd(function(point){return memoizedMove(point.x,point.y)});var moveUp=rafSchd(callbacks.onMoveUp);var moveDown=rafSchd(callbacks.onMoveDown);var moveRight=rafSchd(callbacks.onMoveRight);var moveLeft=rafSchd(callbacks.onMoveLeft);var windowScrollMove=rafSchd(callbacks.onWindowScroll);var cancel=function cancel(){move.cancel();moveUp.cancel();moveDown.cancel();moveRight.cancel();moveLeft.cancel();windowScrollMove.cancel()};return{move:move,moveUp:moveUp,moveDown:moveDown,moveRight:moveRight,moveLeft:moveLeft,windowScrollMove:windowScrollMove,cancel:cancel}};var sloppyClickThreshold=5;var isSloppyClickThresholdExceeded=function(original,current){return Math.abs(current.x-original.x)>=sloppyClickThreshold||Math.abs(current.y-original.y)>=sloppyClickThreshold};var tab=9;var enter=13;var escape=27;var space=32;var pageUp=33;var pageDown=34;var end=35;var home=36;var arrowLeft=37;var arrowUp=38;var arrowRight=39;var arrowDown=40;var _preventedKeys;var preventedKeys=(_preventedKeys={},_preventedKeys[enter]=true,_preventedKeys[tab]=true,_preventedKeys);var preventStandardKeyEvents=function(event){preventedKeys[event.keyCode]&&event.preventDefault()};var getOptions=function getOptions(shared,fromBinding){return _extends({},shared,fromBinding)};var bindEvents=function bindEvents(el,bindings,sharedOptions){bindings.forEach(function(binding){var options=getOptions(sharedOptions,binding.options);el.addEventListener(binding.eventName,binding.fn,options)})};var unbindEvents=function unbindEvents(el,bindings,sharedOptions){bindings.forEach(function(binding){var options=getOptions(sharedOptions,binding.options);el.removeEventListener(binding.eventName,binding.fn,options)})};var createPostDragEventPreventer=function(getWindow){var isBound=false;var bind=function bind(){if(isBound)return;isBound=true;bindEvents(getWindow(),pointerEvents,{capture:true})};var unbind=function unbind(){if(!isBound)return;isBound=false;unbindEvents(getWindow(),pointerEvents,{capture:true})};var pointerEvents=[{eventName:"click",fn:function fn(event){event.preventDefault();unbind()}},{eventName:"mousedown",fn:unbind},{eventName:"touchstart",fn:unbind}];var preventNext=function preventNext(){isBound&&unbind();bind()};var preventer={preventNext:preventNext,abort:unbind};return preventer};var createEventMarshal=function(){var isMouseDownHandled=false;var handle=function handle(){!isMouseDownHandled?void 0:invariant(false);isMouseDownHandled=true};var isHandled=function isHandled(){return isMouseDownHandled};var reset=function reset(){isMouseDownHandled=false};return{handle:handle,isHandled:isHandled,reset:reset}};var supportedEventName=function(){var base="visibilitychange";if("undefined"===typeof document)return base;var candidates=[base,"ms"+base,"webkit"+base,"moz"+base,"o"+base];var supported=candidates.find(function(eventName){return"on"+eventName in document});return supported||base}();var primaryButton=0;var noop=function noop(){};var mouseDownMarshal=createEventMarshal();var createMouseSensor=function(_ref){var callbacks=_ref.callbacks,getWindow=_ref.getWindow,canStartCapturing=_ref.canStartCapturing;var state={isDragging:false,pending:null};var setState=function setState(newState){state=newState};var isDragging=function isDragging(){return state.isDragging};var isCapturing=function isCapturing(){return Boolean(state.pending||state.isDragging)};var schedule=createScheduler(callbacks);var postDragEventPreventer=createPostDragEventPreventer(getWindow);var startDragging=function startDragging(fn){void 0===fn&&(fn=noop);setState({pending:null,isDragging:true});fn()};var stopDragging=function stopDragging(fn,shouldBlockClick){void 0===fn&&(fn=noop);void 0===shouldBlockClick&&(shouldBlockClick=true);schedule.cancel();unbindWindowEvents();mouseDownMarshal.reset();shouldBlockClick&&postDragEventPreventer.preventNext();setState({isDragging:false,pending:null});fn()};var startPendingDrag=function startPendingDrag(point){setState({pending:point,isDragging:false});bindWindowEvents()};var stopPendingDrag=function stopPendingDrag(){stopDragging(noop,false)};var kill=function kill(fn){void 0===fn&&(fn=noop);if(state.pending){stopPendingDrag();return}stopDragging(fn)};var unmount=function unmount(){kill();postDragEventPreventer.abort()};var cancel=function cancel(){kill(callbacks.onCancel)};var windowBindings=[{eventName:"mousemove",fn:function fn(event){var button=event.button,clientX=event.clientX,clientY=event.clientY;if(button!==primaryButton)return;var point={x:clientX,y:clientY};if(state.isDragging){event.preventDefault();schedule.move(point);return}if(!state.pending){kill();invariant(false)}if(!isSloppyClickThresholdExceeded(state.pending,point))return;event.preventDefault();startDragging(function(){return callbacks.onLift({clientSelection:point,autoScrollMode:"FLUID"})})}},{eventName:"mouseup",fn:function fn(event){if(state.pending){stopPendingDrag();return}event.preventDefault();stopDragging(callbacks.onDrop)}},{eventName:"mousedown",fn:function fn(event){state.isDragging&&event.preventDefault();stopDragging(callbacks.onCancel)}},{eventName:"keydown",fn:function fn(event){if(!state.isDragging){cancel();return}if(event.keyCode===escape){event.preventDefault();cancel();return}preventStandardKeyEvents(event)}},{eventName:"resize",fn:cancel},{eventName:"scroll",options:{passive:true,capture:false},fn:function fn(){if(state.pending){stopPendingDrag();return}schedule.windowScrollMove()}},{eventName:"webkitmouseforcechanged",fn:function fn(event){if(null==event.webkitForce||null==MouseEvent.WEBKIT_FORCE_AT_FORCE_MOUSE_DOWN){false;return}var forcePressThreshold=MouseEvent.WEBKIT_FORCE_AT_FORCE_MOUSE_DOWN;var isForcePressing=event.webkitForce>=forcePressThreshold;isForcePressing&&cancel()}},{eventName:supportedEventName,fn:cancel}];var bindWindowEvents=function bindWindowEvents(){var win=getWindow();bindEvents(win,windowBindings,{capture:true})};var unbindWindowEvents=function unbindWindowEvents(){var win=getWindow();unbindEvents(win,windowBindings,{capture:true})};var onMouseDown=function onMouseDown(event){if(mouseDownMarshal.isHandled())return;!isCapturing()?void 0:invariant(false);if(!canStartCapturing(event))return;if(event.button!==primaryButton)return;if(event.ctrlKey||event.metaKey||event.shiftKey||event.altKey)return;mouseDownMarshal.handle();event.preventDefault();var point={x:event.clientX,y:event.clientY};startPendingDrag(point)};var sensor={onMouseDown:onMouseDown,kill:kill,isCapturing:isCapturing,isDragging:isDragging,unmount:unmount};return sensor};var getBorderBoxCenterPosition=function(el){return cssBoxModel.getRect(el.getBoundingClientRect()).center};var _scrollJumpKeys;var scrollJumpKeys=(_scrollJumpKeys={},_scrollJumpKeys[pageDown]=true,_scrollJumpKeys[pageUp]=true,_scrollJumpKeys[home]=true,_scrollJumpKeys[end]=true,_scrollJumpKeys);var noop$1=function noop(){};var createKeyboardSensor=function(_ref){var callbacks=_ref.callbacks,getWindow=_ref.getWindow,getDraggableRef=_ref.getDraggableRef,canStartCapturing=_ref.canStartCapturing;var state={isDragging:false};var setState=function setState(newState){state=newState};var startDragging=function startDragging(fn){void 0===fn&&(fn=noop$1);setState({isDragging:true});bindWindowEvents();fn()};var stopDragging=function stopDragging(fn){void 0===fn&&(fn=noop$1);schedule.cancel();unbindWindowEvents();setState({isDragging:false});fn()};var kill=function kill(){return stopDragging()};var cancel=function cancel(){stopDragging(callbacks.onCancel)};var isDragging=function isDragging(){return state.isDragging};var schedule=createScheduler(callbacks);var onKeyDown=function onKeyDown(event){if(!isDragging()){if(event.defaultPrevented)return;if(!canStartCapturing(event))return;if(event.keyCode!==space)return;var ref=getDraggableRef();ref?void 0:invariant(false);var center=getBorderBoxCenterPosition(ref);event.preventDefault();startDragging(function(){return callbacks.onLift({clientSelection:center,autoScrollMode:"JUMP"})});return}if(event.keyCode===escape){event.preventDefault();cancel();return}if(event.keyCode===space){event.preventDefault();stopDragging(callbacks.onDrop);return}if(event.keyCode===arrowDown){event.preventDefault();schedule.moveDown();return}if(event.keyCode===arrowUp){event.preventDefault();schedule.moveUp();return}if(event.keyCode===arrowRight){event.preventDefault();schedule.moveRight();return}if(event.keyCode===arrowLeft){event.preventDefault();schedule.moveLeft();return}if(scrollJumpKeys[event.keyCode]){event.preventDefault();return}preventStandardKeyEvents(event)};var windowBindings=[{eventName:"mousedown",fn:cancel},{eventName:"mouseup",fn:cancel},{eventName:"click",fn:cancel},{eventName:"touchstart",fn:cancel},{eventName:"resize",fn:cancel},{eventName:"wheel",fn:cancel},{eventName:"scroll",options:{capture:false},fn:callbacks.onWindowScroll},{eventName:supportedEventName,fn:cancel}];var bindWindowEvents=function bindWindowEvents(){bindEvents(getWindow(),windowBindings,{capture:true})};var unbindWindowEvents=function unbindWindowEvents(){unbindEvents(getWindow(),windowBindings,{capture:true})};var sensor={onKeyDown:onKeyDown,kill:kill,isDragging:isDragging,isCapturing:isDragging,unmount:kill};return sensor};var timeForLongPress=150;var forcePressThreshold=.15;var touchStartMarshal=createEventMarshal();var noop$2=function noop(){};var webkitHack=function(){var stub={preventTouchMove:noop$2,releaseTouchMove:noop$2};if("undefined"===typeof window)return stub;if(!("ontouchstart"in window))return stub;var isBlocking=false;window.addEventListener("touchmove",function(event){if(!isBlocking)return;if(event.defaultPrevented)return;event.preventDefault()},{passive:false,capture:false});var preventTouchMove=function preventTouchMove(){isBlocking=true};var releaseTouchMove=function releaseTouchMove(){isBlocking=false};return{preventTouchMove:preventTouchMove,releaseTouchMove:releaseTouchMove}}();var initial={isDragging:false,pending:null,hasMoved:false,longPressTimerId:null};var createTouchSensor=function(_ref){var callbacks=_ref.callbacks,getWindow=_ref.getWindow,canStartCapturing=_ref.canStartCapturing;var state=initial;var setState=function setState(partial){state=_extends({},state,partial)};var isDragging=function isDragging(){return state.isDragging};var isCapturing=function isCapturing(){return Boolean(state.pending||state.isDragging||state.longPressTimerId)};var schedule=createScheduler(callbacks);var postDragEventPreventer=createPostDragEventPreventer(getWindow);var startDragging=function startDragging(){var pending=state.pending;if(!pending){kill();invariant(false)}setState({isDragging:true,hasMoved:false,pending:null,longPressTimerId:null});callbacks.onLift({clientSelection:pending,autoScrollMode:"FLUID"})};var stopDragging=function stopDragging(fn){void 0===fn&&(fn=noop$2);schedule.cancel();touchStartMarshal.reset();webkitHack.releaseTouchMove();unbindWindowEvents();postDragEventPreventer.preventNext();setState(initial);fn()};var startPendingDrag=function startPendingDrag(event){var touch=event.touches[0];var clientX=touch.clientX,clientY=touch.clientY;var point={x:clientX,y:clientY};var longPressTimerId=setTimeout(startDragging,timeForLongPress);setState({longPressTimerId:longPressTimerId,pending:point,isDragging:false,hasMoved:false});bindWindowEvents()};var stopPendingDrag=function stopPendingDrag(){state.longPressTimerId&&clearTimeout(state.longPressTimerId);schedule.cancel();touchStartMarshal.reset();webkitHack.releaseTouchMove();unbindWindowEvents();setState(initial)};var kill=function kill(fn){void 0===fn&&(fn=noop$2);if(state.pending){stopPendingDrag();return}stopDragging(fn)};var unmount=function unmount(){kill();postDragEventPreventer.abort()};var cancel=function cancel(){kill(callbacks.onCancel)};var windowBindings=[{eventName:"touchmove",options:{passive:false},fn:function fn(event){if(!state.isDragging){stopPendingDrag();return}state.hasMoved||setState({hasMoved:true});var _event$touches$=event.touches[0],clientX=_event$touches$.clientX,clientY=_event$touches$.clientY;var point={x:clientX,y:clientY};event.preventDefault();schedule.move(point)}},{eventName:"touchend",fn:function fn(event){if(!state.isDragging){stopPendingDrag();return}event.preventDefault();stopDragging(callbacks.onDrop)}},{eventName:"touchcancel",fn:function fn(event){if(!state.isDragging){stopPendingDrag();return}event.preventDefault();stopDragging(callbacks.onCancel)}},{eventName:"touchstart",fn:cancel},{eventName:"orientationchange",fn:cancel},{eventName:"resize",fn:cancel},{eventName:"scroll",options:{passive:true,capture:false},fn:function fn(){if(state.pending){stopPendingDrag();return}schedule.windowScrollMove()}},{eventName:"contextmenu",fn:function fn(event){event.preventDefault()}},{eventName:"keydown",fn:function fn(event){if(!state.isDragging){cancel();return}event.keyCode===escape&&event.preventDefault();cancel()}},{eventName:"touchforcechange",fn:function fn(event){if(state.hasMoved){event.preventDefault();return}var touch=event.touches[0];touch.force>=forcePressThreshold&&cancel()}},{eventName:supportedEventName,fn:cancel}];var bindWindowEvents=function bindWindowEvents(){bindEvents(getWindow(),windowBindings,{capture:true})};var unbindWindowEvents=function unbindWindowEvents(){unbindEvents(getWindow(),windowBindings,{capture:true})};var onTouchStart=function onTouchStart(event){if(touchStartMarshal.isHandled())return;!isCapturing()?void 0:invariant(false);if(!canStartCapturing(event))return;touchStartMarshal.handle();webkitHack.preventTouchMove();startPendingDrag(event)};var sensor={onTouchStart:onTouchStart,kill:kill,isCapturing:isCapturing,isDragging:isDragging,unmount:unmount};return sensor};var _DragHandle$contextTy;var preventHtml5Dnd=function preventHtml5Dnd(event){event.preventDefault()};var DragHandle=function(_Component){_inheritsLoose(DragHandle,_Component);function DragHandle(props,context){var _this;_this=_Component.call(this,props,context)||this;_this.mouseSensor=void 0;_this.keyboardSensor=void 0;_this.touchSensor=void 0;_this.sensors=void 0;_this.styleContext=void 0;_this.canLift=void 0;_this.isFocused=false;_this.lastDraggableRef=void 0;_this.onFocus=function(){_this.isFocused=true};_this.onBlur=function(){_this.isFocused=false};_this.onKeyDown=function(event){if(_this.mouseSensor.isCapturing()||_this.touchSensor.isCapturing())return;_this.keyboardSensor.onKeyDown(event)};_this.onMouseDown=function(event){if(_this.keyboardSensor.isCapturing()||_this.mouseSensor.isCapturing())return;_this.mouseSensor.onMouseDown(event)};_this.onTouchStart=function(event){if(_this.mouseSensor.isCapturing()||_this.keyboardSensor.isCapturing())return;_this.touchSensor.onTouchStart(event)};_this.canStartCapturing=function(event){if(_this.isAnySensorCapturing())return false;if(!_this.canLift(_this.props.draggableId))return false;return shouldAllowDraggingFromTarget(event,_this.props)};_this.isAnySensorCapturing=function(){return _this.sensors.some(function(sensor){return sensor.isCapturing()})};_this.getProvided=memoizeOne(function(isEnabled){if(!isEnabled)return null;var provided={onMouseDown:_this.onMouseDown,onKeyDown:_this.onKeyDown,onTouchStart:_this.onTouchStart,onFocus:_this.onFocus,onBlur:_this.onBlur,tabIndex:0,"data-react-beautiful-dnd-drag-handle":_this.styleContext,"aria-roledescription":"Draggable item. Press space bar to lift",draggable:false,onDragStart:preventHtml5Dnd};return provided});var getWindow=function getWindow(){return getWindowFromRef(_this.props.getDraggableRef())};var args={callbacks:_this.props.callbacks,getDraggableRef:_this.props.getDraggableRef,getWindow:getWindow,canStartCapturing:_this.canStartCapturing};_this.mouseSensor=createMouseSensor(args);_this.keyboardSensor=createKeyboardSensor(args);_this.touchSensor=createTouchSensor(args);_this.sensors=[_this.mouseSensor,_this.keyboardSensor,_this.touchSensor];_this.styleContext=context[styleContextKey];_this.canLift=context[canLiftContextKey];return _this}var _proto=DragHandle.prototype;_proto.componentDidMount=function componentDidMount(){var draggableRef=this.props.getDraggableRef();this.lastDraggableRef=draggableRef;draggableRef?void 0:invariant(false);if(!this.props.isEnabled)return;var dragHandleRef=getDragHandleRef(draggableRef);retainer.tryRestoreFocus(this.props.draggableId,dragHandleRef)};_proto.componentDidUpdate=function componentDidUpdate(prevProps){var _this2=this;var ref=this.props.getDraggableRef();if(ref!==this.lastDraggableRef){this.lastDraggableRef=ref;if(!ref||!this.isFocused)return;if(!this.props.isEnabled)return;getDragHandleRef(ref).focus()}var isCapturing=this.isAnySensorCapturing();if(!isCapturing)return;var isDragStopping=prevProps.isDragging&&!this.props.isDragging;isDragStopping&&this.sensors.forEach(function(sensor){sensor.isCapturing()&&sensor.kill()});if(this.props.isEnabled)return;this.sensors.forEach(function(sensor){if(!sensor.isCapturing())return;var wasDragging=sensor.isDragging();sensor.kill();if(wasDragging){false;_this2.props.callbacks.onCancel()}})};_proto.componentWillUnmount=function componentWillUnmount(){var _this3=this;this.sensors.forEach(function(sensor){var wasDragging=sensor.isDragging();sensor.unmount();wasDragging&&_this3.props.callbacks.onCancel()});var shouldRetainFocus=function(){if(!_this3.props.isEnabled)return false;if(!_this3.isFocused)return false;return _this3.props.isDragging||_this3.props.isDropAnimating}();shouldRetainFocus&&retainer.retain(this.props.draggableId)};_proto.render=function render(){var _this$props=this.props,children=_this$props.children,isEnabled=_this$props.isEnabled;return children(this.getProvided(isEnabled))};return DragHandle}(React.Component);DragHandle.contextTypes=(_DragHandle$contextTy={},_DragHandle$contextTy[styleContextKey]=PropTypes.string.isRequired,_DragHandle$contextTy[canLiftContextKey]=PropTypes.func.isRequired,_DragHandle$contextTy);var getWindowScroll=function(){return{x:window.pageXOffset,y:window.pageYOffset}};var getViewport=function(){var scroll=getWindowScroll();var top=scroll.y;var left=scroll.x;var doc=document.documentElement;doc?void 0:invariant(false);var width=doc.clientWidth;var height=doc.clientHeight;var right=left+width;var bottom=top+height;var frame=cssBoxModel.getRect({top:top,left:left,right:right,bottom:bottom});var maxScroll=getMaxScroll({scrollHeight:doc.scrollHeight,scrollWidth:doc.scrollWidth,width:frame.width,height:frame.height});var viewport={frame:frame,scroll:{initial:scroll,current:scroll,max:maxScroll,diff:{value:origin,displacement:origin}}};return viewport};var _Draggable$contextTyp;var zIndexOptions={dragging:5e3,dropAnimating:4500};var getTranslate=function getTranslate(offset){if(isEqual(offset,origin))return null;return"translate("+offset.x+"px, "+offset.y+"px)"};var getSpeed$1=function getSpeed(isDragging,shouldAnimateDragMovement,isDropAnimating){if(isDropAnimating)return"STANDARD";if(isDragging&&shouldAnimateDragMovement)return"FAST";return"INSTANT"};var Draggable=function(_Component){_inheritsLoose(Draggable,_Component);function Draggable(props,context){var _this;_this=_Component.call(this,props,context)||this;_this.callbacks=void 0;_this.styleContext=void 0;_this.ref=null;_this.onMoveEnd=function(){_this.props.isDropAnimating&&_this.props.dropAnimationFinished()};_this.onLift=function(options){start("LIFT");var ref=_this.ref;ref?void 0:invariant(false);!_this.props.isDragDisabled?void 0:invariant(false);var clientSelection=options.clientSelection,autoScrollMode=options.autoScrollMode;var _this$props=_this.props,lift=_this$props.lift,draggableId=_this$props.draggableId;var client={selection:clientSelection,borderBoxCenter:getBorderBoxCenterPosition(ref),offset:origin};lift({id:draggableId,client:client,autoScrollMode:autoScrollMode,viewport:getViewport()});finish("LIFT")};_this.setRef=function(ref){if(null===ref)return;if(ref===_this.ref)return;_this.ref=ref;throwIfRefIsInvalid(ref)};_this.getDraggableRef=function(){return _this.ref};_this.getDraggingStyle=memoizeOne(function(change,dimension,isDropAnimating){var box=dimension.client;var style={position:"fixed",top:box.marginBox.top,left:box.marginBox.left,boxSizing:"border-box",width:box.borderBox.width,height:box.borderBox.height,transition:"none",zIndex:isDropAnimating?zIndexOptions.dropAnimating:zIndexOptions.dragging,transform:getTranslate(change),pointerEvents:"none"};return style});_this.getNotDraggingStyle=memoizeOne(function(current,shouldAnimateDisplacement){var style={transform:getTranslate(current),transition:shouldAnimateDisplacement?null:"none"};return style});_this.getProvided=memoizeOne(function(change,isDragging,isDropAnimating,shouldAnimateDisplacement,dimension,dragHandleProps){var useDraggingStyle=isDragging||isDropAnimating;var draggableStyle=function(){if(!useDraggingStyle)return _this.getNotDraggingStyle(change,shouldAnimateDisplacement);dimension?void 0:invariant(false);return _this.getDraggingStyle(change,dimension,isDropAnimating)}();var provided={innerRef:_this.setRef,draggableProps:{"data-react-beautiful-dnd-draggable":_this.styleContext,style:draggableStyle},dragHandleProps:dragHandleProps};return provided});_this.getSnapshot=memoizeOne(function(isDragging,isDropAnimating,draggingOver){return{isDragging:isDragging||isDropAnimating,isDropAnimating:isDropAnimating,draggingOver:draggingOver}});_this.renderChildren=function(change,dragHandleProps){var _this$props2=_this.props,isDragging=_this$props2.isDragging,isDropAnimating=_this$props2.isDropAnimating,dimension=_this$props2.dimension,draggingOver=_this$props2.draggingOver,shouldAnimateDisplacement=_this$props2.shouldAnimateDisplacement,children=_this$props2.children;var child=children(_this.getProvided(change,isDragging,isDropAnimating,shouldAnimateDisplacement,dimension,dragHandleProps),_this.getSnapshot(isDragging,isDropAnimating,draggingOver));var isDraggingOrDropping=isDragging||isDropAnimating;var placeholder=function(){if(!isDraggingOrDropping)return null;dimension?void 0:invariant(false);return React__default.createElement(Placeholder,{placeholder:dimension.placeholder})}();return React__default.createElement(React.Fragment,null,child,placeholder)};var callbacks={onLift:_this.onLift,onMove:function onMove(clientSelection){return props.move({client:clientSelection,shouldAnimate:false})},onDrop:function onDrop(){return props.drop({reason:"DROP"})},onCancel:function onCancel(){return props.drop({reason:"CANCEL"})},onMoveUp:props.moveUp,onMoveDown:props.moveDown,onMoveRight:props.moveRight,onMoveLeft:props.moveLeft,onWindowScroll:function onWindowScroll(){return props.moveByWindowScroll({scroll:getWindowScroll()})}};_this.callbacks=callbacks;_this.styleContext=context[styleContextKey];return _this}var _proto=Draggable.prototype;_proto.componentWillUnmount=function componentWillUnmount(){this.ref=null};_proto.render=function render(){var _this2=this;var _this$props3=this.props,draggableId=_this$props3.draggableId,index=_this$props3.index,offset=_this$props3.offset,isDragging=_this$props3.isDragging,isDropAnimating=_this$props3.isDropAnimating,isDragDisabled=_this$props3.isDragDisabled,shouldAnimateDragMovement=_this$props3.shouldAnimateDragMovement,disableInteractiveElementBlocking=_this$props3.disableInteractiveElementBlocking;var droppableId=this.context[droppableIdKey];var type=this.context[droppableTypeKey];var speed=getSpeed$1(isDragging,shouldAnimateDragMovement,isDropAnimating);return React__default.createElement(DraggableDimensionPublisher,{key:draggableId,draggableId:draggableId,droppableId:droppableId,type:type,index:index,getDraggableRef:this.getDraggableRef},React__default.createElement(Moveable,{speed:speed,destination:offset,onMoveEnd:this.onMoveEnd},function(change){return React__default.createElement(DragHandle,{draggableId:draggableId,isDragging:isDragging,isDropAnimating:isDropAnimating,isEnabled:!isDragDisabled,callbacks:_this2.callbacks,getDraggableRef:_this2.getDraggableRef,canDragInteractiveElements:disableInteractiveElementBlocking},function(dragHandleProps){return _this2.renderChildren(change,dragHandleProps)})}))};return Draggable}(React.Component);Draggable.contextTypes=(_Draggable$contextTyp={},_Draggable$contextTyp[droppableIdKey]=PropTypes.string.isRequired,_Draggable$contextTyp[droppableTypeKey]=PropTypes.string.isRequired,_Draggable$contextTyp[styleContextKey]=PropTypes.string.isRequired,_Draggable$contextTyp);var defaultMapProps={isDropAnimating:false,isDragging:false,offset:origin,shouldAnimateDragMovement:false,shouldAnimateDisplacement:true,dimension:null,draggingOver:null};var makeMapStateToProps$1=function makeMapStateToProps(){var memoizedOffset=memoizeOne(function(x,y){return{x:x,y:y}});var getNotDraggingProps=memoizeOne(function(offset,shouldAnimateDisplacement){return{isDropAnimating:false,isDragging:false,offset:offset,shouldAnimateDisplacement:shouldAnimateDisplacement,shouldAnimateDragMovement:false,dimension:null,draggingOver:null}});var getDraggingProps=memoizeOne(function(offset,shouldAnimateDragMovement,dimension,draggingOver){return{isDragging:true,isDropAnimating:false,shouldAnimateDisplacement:false,offset:offset,shouldAnimateDragMovement:shouldAnimateDragMovement,dimension:dimension,draggingOver:draggingOver}});var getOutOfTheWayMovement=function getOutOfTheWayMovement(id,movement){var map=getDisplacementMap(movement.displaced);var displacement=map[id];if(!displacement)return null;if(!displacement.isVisible)return null;var amount=movement.isBeyondStartPosition?negate(movement.amount):movement.amount;return getNotDraggingProps(memoizedOffset(amount.x,amount.y),displacement.shouldAnimate)};var draggingSelector=function draggingSelector(state,ownProps){if(state.isDragging){if(state.critical.draggable.id!==ownProps.draggableId)return null;var offset=state.current.client.offset;var dimension=state.dimensions.draggables[ownProps.draggableId];var shouldAnimateDragMovement=state.shouldAnimate;var draggingOver=state.impact.destination?state.impact.destination.droppableId:null;return getDraggingProps(memoizedOffset(offset.x,offset.y),shouldAnimateDragMovement,dimension,draggingOver)}if("DROP_ANIMATING"===state.phase){var pending=state.pending;if(pending.result.draggableId!==ownProps.draggableId)return null;var _draggingOver=pending.result.destination?pending.result.destination.droppableId:null;return{isDragging:false,isDropAnimating:true,offset:pending.newHomeOffset,dimension:state.dimensions.draggables[ownProps.draggableId],draggingOver:_draggingOver,shouldAnimateDragMovement:false,shouldAnimateDisplacement:false}}return null};var movingOutOfTheWaySelector=function movingOutOfTheWaySelector(state,ownProps){if(state.isDragging){if(state.critical.draggable.id===ownProps.draggableId)return null;return getOutOfTheWayMovement(ownProps.draggableId,state.impact.movement)}if("DROP_ANIMATING"===state.phase){if(state.pending.result.draggableId===ownProps.draggableId)return null;return getOutOfTheWayMovement(ownProps.draggableId,state.pending.impact.movement)}return null};var selector=function selector(state,ownProps){var dragging=draggingSelector(state,ownProps);if(dragging)return dragging;var movingOutOfTheWay=movingOutOfTheWaySelector(state,ownProps);if(movingOutOfTheWay)return movingOutOfTheWay;return defaultMapProps};return selector};var mapDispatchToProps={lift:lift,move:move,moveUp:moveUp,moveDown:moveDown,moveLeft:moveLeft,moveRight:moveRight,moveByWindowScroll:moveByWindowScroll,drop:drop,dropAnimationFinished:dropAnimationFinished};var ConnectedDraggable=reactRedux.connect(makeMapStateToProps$1,mapDispatchToProps,null,{storeKey:storeKey,pure:true,areStatePropsEqual:isStrictEqual})(Draggable);ConnectedDraggable.defaultProps={isDragDisabled:false,disableInteractiveElementBlocking:false};exports.DragDropContext=DragDropContext;exports.Droppable=connectedDroppable;exports.Draggable=ConnectedDraggable;exports.resetServerContext=resetServerContext},6195:function(module,exports,__webpack_require__){var _Object$assign=__webpack_require__(2084);function _extends(){module.exports=_extends=_Object$assign||function(target){for(var i=1;i<arguments.length;i++){var source=arguments[i];for(var key in source)Object.prototype.hasOwnProperty.call(source,key)&&(target[key]=source[key])}return target};return _extends.apply(this,arguments)}module.exports=_extends},6196:function(module,exports,__webpack_require__){"use strict";var isProduction=true;var prefix="Invariant failed";var index=function(condition,message){if(condition)return;if(isProduction)throw new Error(prefix);throw new Error(prefix+": "+(message||""))};module.exports=index},6197:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var getRect=function getRect(_ref){var top=_ref.top,right=_ref.right,bottom=_ref.bottom,left=_ref.left;var width=right-left;var height=bottom-top;var rect={top:top,right:right,bottom:bottom,left:left,width:width,height:height,x:left,y:top,center:{x:(right+left)/2,y:(bottom+top)/2}};return rect};var expand=function expand(target,expandBy){return{top:target.top-expandBy.top,left:target.left-expandBy.left,bottom:target.bottom+expandBy.bottom,right:target.right+expandBy.right}};var shrink=function shrink(target,shrinkBy){return{top:target.top+shrinkBy.top,left:target.left+shrinkBy.left,bottom:target.bottom-shrinkBy.bottom,right:target.right-shrinkBy.right}};var shift=function shift(spacing,point){return{top:spacing.top+point.y,left:spacing.left+point.x,bottom:spacing.bottom+point.y,right:spacing.right+point.x}};var noSpacing={top:0,right:0,bottom:0,left:0};var createBox=function createBox(_ref2){var borderBox=_ref2.borderBox,_ref2$margin=_ref2.margin,margin=void 0===_ref2$margin?noSpacing:_ref2$margin,_ref2$border=_ref2.border,border=void 0===_ref2$border?noSpacing:_ref2$border,_ref2$padding=_ref2.padding,padding=void 0===_ref2$padding?noSpacing:_ref2$padding;var marginBox=getRect(expand(borderBox,margin));var paddingBox=getRect(shrink(borderBox,border));var contentBox=getRect(shrink(paddingBox,padding));return{marginBox:marginBox,borderBox:getRect(borderBox),paddingBox:paddingBox,contentBox:contentBox,margin:margin,border:border,padding:padding}};var parse=function parse(value){return parseInt(value,10)};var getWindowScroll=function getWindowScroll(){return{x:window.pageXOffset,y:window.pageYOffset}};var offset=function offset(original,change){var borderBox=original.borderBox,border=original.border,margin=original.margin,padding=original.padding;var shifted=shift(borderBox,change);return createBox({borderBox:shifted,border:border,margin:margin,padding:padding})};var withScroll=function withScroll(original){var scroll=arguments.length>1&&void 0!==arguments[1]?arguments[1]:getWindowScroll();return offset(original,scroll)};var calculateBox=function calculateBox(borderBox,styles){var margin={top:parse(styles.marginTop),right:parse(styles.marginRight),bottom:parse(styles.marginBottom),left:parse(styles.marginLeft)};var padding={top:parse(styles.paddingTop),right:parse(styles.paddingRight),bottom:parse(styles.paddingBottom),left:parse(styles.paddingLeft)};var border={top:parse(styles.borderTopWidth),right:parse(styles.borderRightWidth),bottom:parse(styles.borderBottomWidth),left:parse(styles.borderLeftWidth)};return createBox({borderBox:borderBox,margin:margin,padding:padding,border:border})};var getBox=function getBox(el){var borderBox=el.getBoundingClientRect();var styles=window.getComputedStyle(el);return calculateBox(borderBox,styles)};exports.getRect=getRect;exports.createBox=createBox;exports.offset=offset;exports.withScroll=withScroll;exports.calculateBox=calculateBox;exports.getBox=getBox},6198:function(module,exports,__webpack_require__){module.exports=__webpack_require__(1459)},6199:function(module,exports,__webpack_require__){"use strict";var simpleIsEqual=function simpleIsEqual(a,b){return a===b};function index(resultFn,isEqual){void 0===isEqual&&(isEqual=simpleIsEqual);var lastThis;var lastArgs=[];var lastResult;var calledOnce=false;var isNewArgEqualToLast=function isNewArgEqualToLast(newArg,index){return isEqual(newArg,lastArgs[index])};var result=function result(){for(var _len=arguments.length,newArgs=new Array(_len),_key=0;_key<_len;_key++)newArgs[_key]=arguments[_key];if(calledOnce&&lastThis===this&&newArgs.length===lastArgs.length&&newArgs.every(isNewArgEqualToLast))return lastResult;lastResult=resultFn.apply(this,newArgs);calledOnce=true;lastThis=this;lastArgs=newArgs;return lastResult};return result}module.exports=index},6200:function(module,exports,__webpack_require__){"use strict";var index=function(fn){var lastArgs=[];var frameId=null;var wrapperFn=function wrapperFn(){for(var _len=arguments.length,args=Array(_len),_key=0;_key<_len;_key++)args[_key]=arguments[_key];lastArgs=args;if(frameId)return;frameId=requestAnimationFrame(function(){frameId=null;fn.apply(void 0,lastArgs)})};wrapperFn.cancel=function(){if(!frameId)return;cancelAnimationFrame(frameId);frameId=null};var resultFn=wrapperFn;return resultFn};module.exports=index},6201:function(module,exports,__webpack_require__){var _Object$create=__webpack_require__(6202);function _inheritsLoose(subClass,superClass){subClass.prototype=_Object$create(superClass.prototype);subClass.prototype.constructor=subClass;subClass.__proto__=superClass}module.exports=_inheritsLoose},6202:function(module,exports,__webpack_require__){module.exports=__webpack_require__(1456)},6203:function(module,exports,__webpack_require__){false;module.exports=__webpack_require__(6204)()},6204:function(module,exports,__webpack_require__){"use strict";var emptyFunction=__webpack_require__(36);var invariant=__webpack_require__(55);var ReactPropTypesSecret=__webpack_require__(6205);module.exports=function(){function shim(props,propName,componentName,location,propFullName,secret){if(secret===ReactPropTypesSecret)return;invariant(false,"Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types")}shim.isRequired=shim;function getShim(){return shim}var ReactPropTypes={array:shim,bool:shim,func:shim,number:shim,object:shim,string:shim,symbol:shim,any:shim,arrayOf:getShim,element:shim,instanceOf:getShim,node:shim,objectOf:getShim,oneOf:getShim,oneOfType:getShim,shape:getShim,exact:getShim};ReactPropTypes.checkPropTypes=emptyFunction;ReactPropTypes.PropTypes=ReactPropTypes;return ReactPropTypes}},6205:function(module,exports,__webpack_require__){"use strict";var ReactPropTypesSecret="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED";module.exports=ReactPropTypesSecret},6206:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var _page_preview=__webpack_require__(6207);Object.defineProperty(exports,"PagePreview",{enumerable:true,get:function get(){return _page_preview.PagePreview}})},6207:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.PagePreview=void 0;var _react=__webpack_require__(0);var _react2=_interopRequireDefault(_react);var _propTypes=__webpack_require__(4);var _propTypes2=_interopRequireDefault(_propTypes);var _dom_preview=__webpack_require__(6208);var _page_controls=__webpack_require__(6210);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var PagePreview=exports.PagePreview=function PagePreview(_ref){var isWriteable=_ref.isWriteable,page=_ref.page,pageNumber=_ref.pageNumber,height=_ref.height,duplicatePage=_ref.duplicatePage,confirmDelete=_ref.confirmDelete;return _react2.default.createElement("div",{className:"canvasPageManager__pagePreview",style:{backgroundColor:page.style.background}},_react2.default.createElement(_dom_preview.DomPreview,{elementId:page.id,pageNumber:pageNumber,height:height}),isWriteable&&_react2.default.createElement(_page_controls.PageControls,{pageId:page.id,pageNumber:pageNumber,onDuplicate:duplicatePage,onDelete:confirmDelete}))};PagePreview.propTypes={isWriteable:_propTypes2.default.bool.isRequired,page:_propTypes2.default.shape({id:_propTypes2.default.string.isRequired,style:_propTypes2.default.shape({background:_propTypes2.default.string.isRequired}).isRequired}).isRequired,height:_propTypes2.default.number.isRequired,pageNumber:_propTypes2.default.number.isRequired,duplicatePage:_propTypes2.default.func.isRequired,confirmDelete:_propTypes2.default.func.isRequired}},6208:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.DomPreview=void 0;var _dom_preview=__webpack_require__(6209);exports.DomPreview=_dom_preview.DomPreview},6209:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.DomPreview=void 0;var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;"value"in descriptor&&(descriptor.writable=true);Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){protoProps&&defineProperties(Constructor.prototype,protoProps);staticProps&&defineProperties(Constructor,staticProps);return Constructor}}();var _react=__webpack_require__(0);var _react2=_interopRequireDefault(_react);var _propTypes=__webpack_require__(4);var _propTypes2=_interopRequireDefault(_propTypes);var _lodash=__webpack_require__(1);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(self,call){if(!self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!call||"object"!==typeof call&&"function"!==typeof call?self:call}function _inherits(subClass,superClass){if("function"!==typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function, not "+typeof superClass);subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:false,writable:true,configurable:true}});superClass&&(Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass)}var DomPreview=exports.DomPreview=function(_React$Component){_inherits(DomPreview,_React$Component);function DomPreview(){var _ref;var _temp,_this,_ret;_classCallCheck(this,DomPreview);for(var _len=arguments.length,args=Array(_len),_key=0;_key<_len;_key++)args[_key]=arguments[_key];return _ret=(_temp=(_this=_possibleConstructorReturn(this,(_ref=DomPreview.__proto__||Object.getPrototypeOf(DomPreview)).call.apply(_ref,[this].concat(args))),_this),_this.update=function(original){return function(){if(!_this.content||!_this.container)return;var thumb=original.cloneNode(true);var originalStyle=window.getComputedStyle(original,null);var originalWidth=parseInt(originalStyle.getPropertyValue("width"),10);var originalHeight=parseInt(originalStyle.getPropertyValue("height"),10);var thumbHeight=_this.props.height;var scale=thumbHeight/originalHeight;var thumbWidth=originalWidth*scale;_this.content.hasChildNodes()&&_this.content.removeChild(_this.content.firstChild);_this.content.appendChild(thumb);_this.content.style.cssText="transform: scale("+scale+"); transform-origin: top left;";_this.container.style.cssText="width: "+thumbWidth+"px; height: "+thumbHeight+"px;";var originalCanvas=original.querySelectorAll("canvas");var thumbCanvas=thumb.querySelectorAll("canvas");originalCanvas.length>0&&Array.from(originalCanvas).map(function(img,i){return thumbCanvas[i].getContext("2d").drawImage(img,0,0)})}},_temp),_possibleConstructorReturn(_this,_ret)}_createClass(DomPreview,[{key:"componentDidMount",value:function componentDidMount(){var original=document.querySelector("#"+this.props.elementId);var update=this.update(original);update();var slowUpdate=(0,_lodash.debounce)(update,250);this.observer=new MutationObserver(slowUpdate);var config={attributes:true,childList:true,subtree:true};this.observer.observe(original,config)}},{key:"componentWillUnmount",value:function componentWillUnmount(){this.observer.disconnect()}},{key:"render",value:function render(){var _this2=this;return _react2.default.createElement("div",{ref:function ref(container){_this2.container=container},className:"dom-preview"},_react2.default.createElement("div",{ref:function ref(content){_this2.content=content}}))}}]);return DomPreview}(_react2.default.Component);DomPreview.container=null;DomPreview.content=null;DomPreview.observer=null;DomPreview.propTypes={elementId:_propTypes2.default.string.isRequired,height:_propTypes2.default.number.isRequired}},6210:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.PageControls=void 0;var _react=__webpack_require__(0);var _react2=_interopRequireDefault(_react);var _propTypes=__webpack_require__(4);var _propTypes2=_interopRequireDefault(_propTypes);var _eui=__webpack_require__(2);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var PageControls=exports.PageControls=function PageControls(_ref){var pageId=_ref.pageId,onDelete=_ref.onDelete,onDuplicate=_ref.onDuplicate;var handleDuplicate=function handleDuplicate(ev){ev.preventDefault();onDuplicate(pageId)};var handleDelete=function handleDelete(ev){ev.preventDefault();onDelete(pageId)};return _react2.default.createElement(_eui.EuiFlexGroup,{className:"canvasPageManager__controls",gutterSize:"xs",justifyContent:"spaceBetween"},_react2.default.createElement(_eui.EuiFlexItem,{grow:false},_react2.default.createElement(_eui.EuiToolTip,{content:"Duplicate"},_react2.default.createElement(_eui.EuiButtonIcon,{iconType:"document","aria-label":"Duplicate Page",onClick:handleDuplicate}))),_react2.default.createElement(_eui.EuiFlexItem,{grow:false},_react2.default.createElement(_eui.EuiToolTip,{content:"Delete"},_react2.default.createElement(_eui.EuiButtonIcon,{color:"danger",iconType:"trash","aria-label":"Delete Page",onClick:handleDelete}))))};PageControls.propTypes={pageId:_propTypes2.default.string.isRequired,pageNumber:_propTypes2.default.number.isRequired,onDelete:_propTypes2.default.func.isRequired,onDuplicate:_propTypes2.default.func.isRequired}},6211:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.Expression=void 0;var _extends=Object.assign||function(target){for(var i=1;i<arguments.length;i++){var source=arguments[i];for(var key in source)Object.prototype.hasOwnProperty.call(source,key)&&(target[key]=source[key])}return target};var _storage=__webpack_require__(724);var _reactRedux=__webpack_require__(19);var _recompose=__webpack_require__(24);var _workpad=__webpack_require__(54);var _elements=__webpack_require__(109);var _ast=__webpack_require__(343);var _function_definitions=__webpack_require__(6212);var _get_window=__webpack_require__(385);var _element_not_selected=__webpack_require__(6214);var _expression=__webpack_require__(6215);var storage=new _storage.Storage((0,_get_window.getWindow)().localStorage);var mapStateToProps=function mapStateToProps(state){return{pageId:(0,_workpad.getSelectedPage)(state),element:(0,_workpad.getSelectedElement)(state),functionDefinitionsPromise:(0,_function_definitions.getFunctionDefinitions)(state)}};var mapDispatchToProps=function mapDispatchToProps(dispatch){return{setExpression:function setExpression(elementId,pageId){return function(expression){dispatch((0,_elements.flushContext)(elementId));dispatch((0,_elements.setExpression)(expression,elementId,pageId))}}}};var mergeProps=function mergeProps(stateProps,dispatchProps,ownProps){var element=stateProps.element,pageId=stateProps.pageId;var allProps=_extends({},ownProps,stateProps,dispatchProps);if(!element)return allProps;var expression=element.expression;return _extends({},allProps,{expression:expression,setExpression:dispatchProps.setExpression(element.id,pageId)})};var expressionLifecycle=(0,_recompose.lifecycle)({componentWillReceiveProps:function componentWillReceiveProps(_ref){var formState=_ref.formState,setFormState=_ref.setFormState,expression=_ref.expression;this.props.expression!==expression&&expression!==formState.expression&&setFormState({expression:expression,dirty:false})},componentDidMount:function componentDidMount(){var _props=this.props,functionDefinitionsPromise=_props.functionDefinitionsPromise,setFunctionDefinitions=_props.setFunctionDefinitions;functionDefinitionsPromise.then(function(defs){return setFunctionDefinitions(defs)})}});var Expression=(0,_recompose.compose)((0,_reactRedux.connect)(mapStateToProps,mapDispatchToProps,mergeProps),(0,_recompose.withState)("functionDefinitions","setFunctionDefinitions",[]),(0,_recompose.withState)("formState","setFormState",function(_ref2){var expression=_ref2.expression;return{expression:expression,dirty:false}}),(0,_recompose.withState)("isAutocompleteEnabled","setIsAutocompleteEnabled",function(){var setting=storage.get("kibana.canvas.isAutocompleteEnabled");return null===setting||setting}),(0,_recompose.withHandlers)({toggleAutocompleteEnabled:function toggleAutocompleteEnabled(_ref3){var isAutocompleteEnabled=_ref3.isAutocompleteEnabled,setIsAutocompleteEnabled=_ref3.setIsAutocompleteEnabled;return function(){storage.set("kibana.canvas.isAutocompleteEnabled",!isAutocompleteEnabled);setIsAutocompleteEnabled(!isAutocompleteEnabled)}},updateValue:function updateValue(_ref4){var setFormState=_ref4.setFormState;return function(expression){setFormState({expression:expression,dirty:true})}},setExpression:function setExpression(_ref5){var _setExpression2=_ref5.setExpression,setFormState=_ref5.setFormState;return function(exp){setFormState(function(prev){return _extends({},prev,{dirty:false})});_setExpression2(exp)}}}),expressionLifecycle,(0,_recompose.withPropsOnChange)(["formState"],function(_ref6){var formState=_ref6.formState;return{error:function(){try{(0,_ast.fromExpression)(formState.expression);return null}catch(e){return e.message}}()}}),(0,_recompose.branch)(function(props){return!props.element},(0,_recompose.renderComponent)(_element_not_selected.ElementNotSelected)))(_expression.Expression);exports.Expression=Expression},6212:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.getFunctionDefinitions=void 0;exports.getFunctionDefinitions=(_ref=_asyncToGenerator(regeneratorRuntime.mark(function _callee(state){var _ref2,browserFunctions,serverFunctions;return regeneratorRuntime.wrap(function _callee$(_context){while(1)switch(_context.prev=_context.next){case 0:_context.next=2;return(0,_browser_registries.getBrowserRegistries)();case 2:_ref2=_context.sent;browserFunctions=_ref2.browserFunctions;serverFunctions=(0,_app.getServerFunctions)(state);return _context.abrupt("return",(0,_lodash2.default)(serverFunctions.concat(browserFunctions.toArray()),"name"));case 6:case"end":return _context.stop()}},_callee,this)})),function getFunctionDefinitions(_x){return _ref.apply(this,arguments)});var _ref;var _lodash=__webpack_require__(6213);var _lodash2=_interopRequireDefault(_lodash);var _app=__webpack_require__(119);var _browser_registries=__webpack_require__(808);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _asyncToGenerator(fn){return function(){var gen=fn.apply(this,arguments);return new Promise(function(resolve,reject){function step(key,arg){try{var info=gen[key](arg);var value=info.value}catch(error){reject(error);return}if(!info.done)return Promise.resolve(value).then(function(value){step("next",value)},function(err){step("throw",err)});resolve(value)}return step("next")})}}},6213:function(module,exports,__webpack_require__){(function(global,module){var LARGE_ARRAY_SIZE=200;var FUNC_ERROR_TEXT="Expected a function";var HASH_UNDEFINED="__lodash_hash_undefined__";var UNORDERED_COMPARE_FLAG=1,PARTIAL_COMPARE_FLAG=2;var INFINITY=1/0,MAX_SAFE_INTEGER=9007199254740991;var argsTag="[object Arguments]",arrayTag="[object Array]",boolTag="[object Boolean]",dateTag="[object Date]",errorTag="[object Error]",funcTag="[object Function]",genTag="[object GeneratorFunction]",mapTag="[object Map]",numberTag="[object Number]",objectTag="[object Object]",promiseTag="[object Promise]",regexpTag="[object RegExp]",setTag="[object Set]",stringTag="[object String]",symbolTag="[object Symbol]",weakMapTag="[object WeakMap]";var arrayBufferTag="[object ArrayBuffer]",dataViewTag="[object DataView]",float32Tag="[object Float32Array]",float64Tag="[object Float64Array]",int8Tag="[object Int8Array]",int16Tag="[object Int16Array]",int32Tag="[object Int32Array]",uint8Tag="[object Uint8Array]",uint8ClampedTag="[object Uint8ClampedArray]",uint16Tag="[object Uint16Array]",uint32Tag="[object Uint32Array]";var reIsDeepProp=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,reIsPlainProp=/^\w*$/,reLeadingDot=/^\./,rePropName=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g;var reRegExpChar=/[\\^$.*+?()[\]{}|]/g;var reEscapeChar=/\\(\\)?/g;var reIsHostCtor=/^\[object .+?Constructor\]$/;var reIsUint=/^(?:0|[1-9]\d*)$/;var typedArrayTags={};typedArrayTags[float32Tag]=typedArrayTags[float64Tag]=typedArrayTags[int8Tag]=typedArrayTags[int16Tag]=typedArrayTags[int32Tag]=typedArrayTags[uint8Tag]=typedArrayTags[uint8ClampedTag]=typedArrayTags[uint16Tag]=typedArrayTags[uint32Tag]=true;typedArrayTags[argsTag]=typedArrayTags[arrayTag]=typedArrayTags[arrayBufferTag]=typedArrayTags[boolTag]=typedArrayTags[dataViewTag]=typedArrayTags[dateTag]=typedArrayTags[errorTag]=typedArrayTags[funcTag]=typedArrayTags[mapTag]=typedArrayTags[numberTag]=typedArrayTags[objectTag]=typedArrayTags[regexpTag]=typedArrayTags[setTag]=typedArrayTags[stringTag]=typedArrayTags[weakMapTag]=false;var freeGlobal="object"==typeof global&&global&&global.Object===Object&&global;var freeSelf="object"==typeof self&&self&&self.Object===Object&&self;var root=freeGlobal||freeSelf||Function("return this")();var freeExports="object"==typeof exports&&exports&&!exports.nodeType&&exports;var freeModule=freeExports&&"object"==typeof module&&module&&!module.nodeType&&module;var moduleExports=freeModule&&freeModule.exports===freeExports;var freeProcess=moduleExports&&freeGlobal.process;var nodeUtil=function(){try{return freeProcess&&freeProcess.binding("util")}catch(e){}}();var nodeIsTypedArray=nodeUtil&&nodeUtil.isTypedArray;function arrayIncludes(array,value){var length=array?array.length:0;return!!length&&baseIndexOf(array,value,0)>-1}function arrayIncludesWith(array,value,comparator){var index=-1,length=array?array.length:0;while(++index<length)if(comparator(value,array[index]))return true;return false}function arraySome(array,predicate){var index=-1,length=array?array.length:0;while(++index<length)if(predicate(array[index],index,array))return true;return false}function baseFindIndex(array,predicate,fromIndex,fromRight){var length=array.length,index=fromIndex+(fromRight?1:-1);while(fromRight?index--:++index<length)if(predicate(array[index],index,array))return index;return-1}function baseIndexOf(array,value,fromIndex){if(value!==value)return baseFindIndex(array,baseIsNaN,fromIndex);var index=fromIndex-1,length=array.length;while(++index<length)if(array[index]===value)return index;return-1}function baseIsNaN(value){return value!==value}function baseProperty(key){return function(object){return null==object?void 0:object[key]}}function baseTimes(n,iteratee){var index=-1,result=Array(n);while(++index<n)result[index]=iteratee(index);return result}function baseUnary(func){return function(value){return func(value)}}function cacheHas(cache,key){return cache.has(key)}function getValue(object,key){return null==object?void 0:object[key]}function isHostObject(value){var result=false;if(null!=value&&"function"!=typeof value.toString)try{result=!!(value+"")}catch(e){}return result}function mapToArray(map){var index=-1,result=Array(map.size);map.forEach(function(value,key){result[++index]=[key,value]});return result}function overArg(func,transform){return function(arg){return func(transform(arg))}}function setToArray(set){var index=-1,result=Array(set.size);set.forEach(function(value){result[++index]=value});return result}var arrayProto=Array.prototype,funcProto=Function.prototype,objectProto=Object.prototype;var coreJsData=root["__core-js_shared__"];var maskSrcKey=(uid=/[^.]+$/.exec(coreJsData&&coreJsData.keys&&coreJsData.keys.IE_PROTO||""),uid?"Symbol(src)_1."+uid:"");var uid;var funcToString=funcProto.toString;var hasOwnProperty=objectProto.hasOwnProperty;var objectToString=objectProto.toString;var reIsNative=RegExp("^"+funcToString.call(hasOwnProperty).replace(reRegExpChar,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");var Symbol=root.Symbol,Uint8Array=root.Uint8Array,propertyIsEnumerable=objectProto.propertyIsEnumerable,splice=arrayProto.splice;var nativeKeys=overArg(Object.keys,Object);var DataView=getNative(root,"DataView"),Map=getNative(root,"Map"),Promise=getNative(root,"Promise"),Set=getNative(root,"Set"),WeakMap=getNative(root,"WeakMap"),nativeCreate=getNative(Object,"create");var dataViewCtorString=toSource(DataView),mapCtorString=toSource(Map),promiseCtorString=toSource(Promise),setCtorString=toSource(Set),weakMapCtorString=toSource(WeakMap);var symbolProto=Symbol?Symbol.prototype:void 0,symbolValueOf=symbolProto?symbolProto.valueOf:void 0,symbolToString=symbolProto?symbolProto.toString:void 0;function Hash(entries){var index=-1,length=entries?entries.length:0;this.clear();while(++index<length){var entry=entries[index];this.set(entry[0],entry[1])}}function hashClear(){this.__data__=nativeCreate?nativeCreate(null):{}}function hashDelete(key){return this.has(key)&&delete this.__data__[key]}function hashGet(key){var data=this.__data__;if(nativeCreate){var result=data[key];return result===HASH_UNDEFINED?void 0:result}return hasOwnProperty.call(data,key)?data[key]:void 0}function hashHas(key){var data=this.__data__;return nativeCreate?void 0!==data[key]:hasOwnProperty.call(data,key)}function hashSet(key,value){var data=this.__data__;data[key]=nativeCreate&&void 0===value?HASH_UNDEFINED:value;return this}Hash.prototype.clear=hashClear;Hash.prototype["delete"]=hashDelete;Hash.prototype.get=hashGet;Hash.prototype.has=hashHas;Hash.prototype.set=hashSet;function ListCache(entries){var index=-1,length=entries?entries.length:0;this.clear();while(++index<length){var entry=entries[index];this.set(entry[0],entry[1])}}function listCacheClear(){this.__data__=[]}function listCacheDelete(key){var data=this.__data__,index=assocIndexOf(data,key);if(index<0)return false;var lastIndex=data.length-1;index==lastIndex?data.pop():splice.call(data,index,1);return true}function listCacheGet(key){var data=this.__data__,index=assocIndexOf(data,key);return index<0?void 0:data[index][1]}function listCacheHas(key){return assocIndexOf(this.__data__,key)>-1}function listCacheSet(key,value){var data=this.__data__,index=assocIndexOf(data,key);index<0?data.push([key,value]):data[index][1]=value;return this}ListCache.prototype.clear=listCacheClear;ListCache.prototype["delete"]=listCacheDelete;ListCache.prototype.get=listCacheGet;ListCache.prototype.has=listCacheHas;ListCache.prototype.set=listCacheSet;function MapCache(entries){var index=-1,length=entries?entries.length:0;this.clear();while(++index<length){var entry=entries[index];this.set(entry[0],entry[1])}}function mapCacheClear(){this.__data__={hash:new Hash,map:new(Map||ListCache),string:new Hash}}function mapCacheDelete(key){return getMapData(this,key)["delete"](key)}function mapCacheGet(key){return getMapData(this,key).get(key)}function mapCacheHas(key){return getMapData(this,key).has(key)}function mapCacheSet(key,value){getMapData(this,key).set(key,value);return this}MapCache.prototype.clear=mapCacheClear;MapCache.prototype["delete"]=mapCacheDelete;MapCache.prototype.get=mapCacheGet;MapCache.prototype.has=mapCacheHas;MapCache.prototype.set=mapCacheSet;function SetCache(values){var index=-1,length=values?values.length:0;this.__data__=new MapCache;while(++index<length)this.add(values[index])}function setCacheAdd(value){this.__data__.set(value,HASH_UNDEFINED);return this}function setCacheHas(value){return this.__data__.has(value)}SetCache.prototype.add=SetCache.prototype.push=setCacheAdd;SetCache.prototype.has=setCacheHas;function Stack(entries){this.__data__=new ListCache(entries)}function stackClear(){this.__data__=new ListCache}function stackDelete(key){return this.__data__["delete"](key)}function stackGet(key){return this.__data__.get(key)}function stackHas(key){return this.__data__.has(key)}function stackSet(key,value){var cache=this.__data__;if(cache instanceof ListCache){var pairs=cache.__data__;if(!Map||pairs.length<LARGE_ARRAY_SIZE-1){pairs.push([key,value]);return this}cache=this.__data__=new MapCache(pairs)}cache.set(key,value);return this}Stack.prototype.clear=stackClear;Stack.prototype["delete"]=stackDelete;Stack.prototype.get=stackGet;Stack.prototype.has=stackHas;Stack.prototype.set=stackSet;function arrayLikeKeys(value,inherited){var result=isArray(value)||isArguments(value)?baseTimes(value.length,String):[];var length=result.length,skipIndexes=!!length;for(var key in value)!inherited&&!hasOwnProperty.call(value,key)||skipIndexes&&("length"==key||isIndex(key,length))||result.push(key);return result}function assocIndexOf(array,key){var length=array.length;while(length--)if(eq(array[length][0],key))return length;return-1}function baseGet(object,path){path=isKey(path,object)?[path]:castPath(path);var index=0,length=path.length;while(null!=object&&index<length)object=object[toKey(path[index++])];return index&&index==length?object:void 0}function baseGetTag(value){return objectToString.call(value)}function baseHasIn(object,key){return null!=object&&key in Object(object)}function baseIsEqual(value,other,customizer,bitmask,stack){if(value===other)return true;if(null==value||null==other||!isObject(value)&&!isObjectLike(other))return value!==value&&other!==other;return baseIsEqualDeep(value,other,baseIsEqual,customizer,bitmask,stack)}function baseIsEqualDeep(object,other,equalFunc,customizer,bitmask,stack){var objIsArr=isArray(object),othIsArr=isArray(other),objTag=arrayTag,othTag=arrayTag;if(!objIsArr){objTag=getTag(object);objTag=objTag==argsTag?objectTag:objTag}if(!othIsArr){othTag=getTag(other);othTag=othTag==argsTag?objectTag:othTag}var objIsObj=objTag==objectTag&&!isHostObject(object),othIsObj=othTag==objectTag&&!isHostObject(other),isSameTag=objTag==othTag;if(isSameTag&&!objIsObj){stack||(stack=new Stack);return objIsArr||isTypedArray(object)?equalArrays(object,other,equalFunc,customizer,bitmask,stack):equalByTag(object,other,objTag,equalFunc,customizer,bitmask,stack)}if(!(bitmask&PARTIAL_COMPARE_FLAG)){var objIsWrapped=objIsObj&&hasOwnProperty.call(object,"__wrapped__"),othIsWrapped=othIsObj&&hasOwnProperty.call(other,"__wrapped__");if(objIsWrapped||othIsWrapped){var objUnwrapped=objIsWrapped?object.value():object,othUnwrapped=othIsWrapped?other.value():other;stack||(stack=new Stack);return equalFunc(objUnwrapped,othUnwrapped,customizer,bitmask,stack)}}if(!isSameTag)return false;stack||(stack=new Stack);return equalObjects(object,other,equalFunc,customizer,bitmask,stack)}function baseIsMatch(object,source,matchData,customizer){var index=matchData.length,length=index,noCustomizer=!customizer;if(null==object)return!length;object=Object(object);while(index--){var data=matchData[index];if(noCustomizer&&data[2]?data[1]!==object[data[0]]:!(data[0]in object))return false}while(++index<length){data=matchData[index];var key=data[0],objValue=object[key],srcValue=data[1];if(noCustomizer&&data[2]){if(void 0===objValue&&!(key in object))return false}else{var stack=new Stack;if(customizer)var result=customizer(objValue,srcValue,key,object,source,stack);if(!(void 0===result?baseIsEqual(srcValue,objValue,customizer,UNORDERED_COMPARE_FLAG|PARTIAL_COMPARE_FLAG,stack):result))return false}}return true}function baseIsNative(value){if(!isObject(value)||isMasked(value))return false;var pattern=isFunction(value)||isHostObject(value)?reIsNative:reIsHostCtor;return pattern.test(toSource(value))}function baseIsTypedArray(value){return isObjectLike(value)&&isLength(value.length)&&!!typedArrayTags[objectToString.call(value)]}function baseIteratee(value){if("function"==typeof value)return value;if(null==value)return identity;if("object"==typeof value)return isArray(value)?baseMatchesProperty(value[0],value[1]):baseMatches(value);return property(value)}function baseKeys(object){if(!isPrototype(object))return nativeKeys(object);var result=[];for(var key in Object(object))hasOwnProperty.call(object,key)&&"constructor"!=key&&result.push(key);return result}function baseMatches(source){var matchData=getMatchData(source);if(1==matchData.length&&matchData[0][2])return matchesStrictComparable(matchData[0][0],matchData[0][1]);return function(object){return object===source||baseIsMatch(object,source,matchData)}}function baseMatchesProperty(path,srcValue){if(isKey(path)&&isStrictComparable(srcValue))return matchesStrictComparable(toKey(path),srcValue);return function(object){var objValue=get(object,path);return void 0===objValue&&objValue===srcValue?hasIn(object,path):baseIsEqual(srcValue,objValue,void 0,UNORDERED_COMPARE_FLAG|PARTIAL_COMPARE_FLAG)}}function basePropertyDeep(path){return function(object){return baseGet(object,path)}}function baseToString(value){if("string"==typeof value)return value;if(isSymbol(value))return symbolToString?symbolToString.call(value):"";var result=value+"";return"0"==result&&1/value==-INFINITY?"-0":result}function baseUniq(array,iteratee,comparator){var index=-1,includes=arrayIncludes,length=array.length,isCommon=true,result=[],seen=result;if(comparator){isCommon=false;includes=arrayIncludesWith}else if(length>=LARGE_ARRAY_SIZE){var set=iteratee?null:createSet(array);if(set)return setToArray(set);isCommon=false;includes=cacheHas;seen=new SetCache}else seen=iteratee?[]:result;outer:while(++index<length){var value=array[index],computed=iteratee?iteratee(value):value;value=comparator||0!==value?value:0;if(isCommon&&computed===computed){var seenIndex=seen.length;while(seenIndex--)if(seen[seenIndex]===computed)continue outer;iteratee&&seen.push(computed);result.push(value)}else if(!includes(seen,computed,comparator)){seen!==result&&seen.push(computed);result.push(value)}}return result}function castPath(value){return isArray(value)?value:stringToPath(value)}var createSet=Set&&1/setToArray(new Set([,-0]))[1]==INFINITY?function(values){return new Set(values)}:noop;function equalArrays(array,other,equalFunc,customizer,bitmask,stack){var isPartial=bitmask&PARTIAL_COMPARE_FLAG,arrLength=array.length,othLength=other.length;if(arrLength!=othLength&&!(isPartial&&othLength>arrLength))return false;var stacked=stack.get(array);if(stacked&&stack.get(other))return stacked==other;var index=-1,result=true,seen=bitmask&UNORDERED_COMPARE_FLAG?new SetCache:void 0;stack.set(array,other);stack.set(other,array);while(++index<arrLength){var arrValue=array[index],othValue=other[index];if(customizer)var compared=isPartial?customizer(othValue,arrValue,index,other,array,stack):customizer(arrValue,othValue,index,array,other,stack);if(void 0!==compared){if(compared)continue;result=false;break}if(seen){if(!arraySome(other,function(othValue,othIndex){if(!seen.has(othIndex)&&(arrValue===othValue||equalFunc(arrValue,othValue,customizer,bitmask,stack)))return seen.add(othIndex)})){result=false;break}}else if(!(arrValue===othValue||equalFunc(arrValue,othValue,customizer,bitmask,stack))){result=false;break}}stack["delete"](array);stack["delete"](other);return result}function equalByTag(object,other,tag,equalFunc,customizer,bitmask,stack){switch(tag){case dataViewTag:if(object.byteLength!=other.byteLength||object.byteOffset!=other.byteOffset)return false;object=object.buffer;other=other.buffer;case arrayBufferTag:if(object.byteLength!=other.byteLength||!equalFunc(new Uint8Array(object),new Uint8Array(other)))return false;return true;case boolTag:case dateTag:case numberTag:return eq(+object,+other);case errorTag:return object.name==other.name&&object.message==other.message;case regexpTag:case stringTag:return object==other+"";case mapTag:var convert=mapToArray;case setTag:var isPartial=bitmask&PARTIAL_COMPARE_FLAG;convert||(convert=setToArray);if(object.size!=other.size&&!isPartial)return false;var stacked=stack.get(object);if(stacked)return stacked==other;bitmask|=UNORDERED_COMPARE_FLAG;stack.set(object,other);var result=equalArrays(convert(object),convert(other),equalFunc,customizer,bitmask,stack);stack["delete"](object);return result;case symbolTag:if(symbolValueOf)return symbolValueOf.call(object)==symbolValueOf.call(other)}return false}function equalObjects(object,other,equalFunc,customizer,bitmask,stack){var isPartial=bitmask&PARTIAL_COMPARE_FLAG,objProps=keys(object),objLength=objProps.length,othProps=keys(other),othLength=othProps.length;if(objLength!=othLength&&!isPartial)return false;var index=objLength;while(index--){var key=objProps[index];if(!(isPartial?key in other:hasOwnProperty.call(other,key)))return false}var stacked=stack.get(object);if(stacked&&stack.get(other))return stacked==other;var result=true;stack.set(object,other);stack.set(other,object);var skipCtor=isPartial;while(++index<objLength){key=objProps[index];var objValue=object[key],othValue=other[key];if(customizer)var compared=isPartial?customizer(othValue,objValue,key,other,object,stack):customizer(objValue,othValue,key,object,other,stack);if(!(void 0===compared?objValue===othValue||equalFunc(objValue,othValue,customizer,bitmask,stack):compared)){result=false;break}skipCtor||(skipCtor="constructor"==key)}if(result&&!skipCtor){var objCtor=object.constructor,othCtor=other.constructor;objCtor!=othCtor&&"constructor"in object&&"constructor"in other&&!("function"==typeof objCtor&&objCtor instanceof objCtor&&"function"==typeof othCtor&&othCtor instanceof othCtor)&&(result=false)}stack["delete"](object);stack["delete"](other);return result}function getMapData(map,key){var data=map.__data__;return isKeyable(key)?data["string"==typeof key?"string":"hash"]:data.map}function getMatchData(object){var result=keys(object),length=result.length;while(length--){var key=result[length],value=object[key];result[length]=[key,value,isStrictComparable(value)]}return result}function getNative(object,key){var value=getValue(object,key);return baseIsNative(value)?value:void 0}var getTag=baseGetTag;(DataView&&getTag(new DataView(new ArrayBuffer(1)))!=dataViewTag||Map&&getTag(new Map)!=mapTag||Promise&&getTag(Promise.resolve())!=promiseTag||Set&&getTag(new Set)!=setTag||WeakMap&&getTag(new WeakMap)!=weakMapTag)&&(getTag=function(value){var result=objectToString.call(value),Ctor=result==objectTag?value.constructor:void 0,ctorString=Ctor?toSource(Ctor):void 0;if(ctorString)switch(ctorString){case dataViewCtorString:return dataViewTag;case mapCtorString:return mapTag;case promiseCtorString:return promiseTag;case setCtorString:return setTag;case weakMapCtorString:return weakMapTag}return result});function hasPath(object,path,hasFunc){path=isKey(path,object)?[path]:castPath(path);var result,index=-1,length=path.length;while(++index<length){var key=toKey(path[index]);if(!(result=null!=object&&hasFunc(object,key)))break;object=object[key]}if(result)return result;length=object?object.length:0;return!!length&&isLength(length)&&isIndex(key,length)&&(isArray(object)||isArguments(object))}function isIndex(value,length){length=null==length?MAX_SAFE_INTEGER:length;return!!length&&("number"==typeof value||reIsUint.test(value))&&value>-1&&value%1==0&&value<length}function isKey(value,object){if(isArray(value))return false;var type=typeof value;if("number"==type||"symbol"==type||"boolean"==type||null==value||isSymbol(value))return true;return reIsPlainProp.test(value)||!reIsDeepProp.test(value)||null!=object&&value in Object(object)}function isKeyable(value){var type=typeof value;return"string"==type||"number"==type||"symbol"==type||"boolean"==type?"__proto__"!==value:null===value}function isMasked(func){return!!maskSrcKey&&maskSrcKey in func}function isPrototype(value){var Ctor=value&&value.constructor,proto="function"==typeof Ctor&&Ctor.prototype||objectProto;return value===proto}function isStrictComparable(value){return value===value&&!isObject(value)}function matchesStrictComparable(key,srcValue){return function(object){if(null==object)return false;return object[key]===srcValue&&(void 0!==srcValue||key in Object(object))}}var stringToPath=memoize(function(string){string=toString(string);var result=[];reLeadingDot.test(string)&&result.push("");string.replace(rePropName,function(match,number,quote,string){result.push(quote?string.replace(reEscapeChar,"$1"):number||match)});return result});function toKey(value){if("string"==typeof value||isSymbol(value))return value;var result=value+"";return"0"==result&&1/value==-INFINITY?"-0":result}function toSource(func){if(null!=func){try{return funcToString.call(func)}catch(e){}try{return func+""}catch(e){}}return""}function uniqBy(array,iteratee){return array&&array.length?baseUniq(array,baseIteratee(iteratee,2)):[]}function memoize(func,resolver){if("function"!=typeof func||resolver&&"function"!=typeof resolver)throw new TypeError(FUNC_ERROR_TEXT);var memoized=function(){var args=arguments,key=resolver?resolver.apply(this,args):args[0],cache=memoized.cache;if(cache.has(key))return cache.get(key);var result=func.apply(this,args);memoized.cache=cache.set(key,result);return result};memoized.cache=new(memoize.Cache||MapCache);return memoized}memoize.Cache=MapCache;function eq(value,other){return value===other||value!==value&&other!==other}function isArguments(value){return isArrayLikeObject(value)&&hasOwnProperty.call(value,"callee")&&(!propertyIsEnumerable.call(value,"callee")||objectToString.call(value)==argsTag)}var isArray=Array.isArray;function isArrayLike(value){return null!=value&&isLength(value.length)&&!isFunction(value)}function isArrayLikeObject(value){return isObjectLike(value)&&isArrayLike(value)}function isFunction(value){var tag=isObject(value)?objectToString.call(value):"";return tag==funcTag||tag==genTag}function isLength(value){return"number"==typeof value&&value>-1&&value%1==0&&value<=MAX_SAFE_INTEGER}function isObject(value){var type=typeof value;return!!value&&("object"==type||"function"==type)}function isObjectLike(value){return!!value&&"object"==typeof value}function isSymbol(value){return"symbol"==typeof value||isObjectLike(value)&&objectToString.call(value)==symbolTag}var isTypedArray=nodeIsTypedArray?baseUnary(nodeIsTypedArray):baseIsTypedArray;function toString(value){return null==value?"":baseToString(value)}function get(object,path,defaultValue){var result=null==object?void 0:baseGet(object,path);return void 0===result?defaultValue:result}function hasIn(object,path){return null!=object&&hasPath(object,path,baseHasIn)}function keys(object){return isArrayLike(object)?arrayLikeKeys(object):baseKeys(object)}function identity(value){return value}function noop(){}function property(path){return isKey(path)?baseProperty(toKey(path)):basePropertyDeep(path)}module.exports=uniqBy}).call(exports,__webpack_require__(23),__webpack_require__(66)(module))},6214:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.ElementNotSelected=void 0;var _react=__webpack_require__(0);var _react2=_interopRequireDefault(_react);var _propTypes=__webpack_require__(4);var _propTypes2=_interopRequireDefault(_propTypes);var _eui=__webpack_require__(2);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var ElementNotSelected=exports.ElementNotSelected=function ElementNotSelected(_ref){var done=_ref.done;return _react2.default.createElement("div",null,_react2.default.createElement("div",null,"Select an element to show expression input"),done&&_react2.default.createElement(_eui.EuiButton,{size:"s",onClick:done}," ","Close"))};ElementNotSelected.propTypes={done:_propTypes2.default.func}},6215:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.Expression=void 0;var _react=__webpack_require__(0);var _react2=_interopRequireDefault(_react);var _propTypes=__webpack_require__(4);var _propTypes2=_interopRequireDefault(_propTypes);var _eui=__webpack_require__(2);var _expression_input=__webpack_require__(6216);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var Expression=exports.Expression=function Expression(_ref){var functionDefinitions=_ref.functionDefinitions,formState=_ref.formState,updateValue=_ref.updateValue,setExpression=_ref.setExpression,done=_ref.done,error=_ref.error,isAutocompleteEnabled=_ref.isAutocompleteEnabled,toggleAutocompleteEnabled=_ref.toggleAutocompleteEnabled;return _react2.default.createElement(_eui.EuiPanel,null,_react2.default.createElement(_expression_input.ExpressionInput,{functionDefinitions:functionDefinitions,error:error,value:formState.expression,onChange:updateValue,isAutocompleteEnabled:isAutocompleteEnabled}),_react2.default.createElement(_eui.EuiFlexGroup,{justifyContent:"spaceBetween",gutterSize:"s"},_react2.default.createElement(_eui.EuiFlexItem,{grow:false},_react2.default.createElement(_eui.EuiSwitch,{id:"autocompleteOptIn",name:"popswitch",label:"Enable autocomplete",checked:isAutocompleteEnabled,onChange:toggleAutocompleteEnabled})),_react2.default.createElement(_eui.EuiFlexItem,null,_react2.default.createElement(_eui.EuiFlexGroup,{justifyContent:"flexEnd",gutterSize:"s"},_react2.default.createElement(_eui.EuiButtonEmpty,{size:"s",color:formState.dirty?"danger":"primary",onClick:done},formState.dirty?"Cancel":"Close"),_react2.default.createElement(_eui.EuiButton,{fill:true,disabled:!!error,onClick:function onClick(){return setExpression(formState.expression)},size:"s"},"Run")))))};Expression.propTypes={functionDefinitions:_propTypes2.default.array,formState:_propTypes2.default.object,updateValue:_propTypes2.default.func,setExpression:_propTypes2.default.func,done:_propTypes2.default.func,error:_propTypes2.default.string,isAutocompleteEnabled:_propTypes2.default.bool,toggleAutocompleteEnabled:_propTypes2.default.func}},6216:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var _expression_input=__webpack_require__(6217);Object.defineProperty(exports,"ExpressionInput",{enumerable:true,get:function get(){return _expression_input.ExpressionInput}})},6217:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.ExpressionInput=void 0;var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;"value"in descriptor&&(descriptor.writable=true);Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){protoProps&&defineProperties(Constructor.prototype,protoProps);staticProps&&defineProperties(Constructor,staticProps);return Constructor}}();var _react=__webpack_require__(0);var _react2=_interopRequireDefault(_react);var _propTypes=__webpack_require__(4);var _propTypes2=_interopRequireDefault(_propTypes);var _eui=__webpack_require__(2);var _lodash=__webpack_require__(1);var _autocomplete=__webpack_require__(6218);var _autocomplete2=__webpack_require__(6220);var _function_reference=__webpack_require__(6221);var _argument_reference=__webpack_require__(6222);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(self,call){if(!self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!call||"object"!==typeof call&&"function"!==typeof call?self:call}function _inherits(subClass,superClass){if("function"!==typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function, not "+typeof superClass);subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:false,writable:true,configurable:true}});superClass&&(Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass)}var ExpressionInput=exports.ExpressionInput=function(_React$Component){_inherits(ExpressionInput,_React$Component);function ExpressionInput(_ref){var value=_ref.value;_classCallCheck(this,ExpressionInput);var _this=_possibleConstructorReturn(this,(ExpressionInput.__proto__||Object.getPrototypeOf(ExpressionInput)).call(this));_initialiseProps.call(_this);_this.undoHistory=[];_this.redoHistory=[];_this.state={selection:{start:value.length,end:value.length},suggestions:[]};return _this}_createClass(ExpressionInput,[{key:"componentDidUpdate",value:function componentDidUpdate(){if(!this.ref)return;var selection=this.state.selection;var start=selection.start,end=selection.end;this.ref.setSelectionRange(start,end)}},{key:"undo",value:function undo(){if(!this.undoHistory.length)return;var value=this.undoHistory.pop();this.redoHistory.push(this.props.value);this.props.onChange(value)}},{key:"redo",value:function redo(){if(!this.redoHistory.length)return;var value=this.redoHistory.pop();this.undoHistory.push(this.props.value);this.props.onChange(value)}},{key:"render",value:function render(){var _this2=this;var _props=this.props,value=_props.value,error=_props.error,isAutocompleteEnabled=_props.isAutocompleteEnabled;var suggestions=this.state.suggestions;var helpText=error?null:"This is the coded expression that backs this element. You better know what you are doing here.";return _react2.default.createElement("div",{className:"expressionInput"},_react2.default.createElement(_eui.EuiFormRow,{fullWidth:true,isInvalid:Boolean(error),error:error,helpText:helpText},isAutocompleteEnabled?_react2.default.createElement(_autocomplete.Autocomplete,{header:this.getHeader(),items:suggestions,onSelect:this.onSuggestionSelect,reference:this.getReference},_react2.default.createElement(_eui.EuiTextArea,{onKeyDown:this.onKeyDown,className:"canvasTextArea--code",value:value,onChange:this.onChange,inputRef:function inputRef(ref){return _this2.ref=ref},spellCheck:"false"})):_react2.default.createElement(_eui.EuiTextArea,{onKeyDown:this.onKeyDown,className:"canvasTextArea--code",value:value,onChange:this.onChange,inputRef:function inputRef(ref){return _this2.ref=ref},spellCheck:"false"})))}}]);return ExpressionInput}(_react2.default.Component);var _initialiseProps=function _initialiseProps(){var _this3=this;this.stash=(0,_lodash.debounce)(function(value){_this3.undoHistory.push(value);_this3.redoHistory=[]},500,{leading:true,trailing:false});this.onKeyDown=function(e){if(e.ctrlKey||e.metaKey){if("z"===e.key){e.preventDefault();e.shiftKey?_this3.redo():_this3.undo()}if("y"===e.key){e.preventDefault();_this3.redo()}}};this.onSuggestionSelect=function(item){var text=item.text,start=item.start,end=item.end;var value=_this3.props.value.substr(0,start)+text+_this3.props.value.substr(end);var selection={start:start+text.length,end:start+text.length};_this3.updateState({value:value,selection:selection});_this3.ref.focus()};this.onChange=function(e){var target=e.target;var value=target.value,selectionStart=target.selectionStart,selectionEnd=target.selectionEnd;var selection={start:selectionStart,end:selectionEnd};_this3.updateState({value:value,selection:selection})};this.updateState=function(_ref2){var value=_ref2.value,selection=_ref2.selection;_this3.stash(_this3.props.value);var suggestions=(0,_autocomplete2.getAutocompleteSuggestions)(_this3.props.functionDefinitions,value,selection.start);_this3.props.onChange(value);_this3.setState({selection:selection,suggestions:suggestions})};this.getHeader=function(){var suggestions=_this3.state.suggestions;if(!suggestions.length)return"";return _react2.default.createElement(_eui.EuiTitle,{className:"autocompleteType",size:"xs"},_react2.default.createElement("h3",null,(0,_lodash.startCase)(suggestions[0].type)))};this.getReference=function(selectedItem){var _ref3=selectedItem||{},fnDef=_ref3.fnDef,argDef=_ref3.argDef;if(argDef)return _react2.default.createElement(_argument_reference.ArgumentReference,{argDef:argDef});if(fnDef)return _react2.default.createElement(_function_reference.FunctionReference,{fnDef:fnDef});var _getFnArgDefAtPositio=(0,_autocomplete2.getFnArgDefAtPosition)(_this3.props.functionDefinitions,_this3.props.value,_this3.state.selection.start),fnDefAtPosition=_getFnArgDefAtPositio.fnDef,argDefAtPosition=_getFnArgDefAtPositio.argDef;if(argDefAtPosition)return _react2.default.createElement(_argument_reference.ArgumentReference,{argDef:argDefAtPosition});if(fnDefAtPosition)return _react2.default.createElement(_function_reference.FunctionReference,{fnDef:fnDefAtPosition});return""}};ExpressionInput.propTypes={functionDefinitions:_propTypes2.default.array,value:_propTypes2.default.string,onChange:_propTypes2.default.func,error:_propTypes2.default.string,isAutocompleteEnabled:_propTypes2.default.bool}},6218:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var _autocomplete=__webpack_require__(6219);Object.defineProperty(exports,"Autocomplete",{enumerable:true,get:function get(){return _autocomplete.Autocomplete}})},6219:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.Autocomplete=void 0;var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;"value"in descriptor&&(descriptor.writable=true);Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){protoProps&&defineProperties(Constructor.prototype,protoProps);staticProps&&defineProperties(Constructor,staticProps);return Constructor}}();var _react=__webpack_require__(0);var _react2=_interopRequireDefault(_react);var _propTypes=__webpack_require__(4);var _propTypes2=_interopRequireDefault(_propTypes);var _eui=__webpack_require__(2);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(self,call){if(!self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!call||"object"!==typeof call&&"function"!==typeof call?self:call}function _inherits(subClass,superClass){if("function"!==typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function, not "+typeof superClass);subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:false,writable:true,configurable:true}});superClass&&(Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass)}var Autocomplete=exports.Autocomplete=function(_React$Component){_inherits(Autocomplete,_React$Component);function Autocomplete(){_classCallCheck(this,Autocomplete);var _this=_possibleConstructorReturn(this,(Autocomplete.__proto__||Object.getPrototypeOf(Autocomplete)).call(this));_this.onSubmit=function(){var selectedIndex=_this.state.selectedIndex;var _this$props=_this.props,items=_this$props.items,onSelect=_this$props.onSelect;onSelect(items[selectedIndex]);_this.setState({selectedIndex:-1})};_this.onKeyDown=function(e){var ESCAPE=_eui.keyCodes.ESCAPE,TAB=_eui.keyCodes.TAB,ENTER=_eui.keyCodes.ENTER,UP=_eui.keyCodes.UP,DOWN=_eui.keyCodes.DOWN,LEFT=_eui.keyCodes.LEFT,RIGHT=_eui.keyCodes.RIGHT;var keyCode=e.keyCode;var items=_this.props.items;var _this$state=_this.state,isOpen=_this$state.isOpen,selectedIndex=_this$state.selectedIndex;[ESCAPE,LEFT,RIGHT].includes(keyCode)&&_this.setState({isOpen:false});if([TAB,ENTER].includes(keyCode)&&isOpen&&selectedIndex>=0){e.preventDefault();_this.onSubmit()}else if(keyCode===UP&&items.length>0&&isOpen){e.preventDefault();_this.selectPrevious()}else if(keyCode===DOWN&&items.length>0&&isOpen){e.preventDefault();_this.selectNext()}else"Backspace"===e.key?_this.setState({isOpen:true}):["Shift","Control","Alt","Meta"].includes(e.key)||_this.setState({selectedIndex:-1})};_this.onKeyPress=function(){_this.setState({isOpen:true})};_this.onFocus=function(){_this.setState({isFocused:true})};_this.onBlur=function(){_this.setState({isFocused:false})};_this.onMouseDown=function(){_this.setState({isOpen:false})};_this.onMouseEnter=function(){_this.setState({isMousedOver:true})};_this.onMouseLeave=function(){_this.setState({isMousedOver:false})};_this.state={isOpen:false,isFocused:false,isMousedOver:false,selectedIndex:-1};_this.containerRef=null;_this.itemRefs=[];return _this}_createClass(Autocomplete,[{key:"componentDidUpdate",value:function componentDidUpdate(prevProps,prevState){this.props.items&&prevProps.items!==this.props.items&&1===this.props.items.length&&0!==this.state.selectedIndex&&this.selectFirst();prevState.selectedIndex!==this.state.selectedIndex&&this.scrollIntoView()}},{key:"selectFirst",value:function selectFirst(){this.setState({selectedIndex:0})}},{key:"isVisible",value:function isVisible(){var _state=this.state,isOpen=_state.isOpen,isFocused=_state.isFocused,isMousedOver=_state.isMousedOver;var _props=this.props,items=_props.items,reference=_props.reference;var visible=isOpen&&(isFocused||isMousedOver);var hasItems=items&&items.length;var hasReference=reference(this.getSelectedItem());return visible&&(hasItems||hasReference)}},{key:"getSelectedItem",value:function getSelectedItem(){return this.props.items&&this.props.items[this.state.selectedIndex]}},{key:"selectPrevious",value:function selectPrevious(){var items=this.props.items;var selectedIndex=this.state.selectedIndex;selectedIndex>0?this.setState({selectedIndex:selectedIndex-1}):this.setState({selectedIndex:items.length-1})}},{key:"selectNext",value:function selectNext(){var items=this.props.items;var selectedIndex=this.state.selectedIndex;selectedIndex>=0&&selectedIndex<items.length-1?this.setState({selectedIndex:selectedIndex+1}):this.setState({selectedIndex:0})}},{key:"scrollIntoView",value:function scrollIntoView(){var containerRef=this.containerRef,itemRefs=this.itemRefs,selectedIndex=this.state.selectedIndex;var itemRef=itemRefs[selectedIndex];if(!containerRef||!itemRef)return;containerRef.scrollTop=Math.max(Math.min(containerRef.scrollTop,itemRef.offsetTop),itemRef.offsetTop+itemRef.offsetHeight-containerRef.offsetHeight)}},{key:"render",value:function render(){var _this2=this;var _props2=this.props,header=_props2.header,items=_props2.items,reference=_props2.reference;return _react2.default.createElement("div",{className:"autocomplete",onKeyDown:this.onKeyDown,onKeyPress:this.onKeyPress,onFocus:this.onFocus,onBlur:this.onBlur,role:"combobox","aria-haspopup":"true","aria-owns":"autocompleteItems","aria-expanded":this.isVisible()?"true":"false"},this.isVisible()?_react2.default.createElement(_eui.EuiPanel,{paddingSize:"none",className:"autocompletePopup",onMouseEnter:this.onMouseEnter,onMouseLeave:this.onMouseLeave},_react2.default.createElement(_eui.EuiFlexGroup,{gutterSize:"none"},items&&items.length?_react2.default.createElement(_eui.EuiFlexItem,{style:{maxWidth:400}},_react2.default.createElement("div",{className:"autocompleteItems",ref:function ref(_ref2){return _this2.containerRef=_ref2},role:"listbox"},header,items.map(function(item,i){return _react2.default.createElement("div",{key:i,ref:function ref(_ref){return _this2.itemRefs[i]=_ref},className:"autocompleteItem"+(_this2.state.selectedIndex===i?" autocompleteItem--isActive":""),onMouseEnter:function onMouseEnter(){return _this2.setState({selectedIndex:i})},onClick:_this2.onSubmit,role:"option"},item.text)}))):"",_react2.default.createElement(_eui.EuiFlexItem,null,_react2.default.createElement("div",{className:"autocompleteReference"},reference(this.getSelectedItem()))))):"",_react2.default.createElement("div",{onMouseDown:this.onMouseDown},this.props.children))}}]);return Autocomplete}(_react2.default.Component);Autocomplete.propTypes={header:_propTypes2.default.node,items:_propTypes2.default.array,onSelect:_propTypes2.default.func,children:_propTypes2.default.node,reference:_propTypes2.default.func}},6220:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var _slicedToArray=function(){function sliceIterator(arr,i){var _arr=[];var _n=true;var _d=false;var _e=void 0;try{for(var _s,_i=arr[Symbol.iterator]();!(_n=(_s=_i.next()).done);_n=true){_arr.push(_s.value);if(i&&_arr.length===i)break}}catch(err){_d=true;_e=err}finally{try{!_n&&_i["return"]&&_i["return"]()}finally{if(_d)throw _e}}return _arr}return function(arr,i){if(Array.isArray(arr))return arr;if(Symbol.iterator in Object(arr))return sliceIterator(arr,i);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}();exports.getFnArgDefAtPosition=getFnArgDefAtPosition;exports.getAutocompleteSuggestions=getAutocompleteSuggestions;var _lodash=__webpack_require__(1);var _grammar=__webpack_require__(2036);var _get_by_alias=__webpack_require__(1166);function _toConsumableArray(arr){if(Array.isArray(arr)){for(var i=0,arr2=Array(arr.length);i<arr.length;i++)arr2[i]=arr[i];return arr2}return Array.from(arr)}var MARKER="CANVAS_SUGGESTION_MARKER";function getFnArgDefAtPosition(specs,expression,position){var text=expression.substr(0,position)+MARKER+expression.substr(position);try{var ast=(0,_grammar.parse)(text,{addMeta:true});var _getFnArgAtPosition=getFnArgAtPosition(ast,position),newAst=_getFnArgAtPosition.ast,fnIndex=_getFnArgAtPosition.fnIndex,argName=_getFnArgAtPosition.argName;var fn=newAst.node.chain[fnIndex].node;var fnDef=(0,_get_by_alias.getByAlias)(specs,fn.function.replace(MARKER,""));if(fnDef&&argName){var argDef=(0,_get_by_alias.getByAlias)(fnDef.args,argName);return{fnDef:fnDef,argDef:argDef}}return{fnDef:fnDef}}catch(e){}return[]}function getAutocompleteSuggestions(specs,expression,position){var text=expression.substr(0,position)+MARKER+expression.substr(position);try{var ast=(0,_grammar.parse)(text,{addMeta:true});var _getFnArgAtPosition2=getFnArgAtPosition(ast,position),newAst=_getFnArgAtPosition2.ast,fnIndex=_getFnArgAtPosition2.fnIndex,argName=_getFnArgAtPosition2.argName,argIndex=_getFnArgAtPosition2.argIndex;var fn=newAst.node.chain[fnIndex].node;if(fn.function.includes(MARKER))return getFnNameSuggestions(specs,newAst,fnIndex);if("_"===argName)return getArgNameSuggestions(specs,newAst,fnIndex,argName,argIndex);if(argName)return getArgValueSuggestions(specs,newAst,fnIndex,argName,argIndex)}catch(e){}return[]}function getFnArgAtPosition(ast,position){var fnIndex=ast.node.chain.findIndex(function(fn){return fn.start<=position&&position<=fn.end});var fn=ast.node.chain[fnIndex];var _iteratorNormalCompletion=true;var _didIteratorError=false;var _iteratorError=void 0;try{for(var _step,_iterator=Object.entries(fn.node.arguments)[Symbol.iterator]();!(_iteratorNormalCompletion=(_step=_iterator.next()).done);_iteratorNormalCompletion=true){var _ref=_step.value;var _ref2=_slicedToArray(_ref,2);var argName=_ref2[0];var argValues=_ref2[1];for(var argIndex=0;argIndex<argValues.length;argIndex++){var value=argValues[argIndex];if(value.start<=position&&position<=value.end){if(null!==value.node&&"expression"===value.node.type)return getFnArgAtPosition(value,position);return{ast:ast,fnIndex:fnIndex,argName:argName,argIndex:argIndex}}}}}catch(err){_didIteratorError=true;_iteratorError=err}finally{try{!_iteratorNormalCompletion&&_iterator.return&&_iterator.return()}finally{if(_didIteratorError)throw _iteratorError}}return{ast:ast,fnIndex:fnIndex}}function getFnNameSuggestions(specs,ast,fnIndex){var _ast$node$chain$fnInd=ast.node.chain[fnIndex],start=_ast$node$chain$fnInd.start,end=_ast$node$chain$fnInd.end,fn=_ast$node$chain$fnInd.node;var query=fn.function.replace(MARKER,"");var matchingFnDefs=specs.filter(function(_ref3){var name=_ref3.name;return textMatches(name,query)});var prevFn=ast.node.chain[fnIndex-1];var prevFnDef=prevFn&&(0,_get_by_alias.getByAlias)(specs,prevFn.node.function);var prevFnType=prevFnDef&&prevFnDef.type;var comparator=combinedComparator(prevFnTypeComparator(prevFnType),invokeWithProp(startsWithComparator(query),"name"),invokeWithProp(alphanumericalComparator,"name"));var fnDefs=matchingFnDefs.sort(comparator);return fnDefs.map(function(fnDef){return{type:"function",text:fnDef.name+" ",start:start,end:end-MARKER.length,fnDef:fnDef}})}function getArgNameSuggestions(specs,ast,fnIndex,argName,argIndex){var fn=ast.node.chain[fnIndex].node;var fnDef=(0,_get_by_alias.getByAlias)(specs,fn.function);if(!fnDef)return[];var _fn$arguments$argName=fn.arguments[argName][argIndex],text=_fn$arguments$argName.text,start=_fn$arguments$argName.start,end=_fn$arguments$argName.end;var query=text.replace(MARKER,"");var matchingArgDefs=Object.values(fnDef.args).filter(function(_ref4){var name=_ref4.name;return textMatches(name,query)});var argEntries=Object.entries(fn.arguments).map(function(_ref5){var _ref6=_slicedToArray(_ref5,2),name=_ref6[0],values=_ref6[1];return[name,values.filter(function(value){return!value.text.includes(MARKER)})]});var unusedArgDefs=matchingArgDefs.filter(function(argDef){if(argDef.multi)return true;return!argEntries.some(function(_ref7){var _ref8=_slicedToArray(_ref7,2),name=_ref8[0],values=_ref8[1];return values.length&&(name===argDef.name||argDef.aliases.includes(name))})});var comparator=combinedComparator(unnamedArgComparator,invokeWithProp(startsWithComparator(query),"name"),invokeWithProp(alphanumericalComparator,"name"));var argDefs=unusedArgDefs.sort(comparator);return argDefs.map(function(argDef){return{type:"argument",text:argDef.name+"=",start:start,end:end-MARKER.length,argDef:argDef}})}function getArgValueSuggestions(specs,ast,fnIndex,argName,argIndex){var fn=ast.node.chain[fnIndex].node;var fnDef=(0,_get_by_alias.getByAlias)(specs,fn.function);if(!fnDef)return[];var argDef=(0,_get_by_alias.getByAlias)(fnDef.args,argName);if(!argDef)return[];var _fn$arguments$argName2=fn.arguments[argName][argIndex],start=_fn$arguments$argName2.start,end=_fn$arguments$argName2.end,node=_fn$arguments$argName2.node;var query=node.replace(MARKER,"");var suggestions=(0,_lodash.uniq)(argDef.options.concat(argDef.default||[]));var filtered=suggestions.filter(function(option){return textMatches(String(option),query)});var comparator=combinedComparator(startsWithComparator(query),alphanumericalComparator);var sorted=filtered.sort(comparator);return sorted.map(function(value){var text=maybeQuote(value)+" ";return{start:start,end:end-MARKER.length,type:"value",text:text}})}function textMatches(text,query){return text.toLowerCase().includes(query.toLowerCase().trim())}function maybeQuote(value){if("string"===typeof value){if(value.match(/^\{.*\}$/))return value;return'"'+value.replace(/"/g,'\\"')+'"'}return value}function prevFnTypeComparator(prevFnType){return function(a,b){return Boolean(b.context.types&&b.context.types.includes(prevFnType))-Boolean(a.context.types&&a.context.types.includes(prevFnType))}}function unnamedArgComparator(a,b){return b.aliases.includes("_")-a.aliases.includes("_")}function alphanumericalComparator(a,b){if(a<b)return-1;if(a>b)return 1;return 0}function startsWithComparator(query){return function(a,b){return String(b).startsWith(query)-String(a).startsWith(query)}}function combinedComparator(){for(var _len=arguments.length,comparators=Array(_len),_key=0;_key<_len;_key++)comparators[_key]=arguments[_key];return function(a,b){return comparators.reduce(function(acc,comparator){if(0!==acc)return acc;return comparator(a,b)},0)}}function invokeWithProp(fn,prop){return function(){for(var _len2=arguments.length,args=Array(_len2),_key2=0;_key2<_len2;_key2++)args[_key2]=arguments[_key2];return fn.apply(void 0,_toConsumableArray(args.map(function(arg){return arg[prop]})))}}},6221:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.FunctionReference=void 0;var _slicedToArray=function(){function sliceIterator(arr,i){var _arr=[];var _n=true;var _d=false;var _e=void 0;try{for(var _s,_i=arr[Symbol.iterator]();!(_n=(_s=_i.next()).done);_n=true){_arr.push(_s.value);if(i&&_arr.length===i)break}}catch(err){_d=true;_e=err}finally{try{!_n&&_i["return"]&&_i["return"]()}finally{if(_d)throw _e}}return _arr}return function(arr,i){if(Array.isArray(arr))return arr;if(Symbol.iterator in Object(arr))return sliceIterator(arr,i);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}();var _react=__webpack_require__(0);var _react2=_interopRequireDefault(_react);var _propTypes=__webpack_require__(4);var _propTypes2=_interopRequireDefault(_propTypes);var _markdownIt=__webpack_require__(484);var _markdownIt2=_interopRequireDefault(_markdownIt);var _eui=__webpack_require__(2);var _lodash=__webpack_require__(1);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var md=new _markdownIt2.default;var FunctionReference=exports.FunctionReference=function FunctionReference(_ref){var fnDef=_ref.fnDef;return _react2.default.createElement("div",null,_react2.default.createElement(_eui.EuiTitle,{size:"xs"},_react2.default.createElement("h3",null,fnDef.name)),_react2.default.createElement(_eui.EuiSpacer,{size:"s"}),_react2.default.createElement(_eui.EuiText,{dangerouslySetInnerHTML:getHelp(fnDef)}),_react2.default.createElement(_eui.EuiSpacer,{size:"m"}),_react2.default.createElement(_eui.EuiDescriptionList,{type:"inline",className:"autocompleteDescList",compressed:true,listItems:getFnListItems(fnDef)}),_react2.default.createElement(_eui.EuiSpacer,{size:"m"}),_react2.default.createElement(_eui.EuiBasicTable,{className:"autocompleteTable",items:getArgItems(fnDef.args),columns:getArgColumns()}))};function getHelp(fnDef){return{__html:md.render(fnDef.help)}}function getFnListItems(fnDef){var aliases=fnDef.aliases,context=fnDef.context,type=fnDef.type;var items=[];aliases.length&&items.push({title:"Aliases",description:aliases.join(", ")});context.types&&items.push({title:"Accepts",description:context.types.join(", ")});type&&items.push({title:"Returns",description:type});return items}function getArgItems(args){return Object.entries(args).map(function(_ref2){var _ref3=_slicedToArray(_ref2,2),name=_ref3[0],argDef=_ref3[1];return{argument:name+(argDef.required?"*":""),aliases:(argDef.aliases||[]).join(", "),types:(argDef.types||[]).join(", "),default:argDef.default||"",description:argDef.help||""}})}function getArgColumns(){return["argument","aliases","types","default","description"].map(function(field){var column={field:field,name:(0,_lodash.startCase)(field),truncateText:"description"!==field};"description"===field&&(column.width="50%");return column})}FunctionReference.propTypes={fnDef:_propTypes2.default.object}},6222:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.ArgumentReference=void 0;var _react=__webpack_require__(0);var _react2=_interopRequireDefault(_react);var _propTypes=__webpack_require__(4);var _propTypes2=_interopRequireDefault(_propTypes);var _markdownIt=__webpack_require__(484);var _markdownIt2=_interopRequireDefault(_markdownIt);var _eui=__webpack_require__(2);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var md=new _markdownIt2.default;var ArgumentReference=exports.ArgumentReference=function ArgumentReference(_ref){var argDef=_ref.argDef;return _react2.default.createElement("div",null,_react2.default.createElement(_eui.EuiTitle,{size:"xs"},_react2.default.createElement("h3",null,argDef.name)),_react2.default.createElement(_eui.EuiSpacer,{size:"s"}),_react2.default.createElement(_eui.EuiText,{dangerouslySetInnerHTML:getHelp(argDef)}),_react2.default.createElement(_eui.EuiSpacer,{size:"s"}),_react2.default.createElement(_eui.EuiDescriptionList,{type:"inline",compressed:true,listItems:getArgListItems(argDef)}))};function getHelp(argDef){return{__html:md.render(argDef.help)}}function getArgListItems(argDef){var aliases=argDef.aliases,types=argDef.types,def=argDef.default,required=argDef.required;var items=[];aliases.length&&items.push({title:"Aliases",description:aliases.join(", ")});types.length&&items.push({title:"Types",description:types.join(", ")});null!=def&&items.push({title:"Default",description:def});items.push({title:"Required",description:String(Boolean(required))});return items}ArgumentReference.propTypes={argDef:_propTypes2.default.object}},6223:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.Tray=void 0;var _recompose=__webpack_require__(24);var _tray=__webpack_require__(6224);exports.Tray=(0,_recompose.pure)(_tray.Tray)},6224:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.Tray=void 0;var _react=__webpack_require__(0);var _react2=_interopRequireDefault(_react);var _propTypes=__webpack_require__(4);var _propTypes2=_interopRequireDefault(_propTypes);var _eui=__webpack_require__(2);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var Tray=exports.Tray=function Tray(_ref){var children=_ref.children,done=_ref.done;return _react2.default.createElement(_react.Fragment,null,_react2.default.createElement(_eui.EuiFlexGroup,{justifyContent:"spaceAround"},_react2.default.createElement(_eui.EuiFlexItem,{grow:false},_react2.default.createElement(_eui.EuiButtonIcon,{size:"s",onClick:done,"aria-label":"Dismiss tray",iconType:"arrowDown"}))),_react2.default.createElement("div",{className:"canvasTray"},children))};Tray.propTypes={children:_propTypes2.default.node,done:_propTypes2.default.func}},6225:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.Workpad=void 0;var _reactRedux=__webpack_require__(19);var _propTypes=__webpack_require__(4);var _propTypes2=_interopRequireDefault(_propTypes);var _recompose=__webpack_require__(24);var _transitions_registry=__webpack_require__(1179);var _history=__webpack_require__(631);var _elements=__webpack_require__(109);var _app=__webpack_require__(119);var _workpad=__webpack_require__(54);var _workpad2=__webpack_require__(6226);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var mapStateToProps=function mapStateToProps(state){return{pages:(0,_workpad.getPages)(state),selectedPageNumber:(0,_workpad.getSelectedPageIndex)(state)+1,totalElementCount:(0,_workpad.getAllElements)(state).length,workpad:(0,_workpad.getWorkpad)(state),isFullscreen:(0,_app.getFullscreen)(state)}};var mapDispatchToProps={undoHistory:_history.undoHistory,redoHistory:_history.redoHistory,fetchAllRenderables:_elements.fetchAllRenderables};exports.Workpad=(0,_recompose.compose)((0,_recompose.getContext)({router:_propTypes2.default.object}),(0,_recompose.withState)("grid","setGrid",false),(0,_reactRedux.connect)(mapStateToProps,mapDispatchToProps),(0,_recompose.withState)("transition","setTransition",null),(0,_recompose.withState)("prevSelectedPageNumber","setPrevSelectedPageNumber",0),(0,_recompose.withProps)(function(_ref){var selectedPageNumber=_ref.selectedPageNumber,prevSelectedPageNumber=_ref.prevSelectedPageNumber,transition=_ref.transition;function getAnimation(pageNumber){if(!transition||!transition.name)return null;if(![selectedPageNumber,prevSelectedPageNumber].includes(pageNumber))return null;var _transitionsRegistry$=_transitions_registry.transitionsRegistry.get(transition.name),enter=_transitionsRegistry$.enter,exit=_transitionsRegistry$.exit;var laterPageNumber=Math.max(selectedPageNumber,prevSelectedPageNumber);var name=pageNumber===laterPageNumber?enter:exit;var direction=prevSelectedPageNumber>selectedPageNumber?"reverse":"normal";return{name:name,direction:direction}}return{getAnimation:getAnimation}}),(0,_recompose.withHandlers)({onPageChange:function onPageChange(props){return function(pageNumber){if(pageNumber===props.selectedPageNumber)return;props.setPrevSelectedPageNumber(props.selectedPageNumber);var transitionPage=Math.max(props.selectedPageNumber,pageNumber)-1;var transition=props.workpad.pages[transitionPage].transition;transition&&props.setTransition(transition);props.router.navigateTo("loadWorkpad",{id:props.workpad.id,page:pageNumber})}}}),(0,_recompose.withHandlers)({onTransitionEnd:function onTransitionEnd(_ref2){var setTransition=_ref2.setTransition;return function(){return setTransition(null)}},nextPage:function nextPage(props){return function(){var pageNumber=Math.min(props.selectedPageNumber+1,props.workpad.pages.length);props.onPageChange(pageNumber)}},previousPage:function previousPage(props){return function(){var pageNumber=Math.max(1,props.selectedPageNumber-1);props.onPageChange(pageNumber)}}}))(_workpad2.Workpad)},6226:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.Workpad=void 0;var _react=__webpack_require__(0);var _react2=_interopRequireDefault(_react);var _propTypes=__webpack_require__(4);var _propTypes2=_interopRequireDefault(_propTypes);var _reactShortcuts=__webpack_require__(813);var _workpad_page=__webpack_require__(2089);var _fullscreen=__webpack_require__(6292);var _doc_title=__webpack_require__(2079);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var Workpad=exports.Workpad=function Workpad(props){var selectedPageNumber=props.selectedPageNumber,getAnimation=props.getAnimation,onTransitionEnd=props.onTransitionEnd,pages=props.pages,totalElementCount=props.totalElementCount,workpad=props.workpad,fetchAllRenderables=props.fetchAllRenderables,undoHistory=props.undoHistory,redoHistory=props.redoHistory,setGrid=props.setGrid,grid=props.grid,nextPage=props.nextPage,previousPage=props.previousPage,isFullscreen=props.isFullscreen;var height=workpad.height,width=workpad.width;var bufferStyle={height:isFullscreen?height:height+32,width:isFullscreen?width:width+32};var keyHandler=function keyHandler(action){if("REFRESH"===action)return fetchAllRenderables();if("UNDO"===action)return undoHistory();if("REDO"===action)return redoHistory();if("GRID"===action)return setGrid(!grid);if("PREV"===action)return previousPage();if("NEXT"===action)return nextPage()};(0,_doc_title.setDocTitle)(workpad.name);return _react2.default.createElement("div",{className:"canvasWorkpad__buffer",style:bufferStyle},_react2.default.createElement("div",{className:"canvasCheckered",style:{height:height,width:width}},!isFullscreen&&_react2.default.createElement(_reactShortcuts.Shortcuts,{name:"EDITOR",handler:keyHandler,targetNodeSelector:"body",global:true}),_react2.default.createElement(_fullscreen.Fullscreen,null,function(_ref){var isFullscreen=_ref.isFullscreen,windowSize=_ref.windowSize;var scale=Math.min(windowSize.height/height,windowSize.width/width);var fsStyle=isFullscreen?{transform:"scale3d("+scale+", "+scale+", 1)",WebkitTransform:"scale3d("+scale+", "+scale+", 1)",msTransform:"scale3d("+scale+", "+scale+", 1)",height:windowSize.height<height?"auto":height,width:windowSize.width<width?"auto":width}:{};return _react2.default.createElement("div",{className:"canvasWorkpad "+(isFullscreen?"fullscreen":""),style:fsStyle,"data-shared-items-count":totalElementCount},isFullscreen&&_react2.default.createElement(_reactShortcuts.Shortcuts,{name:"PRESENTATION",handler:keyHandler,targetNodeSelector:"body",global:true}),pages.map(function(page,i){return _react2.default.createElement(_workpad_page.WorkpadPage,{key:page.id,page:page,height:height,width:width,isSelected:i+1===selectedPageNumber,animation:getAnimation(i+1),onAnimationEnd:onTransitionEnd})}),_react2.default.createElement("div",{className:"canvasGrid",style:{height:height,width:width,display:grid?"block":"none"}}))})))};Workpad.propTypes={selectedPageNumber:_propTypes2.default.number.isRequired,getAnimation:_propTypes2.default.func.isRequired,onTransitionEnd:_propTypes2.default.func.isRequired,grid:_propTypes2.default.bool.isRequired,setGrid:_propTypes2.default.func.isRequired,pages:_propTypes2.default.array.isRequired,totalElementCount:_propTypes2.default.number.isRequired,isFullscreen:_propTypes2.default.bool.isRequired,workpad:_propTypes2.default.object.isRequired,undoHistory:_propTypes2.default.func.isRequired,redoHistory:_propTypes2.default.func.isRequired,nextPage:_propTypes2.default.func.isRequired,previousPage:_propTypes2.default.func.isRequired,fetchAllRenderables:_propTypes2.default.func.isRequired,style:_propTypes2.default.object}},6227:function(module,exports,__webpack_require__){"use strict";(function(process){Object.defineProperty(exports,"__esModule",{value:true});var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;"value"in descriptor&&(descriptor.writable=true);Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){protoProps&&defineProperties(Constructor.prototype,protoProps);staticProps&&defineProperties(Constructor,staticProps);return Constructor}}();var _justReduceObject=__webpack_require__(6228);var _justReduceObject2=_interopRequireDefault(_justReduceObject);var _invariant=__webpack_require__(56);var _invariant2=_interopRequireDefault(_invariant);var _events=__webpack_require__(106);var _helpers=__webpack_require__(2085);var _helpers2=_interopRequireDefault(_helpers);var _utils=__webpack_require__(6230);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(self,call){if(!self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!call||"object"!==typeof call&&"function"!==typeof call?self:call}function _inherits(subClass,superClass){if("function"!==typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function, not "+typeof superClass);subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:false,writable:true,configurable:true}});superClass&&(Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass)}var warning=function warning(text){process&&false};var ShortcutManager=function(_EventEmitter){_inherits(ShortcutManager,_EventEmitter);function ShortcutManager(){var keymap=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};_classCallCheck(this,ShortcutManager);var _this=_possibleConstructorReturn(this,(ShortcutManager.__proto__||Object.getPrototypeOf(ShortcutManager)).call(this));_this._platformName=_helpers2.default.getPlatformName();_this._parseShortcutDescriptor=function(item){if((0,_utils.isPlainObject)(item))return item[_this._platformName];return item};_this._keymap=keymap;return _this}_createClass(ShortcutManager,[{key:"addUpdateListener",value:function addUpdateListener(callback){(0,_invariant2.default)(callback,"addUpdateListener: callback argument is not defined or falsy");this.on(ShortcutManager.CHANGE_EVENT,callback)}},{key:"removeUpdateListener",value:function removeUpdateListener(callback){this.removeListener(ShortcutManager.CHANGE_EVENT,callback)}},{key:"setKeymap",value:function setKeymap(keymap){(0,_invariant2.default)(keymap,"setKeymap: keymap argument is not defined or falsy.");this._keymap=keymap;this.emit(ShortcutManager.CHANGE_EVENT)}},{key:"extendKeymap",value:function extendKeymap(keymap){(0,_invariant2.default)(keymap,"extendKeymap: keymap argument is not defined or falsy.");this._keymap=Object.assign({},this._keymap,keymap);this.emit(ShortcutManager.CHANGE_EVENT)}},{key:"getAllShortcuts",value:function getAllShortcuts(){return this._keymap}},{key:"getAllShortcutsForPlatform",value:function getAllShortcutsForPlatform(platformName){var _transformShortcuts=function _transformShortcuts(shortcuts){return(0,_justReduceObject2.default)(shortcuts,function(result,keyName,keyValue){if((0,_utils.isPlainObject)(keyValue)){if(!keyValue[platformName]){result[keyName]=_transformShortcuts(keyValue);return result}keyValue=keyValue[platformName]}result[keyName]=keyValue;return result},{})};return _transformShortcuts(this._keymap)}},{key:"getAllShortcutsForCurrentPlatform",value:function getAllShortcutsForCurrentPlatform(){return this.getAllShortcutsForPlatform(this._platformName)}},{key:"getShortcuts",value:function getShortcuts(componentName){(0,_invariant2.default)(componentName,"getShortcuts: name argument is not defined or falsy.");var cursor=this._keymap[componentName];if(!cursor){warning("getShortcuts: There are no shortcuts with name "+componentName+".");return}var shortcuts=(0,_utils.compact)((0,_utils.flatten)((0,_utils.map)(cursor,this._parseShortcutDescriptor)));return shortcuts}},{key:"_parseShortcutKeyName",value:function _parseShortcutKeyName(obj,keyName){var _this2=this;var result=(0,_utils.findKey)(obj,function(item){(0,_utils.isPlainObject)(item)&&(item=item[_this2._platformName]);if((0,_utils.isArray)(item)){var index=item.indexOf(keyName);index>=0&&(item=item[index])}return item===keyName});return result}},{key:"findShortcutName",value:function findShortcutName(keyName,componentName){(0,_invariant2.default)(keyName,"findShortcutName: keyName argument is not defined or falsy.");(0,_invariant2.default)(componentName,"findShortcutName: componentName argument is not defined or falsy.");var cursor=this._keymap[componentName];var result=this._parseShortcutKeyName(cursor,keyName);return result}}]);return ShortcutManager}(_events.EventEmitter);ShortcutManager.CHANGE_EVENT="shortcuts:update";exports.default=ShortcutManager;module.exports=exports["default"]}).call(exports,__webpack_require__(90))},6228:function(module,exports){module.exports=reduce;function reduce(obj,predicate){var args=[callback];var hasInitialValue=2 in arguments;hasInitialValue&&args.push(arguments[2]);function callback(previousValue,currentKey,currentIndex,array){if(!hasInitialValue){previousValue=obj[array[0]];hasInitialValue=true}return predicate(previousValue,currentKey,obj[currentKey],currentIndex,array)}return Array.prototype.reduce.apply(Object.keys(obj),args)}},6229:function(module,exports,__webpack_require__){(function(module,global){var __WEBPACK_AMD_DEFINE_RESULT__;
/*!
 * Platform.js <https://mths.be/platform>
 * Copyright 2014-2018 Benjamin Tan <https://bnjmnt4n.now.sh/>
 * Copyright 2011-2013 John-David Dalton <http://allyoucanleet.com/>
 * Available under MIT license <https://mths.be/mit>
 */(function(){"use strict";var objectTypes={function:true,object:true};var root=objectTypes[typeof window]&&window||this;var freeExports=objectTypes[typeof exports]&&exports;var freeModule=objectTypes[typeof module]&&module&&!module.nodeType&&module;var freeGlobal=freeExports&&freeModule&&"object"==typeof global&&global;!freeGlobal||freeGlobal.global!==freeGlobal&&freeGlobal.window!==freeGlobal&&freeGlobal.self!==freeGlobal||(root=freeGlobal);var maxSafeInteger=Math.pow(2,53)-1;var reOpera=/\bOpera/;var objectProto=Object.prototype;var hasOwnProperty=objectProto.hasOwnProperty;var toString=objectProto.toString;function capitalize(string){string=String(string);return string.charAt(0).toUpperCase()+string.slice(1)}function cleanupOS(os,pattern,label){var data={"10.0":"10",6.4:"10 Technical Preview",6.3:"8.1",6.2:"8",6.1:"Server 2008 R2 / 7","6.0":"Server 2008 / Vista",5.2:"Server 2003 / XP 64-bit",5.1:"XP",5.01:"2000 SP1","5.0":"2000","4.0":"NT","4.90":"ME"};pattern&&label&&/^Win/i.test(os)&&!/^Windows Phone /i.test(os)&&(data=data[/[\d.]+$/.exec(os)])&&(os="Windows "+data);os=String(os);pattern&&label&&(os=os.replace(RegExp(pattern,"i"),label));os=format(os.replace(/ ce$/i," CE").replace(/\bhpw/i,"web").replace(/\bMacintosh\b/,"Mac OS").replace(/_PowerPC\b/i," OS").replace(/\b(OS X) [^ \d]+/i,"$1").replace(/\bMac (OS X)\b/,"$1").replace(/\/(\d)/," $1").replace(/_/g,".").replace(/(?: BePC|[ .]*fc[ \d.]+)$/i,"").replace(/\bx86\.64\b/gi,"x86_64").replace(/\b(Windows Phone) OS\b/,"$1").replace(/\b(Chrome OS \w+) [\d.]+\b/,"$1").split(" on ")[0]);return os}function each(object,callback){var index=-1,length=object?object.length:0;if("number"==typeof length&&length>-1&&length<=maxSafeInteger)while(++index<length)callback(object[index],index,object);else forOwn(object,callback)}function format(string){string=trim(string);return/^(?:webOS|i(?:OS|P))/.test(string)?string:capitalize(string)}function forOwn(object,callback){for(var key in object)hasOwnProperty.call(object,key)&&callback(object[key],key,object)}function getClassOf(value){return null==value?capitalize(value):toString.call(value).slice(8,-1)}function isHostType(object,property){var type=null!=object?typeof object[property]:"number";return!/^(?:boolean|number|string|undefined)$/.test(type)&&("object"!=type||!!object[property])}function qualify(string){return String(string).replace(/([ -])(?!$)/g,"$1?")}function reduce(array,callback){var accumulator=null;each(array,function(value,index){accumulator=callback(accumulator,value,index,array)});return accumulator}function trim(string){return String(string).replace(/^ +| +$/g,"")}function parse(ua){var context=root;var isCustomContext=ua&&"object"==typeof ua&&"String"!=getClassOf(ua);if(isCustomContext){context=ua;ua=null}var nav=context.navigator||{};var userAgent=nav.userAgent||"";ua||(ua=userAgent);var likeChrome=isCustomContext?!!nav.likeChrome:/\bChrome\b/.test(ua)&&!/internal|\n/i.test(toString.toString());var objectClass="Object",airRuntimeClass=isCustomContext?objectClass:"ScriptBridgingProxyObject",enviroClass=isCustomContext?objectClass:"Environment",javaClass=isCustomContext&&context.java?"JavaPackage":getClassOf(context.java),phantomClass=isCustomContext?objectClass:"RuntimeObject";var java=/\bJava/.test(javaClass)&&context.java;var rhino=java&&getClassOf(context.environment)==enviroClass;var alpha=java?"a":"α";var beta=java?"b":"β";var doc=context.document||{};var opera=context.operamini||context.opera;var operaClass=reOpera.test(operaClass=isCustomContext&&opera?opera["[[Class]]"]:getClassOf(opera))?operaClass:opera=null;var data;var arch=ua;var description=[];var prerelease=null;var useFeatures=ua==userAgent;var version=useFeatures&&opera&&"function"==typeof opera.version&&opera.version();var isSpecialCasedOS;var layout=getLayout([{label:"EdgeHTML",pattern:"Edge"},"Trident",{label:"WebKit",pattern:"AppleWebKit"},"iCab","Presto","NetFront","Tasman","KHTML","Gecko"]);var name=getName(["Adobe AIR","Arora","Avant Browser","Breach","Camino","Electron","Epiphany","Fennec","Flock","Galeon","GreenBrowser","iCab","Iceweasel","K-Meleon","Konqueror","Lunascape","Maxthon",{label:"Microsoft Edge",pattern:"Edge"},"Midori","Nook Browser","PaleMoon","PhantomJS","Raven","Rekonq","RockMelt",{label:"Samsung Internet",pattern:"SamsungBrowser"},"SeaMonkey",{label:"Silk",pattern:"(?:Cloud9|Silk-Accelerated)"},"Sleipnir","SlimBrowser",{label:"SRWare Iron",pattern:"Iron"},"Sunrise","Swiftfox","Waterfox","WebPositive","Opera Mini",{label:"Opera Mini",pattern:"OPiOS"},"Opera",{label:"Opera",pattern:"OPR"},"Chrome",{label:"Chrome Mobile",pattern:"(?:CriOS|CrMo)"},{label:"Firefox",pattern:"(?:Firefox|Minefield)"},{label:"Firefox for iOS",pattern:"FxiOS"},{label:"IE",pattern:"IEMobile"},{label:"IE",pattern:"MSIE"},"Safari"]);var product=getProduct([{label:"BlackBerry",pattern:"BB10"},"BlackBerry",{label:"Galaxy S",pattern:"GT-I9000"},{label:"Galaxy S2",pattern:"GT-I9100"},{label:"Galaxy S3",pattern:"GT-I9300"},{label:"Galaxy S4",pattern:"GT-I9500"},{label:"Galaxy S5",pattern:"SM-G900"},{label:"Galaxy S6",pattern:"SM-G920"},{label:"Galaxy S6 Edge",pattern:"SM-G925"},{label:"Galaxy S7",pattern:"SM-G930"},{label:"Galaxy S7 Edge",pattern:"SM-G935"},"Google TV","Lumia","iPad","iPod","iPhone","Kindle",{label:"Kindle Fire",pattern:"(?:Cloud9|Silk-Accelerated)"},"Nexus","Nook","PlayBook","PlayStation Vita","PlayStation","TouchPad","Transformer",{label:"Wii U",pattern:"WiiU"},"Wii","Xbox One",{label:"Xbox 360",pattern:"Xbox"},"Xoom"]);var manufacturer=getManufacturer({Apple:{iPad:1,iPhone:1,iPod:1},Archos:{},Amazon:{Kindle:1,"Kindle Fire":1},Asus:{Transformer:1},"Barnes & Noble":{Nook:1},BlackBerry:{PlayBook:1},Google:{"Google TV":1,Nexus:1},HP:{TouchPad:1},HTC:{},LG:{},Microsoft:{Xbox:1,"Xbox One":1},Motorola:{Xoom:1},Nintendo:{"Wii U":1,Wii:1},Nokia:{Lumia:1},Samsung:{"Galaxy S":1,"Galaxy S2":1,"Galaxy S3":1,"Galaxy S4":1},Sony:{PlayStation:1,"PlayStation Vita":1}});var os=getOS(["Windows Phone","Android","CentOS",{label:"Chrome OS",pattern:"CrOS"},"Debian","Fedora","FreeBSD","Gentoo","Haiku","Kubuntu","Linux Mint","OpenBSD","Red Hat","SuSE","Ubuntu","Xubuntu","Cygwin","Symbian OS","hpwOS","webOS ","webOS","Tablet OS","Tizen","Linux","Mac OS X","Macintosh","Mac","Windows 98;","Windows "]);function getLayout(guesses){return reduce(guesses,function(result,guess){return result||RegExp("\\b"+(guess.pattern||qualify(guess))+"\\b","i").exec(ua)&&(guess.label||guess)})}function getManufacturer(guesses){return reduce(guesses,function(result,value,key){return result||(value[product]||value[/^[a-z]+(?: +[a-z]+\b)*/i.exec(product)]||RegExp("\\b"+qualify(key)+"(?:\\b|\\w*\\d)","i").exec(ua))&&key})}function getName(guesses){return reduce(guesses,function(result,guess){return result||RegExp("\\b"+(guess.pattern||qualify(guess))+"\\b","i").exec(ua)&&(guess.label||guess)})}function getOS(guesses){return reduce(guesses,function(result,guess){var pattern=guess.pattern||qualify(guess);!result&&(result=RegExp("\\b"+pattern+"(?:/[\\d.]+|[ \\w.]*)","i").exec(ua))&&(result=cleanupOS(result,pattern,guess.label||guess));return result})}function getProduct(guesses){return reduce(guesses,function(result,guess){var pattern=guess.pattern||qualify(guess);if(!result&&(result=RegExp("\\b"+pattern+" *\\d+[.\\w_]*","i").exec(ua)||RegExp("\\b"+pattern+" *\\w+-[\\w]*","i").exec(ua)||RegExp("\\b"+pattern+"(?:; *(?:[a-z]+[_-])?[a-z]+\\d+|[^ ();-]*)","i").exec(ua))){(result=String(guess.label&&!RegExp(pattern,"i").test(guess.label)?guess.label:result).split("/"))[1]&&!/[\d.]+/.test(result[0])&&(result[0]+=" "+result[1]);guess=guess.label||guess;result=format(result[0].replace(RegExp(pattern,"i"),guess).replace(RegExp("; *(?:"+guess+"[_-])?","i")," ").replace(RegExp("("+guess+")[-_.]?(\\w)","i"),"$1 $2"))}return result})}function getVersion(patterns){return reduce(patterns,function(result,pattern){return result||(RegExp(pattern+"(?:-[\\d.]+/|(?: for [\\w-]+)?[ /-])([\\d.]+[^ ();/_-]*)","i").exec(ua)||0)[1]||null})}function toStringPlatform(){return this.description||""}layout&&(layout=[layout]);manufacturer&&!product&&(product=getProduct([manufacturer]));(data=/\bGoogle TV\b/.exec(product))&&(product=data[0]);/\bSimulator\b/i.test(ua)&&(product=(product?product+" ":"")+"Simulator");"Opera Mini"==name&&/\bOPiOS\b/.test(ua)&&description.push("running in Turbo/Uncompressed mode");if("IE"==name&&/\blike iPhone OS\b/.test(ua)){data=parse(ua.replace(/like iPhone OS/,""));manufacturer=data.manufacturer;product=data.product}else if(/^iP/.test(product)){name||(name="Safari");os="iOS"+((data=/ OS ([\d_]+)/i.exec(ua))?" "+data[1].replace(/_/g,"."):"")}else if("Konqueror"!=name||/buntu/i.test(os))if(manufacturer&&"Google"!=manufacturer&&(/Chrome/.test(name)&&!/\bMobile Safari\b/i.test(ua)||/\bVita\b/.test(product))||/\bAndroid\b/.test(os)&&/^Chrome/.test(name)&&/\bVersion\//i.test(ua)){name="Android Browser";os=/\bAndroid\b/.test(os)?os:"Android"}else if("Silk"==name){if(!/\bMobi/i.test(ua)){os="Android";description.unshift("desktop mode")}/Accelerated *= *true/i.test(ua)&&description.unshift("accelerated")}else if("PaleMoon"==name&&(data=/\bFirefox\/([\d.]+)\b/.exec(ua)))description.push("identifying as Firefox "+data[1]);else if("Firefox"==name&&(data=/\b(Mobile|Tablet|TV)\b/i.exec(ua))){os||(os="Firefox OS");product||(product=data[1])}else if(!name||(data=!/\bMinefield\b/i.test(ua)&&/\b(?:Firefox|Safari)\b/.exec(name))){name&&!product&&/[\/,]|^[^(]+?\)/.test(ua.slice(ua.indexOf(data+"/")+8))&&(name=null);(data=product||manufacturer||os)&&(product||manufacturer||/\b(?:Android|Symbian OS|Tablet OS|webOS)\b/.test(os))&&(name=/[a-z]+(?: Hat)?/i.exec(/\bAndroid\b/.test(os)?os:data)+" Browser")}else"Electron"==name&&(data=(/\bChrome\/([\d.]+)\b/.exec(ua)||0)[1])&&description.push("Chromium "+data);else os="Kubuntu";version||(version=getVersion(["(?:Cloud9|CriOS|CrMo|Edge|FxiOS|IEMobile|Iron|Opera ?Mini|OPiOS|OPR|Raven|SamsungBrowser|Silk(?!/[\\d.]+$))","Version",qualify(name),"(?:Firefox|Minefield|NetFront)"]));(data=("iCab"==layout&&parseFloat(version)>3?"WebKit":/\bOpera\b/.test(name)&&(/\bOPR\b/.test(ua)?"Blink":"Presto"))||/\b(?:Midori|Nook|Safari)\b/i.test(ua)&&!/^(?:Trident|EdgeHTML)$/.test(layout)&&"WebKit"||!layout&&/\bMSIE\b/i.test(ua)&&("Mac OS"==os?"Tasman":"Trident")||"WebKit"==layout&&/\bPlayStation\b(?! Vita\b)/i.test(name)&&"NetFront")&&(layout=[data]);if("IE"==name&&(data=(/; *(?:XBLWP|ZuneWP)(\d+)/i.exec(ua)||0)[1])){name+=" Mobile";os="Windows Phone "+(/\+$/.test(data)?data:data+".x");description.unshift("desktop mode")}else if(/\bWPDesktop\b/i.test(ua)){name="IE Mobile";os="Windows Phone 8.x";description.unshift("desktop mode");version||(version=(/\brv:([\d.]+)/.exec(ua)||0)[1])}else if("IE"!=name&&"Trident"==layout&&(data=/\brv:([\d.]+)/.exec(ua))){name&&description.push("identifying as "+name+(version?" "+version:""));name="IE";version=data[1]}if(useFeatures){if(isHostType(context,"global")){if(java){data=java.lang.System;arch=data.getProperty("os.arch");os=os||data.getProperty("os.name")+" "+data.getProperty("os.version")}if(rhino){try{version=context.require("ringo/engine").version.join(".");name="RingoJS"}catch(e){if((data=context.system)&&data.global.system==context.system){name="Narwhal";os||(os=data[0].os||null)}}name||(name="Rhino")}else if("object"==typeof context.process&&!context.process.browser&&(data=context.process)){if("object"==typeof data.versions)if("string"==typeof data.versions.electron){description.push("Node "+data.versions.node);name="Electron";version=data.versions.electron}else if("string"==typeof data.versions.nw){description.push("Chromium "+version,"Node "+data.versions.node);name="NW.js";version=data.versions.nw}if(!name){name="Node.js";arch=data.arch;os=data.platform;version=/[\d.]+/.exec(data.version);version=version?version[0]:null}}}else if(getClassOf(data=context.runtime)==airRuntimeClass){name="Adobe AIR";os=data.flash.system.Capabilities.os}else if(getClassOf(data=context.phantom)==phantomClass){name="PhantomJS";version=(data=data.version||null)&&data.major+"."+data.minor+"."+data.patch}else if("number"==typeof doc.documentMode&&(data=/\bTrident\/(\d+)/i.exec(ua))){version=[version,doc.documentMode];if((data=+data[1]+4)!=version[1]){description.push("IE "+version[1]+" mode");layout&&(layout[1]="");version[1]=data}version="IE"==name?String(version[1].toFixed(1)):version[0]}else if("number"==typeof doc.documentMode&&/^(?:Chrome|Firefox)\b/.test(name)){description.push("masking as "+name+" "+version);name="IE";version="11.0";layout=["Trident"];os="Windows"}os=os&&format(os)}if(version&&(data=/(?:[ab]|dp|pre|[ab]\d+pre)(?:\d+\+?)?$/i.exec(version)||/(?:alpha|beta)(?: ?\d)?/i.exec(ua+";"+(useFeatures&&nav.appMinorVersion))||/\bMinefield\b/i.test(ua)&&"a")){prerelease=/b/i.test(data)?"beta":"alpha";version=version.replace(RegExp(data+"\\+?$"),"")+("beta"==prerelease?beta:alpha)+(/\d+\+?/.exec(data)||"")}if("Fennec"==name||"Firefox"==name&&/\b(?:Android|Firefox OS)\b/.test(os))name="Firefox Mobile";else if("Maxthon"==name&&version)version=version.replace(/\.[\d.]+/,".x");else if(/\bXbox\b/i.test(product)){"Xbox 360"==product&&(os=null);"Xbox 360"==product&&/\bIEMobile\b/.test(ua)&&description.unshift("mobile mode")}else if(!/^(?:Chrome|IE|Opera)$/.test(name)&&(!name||product||/Browser|Mobi/.test(name))||"Windows CE"!=os&&!/Mobi/i.test(ua)){if("IE"==name&&useFeatures)try{null===context.external&&description.unshift("platform preview")}catch(e){description.unshift("embedded")}else if((/\bBlackBerry\b/.test(product)||/\bBB10\b/.test(ua))&&(data=(RegExp(product.replace(/ +/g," *")+"/([.\\d]+)","i").exec(ua)||0)[1]||version)){data=[data,/BB10/.test(ua)];os=(data[1]?(product=null,manufacturer="BlackBerry"):"Device Software")+" "+data[0];version=null}else if(this!=forOwn&&"Wii"!=product&&(useFeatures&&opera||/Opera/.test(name)&&/\b(?:MSIE|Firefox)\b/i.test(ua)||"Firefox"==name&&/\bOS X (?:\d+\.){2,}/.test(os)||"IE"==name&&(os&&!/^Win/.test(os)&&version>5.5||/\bWindows XP\b/.test(os)&&version>8||8==version&&!/\bTrident\b/.test(ua)))&&!reOpera.test(data=parse.call(forOwn,ua.replace(reOpera,"")+";"))&&data.name){data="ing as "+data.name+((data=data.version)?" "+data:"");if(reOpera.test(name)){/\bIE\b/.test(data)&&"Mac OS"==os&&(os=null);data="identify"+data}else{data="mask"+data;name=operaClass?format(operaClass.replace(/([a-z])([A-Z])/g,"$1 $2")):"Opera";/\bIE\b/.test(data)&&(os=null);useFeatures||(version=null)}layout=["Presto"];description.push(data)}}else name+=" Mobile";if(data=(/\bAppleWebKit\/([\d.]+\+?)/i.exec(ua)||0)[1]){data=[parseFloat(data.replace(/\.(\d)$/,".0$1")),data];if("Safari"==name&&"+"==data[1].slice(-1)){name="WebKit Nightly";prerelease="alpha";version=data[1].slice(0,-1)}else version!=data[1]&&version!=(data[2]=(/\bSafari\/([\d.]+\+?)/i.exec(ua)||0)[1])||(version=null);data[1]=(/\bChrome\/([\d.]+)/i.exec(ua)||0)[1];537.36==data[0]&&537.36==data[2]&&parseFloat(data[1])>=28&&"WebKit"==layout&&(layout=["Blink"]);if(useFeatures&&(likeChrome||data[1])){layout&&(layout[1]="like Chrome");data=data[1]||(data=data[0],data<530?1:data<532?2:data<532.05?3:data<533?4:data<534.03?5:data<534.07?6:data<534.1?7:data<534.13?8:data<534.16?9:data<534.24?10:data<534.3?11:data<535.01?12:data<535.02?"13+":data<535.07?15:data<535.11?16:data<535.19?17:data<536.05?18:data<536.1?19:data<537.01?20:data<537.11?"21+":data<537.13?23:data<537.18?24:data<537.24?25:data<537.36?26:"Blink"!=layout?"27":"28")}else{layout&&(layout[1]="like Safari");data=(data=data[0],data<400?1:data<500?2:data<526?3:data<533?4:data<534?"4+":data<535?5:data<537?6:data<538?7:data<601?8:"8")}layout&&(layout[1]+=" "+(data+="number"==typeof data?".x":/[.+]/.test(data)?"":"+"));"Safari"==name&&(!version||parseInt(version)>45)&&(version=data)}if("Opera"==name&&(data=/\bzbov|zvav$/.exec(os))){name+=" ";description.unshift("desktop mode");if("zvav"==data){name+="Mini";version=null}else name+="Mobile";os=os.replace(RegExp(" *"+data+"$"),"")}else if("Safari"==name&&/\bChrome\b/.exec(layout&&layout[1])){description.unshift("desktop mode");name="Chrome Mobile";version=null;if(/\bOS X\b/.test(os)){manufacturer="Apple";os="iOS 4.3+"}else os=null}version&&0==version.indexOf(data=/[\d.]+$/.exec(os))&&ua.indexOf("/"+data+"-")>-1&&(os=trim(os.replace(data,"")));layout&&!/\b(?:Avant|Nook)\b/.test(name)&&(/Browser|Lunascape|Maxthon/.test(name)||"Safari"!=name&&/^iOS/.test(os)&&/\bSafari\b/.test(layout[1])||/^(?:Adobe|Arora|Breach|Midori|Opera|Phantom|Rekonq|Rock|Samsung Internet|Sleipnir|Web)/.test(name)&&layout[1])&&(data=layout[layout.length-1])&&description.push(data);description.length&&(description=["("+description.join("; ")+")"]);manufacturer&&product&&product.indexOf(manufacturer)<0&&description.push("on "+manufacturer);product&&description.push((/^on /.test(description[description.length-1])?"":"on ")+product);if(os){data=/ ([\d.+]+)$/.exec(os);isSpecialCasedOS=data&&"/"==os.charAt(os.length-data[0].length-1);os={architecture:32,family:data&&!isSpecialCasedOS?os.replace(data[0],""):os,version:data?data[1]:null,toString:function(){var version=this.version;return this.family+(version&&!isSpecialCasedOS?" "+version:"")+(64==this.architecture?" 64-bit":"")}}}if((data=/\b(?:AMD|IA|Win|WOW|x86_|x)64\b/i.exec(arch))&&!/\bi686\b/i.test(arch)){if(os){os.architecture=64;os.family=os.family.replace(RegExp(" *"+data),"")}name&&(/\bWOW64\b/i.test(ua)||useFeatures&&/\w(?:86|32)$/.test(nav.cpuClass||nav.platform)&&!/\bWin64; x64\b/i.test(ua))&&description.unshift("32-bit")}else os&&/^OS X/.test(os.family)&&"Chrome"==name&&parseFloat(version)>=39&&(os.architecture=64);ua||(ua=null);var platform={};platform.description=ua;platform.layout=layout&&layout[0];platform.manufacturer=manufacturer;platform.name=name;platform.prerelease=prerelease;platform.product=product;platform.ua=ua;platform.version=name&&version;platform.os=os||{architecture:null,family:null,version:null,toString:function(){return"null"}};platform.parse=parse;platform.toString=toStringPlatform;platform.version&&description.unshift(version);platform.name&&description.unshift(name);!os||!name||os==String(os).split(" ")[0]&&(os==name.split(" ")[0]||product)||description.push(product?"("+os+")":"on "+os);description.length&&(platform.description=description.join(" "));return platform}var platform=parse();true;root.platform=platform;!(__WEBPACK_AMD_DEFINE_RESULT__=function(){return platform}.call(exports,__webpack_require__,exports,module),void 0!==__WEBPACK_AMD_DEFINE_RESULT__&&(module.exports=__WEBPACK_AMD_DEFINE_RESULT__))}).call(this)}).call(exports,__webpack_require__(66)(module),__webpack_require__(23))},6230:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var _typeof="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(obj){return typeof obj}:function(obj){return obj&&"function"===typeof Symbol&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj};var isArray=exports.isArray=function isArray(arr){return Array.isArray(arr)};var isPlainObject=exports.isPlainObject=function isPlainObject(obj){var isObject="object"===("undefined"===typeof obj?"undefined":_typeof(obj))&&null!==obj&&!isArray(obj);if(!isObject||obj.toString&&"[object Object]"!==obj.toString())return false;var proto=Object.getPrototypeOf(obj);if(null===proto)return true;var Ctor=Object.prototype.hasOwnProperty.call(proto,"constructor")&&proto.constructor;return"function"===typeof Ctor&&Ctor instanceof Ctor&&Function.prototype.toString.call(Ctor)===Function.prototype.toString.call(Object)};exports.findKey=function findKey(obj,fn){if(!isPlainObject(obj)&&!isArray(obj))return;var keys=Object.keys(obj);return keys.find(function(key){return fn(obj[key])})};exports.compact=function compact(arr){return arr.filter(Boolean)};var flattenOnce=function flattenOnce(arr){var recurse=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];return arr.reduce(function(acc,val){if(isArray(val)&&recurse)return acc.concat(flattenOnce(val,false));acc.push(val);return acc},[])};exports.flatten=function flatten(arr){if(!isArray(arr))throw new Error("flatten expects an array");return flattenOnce(arr)};exports.map=function map(itr,fn){if(isArray(itr))return itr.map(fn);var results=[];var keys=Object.keys(itr);var len=keys.length;for(var i=0;i<len;i+=1){var key=keys[i];results.push(fn(itr[key],key))}return results}},6231:function(module,exports,__webpack_require__){"use strict";module.exports=__webpack_require__(6232)},6232:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;"value"in descriptor&&(descriptor.writable=true);Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){protoProps&&defineProperties(Constructor.prototype,protoProps);staticProps&&defineProperties(Constructor,staticProps);return Constructor}}();var _react=__webpack_require__(0);var _react2=_interopRequireDefault(_react);var _invariant=__webpack_require__(56);var _invariant2=_interopRequireDefault(_invariant);var _combokeys=__webpack_require__(6233);var _combokeys2=_interopRequireDefault(_combokeys);var _propTypes=__webpack_require__(6262);var _propTypes2=_interopRequireDefault(_propTypes);var _helpers=__webpack_require__(2085);var _helpers2=_interopRequireDefault(_helpers);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(self,call){if(!self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!call||"object"!==typeof call&&"function"!==typeof call?self:call}function _inherits(subClass,superClass){if("function"!==typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function, not "+typeof superClass);subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:false,writable:true,configurable:true}});superClass&&(Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass)}var _class=function(_React$Component){_inherits(_class,_React$Component);function _class(){var _ref;var _temp,_this,_ret;_classCallCheck(this,_class);for(var _len=arguments.length,args=Array(_len),_key=0;_key<_len;_key++)args[_key]=arguments[_key];return _ret=(_temp=(_this=_possibleConstructorReturn(this,(_ref=_class.__proto__||Object.getPrototypeOf(_class)).call.apply(_ref,[this].concat(args))),_this),_this._combokeys=null,_this._lastEvent=null,_this._bindShortcuts=function(shortcutsArr){var element=_this._getElementToBind();element.setAttribute("tabindex",_this.props.tabIndex);_this._combokeys=new _combokeys2.default(element);_this._decorateCombokeys();_this._combokeys.bind(shortcutsArr,_this._handleShortcuts,_this.props.eventType);_this.props.global&&element.addEventListener("shortcuts:global",_this._customGlobalHandler)},_this._customGlobalHandler=function(e){var _e$detail=e.detail,character=_e$detail.character,modifiers=_e$detail.modifiers,event=_e$detail.event;var targetNode=null;_this.props.targetNodeSelector&&(targetNode=document.querySelector(_this.props.targetNodeSelector));e.target!==_this._domNode&&e.target!==targetNode&&_this._combokeys.handleKey(character,modifiers,event,true)},_this._decorateCombokeys=function(){var element=_this._getElementToBind();var originalHandleKey=_this._combokeys.handleKey.bind(_this._combokeys);_this._combokeys.stopCallback=function(event,domElement,combo){var isInputLikeElement="INPUT"===domElement.tagName||"SELECT"===domElement.tagName||"TEXTAREA"===domElement.tagName||domElement.contentEditable&&"true"===domElement.contentEditable;var isReturnString=void 0;isReturnString=event.key?1===event.key.length:Boolean(_helpers2.default.getCharacter(event));if(isInputLikeElement&&isReturnString&&!_this.props.alwaysFireHandler)return true;return false};_this._combokeys.handleKey=function(character,modifiers,event,isGlobalHandler){if(_this._lastEvent&&event.timeStamp===_this._lastEvent.timeStamp&&event.type===_this._lastEvent.type)return;_this._lastEvent=event;var isolateOwner=false;if(_this.props.isolate&&!event.__isolateShortcuts){event.__isolateShortcuts=true;isolateOwner=true}isGlobalHandler||element.dispatchEvent(new CustomEvent("shortcuts:global",{detail:{character:character,modifiers:modifiers,event:event},bubbles:true,cancelable:true}));if(!event.__isolateShortcuts){_this.props.preventDefault&&event.preventDefault();_this.props.stopPropagation&&!isGlobalHandler&&event.stopPropagation();originalHandleKey(character,modifiers,event);return}(_this.props.global||isolateOwner)&&originalHandleKey(character,modifiers,event)}},_this._getElementToBind=function(){var element=null;if(_this.props.targetNodeSelector){element=document.querySelector(_this.props.targetNodeSelector);(0,_invariant2.default)(element,"Node selector '"+_this.props.targetNodeSelector+"'  was not found.")}else element=_this._domNode;return element},_this._unbindShortcuts=function(){if(_this._combokeys){_this._combokeys.detach();_this._combokeys.reset()}},_this._onUpdate=function(){var shortcutsArr=_this.props.name&&_this.context.shortcuts.getShortcuts(_this.props.name);_this._unbindShortcuts();_this._bindShortcuts(shortcutsArr||[])},_this._handleShortcuts=function(event,keyName){if(_this.props.name){var shortcutName=_this.context.shortcuts.findShortcutName(keyName,_this.props.name);_this.props.handler&&_this.props.handler(shortcutName,event)}},_temp),_possibleConstructorReturn(_this,_ret)}_createClass(_class,[{key:"componentDidMount",value:function componentDidMount(){this._onUpdate();this.props.name&&this.context.shortcuts.addUpdateListener(this._onUpdate)}},{key:"componentWillUnmount",value:function componentWillUnmount(){this._unbindShortcuts();this.props.name&&this.context.shortcuts.removeUpdateListener(this._onUpdate);if(this.props.global){var element=this._getElementToBind();element.removeEventListener("shortcuts:global",this._customGlobalHandler)}}},{key:"render",value:function render(){var _this2=this;return _react2.default.createElement("div",{ref:function ref(node){_this2._domNode=node},tabIndex:this.props.tabIndex,className:this.props.className},this.props.children)}}]);return _class}(_react2.default.Component);_class.displayName="Shortcuts";_class.contextTypes={shortcuts:_propTypes2.default.object.isRequired};_class.propTypes={children:_propTypes2.default.node,handler:_propTypes2.default.func,name:_propTypes2.default.string,tabIndex:_propTypes2.default.number,className:_propTypes2.default.string,eventType:_propTypes2.default.string,stopPropagation:_propTypes2.default.bool,preventDefault:_propTypes2.default.bool,targetNodeSelector:_propTypes2.default.string,global:_propTypes2.default.bool,isolate:_propTypes2.default.bool,alwaysFireHandler:_propTypes2.default.bool};_class.defaultProps={tabIndex:-1,className:null,eventType:null,stopPropagation:true,preventDefault:false,targetNodeSelector:null,global:false,isolate:false,alwaysFireHandler:false};exports.default=_class;module.exports=exports["default"]},6233:function(module,exports,__webpack_require__){"use strict";module.exports=function(element){var self=this;var Combokeys=self.constructor;self.callbacks={};self.directMap={};self.sequenceLevels={};self.resetTimer=null;self.ignoreNextKeyup=false;self.ignoreNextKeypress=false;self.nextExpectedAction=false;self.element=element;self.addEvents();Combokeys.instances.push(self);return self};module.exports.prototype.bind=__webpack_require__(6234);module.exports.prototype.bindMultiple=__webpack_require__(6235);module.exports.prototype.unbind=__webpack_require__(6236);module.exports.prototype.trigger=__webpack_require__(6237);module.exports.prototype.reset=__webpack_require__(6238);module.exports.prototype.stopCallback=__webpack_require__(6239);module.exports.prototype.handleKey=__webpack_require__(6240);module.exports.prototype.addEvents=__webpack_require__(6241);module.exports.prototype.bindSingle=__webpack_require__(6245);module.exports.prototype.getKeyInfo=__webpack_require__(6246);module.exports.prototype.pickBestAction=__webpack_require__(6250);module.exports.prototype.getReverseMap=__webpack_require__(6251);module.exports.prototype.getMatches=__webpack_require__(6252);module.exports.prototype.resetSequences=__webpack_require__(6254);module.exports.prototype.fireCallback=__webpack_require__(6255);module.exports.prototype.bindSequence=__webpack_require__(6258);module.exports.prototype.resetSequenceTimer=__webpack_require__(6259);module.exports.prototype.detach=__webpack_require__(6260);module.exports.instances=[];module.exports.reset=__webpack_require__(6261);module.exports.REVERSE_MAP=null},6234:function(module,exports,__webpack_require__){"use strict";module.exports=function(keys,callback,action){var self=this;keys=keys instanceof Array?keys:[keys];self.bindMultiple(keys,callback,action);return self}},6235:function(module,exports,__webpack_require__){"use strict";module.exports=function(combinations,callback,action){var self=this;for(var j=0;j<combinations.length;++j)self.bindSingle(combinations[j],callback,action)}},6236:function(module,exports,__webpack_require__){"use strict";module.exports=function(keys,action){var self=this;return self.bind(keys,function(){},action)}},6237:function(module,exports,__webpack_require__){"use strict";module.exports=function(keys,action){var self=this;self.directMap[keys+":"+action]&&self.directMap[keys+":"+action]({},keys);return this}},6238:function(module,exports,__webpack_require__){"use strict";module.exports=function(){var self=this;self.callbacks={};self.directMap={};return this}},6239:function(module,exports,__webpack_require__){"use strict";module.exports=function(e,element){if((" "+element.className+" ").indexOf(" combokeys ")>-1)return false;var tagName=element.tagName.toLowerCase();return"input"===tagName||"select"===tagName||"textarea"===tagName||element.isContentEditable}},6240:function(module,exports,__webpack_require__){"use strict";module.exports=function(character,modifiers,e){var self=this;var callbacks;var j;var doNotReset={};var maxLevel=0;var processedSequenceCallback=false;var isModifier;var ignoreThisKeypress;callbacks=self.getMatches(character,modifiers,e);for(j=0;j<callbacks.length;++j)callbacks[j].seq&&(maxLevel=Math.max(maxLevel,callbacks[j].level));for(j=0;j<callbacks.length;++j){if(callbacks[j].seq){if(callbacks[j].level!==maxLevel)continue;processedSequenceCallback=true;doNotReset[callbacks[j].seq]=1;self.fireCallback(callbacks[j].callback,e,callbacks[j].combo,callbacks[j].seq);continue}processedSequenceCallback||self.fireCallback(callbacks[j].callback,e,callbacks[j].combo)}ignoreThisKeypress="keypress"===e.type&&self.ignoreNextKeypress;isModifier=__webpack_require__(1180);e.type!==self.nextExpectedAction||isModifier(character)||ignoreThisKeypress||self.resetSequences(doNotReset);self.ignoreNextKeypress=processedSequenceCallback&&"keydown"===e.type}},6241:function(module,exports,__webpack_require__){"use strict";module.exports=function(){var self=this;var on=__webpack_require__(2086);var element=self.element;self.eventHandler=__webpack_require__(6242).bind(self);on(element,"keypress",self.eventHandler);on(element,"keydown",self.eventHandler);on(element,"keyup",self.eventHandler)}},6242:function(module,exports,__webpack_require__){"use strict";module.exports=function(e){var self=this;var characterFromEvent;var eventModifiers;"number"!==typeof e.which&&(e.which=e.keyCode);characterFromEvent=__webpack_require__(2087);var character=characterFromEvent(e);if(void 0===character)return;if("keyup"===e.type&&self.ignoreNextKeyup===character){self.ignoreNextKeyup=false;return}eventModifiers=__webpack_require__(6244);self.handleKey(character,eventModifiers(e),e)}},6243:function(module,exports,__webpack_require__){"use strict";module.exports={106:"*",107:"plus",109:"minus",110:".",111:"/",186:";",187:"=",188:",",189:"-",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:"'"}},6244:function(module,exports,__webpack_require__){"use strict";module.exports=function(e){var modifiers=[];e.shiftKey&&modifiers.push("shift");e.altKey&&modifiers.push("alt");e.ctrlKey&&modifiers.push("ctrl");e.metaKey&&modifiers.push("meta");return modifiers}},6245:function(module,exports,__webpack_require__){"use strict";module.exports=function(combination,callback,action,sequenceName,level){var self=this;self.directMap[combination+":"+action]=callback;combination=combination.replace(/\s+/g," ");var sequence=combination.split(" ");var info;if(sequence.length>1){self.bindSequence(combination,sequence,callback,action);return}info=self.getKeyInfo(combination,action);self.callbacks[info.key]=self.callbacks[info.key]||[];self.getMatches(info.key,info.modifiers,{type:info.action},sequenceName,combination,level);self.callbacks[info.key][sequenceName?"unshift":"push"]({callback:callback,modifiers:info.modifiers,action:info.action,seq:sequenceName,level:level,combo:combination})}},6246:function(module,exports,__webpack_require__){"use strict";module.exports=function(combination,action){var self=this;var keysFromString;var keys;var key;var j;var modifiers=[];var SPECIAL_ALIASES;var SHIFT_MAP;var isModifier;keysFromString=__webpack_require__(6247);keys=keysFromString(combination);SPECIAL_ALIASES=__webpack_require__(6248);SHIFT_MAP=__webpack_require__(6249);isModifier=__webpack_require__(1180);for(j=0;j<keys.length;++j){key=keys[j];SPECIAL_ALIASES[key]&&(key=SPECIAL_ALIASES[key]);if(action&&"keypress"!==action&&SHIFT_MAP[key]){key=SHIFT_MAP[key];modifiers.push("shift")}isModifier(key)&&modifiers.push(key)}action=self.pickBestAction(key,modifiers,action);return{key:key,modifiers:modifiers,action:action}}},6247:function(module,exports,__webpack_require__){"use strict";module.exports=function(combination){if("+"===combination)return["+"];return combination.split("+")}},6248:function(module,exports,__webpack_require__){"use strict";module.exports={option:"alt",command:"meta",return:"enter",escape:"esc",mod:/Mac|iPod|iPhone|iPad/.test(navigator.platform)?"meta":"ctrl"}},6249:function(module,exports,__webpack_require__){"use strict";module.exports={"~":"`","!":"1","@":"2","#":"3",$:"4","%":"5","^":"6","&":"7","*":"8","(":"9",")":"0",_:"-","+":"=",":":";",'"':"'","<":",",">":".","?":"/","|":"\\"}},6250:function(module,exports,__webpack_require__){"use strict";module.exports=function(key,modifiers,action){var self=this;action||(action=self.getReverseMap()[key]?"keydown":"keypress");"keypress"===action&&modifiers.length&&(action="keydown");return action}},6251:function(module,exports,__webpack_require__){"use strict";module.exports=function(){var self=this;var constructor=self.constructor;var SPECIAL_KEYS_MAP;if(!constructor.REVERSE_MAP){constructor.REVERSE_MAP={};SPECIAL_KEYS_MAP=__webpack_require__(2088);for(var key in SPECIAL_KEYS_MAP){if(key>95&&key<112)continue;SPECIAL_KEYS_MAP.hasOwnProperty(key)&&(constructor.REVERSE_MAP[SPECIAL_KEYS_MAP[key]]=key)}}return constructor.REVERSE_MAP}},6252:function(module,exports,__webpack_require__){"use strict";module.exports=function(character,modifiers,e,sequenceName,combination,level){var self=this;var j;var callback;var matches=[];var action=e.type;var isModifier;var modifiersMatch;if("keypress"===action&&!(e.code&&"Arrow"===e.code.slice(0,5))){var anyCharCallbacks=self.callbacks["any-character"]||[];anyCharCallbacks.forEach(function(callback){matches.push(callback)})}if(!self.callbacks[character])return matches;isModifier=__webpack_require__(1180);"keyup"===action&&isModifier(character)&&(modifiers=[character]);for(j=0;j<self.callbacks[character].length;++j){callback=self.callbacks[character][j];if(!sequenceName&&callback.seq&&self.sequenceLevels[callback.seq]!==callback.level)continue;if(action!==callback.action)continue;modifiersMatch=__webpack_require__(6253);if("keypress"===action&&!e.metaKey&&!e.ctrlKey||modifiersMatch(modifiers,callback.modifiers)){var deleteCombo=!sequenceName&&callback.combo===combination;var deleteSequence=sequenceName&&callback.seq===sequenceName&&callback.level===level;(deleteCombo||deleteSequence)&&self.callbacks[character].splice(j,1);matches.push(callback)}}return matches}},6253:function(module,exports,__webpack_require__){"use strict";module.exports=function(modifiers1,modifiers2){return modifiers1.sort().join(",")===modifiers2.sort().join(",")}},6254:function(module,exports,__webpack_require__){"use strict";module.exports=function(doNotReset){var self=this;doNotReset=doNotReset||{};var activeSequences=false;var key;for(key in self.sequenceLevels){if(doNotReset[key]){activeSequences=true;continue}self.sequenceLevels[key]=0}activeSequences||(self.nextExpectedAction=false)}},6255:function(module,exports,__webpack_require__){"use strict";module.exports=function(callback,e,combo,sequence){var self=this;var preventDefault;var stopPropagation;if(self.stopCallback(e,e.target||e.srcElement,combo,sequence))return;if(false===callback(e,combo)){preventDefault=__webpack_require__(6256);preventDefault(e);stopPropagation=__webpack_require__(6257);stopPropagation(e)}}},6256:function(module,exports,__webpack_require__){"use strict";module.exports=function(e){if(e.preventDefault){e.preventDefault();return}e.returnValue=false}},6257:function(module,exports,__webpack_require__){"use strict";module.exports=function(e){if(e.stopPropagation){e.stopPropagation();return}e.cancelBubble=true}},6258:function(module,exports,__webpack_require__){"use strict";module.exports=function(combo,keys,callback,action){var self=this;self.sequenceLevels[combo]=0;function increaseSequence(nextAction){return function(){self.nextExpectedAction=nextAction;++self.sequenceLevels[combo];self.resetSequenceTimer()}}function callbackAndReset(e){var characterFromEvent;self.fireCallback(callback,e,combo);if("keyup"!==action){characterFromEvent=__webpack_require__(2087);self.ignoreNextKeyup=characterFromEvent(e)}setTimeout(function(){self.resetSequences()},10)}for(var j=0;j<keys.length;++j){var isFinal=j+1===keys.length;var wrappedCallback=isFinal?callbackAndReset:increaseSequence(action||self.getKeyInfo(keys[j+1]).action);self.bindSingle(keys[j],wrappedCallback,action,combo,j)}}},6259:function(module,exports,__webpack_require__){"use strict";module.exports=function(){var self=this;clearTimeout(self.resetTimer);self.resetTimer=setTimeout(function(){self.resetSequences()},1e3)}},6260:function(module,exports,__webpack_require__){var off=__webpack_require__(2086).off;module.exports=function(){var self=this;var element=self.element;off(element,"keypress",self.eventHandler);off(element,"keydown",self.eventHandler);off(element,"keyup",self.eventHandler)}},6261:function(module,exports,__webpack_require__){"use strict";module.exports=function(){var self=this;self.instances.forEach(function(combokeys){combokeys.reset()})}},6262:function(module,exports,__webpack_require__){false;module.exports=__webpack_require__(6263)()},6263:function(module,exports,__webpack_require__){"use strict";var emptyFunction=__webpack_require__(36);var invariant=__webpack_require__(55);var ReactPropTypesSecret=__webpack_require__(6264);module.exports=function(){function shim(props,propName,componentName,location,propFullName,secret){if(secret===ReactPropTypesSecret)return;invariant(false,"Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types")}shim.isRequired=shim;function getShim(){return shim}var ReactPropTypes={array:shim,bool:shim,func:shim,number:shim,object:shim,string:shim,symbol:shim,any:shim,arrayOf:getShim,element:shim,instanceOf:getShim,node:shim,objectOf:getShim,oneOf:getShim,oneOfType:getShim,shape:getShim,exact:getShim};ReactPropTypes.checkPropTypes=emptyFunction;ReactPropTypes.PropTypes=ReactPropTypes;return ReactPropTypes}},6264:function(module,exports,__webpack_require__){"use strict";var ReactPropTypesSecret="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED";module.exports=ReactPropTypesSecret},6265:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.withEventHandlers=void 0;var _recompose=__webpack_require__(24);var ancestorElement=function ancestorElement(element){if(!element)return element;do{if(element.classList&&element.classList.contains("canvasPage"))return element}while(element=element.parentElement||element.parentNode)};var localMousePosition=function localMousePosition(box,clientX,clientY){return{x:clientX-box.left,y:clientY-box.top}};var _resetHandler=function _resetHandler(){window.onmousemove=null;window.onmouseup=null};var setupHandler=function setupHandler(commit,target){var canvasPage=ancestorElement(target);if(!canvasPage)return;var canvasOrigin=canvasPage.getBoundingClientRect();window.onmousemove=function(_ref){var clientX=_ref.clientX,clientY=_ref.clientY,altKey=_ref.altKey,metaKey=_ref.metaKey,shiftKey=_ref.shiftKey,ctrlKey=_ref.ctrlKey;var _localMousePosition=localMousePosition(canvasOrigin,clientX,clientY),x=_localMousePosition.x,y=_localMousePosition.y;commit("cursorPosition",{x:x,y:y,altKey:altKey,metaKey:metaKey,shiftKey:shiftKey,ctrlKey:ctrlKey})};window.onmouseup=function(e){e.stopPropagation();var clientX=e.clientX,clientY=e.clientY,altKey=e.altKey,metaKey=e.metaKey,shiftKey=e.shiftKey,ctrlKey=e.ctrlKey;var _localMousePosition2=localMousePosition(canvasOrigin,clientX,clientY),x=_localMousePosition2.x,y=_localMousePosition2.y;commit("mouseEvent",{event:"mouseUp",x:x,y:y,altKey:altKey,metaKey:metaKey,shiftKey:shiftKey,ctrlKey:ctrlKey});_resetHandler()}};var handleMouseMove=function handleMouseMove(commit,_ref2,isEditable){var target=_ref2.target,clientX=_ref2.clientX,clientY=_ref2.clientY,altKey=_ref2.altKey,metaKey=_ref2.metaKey,shiftKey=_ref2.shiftKey,ctrlKey=_ref2.ctrlKey;if(!window.onmousemove&&isEditable){var _localMousePosition3=localMousePosition(target,clientX,clientY),x=_localMousePosition3.x,y=_localMousePosition3.y;setupHandler(commit,target);commit("cursorPosition",{x:x,y:y,altKey:altKey,metaKey:metaKey,shiftKey:shiftKey,ctrlKey:ctrlKey})}};var handleMouseDown=function handleMouseDown(commit,e,isEditable){e.stopPropagation();var target=e.target,clientX=e.clientX,clientY=e.clientY,button=e.button,altKey=e.altKey,metaKey=e.metaKey,shiftKey=e.shiftKey,ctrlKey=e.ctrlKey;if(0!==button||!isEditable){_resetHandler();return}var ancestor=ancestorElement(target);if(!ancestor)return;var _localMousePosition4=localMousePosition(ancestor,clientX,clientY),x=_localMousePosition4.x,y=_localMousePosition4.y;setupHandler(commit,ancestor);commit("mouseEvent",{event:"mouseDown",x:x,y:y,altKey:altKey,metaKey:metaKey,shiftKey:shiftKey,ctrlKey:ctrlKey})};var keyCode=function keyCode(key){return"Meta"===key?"MetaLeft":"Key"+key.toUpperCase()};var isNotTextInput=function isNotTextInput(_ref3){var tagName=_ref3.tagName,type=_ref3.type;var nonTextInputs=["button","checkbox","color","file","image","radio","range","reset","submit"];switch(tagName.toLowerCase()){case"input":return nonTextInputs.includes(type);case"textarea":return false;default:return true}};var modifierKey=function modifierKey(key){return["KeyALT","KeyCONTROL"].indexOf(keyCode(key))>-1};var handleKeyDown=function handleKeyDown(commit,e,isEditable,remove){var key=e.key,target=e.target;if(isEditable)if(!isNotTextInput(target)||"Backspace"!==key&&"Delete"!==key)modifierKey(key)||commit("keyboardEvent",{event:"keyDown",code:keyCode(key)});else{e.preventDefault();remove()}};var handleKeyUp=function handleKeyUp(commit,_ref4,isEditable){var key=_ref4.key;isEditable&&!modifierKey(key)&&commit("keyboardEvent",{event:"keyUp",code:keyCode(key)})};exports.withEventHandlers=(0,_recompose.withHandlers)({onMouseDown:function onMouseDown(props){return function(e){return handleMouseDown(props.commit,e,props.isEditable)}},onMouseMove:function onMouseMove(props){return function(e){return handleMouseMove(props.commit,e,props.isEditable)}},onKeyDown:function onKeyDown(props){return function(e){return handleKeyDown(props.commit,e,props.isEditable,props.remove)}},onKeyUp:function onKeyUp(props){return function(e){return handleKeyUp(props.commit,e,props.isEditable)}},resetHandler:function resetHandler(){return function(){return _resetHandler()}}})},6266:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.WorkpadPage=void 0;var _extends=Object.assign||function(target){for(var i=1;i<arguments.length;i++){var source=arguments[i];for(var key in source)Object.prototype.hasOwnProperty.call(source,key)&&(target[key]=source[key])}return target};var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;"value"in descriptor&&(descriptor.writable=true);Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){protoProps&&defineProperties(Constructor.prototype,protoProps);staticProps&&defineProperties(Constructor,staticProps);return Constructor}}();var _react=__webpack_require__(0);var _react2=_interopRequireDefault(_react);var _propTypes=__webpack_require__(4);var _propTypes2=_interopRequireDefault(_propTypes);var _element_wrapper=__webpack_require__(6267);var _alignment_guide=__webpack_require__(6282);var _hover_annotation=__webpack_require__(6284);var _rotation_handle=__webpack_require__(6286);var _border_connection=__webpack_require__(6288);var _border_resize_handle=__webpack_require__(6290);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(self,call){if(!self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!call||"object"!==typeof call&&"function"!==typeof call?self:call}function _inherits(subClass,superClass){if("function"!==typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function, not "+typeof superClass);subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:false,writable:true,configurable:true}});superClass&&(Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass)}var WorkpadPage=exports.WorkpadPage=function(_PureComponent){_inherits(WorkpadPage,_PureComponent);function WorkpadPage(){_classCallCheck(this,WorkpadPage);return _possibleConstructorReturn(this,(WorkpadPage.__proto__||Object.getPrototypeOf(WorkpadPage)).apply(this,arguments))}_createClass(WorkpadPage,[{key:"componentWillUnmount",value:function componentWillUnmount(){this.props.resetHandler()}},{key:"render",value:function render(){var _props=this.props,page=_props.page,className=_props.className,animationStyle=_props.animationStyle,elements=_props.elements,_props$cursor=_props.cursor,cursor=void 0===_props$cursor?"auto":_props$cursor,height=_props.height,width=_props.width,isEditable=_props.isEditable,onDoubleClick=_props.onDoubleClick,onKeyDown=_props.onKeyDown,onKeyUp=_props.onKeyUp,onMouseDown=_props.onMouseDown,onMouseMove=_props.onMouseMove,onMouseUp=_props.onMouseUp,onAnimationEnd=_props.onAnimationEnd;return _react2.default.createElement("div",{key:page.id,id:page.id,"data-test-subj":"canvasWorkpadPage",className:"canvasPage "+className+" "+(isEditable?"canvasPage--isEditable":""),"data-shared-items-container":true,style:_extends({},page.style,animationStyle,{height:height,width:width,cursor:cursor}),onMouseMove:onMouseMove,onMouseUp:onMouseUp,onMouseDown:onMouseDown,onKeyDown:onKeyDown,onKeyUp:onKeyUp,onDoubleClick:onDoubleClick,onAnimationEnd:onAnimationEnd,tabIndex:0},elements.map(function(element){if("annotation"===element.type){if(!isEditable)return;var props={key:element.id,type:element.type,transformMatrix:element.transformMatrix,width:element.width,height:element.height};switch(element.subtype){case"alignmentGuide":return _react2.default.createElement(_alignment_guide.AlignmentGuide,props);case"hoverAnnotation":return _react2.default.createElement(_hover_annotation.HoverAnnotation,props);case"rotationHandle":return _react2.default.createElement(_rotation_handle.RotationHandle,props);case"resizeHandle":return _react2.default.createElement(_border_resize_handle.BorderResizeHandle,props);case"resizeConnector":return _react2.default.createElement(_border_connection.BorderConnection,props);default:return[]}}else if("adHocGroup"!==element.subtype)return _react2.default.createElement(_element_wrapper.ElementWrapper,{key:element.id,element:element})}).filter(function(element){return!!element}))}}]);return WorkpadPage}(_react.PureComponent);WorkpadPage.propTypes={page:_propTypes2.default.shape({id:_propTypes2.default.string.isRequired,style:_propTypes2.default.object}).isRequired,className:_propTypes2.default.string.isRequired,animationStyle:_propTypes2.default.object.isRequired,elements:_propTypes2.default.arrayOf(_propTypes2.default.shape({id:_propTypes2.default.string.isRequired,transformMatrix:_propTypes2.default.arrayOf(_propTypes2.default.number).isRequired,width:_propTypes2.default.number.isRequired,height:_propTypes2.default.number.isRequired,type:_propTypes2.default.string})).isRequired,cursor:_propTypes2.default.string,height:_propTypes2.default.number.isRequired,width:_propTypes2.default.number.isRequired,isEditable:_propTypes2.default.bool.isRequired,onDoubleClick:_propTypes2.default.func,onKeyDown:_propTypes2.default.func,onKeyUp:_propTypes2.default.func,onMouseDown:_propTypes2.default.func,onMouseMove:_propTypes2.default.func,onMouseUp:_propTypes2.default.func,onAnimationEnd:_propTypes2.default.func,resetHandler:_propTypes2.default.func}},6267:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.ElementWrapper=void 0;var _extends=Object.assign||function(target){for(var i=1;i<arguments.length;i++){var source=arguments[i];for(var key in source)Object.prototype.hasOwnProperty.call(source,key)&&(target[key]=source[key])}return target};var _propTypes=__webpack_require__(4);var _propTypes2=_interopRequireDefault(_propTypes);var _reactRedux=__webpack_require__(19);var _workpad=__webpack_require__(54);var _resolved_arg=__webpack_require__(2037);var _element_wrapper=__webpack_require__(6268);var _handlers=__webpack_require__(6281);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var mapStateToProps=function mapStateToProps(state,_ref){var element=_ref.element;return{isWriteable:(0,_workpad.isWriteable)(state),resolvedArg:(0,_workpad.getResolvedArgs)(state,element.id,"expressionRenderable"),selectedPage:(0,_workpad.getSelectedPage)(state)}};var mapDispatchToProps=function mapDispatchToProps(dispatch,_ref2){var element=_ref2.element;return{createHandlers:function createHandlers(pageId){return function(){return(0,_handlers.createHandlers)(element,pageId,dispatch)}}}};var mergeProps=function mergeProps(stateProps,dispatchProps,ownProps){var resolvedArg=stateProps.resolvedArg,selectedPage=stateProps.selectedPage;var element=ownProps.element,restProps=ownProps.restProps;var id=element.id,transformMatrix=element.transformMatrix,width=element.width,height=element.height;return _extends({},restProps,{id:id,transformMatrix:transformMatrix,width:width,height:height,state:(0,_resolved_arg.getState)(resolvedArg),error:(0,_resolved_arg.getError)(resolvedArg),renderable:(0,_resolved_arg.getValue)(resolvedArg),createHandlers:dispatchProps.createHandlers(selectedPage)})};var ElementWrapper=exports.ElementWrapper=(0,_reactRedux.connect)(mapStateToProps,mapDispatchToProps,mergeProps)(_element_wrapper.ElementWrapper);ElementWrapper.propTypes={element:_propTypes2.default.shape({id:_propTypes2.default.string.isRequired,transformMatrix:_propTypes2.default.arrayOf(_propTypes2.default.number).isRequired,width:_propTypes2.default.number.isRequired,height:_propTypes2.default.number.isRequired}).isRequired}},6268:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.ElementWrapper=void 0;var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;"value"in descriptor&&(descriptor.writable=true);Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){protoProps&&defineProperties(Constructor.prototype,protoProps);staticProps&&defineProperties(Constructor,staticProps);return Constructor}}();var _react=__webpack_require__(0);var _react2=_interopRequireDefault(_react);var _propTypes=__webpack_require__(4);var _propTypes2=_interopRequireDefault(_propTypes);var _positionable=__webpack_require__(6269);var _element_content=__webpack_require__(6271);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(self,call){if(!self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!call||"object"!==typeof call&&"function"!==typeof call?self:call}function _inherits(subClass,superClass){if("function"!==typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function, not "+typeof superClass);subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:false,writable:true,configurable:true}});superClass&&(Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass)}var ElementWrapper=exports.ElementWrapper=function(_React$PureComponent){_inherits(ElementWrapper,_React$PureComponent);function ElementWrapper(){var _ref;var _temp,_this,_ret;_classCallCheck(this,ElementWrapper);for(var _len=arguments.length,args=Array(_len),_key=0;_key<_len;_key++)args[_key]=arguments[_key];return _ret=(_temp=(_this=_possibleConstructorReturn(this,(_ref=ElementWrapper.__proto__||Object.getPrototypeOf(ElementWrapper)).call.apply(_ref,[this].concat(args))),_this),_this.state={handlers:null},_temp),_possibleConstructorReturn(_this,_ret)}_createClass(ElementWrapper,[{key:"componentDidMount",value:function componentDidMount(){var createHandlers=this.props.createHandlers;this.setState({handlers:createHandlers()})}},{key:"render",value:function render(){if(!this.state.handlers)return null;var _props=this.props,renderable=_props.renderable,transformMatrix=_props.transformMatrix,width=_props.width,height=_props.height,state=_props.state;return _react2.default.createElement(_positionable.Positionable,{transformMatrix:transformMatrix,width:width,height:height},_react2.default.createElement(_element_content.ElementContent,{renderable:renderable,state:state,handlers:this.state.handlers}))}}]);return ElementWrapper}(_react2.default.PureComponent);ElementWrapper.propTypes={renderable:_propTypes2.default.object,transformMatrix:_propTypes2.default.arrayOf(_propTypes2.default.number).isRequired,width:_propTypes2.default.number.isRequired,height:_propTypes2.default.number.isRequired,state:_propTypes2.default.string,createHandlers:_propTypes2.default.func.isRequired}},6269:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.Positionable=void 0;var _recompose=__webpack_require__(24);var _positionable=__webpack_require__(6270);exports.Positionable=(0,_recompose.pure)(_positionable.Positionable)},6270:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.Positionable=void 0;var _react=__webpack_require__(0);var _react2=_interopRequireDefault(_react);var _propTypes=__webpack_require__(4);var _propTypes2=_interopRequireDefault(_propTypes);var _aeroelastic=__webpack_require__(440);var _aeroelastic2=_interopRequireDefault(_aeroelastic);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var Positionable=exports.Positionable=function Positionable(_ref){var children=_ref.children,transformMatrix=_ref.transformMatrix,width=_ref.width,height=_ref.height;_react2.default.Children.only(children);var wrappedChildren=_react2.default.Children.map(children,function(child){var newStyle={width:width,height:height,marginLeft:-width/2,marginTop:-height/2,position:"absolute",transform:_aeroelastic2.default.dom.matrixToCSS(transformMatrix.map(function(n,i){return i<12?n:Math.round(n)}))};var stepChild=_react2.default.cloneElement(child,{size:{width:width,height:height}});return _react2.default.createElement("div",{className:"canvasPositionable canvasInteractable",style:newStyle},stepChild)});return wrappedChildren};Positionable.propTypes={onChange:_propTypes2.default.func,children:_propTypes2.default.element.isRequired,transformMatrix:_propTypes2.default.arrayOf(_propTypes2.default.number).isRequired,width:_propTypes2.default.number.isRequired,height:_propTypes2.default.number.isRequired}},6271:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.ElementContent=void 0;var _propTypes=__webpack_require__(4);var _propTypes2=_interopRequireDefault(_propTypes);var _reactRedux=__webpack_require__(19);var _recompose=__webpack_require__(24);var _lodash=__webpack_require__(1);var _render_functions_registry=__webpack_require__(2066);var _workpad=__webpack_require__(54);var _element_content=__webpack_require__(6272);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var mapStateToProps=function mapStateToProps(state){return{backgroundColor:(0,_workpad.getPageById)(state,(0,_workpad.getSelectedPage)(state)).style.background}};var ElementContent=exports.ElementContent=(0,_recompose.compose)((0,_reactRedux.connect)(mapStateToProps),(0,_recompose.withProps)(function(_ref){var renderable=_ref.renderable;return{renderFunction:_render_functions_registry.renderFunctionsRegistry.get((0,_lodash.get)(renderable,"as"))}}))(_element_content.ElementContent);ElementContent.propTypes={renderable:_propTypes2.default.shape({as:_propTypes2.default.string})}},6272:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.ElementContent=void 0;var _extends=Object.assign||function(target){for(var i=1;i<arguments.length;i++){var source=arguments[i];for(var key in source)Object.prototype.hasOwnProperty.call(source,key)&&(target[key]=source[key])}return target};var _react=__webpack_require__(0);var _react2=_interopRequireDefault(_react);var _propTypes=__webpack_require__(4);var _propTypes2=_interopRequireDefault(_propTypes);var _recompose=__webpack_require__(24);var _styleIt=__webpack_require__(6273);var _styleIt2=_interopRequireDefault(_styleIt);var _get_type=__webpack_require__(386);var _loading=__webpack_require__(811);var _render_with_fn=__webpack_require__(6274);var _element_share_container=__webpack_require__(6277);var _invalid_expression=__webpack_require__(6279);var _invalid_element_type=__webpack_require__(6280);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var branches=[(0,_recompose.branch)(function(_ref){var renderable=_ref.renderable,state=_ref.state;return!state||!renderable},(0,_recompose.renderComponent)(function(_ref2){var backgroundColor=_ref2.backgroundColor;return _react2.default.createElement(_loading.Loading,{backgroundColor:backgroundColor})})),(0,_recompose.branch)(function(_ref3){var renderable=_ref3.renderable,renderFunction=_ref3.renderFunction;return renderable&&"render"!==(0,_get_type.getType)(renderable)&&!renderFunction},(0,_recompose.renderComponent)(_invalid_element_type.InvalidElementType)),(0,_recompose.branch)(function(_ref4){var renderable=_ref4.renderable,renderFunction=_ref4.renderFunction,state=_ref4.state;return"error"===state||"render"!==(0,_get_type.getType)(renderable)||!renderFunction},(0,_recompose.renderComponent)(_invalid_expression.InvalidExpression))];var ElementContent=exports.ElementContent=_recompose.compose.apply(void 0,[_recompose.pure].concat(branches))(function(_ref5){var renderable=_ref5.renderable,renderFunction=_ref5.renderFunction,size=_ref5.size,handlers=_ref5.handlers;var getFilter=handlers.getFilter,setFilter=handlers.setFilter,done=handlers.done,onComplete=handlers.onComplete;return _styleIt2.default.it(renderable.css,_react2.default.createElement("div",{className:"canvas__element canvasElement",style:_extends({},renderable.containerStyle,size),"data-test-subj":"canvasWorkpadPageElementContent"},_react2.default.createElement(_element_share_container.ElementShareContainer,{className:"canvasElement__content",onComplete:onComplete,functionName:renderFunction.name},_react2.default.createElement(_render_with_fn.RenderWithFn,{name:renderFunction.name,renderFn:renderFunction.render,reuseNode:renderFunction.reuseDomNode,config:renderable.value,css:renderable.css,size:size,handlers:{getFilter:getFilter,setFilter:setFilter,done:done}}))))});ElementContent.propTypes={renderable:_propTypes2.default.shape({css:_propTypes2.default.string,value:_propTypes2.default.object}),renderFunction:_propTypes2.default.shape({name:_propTypes2.default.string,render:_propTypes2.default.func,reuseDomNode:_propTypes2.default.bool}),size:_propTypes2.default.object,handlers:_propTypes2.default.shape({setFilter:_propTypes2.default.func.isRequired,getFilter:_propTypes2.default.func.isRequired,done:_propTypes2.default.func.isRequired,onComplete:_propTypes2.default.func.isRequired}).isRequired,state:_propTypes2.default.string,backgroundColor:_propTypes2.default.string}},6273:function(module,exports,__webpack_require__){(function webpackUniversalModuleDefinition(root,factory){true;module.exports=factory(__webpack_require__(0))})(0,function(__WEBPACK_EXTERNAL_MODULE_2__){return function(modules){var installedModules={};function __webpack_require__(moduleId){if(installedModules[moduleId])return installedModules[moduleId].exports;var module=installedModules[moduleId]={exports:{},id:moduleId,loaded:false};modules[moduleId].call(module.exports,module,module.exports,__webpack_require__);module.loaded=true;return module.exports}__webpack_require__.m=modules;__webpack_require__.c=installedModules;__webpack_require__.p="";return __webpack_require__(0)}([function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var _extends=Object.assign||function(target){for(var i=1;i<arguments.length;i++){var source=arguments[i];for(var key in source)Object.prototype.hasOwnProperty.call(source,key)&&(target[key]=source[key])}return target};var _typeof="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(obj){return typeof obj}:function(obj){return obj&&"function"===typeof Symbol&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj};var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;"value"in descriptor&&(descriptor.writable=true);Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){protoProps&&defineProperties(Constructor.prototype,protoProps);staticProps&&defineProperties(Constructor,staticProps);return Constructor}}();var _react=__webpack_require__(2);var _react2=_interopRequireDefault(_react);var _reactLibAdler=__webpack_require__(1);var _reactLibAdler2=_interopRequireDefault(_reactLibAdler);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(self,call){if(!self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!call||"object"!==typeof call&&"function"!==typeof call?self:call}function _inherits(subClass,superClass){if("function"!==typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function, not "+typeof superClass);subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:false,writable:true,configurable:true}});superClass&&(Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass)}var __DEV__=false;var Style=function(_Component){_inherits(Style,_Component);function Style(props){_classCallCheck(this,Style);var _this=_possibleConstructorReturn(this,(Style.__proto__||Object.getPrototypeOf(Style)).call(this,props));_this.getStyleString=function(){if(_this.props.children instanceof Array){var styleString=_this.props.children.filter(function(child){return!(0,_react.isValidElement)(child)&&"string"===typeof child});if(styleString.length>1)throw new Error("Multiple style objects as direct descedents of a Style component are not supported ("+styleString.length+" style objects detected): \n\n"+styleString[0]);return styleString[0]}return"string"!==typeof _this.props.children||(0,_react.isValidElement)(_this.props.children)?null:_this.props.children};_this.getRootElement=function(){if(_this.props.children instanceof Array){var rootElement=_this.props.children.filter(function(child){return(0,_react.isValidElement)(child)});if(__DEV__){if(rootElement.length>1){console.log(rootElement);throw new Error("Adjacent JSX elements must be wrapped in an enclosing tag ("+rootElement.length+" root elements detected).")}if("undefined"!==typeof rootElement[0]&&_this.isVoidElement(rootElement[0].type))throw new Error("Self-closing void elements like "+rootElement.type+" must be wrapped in an enclosing tag. Reactive Style must be able to nest a style element inside of the root element and void element content models never allowit to have contents under any circumstances.")}return rootElement[0]}return(0,_react.isValidElement)(_this.props.children)?_this.props.children:null};_this.getRootSelectors=function(rootElement){var rootSelectors=[];rootElement.props.id&&rootSelectors.push("#"+rootElement.props.id);rootElement.props.className&&rootElement.props.className.trim().split(/\s+/g).forEach(function(className){return rootSelectors.push(className)});rootSelectors.length||"function"===typeof rootElement.type||rootSelectors.push(rootElement.type);return rootSelectors};_this.processCSSText=function(styleString,scopeClassName,rootSelectors){return styleString.replace(/\s*\/\/(?![^\(]*\)).*|\s*\/\*.*\*\//g,"").replace(/\s\s+/g," ").split("}").map(function(fragment){var isDeclarationBodyPattern=/.*:.*;/g;var isAtRulePattern=/\s*@/g;var isKeyframeOffsetPattern=/\s*(([0-9][0-9]?|100)\s*%)|\s*(to|from)\s*$/g;return fragment.split("{").map(function(statement){if(!statement.trim().length)return;if(statement.match(isDeclarationBodyPattern))return _this.escapeTextContentForBrowser(statement.replace(/lsquo|rsquo/g,"").replace(/content\s*:\s*['"](.*)['"]\s*;/,"content: lsquo;$1rsquo;;").replace(/['"]/g,"")).replace(/lsquo;|rsquo;/g,"'").replace(/$/g,"\n");var selector=statement;return scopeClassName&&!/:target/gi.test(selector)?selector.match(isAtRulePattern)||selector.match(isKeyframeOffsetPattern)?selector:_this.scopeSelector(scopeClassName,selector,rootSelectors):selector}).join("{\n")}).join("}\n")};_this.escaper=function(match){var ESCAPE_LOOKUP={">":"&gt;","<":"&lt;",'"':"&quot;","'":"&#x27;"};return ESCAPE_LOOKUP[match]};_this.escapeTextContentForBrowser=function(text){var ESCAPE_REGEX=/[><"']/g;return(""+text).replace(ESCAPE_REGEX,_this.escaper)};_this.scopeSelector=function(scopeClassName,selector,rootSelectors){var scopedSelector=[];var groupOfSelectorsPattern=/,(?![^\(|\[]*\)|\])/g;var selectors=selector.split(groupOfSelectorsPattern);for(var i=0;i<selectors.length;i++){var containsSelector=void 0;var unionSelector=void 0;if(rootSelectors.length&&rootSelectors.some(function(rootSelector){return selector.match(rootSelector)})){unionSelector=selectors[i];var escapedRootSelectors=rootSelectors.map(function(rootSelector){return rootSelector.replace(/[-\/\\^$*+?.()|[\]{}]/g,"\\$&")});unionSelector=unionSelector.replace(new RegExp("("+escapedRootSelectors.join("|")+")"),"$1"+scopeClassName);containsSelector=scopeClassName+" "+selectors[i];scopedSelector.push(unionSelector,containsSelector)}else{containsSelector=scopeClassName+" "+selectors[i];scopedSelector.push(containsSelector)}}return scopedSelector.join(", ")};_this.getScopeClassName=function(styleString,rootElement){var hash=styleString;if(rootElement){_this.pepper="";_this.traverseObjectToGeneratePepper(rootElement);hash+=_this.pepper}return(__DEV__?"_scope-":"_")+(0,_reactLibAdler2.default)(hash)};_this.traverseObjectToGeneratePepper=function(obj){var depth=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;if(depth>32||_this.pepper.length>1e4)return;for(var prop in obj){var isPropReactInternal=/^[_\$]|type|ref|^value$/.test(prop);!obj[prop]||"object"!==_typeof(obj[prop])||isPropReactInternal?!obj[prop]||isPropReactInternal||"function"===typeof obj[prop]||(_this.pepper+=obj[prop]):_this.traverseObjectToGeneratePepper(obj[prop],depth+1)}};_this.isVoidElement=function(type){return["area","base","br","col","command","embed","hr","img","input","keygen","link","meta","param","source","track","wbr"].some(function(voidType){return type===voidType})};_this.addCSSTextToHead=function(cssText){if(!cssText.length)return;var cssTextHash=(0,_reactLibAdler2.default)(cssText);if(!window._reactiveStyle.cssTextHashesAddedToHead.some(function(hash){return hash===cssTextHash})){window._reactiveStyle.el.innerHTML+=cssText;window._reactiveStyle.cssTextHashesAddedToHead.push(cssTextHash)}};_this.createStyleElement=function(cssText,scopeClassName){return _react2.default.createElement("style",{type:"text/css",key:scopeClassName,ref:function ref(c){return _this._style=c},dangerouslySetInnerHTML:{__html:cssText||""}})};_this.getNewChildrenForCloneElement=function(cssText,rootElement,scopeClassName){return[_this.createStyleElement(cssText,scopeClassName)].concat(rootElement.props.children)};_this.scopeClassNameCache={};_this.scopedCSSTextCache={};return _this}_createClass(Style,[{key:"render",value:function render(){if(!this.props.children)return this.createStyleElement();var styleString=this.getStyleString();var rootElement=this.getRootElement();if(!styleString&&rootElement)return rootElement.props.children;if(styleString&&!rootElement)return this.createStyleElement(this.processCSSText(styleString),this.getScopeClassName(styleString,rootElement));var rootElementClassNames=rootElement.props.className?rootElement.props.className+" ":"";var rootElementId=rootElement.props.id?rootElement.props.id:"";var scopeClassName=void 0;var scopedCSSText=void 0;var scopeClassNameAddress=rootElementClassNames+rootElementId+styleString;if(this.scopeClassNameCache[scopeClassNameAddress]){scopeClassName=this.scopeClassNameCache[scopeClassNameAddress];scopedCSSText=this.scopedCSSTextCache[scopeClassName]}else{scopeClassName=this.getScopeClassName(styleString,rootElement);scopedCSSText=this.processCSSText(styleString,"."+scopeClassName,this.getRootSelectors(rootElement));this.scopeClassNameCache[scopeClassNameAddress]=scopeClassName;this.scopedCSSTextCache[scopeClassName]=scopedCSSText}return(0,_react.cloneElement)(rootElement,_extends({},rootElement.props,{className:""+rootElementClassNames+scopeClassName}),this.getNewChildrenForCloneElement(scopedCSSText,rootElement,scopeClassName))}}]);return Style}(_react.Component);Style.it=function(cssText,rootElement){return _react2.default.createElement(Style,null,cssText,rootElement)};exports.default=Style},function(module,exports){"use strict";var MOD=65521;function adler32(data){var a=1;var b=0;var i=0;var l=data.length;var m=-4&l;while(i<m){var n=Math.min(i+4096,m);for(;i<n;i+=4)b+=(a+=data.charCodeAt(i))+(a+=data.charCodeAt(i+1))+(a+=data.charCodeAt(i+2))+(a+=data.charCodeAt(i+3));a%=MOD;b%=MOD}for(;i<l;i++)b+=a+=data.charCodeAt(i);a%=MOD;b%=MOD;return a|b<<16}module.exports=adler32},function(module,exports){module.exports=__WEBPACK_EXTERNAL_MODULE_2__}])})},6274:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.RenderWithFn=void 0;var _recompose=__webpack_require__(24);var _propTypes=__webpack_require__(4);var _propTypes2=_interopRequireDefault(_propTypes);var _notify=__webpack_require__(293);var _render_with_fn=__webpack_require__(6275);var _handlers=__webpack_require__(6276);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var RenderWithFn=exports.RenderWithFn=(0,_recompose.compose)((0,_recompose.withPropsOnChange)(function(){return false},function(){return{elementHandlers:new _handlers.ElementHandlers}}),(0,_recompose.withProps)(function(_ref){var handlers=_ref.handlers,elementHandlers=_ref.elementHandlers;return{handlers:Object.assign(elementHandlers,handlers),onError:_notify.notify.error}}))(_render_with_fn.RenderWithFn);RenderWithFn.propTypes={handlers:_propTypes2.default.object,elementHandlers:_propTypes2.default.object}},6275:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.RenderWithFn=void 0;var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;"value"in descriptor&&(descriptor.writable=true);Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){protoProps&&defineProperties(Constructor.prototype,protoProps);staticProps&&defineProperties(Constructor,staticProps);return Constructor}}();var _react=__webpack_require__(0);var _react2=_interopRequireDefault(_react);var _propTypes=__webpack_require__(4);var _propTypes2=_interopRequireDefault(_propTypes);var _lodash=__webpack_require__(1);var _render_to_dom=__webpack_require__(1170);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(self,call){if(!self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!call||"object"!==typeof call&&"function"!==typeof call?self:call}function _inherits(subClass,superClass){if("function"!==typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function, not "+typeof superClass);subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:false,writable:true,configurable:true}});superClass&&(Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass)}var RenderWithFn=exports.RenderWithFn=function(_React$Component){_inherits(RenderWithFn,_React$Component);function RenderWithFn(){var _ref;var _temp,_this,_ret;_classCallCheck(this,RenderWithFn);for(var _len=arguments.length,args=Array(_len),_key=0;_key<_len;_key++)args[_key]=arguments[_key];return _ret=(_temp=(_this=_possibleConstructorReturn(this,(_ref=RenderWithFn.__proto__||Object.getPrototypeOf(RenderWithFn)).call.apply(_ref,[this].concat(args))),_this),_this.callRenderFn=function(){var _this$props=_this.props,handlers=_this$props.handlers,config=_this$props.config,renderFn=_this$props.renderFn,reuseNode=_this$props.reuseNode,functionName=_this$props.name;reuseNode&&_this.renderTarget||_this.resetRenderTarget(_this.domNode);var renderConfig=(0,_lodash.cloneDeep)(config);try{renderFn(_this.renderTarget,renderConfig,handlers);_this.firstRender=false}catch(err){console.error("renderFn threw",err);_this.props.onError(err,{title:"Rendering '"+(functionName||"function")+"' failed"})}},_this.resetRenderTarget=function(domNode){var handlers=_this.props.handlers;if(!domNode)throw new Error("RenderWithFn can not reset undefined target node");_this.firstRender||handlers.destroy();while(domNode.firstChild)domNode.removeChild(domNode.firstChild);_this.firstRender=true;_this.renderTarget=_this.createRenderTarget();domNode.appendChild(_this.renderTarget)},_this.createRenderTarget=function(){var div=document.createElement("div");div.style.width="100%";div.style.height="100%";return div},_this.shouldFullRerender=function(prevProps){return!(0,_lodash.isEqual)(_this.props.config,prevProps.config)||!(0,_lodash.isEqual)(_this.props.renderFn.toString(),prevProps.renderFn.toString())},_this.destroy=function(){_this.props.handlers.destroy()},_temp),_possibleConstructorReturn(_this,_ret)}_createClass(RenderWithFn,[{key:"componentDidMount",value:function componentDidMount(){this.firstRender=true;this.renderTarget=null}},{key:"componentWillReceiveProps",value:function componentWillReceiveProps(_ref2){var renderFn=_ref2.renderFn;var newRenderFunction=renderFn!==this.props.renderFn;newRenderFunction&&this.resetRenderTarget(this.domNode)}},{key:"shouldComponentUpdate",value:function shouldComponentUpdate(prevProps){return!(0,_lodash.isEqual)(this.props.size,prevProps.size)||this.shouldFullRerender(prevProps)}},{key:"componentDidUpdate",value:function componentDidUpdate(prevProps){var _props=this.props,handlers=_props.handlers,size=_props.size;this.shouldFullRerender(prevProps)&&this.callRenderFn();if(!(0,_lodash.isEqual)(size,prevProps.size))return handlers.resize(size)}},{key:"componentWillUnmount",value:function componentWillUnmount(){this.props.handlers.destroy()}},{key:"render",value:function render(){var _this2=this;return _react2.default.createElement("div",{className:"canvasWorkpad--element_render canvasRenderEl",style:{height:"100%",width:"100%"}},_react2.default.createElement(_render_to_dom.RenderToDom,{style:{height:"100%",width:"100%"},render:function render(domNode){_this2.domNode=domNode;_this2.callRenderFn()}}))}}]);return RenderWithFn}(_react2.default.Component);RenderWithFn.propTypes={name:_propTypes2.default.string.isRequired,renderFn:_propTypes2.default.func.isRequired,reuseNode:_propTypes2.default.bool,handlers:_propTypes2.default.shape({setFilter:_propTypes2.default.func.isRequired,getFilter:_propTypes2.default.func.isRequired,done:_propTypes2.default.func.isRequired,resize:_propTypes2.default.func.isRequired,onResize:_propTypes2.default.func.isRequired,destroy:_propTypes2.default.func.isRequired,onDestroy:_propTypes2.default.func.isRequired}),config:_propTypes2.default.object.isRequired,size:_propTypes2.default.object.isRequired,onError:_propTypes2.default.func.isRequired};RenderWithFn.defaultProps={reuseNode:false};RenderWithFn.domNode=null},6276:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;"value"in descriptor&&(descriptor.writable=true);Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){protoProps&&defineProperties(Constructor.prototype,protoProps);staticProps&&defineProperties(Constructor,staticProps);return Constructor}}();function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}exports.ElementHandlers=function(){function ElementHandlers(){_classCallCheck(this,ElementHandlers)}_createClass(ElementHandlers,[{key:"resize",value:function resize(){}},{key:"destroy",value:function destroy(){}},{key:"onResize",value:function onResize(fn){this.resize=fn}},{key:"onDestroy",value:function onDestroy(fn){this.destroy=fn}}]);return ElementHandlers}()},6277:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var _element_share_container=__webpack_require__(6278);Object.defineProperty(exports,"ElementShareContainer",{enumerable:true,get:function get(){return _element_share_container.ElementShareContainer}})},6278:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.ElementShareContainer=void 0;var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;"value"in descriptor&&(descriptor.writable=true);Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){protoProps&&defineProperties(Constructor.prototype,protoProps);staticProps&&defineProperties(Constructor,staticProps);return Constructor}}();var _react=__webpack_require__(0);var _react2=_interopRequireDefault(_react);var _propTypes=__webpack_require__(4);var _propTypes2=_interopRequireDefault(_propTypes);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(self,call){if(!self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!call||"object"!==typeof call&&"function"!==typeof call?self:call}function _inherits(subClass,superClass){if("function"!==typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function, not "+typeof superClass);subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:false,writable:true,configurable:true}});superClass&&(Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass)}var ElementShareContainer=exports.ElementShareContainer=function(_React$PureComponent){_inherits(ElementShareContainer,_React$PureComponent);function ElementShareContainer(){var _ref;var _temp,_this,_ret;_classCallCheck(this,ElementShareContainer);for(var _len=arguments.length,args=Array(_len),_key=0;_key<_len;_key++)args[_key]=arguments[_key];return _ret=(_temp=(_this=_possibleConstructorReturn(this,(_ref=ElementShareContainer.__proto__||Object.getPrototypeOf(ElementShareContainer)).call.apply(_ref,[this].concat(args))),_this),_this.state={renderComplete:false},_temp),_possibleConstructorReturn(_this,_ret)}_createClass(ElementShareContainer,[{key:"componentDidMount",value:function componentDidMount(){var _this2=this;var _props=this.props,functionName=_props.functionName,onComplete=_props.onComplete;var isDevelopment=false;if(isDevelopment){var timeout=15;this.timeout=setTimeout(function(){console.warn("done handler not called in render function after "+timeout+" seconds: "+functionName)},1e3*timeout)}onComplete(function(){clearTimeout(_this2.timeout);if(!_this2.sharedItemRef)return;var ev=new CustomEvent("renderComplete");_this2.sharedItemRef.dispatchEvent(ev);_this2.setState({renderComplete:true})})}},{key:"componentWillUnmount",value:function componentWillUnmount(){clearTimeout(this.timeout)}},{key:"render",value:function render(){var _this3=this;return _react2.default.createElement("div",{"data-shared-item":true,"data-render-complete":this.state.renderComplete,className:this.props.className,ref:function ref(_ref2){return _this3.sharedItemRef=_ref2}},this.props.children)}}]);return ElementShareContainer}(_react2.default.PureComponent);ElementShareContainer.propTypes={functionName:_propTypes2.default.string.isRequired,onComplete:_propTypes2.default.func.isRequired,className:_propTypes2.default.string,children:_propTypes2.default.node.isRequired}},6279:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.InvalidExpression=void 0;var _react=__webpack_require__(0);var _react2=_interopRequireDefault(_react);var _propTypes=__webpack_require__(4);var _propTypes2=_interopRequireDefault(_propTypes);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var InvalidExpression=exports.InvalidExpression=function InvalidExpression(_ref){var selectElement=_ref.selectElement;return _react2.default.createElement("h3",{onClick:selectElement},"Invalid expression")};InvalidExpression.propTypes={selectElement:_propTypes2.default.func}},6280:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.InvalidElementType=void 0;var _react=__webpack_require__(0);var _react2=_interopRequireDefault(_react);var _propTypes=__webpack_require__(4);var _propTypes2=_interopRequireDefault(_propTypes);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var InvalidElementType=exports.InvalidElementType=function InvalidElementType(_ref){var renderableType=_ref.renderableType,selectElement=_ref.selectElement;return _react2.default.createElement("h3",{onClick:selectElement},"Element not found: ",renderableType)};InvalidElementType.propTypes={renderableType:_propTypes2.default.string,selectElement:_propTypes2.default.func}},6281:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.createHandlers=createHandlers;var _elements=__webpack_require__(109);function createHandlers(element,pageId,dispatch){var isComplete=false;var completeFn=function completeFn(){};return{setFilter:function setFilter(text){dispatch((0,_elements.setFilter)(text,element.id,pageId,true))},getFilter:function getFilter(){return element.filter},onComplete:function onComplete(fn){completeFn=fn},done:function done(){if(isComplete)return;isComplete=true;completeFn()}}}},6282:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.AlignmentGuide=void 0;var _recompose=__webpack_require__(24);var _alignment_guide=__webpack_require__(6283);exports.AlignmentGuide=(0,_recompose.pure)(_alignment_guide.AlignmentGuide)},6283:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.AlignmentGuide=void 0;var _react=__webpack_require__(0);var _react2=_interopRequireDefault(_react);var _propTypes=__webpack_require__(4);var _propTypes2=_interopRequireDefault(_propTypes);var _aeroelastic=__webpack_require__(440);var _aeroelastic2=_interopRequireDefault(_aeroelastic);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var AlignmentGuide=exports.AlignmentGuide=function AlignmentGuide(_ref){var transformMatrix=_ref.transformMatrix,width=_ref.width,height=_ref.height;var newStyle={width:width,height:height,marginLeft:-width/2,marginTop:-height/2,background:"magenta",position:"absolute",transform:_aeroelastic2.default.dom.matrixToCSS(transformMatrix)};return _react2.default.createElement("div",{className:"canvasAlignmentGuide canvasInteractable canvasLayoutAnnotation",style:newStyle})};AlignmentGuide.propTypes={transformMatrix:_propTypes2.default.arrayOf(_propTypes2.default.number).isRequired,width:_propTypes2.default.number.isRequired,height:_propTypes2.default.number.isRequired}},6284:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.HoverAnnotation=void 0;var _recompose=__webpack_require__(24);var _hover_annotation=__webpack_require__(6285);exports.HoverAnnotation=(0,_recompose.pure)(_hover_annotation.HoverAnnotation)},6285:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.HoverAnnotation=void 0;var _react=__webpack_require__(0);var _react2=_interopRequireDefault(_react);var _propTypes=__webpack_require__(4);var _propTypes2=_interopRequireDefault(_propTypes);var _aeroelastic=__webpack_require__(440);var _aeroelastic2=_interopRequireDefault(_aeroelastic);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var HoverAnnotation=exports.HoverAnnotation=function HoverAnnotation(_ref){var transformMatrix=_ref.transformMatrix,width=_ref.width,height=_ref.height;var newStyle={width:width,height:height,marginLeft:-width/2,marginTop:-height/2,transform:_aeroelastic2.default.dom.matrixToCSS(transformMatrix)};return _react2.default.createElement("div",{className:"canvasHoverAnnotation canvasLayoutAnnotation",style:newStyle})};HoverAnnotation.propTypes={transformMatrix:_propTypes2.default.arrayOf(_propTypes2.default.number).isRequired,width:_propTypes2.default.number.isRequired,height:_propTypes2.default.number.isRequired}},6286:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.RotationHandle=void 0;var _recompose=__webpack_require__(24);var _rotation_handle=__webpack_require__(6287);exports.RotationHandle=(0,_recompose.pure)(_rotation_handle.RotationHandle)},6287:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.RotationHandle=void 0;var _react=__webpack_require__(0);var _react2=_interopRequireDefault(_react);var _propTypes=__webpack_require__(4);var _propTypes2=_interopRequireDefault(_propTypes);var _aeroelastic=__webpack_require__(440);var _aeroelastic2=_interopRequireDefault(_aeroelastic);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var RotationHandle=exports.RotationHandle=function RotationHandle(_ref){var transformMatrix=_ref.transformMatrix;return _react2.default.createElement("div",{className:"canvasRotationHandle canvasRotationHandle--connector canvasLayoutAnnotation",style:{transform:_aeroelastic2.default.dom.matrixToCSS(transformMatrix)}},_react2.default.createElement("div",{className:"canvasRotationHandle--handle"}))};RotationHandle.propTypes={transformMatrix:_propTypes2.default.arrayOf(_propTypes2.default.number).isRequired}},6288:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.BorderConnection=void 0;var _recompose=__webpack_require__(24);var _border_connection=__webpack_require__(6289);exports.BorderConnection=(0,_recompose.pure)(_border_connection.BorderConnection)},6289:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.BorderConnection=void 0;var _react=__webpack_require__(0);var _react2=_interopRequireDefault(_react);var _propTypes=__webpack_require__(4);var _propTypes2=_interopRequireDefault(_propTypes);var _aeroelastic=__webpack_require__(440);var _aeroelastic2=_interopRequireDefault(_aeroelastic);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var BorderConnection=exports.BorderConnection=function BorderConnection(_ref){var transformMatrix=_ref.transformMatrix,width=_ref.width,height=_ref.height;var newStyle={width:width,height:height,marginLeft:-width/2,marginTop:-height/2,position:"absolute",transform:_aeroelastic2.default.dom.matrixToCSS(transformMatrix)};return _react2.default.createElement("div",{className:"canvasBorder--connection canvasLayoutAnnotation",style:newStyle})};BorderConnection.propTypes={width:_propTypes2.default.number.isRequired,height:_propTypes2.default.number.isRequired,transformMatrix:_propTypes2.default.arrayOf(_propTypes2.default.number).isRequired}},6290:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.BorderResizeHandle=void 0;var _recompose=__webpack_require__(24);var _border_resize_handle=__webpack_require__(6291);exports.BorderResizeHandle=(0,_recompose.pure)(_border_resize_handle.BorderResizeHandle)},6291:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.BorderResizeHandle=void 0;var _react=__webpack_require__(0);var _react2=_interopRequireDefault(_react);var _propTypes=__webpack_require__(4);var _propTypes2=_interopRequireDefault(_propTypes);var _aeroelastic=__webpack_require__(440);var _aeroelastic2=_interopRequireDefault(_aeroelastic);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var BorderResizeHandle=exports.BorderResizeHandle=function BorderResizeHandle(_ref){var transformMatrix=_ref.transformMatrix;return _react2.default.createElement("div",{className:"canvasBorderResizeHandle canvasLayoutAnnotation",style:{transform:_aeroelastic2.default.dom.matrixToCSS(transformMatrix)}})};BorderResizeHandle.propTypes={transformMatrix:_propTypes2.default.arrayOf(_propTypes2.default.number).isRequired}},6292:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.Fullscreen=void 0;var _reactRedux=__webpack_require__(19);var _app=__webpack_require__(119);var _fullscreen=__webpack_require__(6293);var mapStateToProps=function mapStateToProps(state){return{isFullscreen:(0,_app.getFullscreen)(state)}};exports.Fullscreen=(0,_reactRedux.connect)(mapStateToProps)(_fullscreen.Fullscreen)},6293:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.Fullscreen=void 0;var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;"value"in descriptor&&(descriptor.writable=true);Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){protoProps&&defineProperties(Constructor.prototype,protoProps);staticProps&&defineProperties(Constructor,staticProps);return Constructor}}();var _react=__webpack_require__(0);var _react2=_interopRequireDefault(_react);var _propTypes=__webpack_require__(4);var _propTypes2=_interopRequireDefault(_propTypes);var _lodash=__webpack_require__(1);var _get_window=__webpack_require__(385);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(self,call){if(!self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!call||"object"!==typeof call&&"function"!==typeof call?self:call}function _inherits(subClass,superClass){if("function"!==typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function, not "+typeof superClass);subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:false,writable:true,configurable:true}});superClass&&(Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass)}var Fullscreen=exports.Fullscreen=function(_React$Component){_inherits(Fullscreen,_React$Component);function Fullscreen(){var _ref;var _temp,_this,_ret;_classCallCheck(this,Fullscreen);for(var _len=arguments.length,args=Array(_len),_key=0;_key<_len;_key++)args[_key]=arguments[_key];return _ret=(_temp=(_this=_possibleConstructorReturn(this,(_ref=Fullscreen.__proto__||Object.getPrototypeOf(Fullscreen)).call.apply(_ref,[this].concat(args))),_this),_this.state={width:0,height:0},_this.getWindowSize=function(){return{width:_this.win.innerWidth,height:_this.win.innerHeight}},_this.onWindowResize=(0,_lodash.debounce)(function(){var _this$getWindowSize=_this.getWindowSize(),width=_this$getWindowSize.width,height=_this$getWindowSize.height;_this.setState({width:width,height:height})},100),_temp),_possibleConstructorReturn(_this,_ret)}_createClass(Fullscreen,[{key:"componentWillMount",value:function componentWillMount(){this.win=(0,_get_window.getWindow)();this.setState({width:this.win.innerWidth,height:this.win.innerHeight})}},{key:"componentDidMount",value:function componentDidMount(){this.win.addEventListener("resize",this.onWindowResize)}},{key:"componentWillUnmount",value:function componentWillUnmount(){this.win.removeEventListener("resize",this.onWindowResize)}},{key:"render",value:function render(){var _props=this.props,isFullscreen=_props.isFullscreen,children=_props.children;var windowSize={width:this.state.width,height:this.state.height};return children({isFullscreen:isFullscreen,windowSize:windowSize})}}]);return Fullscreen}(_react2.default.Component);Fullscreen.propTypes={isFullscreen:_propTypes2.default.bool,children:_propTypes2.default.func}},6294:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.WorkpadHeader=void 0;var _extends=Object.assign||function(target){for(var i=1;i<arguments.length;i++){var source=arguments[i];for(var key in source)Object.prototype.hasOwnProperty.call(source,key)&&(target[key]=source[key])}return target};var _recompose=__webpack_require__(24);var _reactRedux=__webpack_require__(19);var _app=__webpack_require__(119);var _workpad=__webpack_require__(54);var _workpad2=__webpack_require__(233);var _assets=__webpack_require__(524);var _elements=__webpack_require__(109);var _workpad_header=__webpack_require__(6295);var mapStateToProps=function mapStateToProps(state){return{isWriteable:(0,_workpad.isWriteable)(state)&&(0,_app.canUserWrite)(state),canUserWrite:(0,_app.canUserWrite)(state),workpadName:(0,_workpad.getWorkpadName)(state),selectedPage:(0,_workpad.getSelectedPage)(state),hasAssets:!!Object.keys((0,_assets.getAssets)(state)).length}};var mapDispatchToProps=function mapDispatchToProps(dispatch){return{setWriteable:function setWriteable(isWriteable){return dispatch((0,_workpad2.setWriteable)(isWriteable))},addElement:function addElement(pageId){return function(partialElement){return dispatch((0,_elements.addElement)(pageId,partialElement))}}}};var mergeProps=function mergeProps(stateProps,dispatchProps,ownProps){return _extends({},stateProps,dispatchProps,ownProps,{addElement:dispatchProps.addElement(stateProps.selectedPage),toggleWriteable:function toggleWriteable(){return dispatchProps.setWriteable(!stateProps.isWriteable)}})};exports.WorkpadHeader=(0,_recompose.compose)((0,_recompose.withState)("showElementModal","setShowElementModal",false),(0,_reactRedux.connect)(mapStateToProps,mapDispatchToProps,mergeProps))(_workpad_header.WorkpadHeader)},6295:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.WorkpadHeader=void 0;var _react=__webpack_require__(0);var _react2=_interopRequireDefault(_react);var _propTypes=__webpack_require__(4);var _propTypes2=_interopRequireDefault(_propTypes);var _reactShortcuts=__webpack_require__(813);var _eui=__webpack_require__(2);var _asset_manager=__webpack_require__(6296);var _element_types=__webpack_require__(6307);var _workpad_export=__webpack_require__(6310);var _fullscreen_control=__webpack_require__(6313);var _refresh_control=__webpack_require__(6315);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var WorkpadHeader=exports.WorkpadHeader=function WorkpadHeader(_ref){var isWriteable=_ref.isWriteable,canUserWrite=_ref.canUserWrite,toggleWriteable=_ref.toggleWriteable,hasAssets=_ref.hasAssets,addElement=_ref.addElement,setShowElementModal=_ref.setShowElementModal,showElementModal=_ref.showElementModal;var keyHandler=function keyHandler(action){"EDITING"===action&&toggleWriteable()};var elementAdd=_react2.default.createElement(_eui.EuiOverlayMask,null,_react2.default.createElement(_eui.EuiModal,{onClose:function onClose(){return setShowElementModal(false)},className:"canvasModal--fixedSize",maxWidth:"1000px",initialFocus:".canvasElements__filter"},_react2.default.createElement(_element_types.ElementTypes,{onClick:function onClick(element){addElement(element);setShowElementModal(false)}}),_react2.default.createElement(_eui.EuiModalFooter,null,_react2.default.createElement(_eui.EuiButton,{size:"s",onClick:function onClick(){return setShowElementModal(false)}},"Dismiss"))));var readOnlyToolTip="";readOnlyToolTip=canUserWrite?isWriteable?"Hide editing controls":"Show editing controls":"You don't have permission to edit this workpad";return _react2.default.createElement("div",null,showElementModal?elementAdd:null,_react2.default.createElement(_eui.EuiFlexGroup,{gutterSize:"s",alignItems:"center",justifyContent:"spaceBetween"},_react2.default.createElement(_eui.EuiFlexItem,{grow:false},_react2.default.createElement(_eui.EuiFlexGroup,{alignItems:"center",gutterSize:"xs"},_react2.default.createElement(_eui.EuiFlexItem,{grow:false},_react2.default.createElement(_refresh_control.RefreshControl,null)),_react2.default.createElement(_eui.EuiFlexItem,{grow:false},_react2.default.createElement(_fullscreen_control.FullscreenControl,null,function(_ref2){var toggleFullscreen=_ref2.toggleFullscreen;return _react2.default.createElement(_eui.EuiToolTip,{position:"bottom",content:"Toggle fullscreen mode"},_react2.default.createElement(_eui.EuiButtonIcon,{iconType:"fullScreen","aria-label":"View fullscreen",onClick:toggleFullscreen}))})),_react2.default.createElement(_eui.EuiFlexItem,{grow:false},_react2.default.createElement(_workpad_export.WorkpadExport,null)),_react2.default.createElement(_eui.EuiFlexItem,{grow:false},!canUserWrite&&_react2.default.createElement(_reactShortcuts.Shortcuts,{name:"EDITOR",handler:keyHandler,targetNodeSelector:"body",global:true}),_react2.default.createElement(_eui.EuiToolTip,{position:"bottom",content:readOnlyToolTip},_react2.default.createElement(_eui.EuiButtonIcon,{iconType:isWriteable?"lockOpen":"lock",onClick:function onClick(){toggleWriteable()},size:"s","aria-label":readOnlyToolTip,isDisabled:!canUserWrite}))))),isWriteable?_react2.default.createElement(_eui.EuiFlexItem,{grow:false},_react2.default.createElement(_eui.EuiFlexGroup,{alignItems:"center",gutterSize:"s"},hasAssets&&_react2.default.createElement(_eui.EuiFlexItem,{grow:false},_react2.default.createElement(_asset_manager.AssetManager,null)),_react2.default.createElement(_eui.EuiFlexItem,{grow:false},_react2.default.createElement(_eui.EuiButton,{fill:true,size:"s",iconType:"vector",onClick:function onClick(){return setShowElementModal(true)}},"Add element")))):null))};WorkpadHeader.propTypes={isWriteable:_propTypes2.default.bool,toggleWriteable:_propTypes2.default.func,hasAssets:_propTypes2.default.bool,addElement:_propTypes2.default.func.isRequired,showElementModal:_propTypes2.default.bool,setShowElementModal:_propTypes2.default.func}},6296:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.AssetManager=void 0;var _reactRedux=__webpack_require__(19);var _recompose=__webpack_require__(24);var _notify=__webpack_require__(293);var _assets=__webpack_require__(524);var _assets2=__webpack_require__(442);var _asset_manager=__webpack_require__(6297);var mapStateToProps=function mapStateToProps(state){return{assets:Object.values((0,_assets.getAssets)(state))}};var mapDispatchToProps={removeAsset:_assets2.removeAsset};exports.AssetManager=(0,_recompose.compose)((0,_reactRedux.connect)(mapStateToProps,mapDispatchToProps),(0,_recompose.withProps)({copyAsset:function copyAsset(assetId){return _notify.notify.success("Copied '"+assetId+"' to clipboard")}}))(_asset_manager.AssetManager)},6297:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.AssetManager=void 0;var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;"value"in descriptor&&(descriptor.writable=true);Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){protoProps&&defineProperties(Constructor.prototype,protoProps);staticProps&&defineProperties(Constructor,staticProps);return Constructor}}();var _react=__webpack_require__(0);var _react2=_interopRequireDefault(_react);var _propTypes=__webpack_require__(4);var _propTypes2=_interopRequireDefault(_propTypes);var _eui=__webpack_require__(2);var _confirm_modal=__webpack_require__(1177);var _clipboard=__webpack_require__(2090);var _download=__webpack_require__(6301);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(self,call){if(!self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!call||"object"!==typeof call&&"function"!==typeof call?self:call}function _inherits(subClass,superClass){if("function"!==typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function, not "+typeof superClass);subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:false,writable:true,configurable:true}});superClass&&(Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass)}var AssetManager=exports.AssetManager=function(_React$PureComponent){_inherits(AssetManager,_React$PureComponent);function AssetManager(){var _ref;var _temp,_this,_ret;_classCallCheck(this,AssetManager);for(var _len=arguments.length,args=Array(_len),_key=0;_key<_len;_key++)args[_key]=arguments[_key];return _ret=(_temp=(_this=_possibleConstructorReturn(this,(_ref=AssetManager.__proto__||Object.getPrototypeOf(AssetManager)).call.apply(_ref,[this].concat(args))),_this),_this.state={deleteId:null,isModalVisible:false},_this.showModal=function(){return _this.setState({isModalVisible:true})},_this.closeModal=function(){return _this.setState({isModalVisible:false})},_this.doDelete=function(){_this.resetDelete();_this.props.removeAsset(_this.state.deleteId)},_this.resetDelete=function(){return _this.setState({deleteId:null})},_this.renderAsset=function(asset){return _react2.default.createElement(_eui.EuiFlexItem,{key:asset.id},_react2.default.createElement(_eui.EuiPanel,{className:"canvasAssetManager__asset",paddingSize:"s"},_react2.default.createElement("div",{className:"canvasAssetManager__thumb canvasCheckered"},_react2.default.createElement(_eui.EuiImage,{className:"canvasAssetManager__img",size:"original",url:asset.value,fullScreenIconColor:"dark",alt:"Asset thumbnail",style:{backgroundImage:"url("+asset.value+")"}})),_react2.default.createElement(_eui.EuiSpacer,{size:"s"}),_react2.default.createElement(_eui.EuiText,{size:"xs",className:"eui-textBreakAll"},_react2.default.createElement("p",{className:"eui-textBreakAll"},_react2.default.createElement("strong",null,asset.id),_react2.default.createElement("br",null),_react2.default.createElement(_eui.EuiTextColor,{color:"subdued"},_react2.default.createElement("small",null,"(",Math.round(asset.value.length/1024)," kb)")))),_react2.default.createElement(_eui.EuiSpacer,{size:"s"}),_react2.default.createElement(_eui.EuiFlexGroup,{alignItems:"baseline",justifyContent:"center",responsive:false},_react2.default.createElement(_eui.EuiFlexItem,{className:"asset-download",grow:false},_react2.default.createElement(_download.Download,{fileName:asset.id,content:asset.value},_react2.default.createElement(_eui.EuiButtonIcon,{iconType:"sortDown","aria-label":"Download",title:"Download"}))),_react2.default.createElement(_eui.EuiFlexItem,{grow:false},_react2.default.createElement(_clipboard.Clipboard,{content:asset.id,onCopy:function onCopy(result){return result&&_this.props.copyAsset(asset.id)}},_react2.default.createElement(_eui.EuiButtonIcon,{iconType:"copyClipboard","aria-label":"Copy to clipboard",title:"Copy to clipboard"}))),_react2.default.createElement(_eui.EuiFlexItem,{grow:false},_react2.default.createElement(_eui.EuiButtonIcon,{title:"Delete asset",color:"danger",iconType:"trash","aria-label":"Delete asset",onClick:function onClick(){return _this.setState({deleteId:asset.id})}})))))},_temp),_possibleConstructorReturn(_this,_ret)}_createClass(AssetManager,[{key:"render",value:function render(){var isModalVisible=this.state.isModalVisible;var assetMaxLimit=25e3;var assetsTotal=Math.round(this.props.assets.reduce(function(total,asset){return total+asset.value.length},0)/1024);var percentageUsed=Math.round(assetsTotal/assetMaxLimit*100);var assetModal=isModalVisible?_react2.default.createElement(_eui.EuiOverlayMask,null,_react2.default.createElement(_eui.EuiModal,{onClose:this.closeModal,className:"canvasAssetManager canvasModal--fixedSize",maxWidth:"1000px"},_react2.default.createElement(_eui.EuiModalHeader,{className:"canvasAssetManager__modalHeader"},_react2.default.createElement(_eui.EuiModalHeaderTitle,{className:"canvasAssetManager__modalHeaderTitle"},"Manage workpad assets"),_react2.default.createElement(_eui.EuiFlexGroup,{className:"canvasAssetManager__meterWrapper",responsive:false},_react2.default.createElement(_eui.EuiFlexItem,null,_react2.default.createElement(_eui.EuiProgress,{value:assetsTotal,max:assetMaxLimit,color:percentageUsed<90?"secondary":"danger",size:"s","aria-labelledby":"CanvasAssetManagerLabel"})),_react2.default.createElement(_eui.EuiFlexItem,{grow:false,className:"eui-textNoWrap"},_react2.default.createElement(_eui.EuiText,{id:"CanvasAssetManagerLabel"},percentageUsed,"% space used")))),_react2.default.createElement(_eui.EuiModalBody,null,_react2.default.createElement(_eui.EuiText,{size:"s",color:"subdued"},_react2.default.createElement("p",null,"Below are the image assets that you added to this workpad. To reclaim space, delete assets that you no longer need. Unfortunately, any assets that are actually in use cannot be determined at this time.")),_react2.default.createElement(_eui.EuiFlexGrid,{responsive:false,columns:4},this.props.assets.map(this.renderAsset))),_react2.default.createElement(_eui.EuiModalFooter,null,_react2.default.createElement(_eui.EuiButton,{size:"s",onClick:this.closeModal},"Close")))):null;return _react2.default.createElement(_react.Fragment,null,_react2.default.createElement(_eui.EuiButtonEmpty,{size:"s",onClick:this.showModal},"Manage assets"),assetModal,_react2.default.createElement(_confirm_modal.ConfirmModal,{isOpen:null!=this.state.deleteId,title:"Remove Asset",message:"Are you sure you want to remove this asset?",confirmButtonText:"Remove",onConfirm:this.doDelete,onCancel:this.resetDelete}))}}]);return AssetManager}(_react2.default.PureComponent);AssetManager.propTypes={assets:_propTypes2.default.array,removeAsset:_propTypes2.default.func,copyAsset:_propTypes2.default.func}},6298:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.Clipboard=void 0;var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;"value"in descriptor&&(descriptor.writable=true);Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){protoProps&&defineProperties(Constructor.prototype,protoProps);staticProps&&defineProperties(Constructor,staticProps);return Constructor}}();var _react=__webpack_require__(0);var _react2=_interopRequireDefault(_react);var _propTypes=__webpack_require__(4);var _propTypes2=_interopRequireDefault(_propTypes);var _copyToClipboard=__webpack_require__(6299);var _copyToClipboard2=_interopRequireDefault(_copyToClipboard);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(self,call){if(!self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!call||"object"!==typeof call&&"function"!==typeof call?self:call}function _inherits(subClass,superClass){if("function"!==typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function, not "+typeof superClass);subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:false,writable:true,configurable:true}});superClass&&(Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass)}var Clipboard=exports.Clipboard=function(_React$PureComponent){_inherits(Clipboard,_React$PureComponent);function Clipboard(){var _ref;var _temp,_this,_ret;_classCallCheck(this,Clipboard);for(var _len=arguments.length,args=Array(_len),_key=0;_key<_len;_key++)args[_key]=arguments[_key];return _ret=(_temp=(_this=_possibleConstructorReturn(this,(_ref=Clipboard.__proto__||Object.getPrototypeOf(Clipboard)).call.apply(_ref,[this].concat(args))),_this),_this.onClick=function(ev){var _this$props=_this.props,content=_this$props.content,onCopy=_this$props.onCopy;ev.preventDefault();var result=(0,_copyToClipboard2.default)(content,{debug:true});"function"===typeof onCopy&&onCopy(result)},_temp),_possibleConstructorReturn(_this,_ret)}_createClass(Clipboard,[{key:"render",value:function render(){return _react2.default.createElement("div",{className:"canvas_clipboard",onClick:this.onClick},this.props.children)}}]);return Clipboard}(_react2.default.PureComponent);Clipboard.propTypes={children:_propTypes2.default.element.isRequired,content:_propTypes2.default.oneOfType([_propTypes2.default.string,_propTypes2.default.number]).isRequired,onCopy:_propTypes2.default.func}},6299:function(module,exports,__webpack_require__){"use strict";var deselectCurrent=__webpack_require__(6300);var defaultMessage="Copy to clipboard: #{key}, Enter";function format(message){var copyKey=(/mac os x/i.test(navigator.userAgent)?"⌘":"Ctrl")+"+C";return message.replace(/#{\s*key\s*}/g,copyKey)}function copy(text,options){var debug,message,reselectPrevious,range,selection,mark,success=false;options||(options={});debug=options.debug||false;try{reselectPrevious=deselectCurrent();range=document.createRange();selection=document.getSelection();mark=document.createElement("span");mark.textContent=text;mark.style.all="unset";mark.style.position="fixed";mark.style.top=0;mark.style.clip="rect(0, 0, 0, 0)";mark.style.whiteSpace="pre";mark.style.webkitUserSelect="text";mark.style.MozUserSelect="text";mark.style.msUserSelect="text";mark.style.userSelect="text";document.body.appendChild(mark);range.selectNode(mark);selection.addRange(range);var successful=document.execCommand("copy");if(!successful)throw new Error("copy command was unsuccessful");success=true}catch(err){debug&&console.error("unable to copy using execCommand: ",err);debug&&console.warn("trying IE specific stuff");try{window.clipboardData.setData("text",text);success=true}catch(err){debug&&console.error("unable to copy using clipboardData: ",err);debug&&console.error("falling back to prompt");message=format("message"in options?options.message:defaultMessage);window.prompt(message,text)}}finally{selection&&("function"==typeof selection.removeRange?selection.removeRange(range):selection.removeAllRanges());mark&&document.body.removeChild(mark);reselectPrevious()}return success}module.exports=copy},630:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.inFlightComplete=exports.inFlightActive=exports.clear=exports.setValues=exports.setValue=exports.setLoading=void 0;var _reduxActions=__webpack_require__(29);exports.setLoading=(0,_reduxActions.createAction)("setResolvedLoading");exports.setValue=(0,_reduxActions.createAction)("setResolvedValue");exports.setValues=(0,_reduxActions.createAction)("setResolvedValues");exports.clear=(0,_reduxActions.createAction)("clearResolvedValue");exports.inFlightActive=(0,_reduxActions.createAction)("inFlightActive");exports.inFlightComplete=(0,_reduxActions.createAction)("inFlightComplete")},6300:function(module,exports){module.exports=function(){var selection=document.getSelection();if(!selection.rangeCount)return function(){};var active=document.activeElement;var ranges=[];for(var i=0;i<selection.rangeCount;i++)ranges.push(selection.getRangeAt(i));switch(active.tagName.toUpperCase()){case"INPUT":case"TEXTAREA":active.blur();break;default:active=null}selection.removeAllRanges();return function(){"Caret"===selection.type&&selection.removeAllRanges();selection.rangeCount||ranges.forEach(function(range){selection.addRange(range)});active&&active.focus()}}},6301:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.Download=void 0;var _download=__webpack_require__(6302);exports.Download=_download.Download},6302:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.Download=void 0;var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;"value"in descriptor&&(descriptor.writable=true);Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){protoProps&&defineProperties(Constructor.prototype,protoProps);staticProps&&defineProperties(Constructor,staticProps);return Constructor}}();var _react=__webpack_require__(0);var _react2=_interopRequireDefault(_react);var _propTypes=__webpack_require__(4);var _propTypes2=_interopRequireDefault(_propTypes);var _fileSaver=__webpack_require__(2076);var _fileSaver2=_interopRequireDefault(_fileSaver);var _base64Js=__webpack_require__(2091);var _dataurl=__webpack_require__(6303);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(self,call){if(!self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!call||"object"!==typeof call&&"function"!==typeof call?self:call}function _inherits(subClass,superClass){if("function"!==typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function, not "+typeof superClass);subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:false,writable:true,configurable:true}});superClass&&(Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass)}var Download=exports.Download=function(_React$PureComponent){_inherits(Download,_React$PureComponent);function Download(){var _ref;var _temp,_this,_ret;_classCallCheck(this,Download);for(var _len=arguments.length,args=Array(_len),_key=0;_key<_len;_key++)args[_key]=arguments[_key];return _ret=(_temp=(_this=_possibleConstructorReturn(this,(_ref=Download.__proto__||Object.getPrototypeOf(Download)).call.apply(_ref,[this].concat(args))),_this),_this.onClick=function(){var _this$props=_this.props,fileName=_this$props.fileName,content=_this$props.content;var asset=(0,_dataurl.parse)(content,true);var assetBlob=new Blob([(0,_base64Js.toByteArray)(asset.data)],{type:asset.mimetype});var ext=asset.extension?"."+asset.extension:"";_fileSaver2.default.saveAs(assetBlob,"canvas-"+fileName+ext)},_temp),_possibleConstructorReturn(_this,_ret)}_createClass(Download,[{key:"render",value:function render(){return _react2.default.createElement("div",{className:"canvas_download",onClick:this.onClick},this.props.children)}}]);return Download}(_react2.default.PureComponent);Download.propTypes={children:_propTypes2.default.element.isRequired,fileName:_propTypes2.default.string,content:_propTypes2.default.oneOfType([_propTypes2.default.string,_propTypes2.default.number]).isRequired,onCopy:_propTypes2.default.func}},6303:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.imageTypes=void 0;var _slicedToArray=function(){function sliceIterator(arr,i){var _arr=[];var _n=true;var _d=false;var _e=void 0;try{for(var _s,_i=arr[Symbol.iterator]();!(_n=(_s=_i.next()).done);_n=true){_arr.push(_s.value);if(i&&_arr.length===i)break}}catch(err){_d=true;_e=err}finally{try{!_n&&_i["return"]&&_i["return"]()}finally{if(_d)throw _e}}return _arr}return function(arr,i){if(Array.isArray(arr))return arr;if(Symbol.iterator in Object(arr))return sliceIterator(arr,i);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}();exports.parse=parse;exports.isValid=isValid;exports.encode=encode;var _base64Js=__webpack_require__(2091);var _lite=__webpack_require__(6304);var _lite2=_interopRequireDefault(_lite);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var dataurlRegex=/^data:([a-z]+\/[a-z0-9-+.]+)(;[a-z-]+=[a-z0-9-]+)?(;([a-z0-9]+))?,/;var imageTypes=exports.imageTypes=["image/svg+xml","image/jpeg","image/png","image/gif"];function parse(str){var withData=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if("string"!==typeof str)return;var matches=str.match(dataurlRegex);if(!matches)return;var _matches=_slicedToArray(matches,5),mimetype=_matches[1],charset=_matches[2],encoding=_matches[4];var imageTypeIndex=imageTypes.indexOf(matches[1]);if(imageTypeIndex>0&&"base64"!==encoding)return;return{mimetype:mimetype,encoding:encoding,charset:charset&&charset.split("=")[1],data:withData?str.split(",")[1]:null,isImage:imageTypeIndex>=0,extension:_lite2.default.getExtension(mimetype)}}function isValid(str){return dataurlRegex.test(str)}function encode(data){var type=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"text/plain";if(FileReader)return new Promise(function(resolve,reject){var reader=new FileReader;reader.onloadend=function(){return resolve(reader.result)};reader.onerror=function(err){return reject(err)};reader.readAsDataURL(data)});return Promise.resolve("data:"+type+";base64,"+(0,_base64Js.fromByteArray)(data))}},6304:function(module,exports,__webpack_require__){"use strict";var Mime=__webpack_require__(6305);module.exports=new Mime(__webpack_require__(6306))},6305:function(module,exports,__webpack_require__){"use strict";function Mime(){this._types=Object.create(null);this._extensions=Object.create(null);for(var i=0;i<arguments.length;i++)this.define(arguments[i])}Mime.prototype.define=function(typeMap,force){for(var type in typeMap){var extensions=typeMap[type];for(var i=0;i<extensions.length;i++){var ext=extensions[i];if("*"==ext[0])continue;if(!force&&ext in this._types)throw new Error('Attempt to change mapping for "'+ext+'" extension from "'+this._types[ext]+'" to "'+type+'". Pass `force=true` to allow this, otherwise remove "'+ext+'" from the list of extensions for "'+type+'".');this._types[ext]=type}if(force||!this._extensions[type]){ext=extensions[0];this._extensions[type]="*"!=ext[0]?ext:ext.substr(1)}}};Mime.prototype.getType=function(path){path=String(path);var last=path.replace(/^.*[/\\]/,"").toLowerCase();var ext=last.replace(/^.*\./,"").toLowerCase();var hasPath=last.length<path.length;var hasDot=ext.length<last.length-1;return(hasDot||!hasPath)&&this._types[ext]||null};Mime.prototype.getExtension=function(type){type=/^\s*([^;\s]*)/.test(type)&&RegExp.$1;return type&&this._extensions[type.toLowerCase()]||null};module.exports=Mime},6306:function(module,exports){module.exports={"application/andrew-inset":["ez"],"application/applixware":["aw"],"application/atom+xml":["atom"],"application/atomcat+xml":["atomcat"],"application/atomsvc+xml":["atomsvc"],"application/bdoc":["bdoc"],"application/ccxml+xml":["ccxml"],"application/cdmi-capability":["cdmia"],"application/cdmi-container":["cdmic"],"application/cdmi-domain":["cdmid"],"application/cdmi-object":["cdmio"],"application/cdmi-queue":["cdmiq"],"application/cu-seeme":["cu"],"application/dash+xml":["mpd"],"application/davmount+xml":["davmount"],"application/docbook+xml":["dbk"],"application/dssc+der":["dssc"],"application/dssc+xml":["xdssc"],"application/ecmascript":["ecma"],"application/emma+xml":["emma"],"application/epub+zip":["epub"],"application/exi":["exi"],"application/font-tdpfr":["pfr"],"application/font-woff":["woff"],"application/geo+json":["geojson"],"application/gml+xml":["gml"],"application/gpx+xml":["gpx"],"application/gxf":["gxf"],"application/gzip":["gz"],"application/hjson":["hjson"],"application/hyperstudio":["stk"],"application/inkml+xml":["ink","inkml"],"application/ipfix":["ipfix"],"application/java-archive":["jar","war","ear"],"application/java-serialized-object":["ser"],"application/java-vm":["class"],"application/javascript":["js","mjs"],"application/json":["json","map"],"application/json5":["json5"],"application/jsonml+json":["jsonml"],"application/ld+json":["jsonld"],"application/lost+xml":["lostxml"],"application/mac-binhex40":["hqx"],"application/mac-compactpro":["cpt"],"application/mads+xml":["mads"],"application/manifest+json":["webmanifest"],"application/marc":["mrc"],"application/marcxml+xml":["mrcx"],"application/mathematica":["ma","nb","mb"],"application/mathml+xml":["mathml"],"application/mbox":["mbox"],"application/mediaservercontrol+xml":["mscml"],"application/metalink+xml":["metalink"],"application/metalink4+xml":["meta4"],"application/mets+xml":["mets"],"application/mods+xml":["mods"],"application/mp21":["m21","mp21"],"application/mp4":["mp4s","m4p"],"application/msword":["doc","dot"],"application/mxf":["mxf"],"application/octet-stream":["bin","dms","lrf","mar","so","dist","distz","pkg","bpk","dump","elc","deploy","exe","dll","deb","dmg","iso","img","msi","msp","msm","buffer"],"application/oda":["oda"],"application/oebps-package+xml":["opf"],"application/ogg":["ogx"],"application/omdoc+xml":["omdoc"],"application/onenote":["onetoc","onetoc2","onetmp","onepkg"],"application/oxps":["oxps"],"application/patch-ops-error+xml":["xer"],"application/pdf":["pdf"],"application/pgp-encrypted":["pgp"],"application/pgp-signature":["asc","sig"],"application/pics-rules":["prf"],"application/pkcs10":["p10"],"application/pkcs7-mime":["p7m","p7c"],"application/pkcs7-signature":["p7s"],"application/pkcs8":["p8"],"application/pkix-attr-cert":["ac"],"application/pkix-cert":["cer"],"application/pkix-crl":["crl"],"application/pkix-pkipath":["pkipath"],"application/pkixcmp":["pki"],"application/pls+xml":["pls"],"application/postscript":["ai","eps","ps"],"application/pskc+xml":["pskcxml"],"application/raml+yaml":["raml"],"application/rdf+xml":["rdf"],"application/reginfo+xml":["rif"],"application/relax-ng-compact-syntax":["rnc"],"application/resource-lists+xml":["rl"],"application/resource-lists-diff+xml":["rld"],"application/rls-services+xml":["rs"],"application/rpki-ghostbusters":["gbr"],"application/rpki-manifest":["mft"],"application/rpki-roa":["roa"],"application/rsd+xml":["rsd"],"application/rss+xml":["rss"],"application/rtf":["rtf"],"application/sbml+xml":["sbml"],"application/scvp-cv-request":["scq"],"application/scvp-cv-response":["scs"],"application/scvp-vp-request":["spq"],"application/scvp-vp-response":["spp"],"application/sdp":["sdp"],"application/set-payment-initiation":["setpay"],"application/set-registration-initiation":["setreg"],"application/shf+xml":["shf"],"application/smil+xml":["smi","smil"],"application/sparql-query":["rq"],"application/sparql-results+xml":["srx"],"application/srgs":["gram"],"application/srgs+xml":["grxml"],"application/sru+xml":["sru"],"application/ssdl+xml":["ssdl"],"application/ssml+xml":["ssml"],"application/tei+xml":["tei","teicorpus"],"application/thraud+xml":["tfi"],"application/timestamped-data":["tsd"],"application/voicexml+xml":["vxml"],"application/wasm":["wasm"],"application/widget":["wgt"],"application/winhlp":["hlp"],"application/wsdl+xml":["wsdl"],"application/wspolicy+xml":["wspolicy"],"application/xaml+xml":["xaml"],"application/xcap-diff+xml":["xdf"],"application/xenc+xml":["xenc"],"application/xhtml+xml":["xhtml","xht"],"application/xml":["xml","xsl","xsd","rng"],"application/xml-dtd":["dtd"],"application/xop+xml":["xop"],"application/xproc+xml":["xpl"],"application/xslt+xml":["xslt"],"application/xspf+xml":["xspf"],"application/xv+xml":["mxml","xhvml","xvml","xvm"],"application/yang":["yang"],"application/yin+xml":["yin"],"application/zip":["zip"],"audio/3gpp":["*3gpp"],"audio/adpcm":["adp"],"audio/basic":["au","snd"],"audio/midi":["mid","midi","kar","rmi"],"audio/mp3":["*mp3"],"audio/mp4":["m4a","mp4a"],"audio/mpeg":["mpga","mp2","mp2a","mp3","m2a","m3a"],"audio/ogg":["oga","ogg","spx"],"audio/s3m":["s3m"],"audio/silk":["sil"],"audio/wav":["wav"],"audio/wave":["*wav"],"audio/webm":["weba"],"audio/xm":["xm"],"font/collection":["ttc"],"font/otf":["otf"],"font/ttf":["ttf"],"font/woff":["*woff"],"font/woff2":["woff2"],"image/apng":["apng"],"image/bmp":["bmp"],"image/cgm":["cgm"],"image/g3fax":["g3"],"image/gif":["gif"],"image/ief":["ief"],"image/jp2":["jp2","jpg2"],"image/jpeg":["jpeg","jpg","jpe"],"image/jpm":["jpm"],"image/jpx":["jpx","jpf"],"image/ktx":["ktx"],"image/png":["png"],"image/sgi":["sgi"],"image/svg+xml":["svg","svgz"],"image/tiff":["tiff","tif"],"image/webp":["webp"],"message/disposition-notification":["disposition-notification"],"message/global":["u8msg"],"message/global-delivery-status":["u8dsn"],"message/global-disposition-notification":["u8mdn"],"message/global-headers":["u8hdr"],"message/rfc822":["eml","mime"],"model/gltf+json":["gltf"],"model/gltf-binary":["glb"],"model/iges":["igs","iges"],"model/mesh":["msh","mesh","silo"],"model/vrml":["wrl","vrml"],"model/x3d+binary":["x3db","x3dbz"],"model/x3d+vrml":["x3dv","x3dvz"],"model/x3d+xml":["x3d","x3dz"],"text/cache-manifest":["appcache","manifest"],"text/calendar":["ics","ifb"],"text/coffeescript":["coffee","litcoffee"],"text/css":["css"],"text/csv":["csv"],"text/html":["html","htm","shtml"],"text/jade":["jade"],"text/jsx":["jsx"],"text/less":["less"],"text/markdown":["markdown","md"],"text/mathml":["mml"],"text/n3":["n3"],"text/plain":["txt","text","conf","def","list","log","in","ini"],"text/richtext":["rtx"],"text/rtf":["*rtf"],"text/sgml":["sgml","sgm"],"text/shex":["shex"],"text/slim":["slim","slm"],"text/stylus":["stylus","styl"],"text/tab-separated-values":["tsv"],"text/troff":["t","tr","roff","man","me","ms"],"text/turtle":["ttl"],"text/uri-list":["uri","uris","urls"],"text/vcard":["vcard"],"text/vtt":["vtt"],"text/xml":["*xml"],"text/yaml":["yaml","yml"],"video/3gpp":["3gp","3gpp"],"video/3gpp2":["3g2"],"video/h261":["h261"],"video/h263":["h263"],"video/h264":["h264"],"video/jpeg":["jpgv"],"video/jpm":["*jpm","jpgm"],"video/mj2":["mj2","mjp2"],"video/mp2t":["ts"],"video/mp4":["mp4","mp4v","mpg4"],"video/mpeg":["mpeg","mpg","mpe","m1v","m2v"],"video/ogg":["ogv"],"video/quicktime":["qt","mov"],"video/webm":["webm"]}},6307:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.ElementTypes=void 0;var _recompose=__webpack_require__(24);var _elements_registry=__webpack_require__(2065);var _element_types=__webpack_require__(6308);var elementTypesState=(0,_recompose.withState)("search","setSearch");var elementTypeProps=(0,_recompose.withProps)(function(){return{elements:_elements_registry.elementsRegistry.toJS()}});exports.ElementTypes=(0,_recompose.compose)(_recompose.pure,elementTypesState,elementTypeProps)(_element_types.ElementTypes)},6308:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.ElementTypes=void 0;var _extends=Object.assign||function(target){for(var i=1;i<arguments.length;i++){var source=arguments[i];for(var key in source)Object.prototype.hasOwnProperty.call(source,key)&&(target[key]=source[key])}return target};var _react=__webpack_require__(0);var _react2=_interopRequireDefault(_react);var _propTypes=__webpack_require__(4);var _propTypes2=_interopRequireDefault(_propTypes);var _eui=__webpack_require__(2);var _lodash=__webpack_require__(6309);var _lodash2=_interopRequireDefault(_lodash);var _lodash3=__webpack_require__(1);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var ElementTypes=exports.ElementTypes=function ElementTypes(_ref){var elements=_ref.elements,onClick=_ref.onClick,search=_ref.search,setSearch=_ref.setSearch;search=(0,_lodash2.default)(search);elements=(0,_lodash3.sortBy)((0,_lodash3.map)(elements,function(element,name){return _extends({name:name},element)}),"displayName");var elementList=(0,_lodash3.map)(elements,function(element,name){var help=element.help,displayName=element.displayName,expression=element.expression,filter=element.filter,width=element.width,height=element.height,image=element.image;var whenClicked=function whenClicked(){return onClick({expression:expression,filter:filter,width:width,height:height})};var card=_react2.default.createElement(_eui.EuiFlexItem,{key:name},_react2.default.createElement(_eui.EuiCard,{textAlign:"left",image:image,title:displayName,description:help,onClick:whenClicked,className:"canvasCard"}));if(!search)return card;if((0,_lodash3.includes)((0,_lodash2.default)(name),search))return card;if((0,_lodash3.includes)((0,_lodash2.default)(displayName),search))return card;if((0,_lodash3.includes)((0,_lodash2.default)(help),search))return card;return null});return _react2.default.createElement(_react.Fragment,null,_react2.default.createElement(_eui.EuiModalHeader,null,_react2.default.createElement(_eui.EuiFlexGroup,null,_react2.default.createElement(_eui.EuiFlexItem,null,_react2.default.createElement(_eui.EuiFieldSearch,{className:"canvasElements__filter",placeholder:"Filter elements",onChange:function onChange(e){return setSearch(e.target.value)},value:search})))),_react2.default.createElement(_eui.EuiModalBody,null,_react2.default.createElement(_eui.EuiFlexGrid,{gutterSize:"l",columns:4},elementList)))};ElementTypes.propTypes={elements:_propTypes2.default.object,onClick:_propTypes2.default.func,search:_propTypes2.default.string,setSearch:_propTypes2.default.func}},6309:function(module,exports,__webpack_require__){(function(global){var INFINITY=1/0;var symbolTag="[object Symbol]";var reAsciiWord=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g;var reLatin=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g;var rsAstralRange="\\ud800-\\udfff",rsComboMarksRange="\\u0300-\\u036f\\ufe20-\\ufe23",rsComboSymbolsRange="\\u20d0-\\u20f0",rsDingbatRange="\\u2700-\\u27bf",rsLowerRange="a-z\\xdf-\\xf6\\xf8-\\xff",rsMathOpRange="\\xac\\xb1\\xd7\\xf7",rsNonCharRange="\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf",rsPunctuationRange="\\u2000-\\u206f",rsSpaceRange=" \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",rsUpperRange="A-Z\\xc0-\\xd6\\xd8-\\xde",rsVarRange="\\ufe0e\\ufe0f",rsBreakRange=rsMathOpRange+rsNonCharRange+rsPunctuationRange+rsSpaceRange;var rsApos="['’]",rsBreak="["+rsBreakRange+"]",rsCombo="["+rsComboMarksRange+rsComboSymbolsRange+"]",rsDigits="\\d+",rsDingbat="["+rsDingbatRange+"]",rsLower="["+rsLowerRange+"]",rsMisc="[^"+rsAstralRange+rsBreakRange+rsDigits+rsDingbatRange+rsLowerRange+rsUpperRange+"]",rsFitz="\\ud83c[\\udffb-\\udfff]",rsModifier="(?:"+rsCombo+"|"+rsFitz+")",rsNonAstral="[^"+rsAstralRange+"]",rsRegional="(?:\\ud83c[\\udde6-\\uddff]){2}",rsSurrPair="[\\ud800-\\udbff][\\udc00-\\udfff]",rsUpper="["+rsUpperRange+"]",rsZWJ="\\u200d";var rsLowerMisc="(?:"+rsLower+"|"+rsMisc+")",rsUpperMisc="(?:"+rsUpper+"|"+rsMisc+")",rsOptLowerContr="(?:"+rsApos+"(?:d|ll|m|re|s|t|ve))?",rsOptUpperContr="(?:"+rsApos+"(?:D|LL|M|RE|S|T|VE))?",reOptMod=rsModifier+"?",rsOptVar="["+rsVarRange+"]?",rsOptJoin="(?:"+rsZWJ+"(?:"+[rsNonAstral,rsRegional,rsSurrPair].join("|")+")"+rsOptVar+reOptMod+")*",rsSeq=rsOptVar+reOptMod+rsOptJoin,rsEmoji="(?:"+[rsDingbat,rsRegional,rsSurrPair].join("|")+")"+rsSeq;var reApos=RegExp(rsApos,"g");var reComboMark=RegExp(rsCombo,"g");var reUnicodeWord=RegExp([rsUpper+"?"+rsLower+"+"+rsOptLowerContr+"(?="+[rsBreak,rsUpper,"$"].join("|")+")",rsUpperMisc+"+"+rsOptUpperContr+"(?="+[rsBreak,rsUpper+rsLowerMisc,"$"].join("|")+")",rsUpper+"?"+rsLowerMisc+"+"+rsOptLowerContr,rsUpper+"+"+rsOptUpperContr,rsDigits,rsEmoji].join("|"),"g");var reHasUnicodeWord=/[a-z][A-Z]|[A-Z]{2,}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/;var deburredLetters={"À":"A","Á":"A","Â":"A","Ã":"A","Ä":"A","Å":"A","à":"a","á":"a","â":"a","ã":"a","ä":"a","å":"a","Ç":"C","ç":"c","Ð":"D","ð":"d","È":"E","É":"E","Ê":"E","Ë":"E","è":"e","é":"e","ê":"e","ë":"e","Ì":"I","Í":"I","Î":"I","Ï":"I","ì":"i","í":"i","î":"i","ï":"i","Ñ":"N","ñ":"n","Ò":"O","Ó":"O","Ô":"O","Õ":"O","Ö":"O","Ø":"O","ò":"o","ó":"o","ô":"o","õ":"o","ö":"o","ø":"o","Ù":"U","Ú":"U","Û":"U","Ü":"U","ù":"u","ú":"u","û":"u","ü":"u","Ý":"Y","ý":"y","ÿ":"y","Æ":"Ae","æ":"ae","Þ":"Th","þ":"th","ß":"ss","Ā":"A","Ă":"A","Ą":"A","ā":"a","ă":"a","ą":"a","Ć":"C","Ĉ":"C","Ċ":"C","Č":"C","ć":"c","ĉ":"c","ċ":"c","č":"c","Ď":"D","Đ":"D","ď":"d","đ":"d","Ē":"E","Ĕ":"E","Ė":"E","Ę":"E","Ě":"E","ē":"e","ĕ":"e","ė":"e","ę":"e","ě":"e","Ĝ":"G","Ğ":"G","Ġ":"G","Ģ":"G","ĝ":"g","ğ":"g","ġ":"g","ģ":"g","Ĥ":"H","Ħ":"H","ĥ":"h","ħ":"h","Ĩ":"I","Ī":"I","Ĭ":"I","Į":"I","İ":"I","ĩ":"i","ī":"i","ĭ":"i","į":"i","ı":"i","Ĵ":"J","ĵ":"j","Ķ":"K","ķ":"k","ĸ":"k","Ĺ":"L","Ļ":"L","Ľ":"L","Ŀ":"L","Ł":"L","ĺ":"l","ļ":"l","ľ":"l","ŀ":"l","ł":"l","Ń":"N","Ņ":"N","Ň":"N","Ŋ":"N","ń":"n","ņ":"n","ň":"n","ŋ":"n","Ō":"O","Ŏ":"O","Ő":"O","ō":"o","ŏ":"o","ő":"o","Ŕ":"R","Ŗ":"R","Ř":"R","ŕ":"r","ŗ":"r","ř":"r","Ś":"S","Ŝ":"S","Ş":"S","Š":"S","ś":"s","ŝ":"s","ş":"s","š":"s","Ţ":"T","Ť":"T","Ŧ":"T","ţ":"t","ť":"t","ŧ":"t","Ũ":"U","Ū":"U","Ŭ":"U","Ů":"U","Ű":"U","Ų":"U","ũ":"u","ū":"u","ŭ":"u","ů":"u","ű":"u","ų":"u","Ŵ":"W","ŵ":"w","Ŷ":"Y","ŷ":"y","Ÿ":"Y","Ź":"Z","Ż":"Z","Ž":"Z","ź":"z","ż":"z","ž":"z","Ĳ":"IJ","ĳ":"ij","Œ":"Oe","œ":"oe","ŉ":"'n","ſ":"ss"};var freeGlobal="object"==typeof global&&global&&global.Object===Object&&global;var freeSelf="object"==typeof self&&self&&self.Object===Object&&self;var root=freeGlobal||freeSelf||Function("return this")();function arrayReduce(array,iteratee,accumulator,initAccum){var index=-1,length=array?array.length:0;initAccum&&length&&(accumulator=array[++index]);while(++index<length)accumulator=iteratee(accumulator,array[index],index,array);return accumulator}function asciiWords(string){return string.match(reAsciiWord)||[]}function basePropertyOf(object){return function(key){return null==object?void 0:object[key]}}var deburrLetter=basePropertyOf(deburredLetters);function hasUnicodeWord(string){return reHasUnicodeWord.test(string)}function unicodeWords(string){return string.match(reUnicodeWord)||[]}var objectProto=Object.prototype;var objectToString=objectProto.toString;var Symbol=root.Symbol;var symbolProto=Symbol?Symbol.prototype:void 0,symbolToString=symbolProto?symbolProto.toString:void 0;function baseToString(value){if("string"==typeof value)return value;if(isSymbol(value))return symbolToString?symbolToString.call(value):"";var result=value+"";return"0"==result&&1/value==-INFINITY?"-0":result}function createCompounder(callback){return function(string){return arrayReduce(words(deburr(string).replace(reApos,"")),callback,"")}}function isObjectLike(value){return!!value&&"object"==typeof value}function isSymbol(value){return"symbol"==typeof value||isObjectLike(value)&&objectToString.call(value)==symbolTag}function toString(value){return null==value?"":baseToString(value)}function deburr(string){string=toString(string);return string&&string.replace(reLatin,deburrLetter).replace(reComboMark,"")}var lowerCase=createCompounder(function(result,word,index){return result+(index?" ":"")+word.toLowerCase()});function words(string,pattern,guard){string=toString(string);pattern=guard?void 0:pattern;if(void 0===pattern)return hasUnicodeWord(string)?unicodeWords(string):asciiWords(string);return string.match(pattern)||[]}module.exports=lowerCase}).call(exports,__webpack_require__(23))},631:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.restoreHistory=exports.redoHistory=exports.undoHistory=void 0;var _reduxActions=__webpack_require__(29);exports.undoHistory=(0,_reduxActions.createAction)("undoHistory");exports.redoHistory=(0,_reduxActions.createAction)("redoHistory");exports.restoreHistory=(0,_reduxActions.createAction)("restoreHistory")},6310:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.WorkpadExport=void 0;var _reactRedux=__webpack_require__(19);var _recompose=__webpack_require__(24);var _job_completion_notifications=__webpack_require__(998);var _workpad=__webpack_require__(54);var _app=__webpack_require__(119);var _notify=__webpack_require__(293);var _get_window=__webpack_require__(385);var _workpad_export=__webpack_require__(6311);var _utils=__webpack_require__(6312);var mapStateToProps=function mapStateToProps(state){return{workpad:(0,_workpad.getWorkpad)(state),pageCount:(0,_workpad.getPages)(state).length,enabled:"chromium"===(0,_app.getReportingBrowserType)(state)}};var getAbsoluteUrl=function getAbsoluteUrl(path){var _getWindow=(0,_get_window.getWindow)(),location=_getWindow.location;if(!location)return path;var protocol=location.protocol,hostname=location.hostname,port=location.port;return protocol+"//"+hostname+":"+port+path};exports.WorkpadExport=(0,_recompose.compose)((0,_reactRedux.connect)(mapStateToProps),(0,_recompose.withProps)(function(_ref){var workpad=_ref.workpad,pageCount=_ref.pageCount;return{getExportUrl:function getExportUrl(type){if("pdf"===type)return getAbsoluteUrl((0,_utils.getPdfUrl)(workpad,{pageCount:pageCount}));throw new Error("Unknown export type: "+type)},onCopy:function onCopy(type){if("pdf"===type)return _notify.notify.info("The PDF generation URL was copied to your clipboard.");throw new Error("Unknown export type: "+type)},onExport:function onExport(type){if("pdf"===type)return(0,_utils.createPdf)(workpad,{pageCount:pageCount}).then(function(_ref2){var data=_ref2.data;_notify.notify.info("Exporting PDF. You can track the progress in Management.",{title:"PDF export of workpad '"+workpad.name+"'"});_job_completion_notifications.jobCompletionNotifications.add(data.job.id)}).catch(function(err){_notify.notify.error(err,{title:"Failed to create PDF for '"+workpad.name+"'"})});throw new Error("Unknown export type: "+type)}}}))(_workpad_export.WorkpadExport)},6311:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.WorkpadExport=void 0;var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;"value"in descriptor&&(descriptor.writable=true);Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){protoProps&&defineProperties(Constructor.prototype,protoProps);staticProps&&defineProperties(Constructor,staticProps);return Constructor}}();var _react=__webpack_require__(0);var _react2=_interopRequireDefault(_react);var _propTypes=__webpack_require__(4);var _propTypes2=_interopRequireDefault(_propTypes);var _eui=__webpack_require__(2);var _popover=__webpack_require__(810);var _clipboard=__webpack_require__(2090);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(self,call){if(!self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!call||"object"!==typeof call&&"function"!==typeof call?self:call}function _inherits(subClass,superClass){if("function"!==typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function, not "+typeof superClass);subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:false,writable:true,configurable:true}});superClass&&(Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass)}var WorkpadExport=exports.WorkpadExport=function(_React$PureComponent){_inherits(WorkpadExport,_React$PureComponent);function WorkpadExport(){var _ref;var _temp,_this,_ret;_classCallCheck(this,WorkpadExport);for(var _len=arguments.length,args=Array(_len),_key=0;_key<_len;_key++)args[_key]=arguments[_key];return _ret=(_temp=(_this=_possibleConstructorReturn(this,(_ref=WorkpadExport.__proto__||Object.getPrototypeOf(WorkpadExport)).call.apply(_ref,[this].concat(args))),_this),_this.exportPdf=function(){_this.props.onExport("pdf")},_this.renderControls=function(closePopover){var pdfUrl=_this.props.getExportUrl("pdf");return _react2.default.createElement("div",null,_react2.default.createElement(_eui.EuiFlexGroup,{justifyContent:"spaceAround"},_react2.default.createElement(_eui.EuiFlexItem,{grow:true},_react2.default.createElement(_eui.EuiFormRow,{label:"Click below to create a PDF. You'll be notified when the export is complete"},_react2.default.createElement(_eui.EuiButton,{onClick:function onClick(){_this.exportPdf();closePopover()}},"Export as PDF")))),_react2.default.createElement(_eui.EuiHorizontalRule,{size:"half"}),_react2.default.createElement(_eui.EuiFormRow,{label:"To generate a PDF from a script or with Watcher, use this URL."},_react2.default.createElement(_eui.EuiFlexGroup,{alignItems:"center"},_react2.default.createElement(_eui.EuiFlexItem,{style:{overflow:"auto"}},_react2.default.createElement(_eui.EuiCodeBlock,{style:{whiteSpace:"nowrap"},paddingSize:"s"},pdfUrl)),_react2.default.createElement(_eui.EuiFlexItem,{grow:false},_react2.default.createElement(_clipboard.Clipboard,{content:pdfUrl,onCopy:function onCopy(){_this.props.onCopy("pdf");closePopover()}},_react2.default.createElement(_eui.EuiButtonIcon,{"aria-label":"Copy to clipboard",iconType:"copy"}))))))},_this.renderDisabled=function(){return _react2.default.createElement("div",null,"Export to PDF is disabled. You must configure reporting to use the Chromium browser. Add this to your kibana.yml file.",_react2.default.createElement(_eui.EuiSpacer,null),_react2.default.createElement(_eui.EuiCodeBlock,{paddingSize:"s",language:"yml"},"xpack.reporting.capture.browser.type: chromium"))},_temp),_possibleConstructorReturn(_this,_ret)}_createClass(WorkpadExport,[{key:"render",value:function render(){var _this2=this;var exportControl=function exportControl(togglePopover){return _react2.default.createElement(_eui.EuiButtonIcon,{iconType:"exportAction","aria-label":"Create PDF",onClick:togglePopover})};return _react2.default.createElement(_popover.Popover,{button:exportControl,tooltip:"Export workpad",tooltipPosition:"bottom"},function(_ref2){var closePopover=_ref2.closePopover;return _react2.default.createElement(_eui.EuiFlexGroup,{justifyContent:"flexEnd"},_react2.default.createElement(_eui.EuiFlexItem,{grow:false,style:{maxWidth:"300px"}},_this2.props.enabled&&_this2.renderControls(closePopover),!_this2.props.enabled&&_this2.renderDisabled()))})}}]);return WorkpadExport}(_react2.default.PureComponent);WorkpadExport.propTypes={enabled:_propTypes2.default.bool.isRequired,onCopy:_propTypes2.default.func.isRequired,onExport:_propTypes2.default.func.isRequired,getExportUrl:_propTypes2.default.func.isRequired}},6312:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.getPdfUrl=getPdfUrl;exports.createPdf=createPdf;var _chrome=__webpack_require__(9);var _chrome2=_interopRequireDefault(_chrome);var _query_string=__webpack_require__(969);var _risonNode=__webpack_require__(244);var _risonNode2=_interopRequireDefault(_risonNode);var _fetch=__webpack_require__(1175);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var PDF_LAYOUT_TYPE="preserve_layout";function getPdfUrl(_ref,_ref2){var id=_ref.id,title=_ref.name,width=_ref.width,height=_ref.height;var pageCount=_ref2.pageCount;var reportingEntry=_chrome2.default.addBasePath("/api/reporting/generate");var canvasEntry="/app/canvas#";var workpadUrls=[];for(var i=1;i<=pageCount;i++)workpadUrls.push(_risonNode2.default.encode(canvasEntry+"/export/workpad/pdf/"+id+"/page/"+i));var jobParams={browserTimezone:"America/Phoenix",layout:{dimensions:{width:width,height:height},id:PDF_LAYOUT_TYPE},objectType:"canvas workpad",relativeUrls:workpadUrls,title:title};return reportingEntry+"/printablePdf?"+_query_string.QueryString.param("jobParams",_risonNode2.default.encode(jobParams))}function createPdf(){var createPdfUri=getPdfUrl.apply(void 0,arguments);return _fetch.fetch.post(createPdfUri)}},6313:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.FullscreenControl=void 0;var _reactRedux=__webpack_require__(19);var _transient=__webpack_require__(345);var _app=__webpack_require__(119);var _fullscreen_control=__webpack_require__(6314);var mapStateToProps=function mapStateToProps(state){return{isFullscreen:(0,_app.getFullscreen)(state)}};var mapDispatchToProps=function mapDispatchToProps(dispatch){return{setFullscreen:function setFullscreen(value){dispatch((0,_transient.setFullscreen)(value));value&&dispatch((0,_transient.selectElement)(null))}}};exports.FullscreenControl=(0,_reactRedux.connect)(mapStateToProps,mapDispatchToProps)(_fullscreen_control.FullscreenControl)},6314:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.FullscreenControl=void 0;var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;"value"in descriptor&&(descriptor.writable=true);Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){protoProps&&defineProperties(Constructor.prototype,protoProps);staticProps&&defineProperties(Constructor,staticProps);return Constructor}}();var _react=__webpack_require__(0);var _react2=_interopRequireDefault(_react);var _propTypes=__webpack_require__(4);var _propTypes2=_interopRequireDefault(_propTypes);var _reactShortcuts=__webpack_require__(813);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(self,call){if(!self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!call||"object"!==typeof call&&"function"!==typeof call?self:call}function _inherits(subClass,superClass){if("function"!==typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function, not "+typeof superClass);subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:false,writable:true,configurable:true}});superClass&&(Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass)}var FullscreenControl=exports.FullscreenControl=function(_React$PureComponent){_inherits(FullscreenControl,_React$PureComponent);function FullscreenControl(){var _ref;var _temp,_this,_ret;_classCallCheck(this,FullscreenControl);for(var _len=arguments.length,args=Array(_len),_key=0;_key<_len;_key++)args[_key]=arguments[_key];return _ret=(_temp=(_this=_possibleConstructorReturn(this,(_ref=FullscreenControl.__proto__||Object.getPrototypeOf(FullscreenControl)).call.apply(_ref,[this].concat(args))),_this),_this.toggleFullscreen=function(){var _this$props=_this.props,setFullscreen=_this$props.setFullscreen,isFullscreen=_this$props.isFullscreen;setFullscreen(!isFullscreen)},_temp),_possibleConstructorReturn(_this,_ret)}_createClass(FullscreenControl,[{key:"render",value:function render(){var _this2=this;var _props=this.props,children=_props.children,isFullscreen=_props.isFullscreen;var keyHandler=function keyHandler(action){("FULLSCREEN"===action||isFullscreen&&"FULLSCREEN_EXIT"===action)&&_this2.toggleFullscreen()};return _react2.default.createElement("span",null,_react2.default.createElement(_reactShortcuts.Shortcuts,{name:"EDITOR",handler:keyHandler,targetNodeSelector:"body",global:true,isolate:true}),children({isFullscreen:isFullscreen,toggleFullscreen:this.toggleFullscreen}))}}]);return FullscreenControl}(_react2.default.PureComponent);FullscreenControl.propTypes={setFullscreen:_propTypes2.default.func.isRequired,isFullscreen:_propTypes2.default.bool.isRequired,children:_propTypes2.default.func.isRequired}},6315:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.RefreshControl=void 0;var _reactRedux=__webpack_require__(19);var _elements=__webpack_require__(109);var _workpad=__webpack_require__(233);var _resolved_args=__webpack_require__(1165);var _workpad2=__webpack_require__(54);var _refresh_control=__webpack_require__(6316);var mapStateToProps=function mapStateToProps(state){return{inFlight:(0,_resolved_args.getInFlight)(state),refreshInterval:(0,_workpad2.getRefreshInterval)(state)}};var mapDispatchToProps={doRefresh:_elements.fetchAllRenderables,setRefreshInterval:_workpad.setRefreshInterval};exports.RefreshControl=(0,_reactRedux.connect)(mapStateToProps,mapDispatchToProps)(_refresh_control.RefreshControl)},6316:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.RefreshControl=void 0;var _react=__webpack_require__(0);var _react2=_interopRequireDefault(_react);var _propTypes=__webpack_require__(4);var _propTypes2=_interopRequireDefault(_propTypes);var _eui=__webpack_require__(2);var _popover=__webpack_require__(810);var _auto_refresh_controls=__webpack_require__(6317);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var getRefreshInterval=function getRefreshInterval(){var val=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";if(!isNaN(Number(val)))return val;var match=String(val).match(/^([0-9]{1,})([hmsd])$/);if(!match)return;switch(match[2]){case"s":return 1e3*match[1];case"m":return 1e3*match[1]*60;case"h":return 1e3*match[1]*60*60;case"d":return 1e3*match[1]*60*60*24}};var RefreshControl=exports.RefreshControl=function RefreshControl(_ref){var inFlight=_ref.inFlight,setRefreshInterval=_ref.setRefreshInterval,refreshInterval=_ref.refreshInterval,doRefresh=_ref.doRefresh;var _setRefresh=function _setRefresh(val){return setRefreshInterval(getRefreshInterval(val))};var popoverButton=function popoverButton(handleClick){return _react2.default.createElement(_eui.EuiButtonEmpty,{size:"s",onClick:handleClick},_react2.default.createElement("div",{style:{display:"flex",alignItems:"center"}},inFlight&&_react2.default.createElement(_react.Fragment,null,_react2.default.createElement(_eui.EuiLoadingSpinner,{size:"m"}),"  "),"Refresh"))};var autoRefreshControls=_react2.default.createElement(_popover.Popover,{id:"auto-refresh-popover",button:popoverButton,panelClassName:"canvasRefreshControl__popover"},function(_ref2){var closePopover=_ref2.closePopover;return _react2.default.createElement("div",null,_react2.default.createElement(_auto_refresh_controls.AutoRefreshControls,{inFlight:inFlight,refreshInterval:refreshInterval,setRefresh:function setRefresh(val){_setRefresh(val);closePopover()},doRefresh:doRefresh,disableInterval:function disableInterval(){_setRefresh(0);closePopover()}}))});return autoRefreshControls};RefreshControl.propTypes={inFlight:_propTypes2.default.bool.isRequired,doRefresh:_propTypes2.default.func.isRequired,refreshInterval:_propTypes2.default.number,setRefreshInterval:_propTypes2.default.func.isRequired}},6317:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.AutoRefreshControls=void 0;var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;"value"in descriptor&&(descriptor.writable=true);Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){protoProps&&defineProperties(Constructor.prototype,protoProps);staticProps&&defineProperties(Constructor,staticProps);return Constructor}}();var _react=__webpack_require__(0);var _react2=_interopRequireDefault(_react);var _propTypes=__webpack_require__(4);var _propTypes2=_interopRequireDefault(_propTypes);var _eui=__webpack_require__(2);var _time_duration=__webpack_require__(6318);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(self,call){if(!self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!call||"object"!==typeof call&&"function"!==typeof call?self:call}function _inherits(subClass,superClass){if("function"!==typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function, not "+typeof superClass);subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:false,writable:true,configurable:true}});superClass&&(Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass)}var AutoRefreshControls=exports.AutoRefreshControls=function(_Component){_inherits(AutoRefreshControls,_Component);function AutoRefreshControls(){var _ref;var _temp,_this,_ret;_classCallCheck(this,AutoRefreshControls);for(var _len=arguments.length,args=Array(_len),_key=0;_key<_len;_key++)args[_key]=arguments[_key];return _ret=(_temp=(_this=_possibleConstructorReturn(this,(_ref=AutoRefreshControls.__proto__||Object.getPrototypeOf(AutoRefreshControls)).call.apply(_ref,[this].concat(args))),_this),_this.refreshInput=null,_temp),_possibleConstructorReturn(_this,_ret)}_createClass(AutoRefreshControls,[{key:"render",value:function render(){var _this2=this;var _props=this.props,inFlight=_props.inFlight,refreshInterval=_props.refreshInterval,setRefresh=_props.setRefresh,doRefresh=_props.doRefresh,disableInterval=_props.disableInterval;return _react2.default.createElement("div",null,_react2.default.createElement(_eui.EuiFlexGroup,{alignItems:"center",justifyContent:"spaceAround",gutterSize:"xs"},_react2.default.createElement(_eui.EuiFlexItem,null,_react2.default.createElement(_eui.EuiDescriptionList,{textStyle:"reverse"},_react2.default.createElement(_eui.EuiDescriptionListTitle,null,"Refresh this page"),_react2.default.createElement(_eui.EuiDescriptionListDescription,null,refreshInterval>0?_react2.default.createElement(_react.Fragment,null,_react2.default.createElement("span",null,"Every ",(0,_time_duration.timeDurationString)(refreshInterval)),_react2.default.createElement("div",null,_react2.default.createElement(_eui.EuiLink,{size:"s",onClick:disableInterval},"Disable auto-refresh"))):_react2.default.createElement("span",null,"Manually")))),_react2.default.createElement(_eui.EuiFlexItem,{grow:false},_react2.default.createElement(_eui.EuiButton,{size:"s",fill:true,iconType:"refresh",onClick:doRefresh,isDisabled:inFlight},"Refresh"))),_react2.default.createElement(_eui.EuiHorizontalRule,{margin:"m"}),_react2.default.createElement(_eui.EuiFormLabel,null,"Change auto-refresh interval"),_react2.default.createElement(_eui.EuiSpacer,{size:"s"}),_react2.default.createElement(_eui.EuiText,{size:"s"},_react2.default.createElement(_eui.EuiFlexGrid,{gutterSize:"s",columns:2},_react2.default.createElement(_eui.EuiFlexItem,null,_react2.default.createElement(_eui.EuiLink,{onClick:function onClick(){return setRefresh(5e3)}},"5 Seconds")),_react2.default.createElement(_eui.EuiFlexItem,null,_react2.default.createElement(_eui.EuiLink,{onClick:function onClick(){return setRefresh(15e3)}},"15 Seconds")),_react2.default.createElement(_eui.EuiFlexItem,null,_react2.default.createElement(_eui.EuiLink,{onClick:function onClick(){return setRefresh(3e4)}},"30 Seconds")),_react2.default.createElement(_eui.EuiFlexItem,null,_react2.default.createElement(_eui.EuiLink,{onClick:function onClick(){return setRefresh(6e4)}},"1 Minute")),_react2.default.createElement(_eui.EuiFlexItem,null,_react2.default.createElement(_eui.EuiLink,{onClick:function onClick(){return setRefresh(3e5)}},"5 Minutes")),_react2.default.createElement(_eui.EuiFlexItem,null,_react2.default.createElement(_eui.EuiLink,{onClick:function onClick(){return setRefresh(9e5)}},"15 Minutes")),_react2.default.createElement(_eui.EuiFlexItem,null,_react2.default.createElement(_eui.EuiLink,{onClick:function onClick(){return setRefresh(18e5)}},"30 Minutes")),_react2.default.createElement(_eui.EuiFlexItem,null,_react2.default.createElement(_eui.EuiLink,{onClick:function onClick(){return setRefresh(36e5)}},"1 Hour")),_react2.default.createElement(_eui.EuiFlexItem,null,_react2.default.createElement(_eui.EuiLink,{onClick:function onClick(){return setRefresh(72e5)}},"2 Hours")),_react2.default.createElement(_eui.EuiFlexItem,null,_react2.default.createElement(_eui.EuiLink,{onClick:function onClick(){return setRefresh(216e5)}},"6 Hours")),_react2.default.createElement(_eui.EuiFlexItem,null,_react2.default.createElement(_eui.EuiLink,{onClick:function onClick(){return setRefresh(432e5)}},"12 Hours")),_react2.default.createElement(_eui.EuiFlexItem,null,_react2.default.createElement(_eui.EuiLink,{onClick:function onClick(){return setRefresh(864e5)}},"24 Hours")))),_react2.default.createElement(_eui.EuiSpacer,{size:"m"}),_react2.default.createElement("form",{onSubmit:function onSubmit(ev){ev.preventDefault();setRefresh(_this2.refreshInput.value)}},_react2.default.createElement(_eui.EuiFlexGroup,{gutterSize:"s"},_react2.default.createElement(_eui.EuiFlexItem,null,_react2.default.createElement(_eui.EuiFormRow,{label:"Set a custom interval",helpText:"Use shorthand notation, like 30s, 10m, or 1h",compressed:true},_react2.default.createElement(_eui.EuiFieldText,{inputRef:function inputRef(i){return _this2.refreshInput=i}}))),_react2.default.createElement(_eui.EuiFlexItem,{grow:false},_react2.default.createElement(_eui.EuiFormRow,{label:" "},_react2.default.createElement(_eui.EuiButton,{size:"s",type:"submit",style:{minWidth:"auto"}},"Set"))))))}}]);return AutoRefreshControls}(_react.Component);AutoRefreshControls.propTypes={inFlight:_propTypes2.default.bool.isRequired,refreshInterval:_propTypes2.default.number,setRefresh:_propTypes2.default.func.isRequired,disableInterval:_propTypes2.default.func.isRequired,doRefresh:_propTypes2.default.func.isRequired}},6318:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var getLabel=function getLabel(label,val){return val>1||0===val?label+"s":label};var timeDuration=exports.timeDuration=function timeDuration(time,format){var seconds=time/1e3;var minutes=seconds/60;var hours=minutes/60;var days=hours/24;if("days"===format||days>=1)return{length:days,format:getLabel("day",days)};if("hours"===format||hours>=1)return{length:hours,format:getLabel("hour",hours)};if("minutes"===format||minutes>=1)return{length:seconds/60,format:getLabel("minute",minutes)};return{length:seconds,format:getLabel("second",seconds)}};exports.timeDurationString=function timeDurationString(time,format){var _timeDuration=timeDuration(time,format),length=_timeDuration.length,fmt=_timeDuration.format;return length+" "+fmt}},6319:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var _routes=__webpack_require__(6320);Object.defineProperty(exports,"routes",{enumerable:true,get:function get(){return _routes.routes}});var _export=__webpack_require__(2092);Object.defineProperty(exports,"ExportApp",{enumerable:true,get:function get(){return _export.ExportApp}})},632:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var _extends=Object.assign||function(target){for(var i=1;i<arguments.length;i++){var source=arguments[i];for(var key in source)Object.prototype.hasOwnProperty.call(source,key)&&(target[key]=source[key])}return target};exports.create=create;exports.get=get;exports.update=update;exports.remove=remove;exports.find=find;var _chrome=__webpack_require__(9);var _chrome2=_interopRequireDefault(_chrome);var _constants=__webpack_require__(633);var _fetch=__webpack_require__(1175);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var basePath=_chrome2.default.getBasePath();var apiPath=""+basePath+_constants.API_ROUTE_WORKPAD;function create(workpad){return _fetch.fetch.post(apiPath,_extends({},workpad,{assets:workpad.assets||{}}))}function get(workpadId){return _fetch.fetch.get(apiPath+"/"+workpadId).then(function(_ref){var workpad=_ref.data;return workpad})}function update(id,workpad){return _fetch.fetch.put(apiPath+"/"+id,workpad)}function remove(id){return _fetch.fetch.delete(apiPath+"/"+id)}function find(searchTerm){var validSearchTerm="string"===typeof searchTerm&&searchTerm.length>0;return _fetch.fetch.get(apiPath+"/find?name="+(validSearchTerm?searchTerm:"")+"&perPage=10000").then(function(_ref2){var workpads=_ref2.data;return workpads})}},6320:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.routes=void 0;var _workpad_service=__webpack_require__(632);var workpadService=_interopRequireWildcard(_workpad_service);var _workpad=__webpack_require__(233);var _elements=__webpack_require__(109);var _pages=__webpack_require__(441);var _assets=__webpack_require__(442);var _export=__webpack_require__(2092);function _interopRequireWildcard(obj){if(obj&&obj.__esModule)return obj;var newObj={};if(null!=obj)for(var key in obj)Object.prototype.hasOwnProperty.call(obj,key)&&(newObj[key]=obj[key]);newObj.default=obj;return newObj}function _objectWithoutProperties(obj,keys){var target={};for(var i in obj){if(keys.indexOf(i)>=0)continue;if(!Object.prototype.hasOwnProperty.call(obj,i))continue;target[i]=obj[i]}return target}function _asyncToGenerator(fn){return function(){var gen=fn.apply(this,arguments);return new Promise(function(resolve,reject){function step(key,arg){try{var info=gen[key](arg);var value=info.value}catch(error){reject(error);return}if(!info.done)return Promise.resolve(value).then(function(value){step("next",value)},function(err){step("throw",err)});resolve(value)}return step("next")})}}var routes=[{path:"/export/workpad",children:[{name:"exportWorkpad",path:"/pdf/:id/page/:page",action:function action(dispatch){return _ref2=_asyncToGenerator(regeneratorRuntime.mark(function _callee(_ref){var params=_ref.params,router=_ref.router;var fetchedWorkpad,pageNumber,assets,workpad;return regeneratorRuntime.wrap(function _callee$(_context){while(1)switch(_context.prev=_context.next){case 0:_context.next=2;return workpadService.get(params.id);case 2:fetchedWorkpad=_context.sent;pageNumber=parseInt(params.page,10);if(!(null==fetchedWorkpad&&isNaN(pageNumber))){_context.next=6;break}return _context.abrupt("return",router.redirectTo("home"));case 6:assets=fetchedWorkpad.assets,workpad=_objectWithoutProperties(fetchedWorkpad,["assets"]);dispatch((0,_assets.setAssets)(assets));dispatch((0,_workpad.setWorkpad)(workpad,{loadPages:false}));dispatch((0,_pages.setPage)(pageNumber-1));dispatch((0,_elements.fetchAllRenderables)({onlyActivePage:true}));case 11:case"end":return _context.stop()}},_callee,void 0)})),function(_x){return _ref2.apply(this,arguments)};var _ref2},meta:{component:_export.ExportApp}}]}];exports.routes=routes},6321:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.LoadWorkpad=void 0;var _react=__webpack_require__(0);var _react2=_interopRequireDefault(_react);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}exports.LoadWorkpad=function LoadWorkpad(){return _react2.default.createElement("div",null,"Load a workpad...")}},6322:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.ExportApp=void 0;var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;"value"in descriptor&&(descriptor.writable=true);Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){protoProps&&defineProperties(Constructor.prototype,protoProps);staticProps&&defineProperties(Constructor,staticProps);return Constructor}}();var _react=__webpack_require__(0);var _react2=_interopRequireDefault(_react);var _propTypes=__webpack_require__(4);var _propTypes2=_interopRequireDefault(_propTypes);var _workpad_page=__webpack_require__(2089);var _link=__webpack_require__(1178);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(self,call){if(!self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!call||"object"!==typeof call&&"function"!==typeof call?self:call}function _inherits(subClass,superClass){if("function"!==typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function, not "+typeof superClass);subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:false,writable:true,configurable:true}});superClass&&(Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass)}var ExportApp=exports.ExportApp=function(_React$PureComponent){_inherits(ExportApp,_React$PureComponent);function ExportApp(){_classCallCheck(this,ExportApp);return _possibleConstructorReturn(this,(ExportApp.__proto__||Object.getPrototypeOf(ExportApp)).apply(this,arguments))}_createClass(ExportApp,[{key:"componentDidMount",value:function componentDidMount(){this.props.initializeWorkpad()}},{key:"render",value:function render(){var _props=this.props,workpad=_props.workpad,selectedPageId=_props.selectedPageId;var pages=workpad.pages,height=workpad.height,width=workpad.width;var activePage=pages.find(function(page){return page.id===selectedPageId});return _react2.default.createElement("div",{className:"canvasExport"},_react2.default.createElement("div",{className:"canvasExport__stage"},_react2.default.createElement("div",{className:"canvasLayout__stageHeader"},_react2.default.createElement(_link.Link,{name:"loadWorkpad",params:{id:this.props.workpad.id}},"Edit Workpad")),_react2.default.createElement("div",{className:"canvasExport__stageContent"},_react2.default.createElement(_workpad_page.WorkpadPage,{isSelected:true,page:activePage,height:height,width:width}))))}}]);return ExportApp}(_react2.default.PureComponent);ExportApp.propTypes={workpad:_propTypes2.default.shape({id:_propTypes2.default.string.isRequired,pages:_propTypes2.default.array.isRequired}).isRequired,selectedPageId:_propTypes2.default.string.isRequired,initializeWorkpad:_propTypes2.default.func.isRequired}},6323:function(module,exports,__webpack_require__){var __WEBPACK_AMD_DEFINE_RESULT__;var LZString=function(){var f=String.fromCharCode;var keyStrBase64="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";var keyStrUriSafe="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+-$";var baseReverseDic={};function getBaseValue(alphabet,character){if(!baseReverseDic[alphabet]){baseReverseDic[alphabet]={};for(var i=0;i<alphabet.length;i++)baseReverseDic[alphabet][alphabet.charAt(i)]=i}return baseReverseDic[alphabet][character]}var LZString={compressToBase64:function(input){if(null==input)return"";var res=LZString._compress(input,6,function(a){return keyStrBase64.charAt(a)});switch(res.length%4){default:case 0:return res;case 1:return res+"===";case 2:return res+"==";case 3:return res+"="}},decompressFromBase64:function(input){if(null==input)return"";if(""==input)return null;return LZString._decompress(input.length,32,function(index){return getBaseValue(keyStrBase64,input.charAt(index))})},compressToUTF16:function(input){if(null==input)return"";return LZString._compress(input,15,function(a){return f(a+32)})+" "},decompressFromUTF16:function(compressed){if(null==compressed)return"";if(""==compressed)return null;return LZString._decompress(compressed.length,16384,function(index){return compressed.charCodeAt(index)-32})},compressToUint8Array:function(uncompressed){var compressed=LZString.compress(uncompressed);var buf=new Uint8Array(2*compressed.length);for(var i=0,TotalLen=compressed.length;i<TotalLen;i++){var current_value=compressed.charCodeAt(i);buf[2*i]=current_value>>>8;buf[2*i+1]=current_value%256}return buf},decompressFromUint8Array:function(compressed){if(null===compressed||void 0===compressed)return LZString.decompress(compressed);var buf=new Array(compressed.length/2);for(var i=0,TotalLen=buf.length;i<TotalLen;i++)buf[i]=256*compressed[2*i]+compressed[2*i+1];var result=[];buf.forEach(function(c){result.push(f(c))});return LZString.decompress(result.join(""))},compressToEncodedURIComponent:function(input){if(null==input)return"";return LZString._compress(input,6,function(a){return keyStrUriSafe.charAt(a)})},decompressFromEncodedURIComponent:function(input){if(null==input)return"";if(""==input)return null;input=input.replace(/ /g,"+");return LZString._decompress(input.length,32,function(index){return getBaseValue(keyStrUriSafe,input.charAt(index))})},compress:function(uncompressed){return LZString._compress(uncompressed,16,function(a){return f(a)})},_compress:function(uncompressed,bitsPerChar,getCharFromInt){if(null==uncompressed)return"";var i,value,ii,context_dictionary={},context_dictionaryToCreate={},context_c="",context_wc="",context_w="",context_enlargeIn=2,context_dictSize=3,context_numBits=2,context_data=[],context_data_val=0,context_data_position=0;for(ii=0;ii<uncompressed.length;ii+=1){context_c=uncompressed.charAt(ii);if(!Object.prototype.hasOwnProperty.call(context_dictionary,context_c)){context_dictionary[context_c]=context_dictSize++;context_dictionaryToCreate[context_c]=true}context_wc=context_w+context_c;if(Object.prototype.hasOwnProperty.call(context_dictionary,context_wc))context_w=context_wc;else{if(Object.prototype.hasOwnProperty.call(context_dictionaryToCreate,context_w)){if(context_w.charCodeAt(0)<256){for(i=0;i<context_numBits;i++){context_data_val<<=1;if(context_data_position==bitsPerChar-1){context_data_position=0;context_data.push(getCharFromInt(context_data_val));context_data_val=0}else context_data_position++}value=context_w.charCodeAt(0);for(i=0;i<8;i++){context_data_val=context_data_val<<1|1&value;if(context_data_position==bitsPerChar-1){context_data_position=0;context_data.push(getCharFromInt(context_data_val));context_data_val=0}else context_data_position++;value>>=1}}else{value=1;for(i=0;i<context_numBits;i++){context_data_val=context_data_val<<1|value;if(context_data_position==bitsPerChar-1){context_data_position=0;context_data.push(getCharFromInt(context_data_val));context_data_val=0}else context_data_position++;value=0}value=context_w.charCodeAt(0);for(i=0;i<16;i++){context_data_val=context_data_val<<1|1&value;if(context_data_position==bitsPerChar-1){context_data_position=0;context_data.push(getCharFromInt(context_data_val));context_data_val=0}else context_data_position++;value>>=1}}context_enlargeIn--;if(0==context_enlargeIn){context_enlargeIn=Math.pow(2,context_numBits);context_numBits++}delete context_dictionaryToCreate[context_w]}else{value=context_dictionary[context_w];for(i=0;i<context_numBits;i++){context_data_val=context_data_val<<1|1&value;if(context_data_position==bitsPerChar-1){context_data_position=0;context_data.push(getCharFromInt(context_data_val));context_data_val=0}else context_data_position++;value>>=1}}context_enlargeIn--;if(0==context_enlargeIn){context_enlargeIn=Math.pow(2,context_numBits);context_numBits++}context_dictionary[context_wc]=context_dictSize++;context_w=String(context_c)}}if(""!==context_w){if(Object.prototype.hasOwnProperty.call(context_dictionaryToCreate,context_w)){if(context_w.charCodeAt(0)<256){for(i=0;i<context_numBits;i++){context_data_val<<=1;if(context_data_position==bitsPerChar-1){context_data_position=0;context_data.push(getCharFromInt(context_data_val));context_data_val=0}else context_data_position++}value=context_w.charCodeAt(0);for(i=0;i<8;i++){context_data_val=context_data_val<<1|1&value;if(context_data_position==bitsPerChar-1){context_data_position=0;context_data.push(getCharFromInt(context_data_val));context_data_val=0}else context_data_position++;value>>=1}}else{value=1;for(i=0;i<context_numBits;i++){context_data_val=context_data_val<<1|value;if(context_data_position==bitsPerChar-1){context_data_position=0;context_data.push(getCharFromInt(context_data_val));context_data_val=0}else context_data_position++;value=0}value=context_w.charCodeAt(0);for(i=0;i<16;i++){context_data_val=context_data_val<<1|1&value;if(context_data_position==bitsPerChar-1){context_data_position=0;context_data.push(getCharFromInt(context_data_val));context_data_val=0}else context_data_position++;value>>=1}}context_enlargeIn--;if(0==context_enlargeIn){context_enlargeIn=Math.pow(2,context_numBits);context_numBits++}delete context_dictionaryToCreate[context_w]}else{value=context_dictionary[context_w];for(i=0;i<context_numBits;i++){context_data_val=context_data_val<<1|1&value;if(context_data_position==bitsPerChar-1){context_data_position=0;context_data.push(getCharFromInt(context_data_val));context_data_val=0}else context_data_position++;value>>=1}}context_enlargeIn--;if(0==context_enlargeIn){context_enlargeIn=Math.pow(2,context_numBits);context_numBits++}}value=2;for(i=0;i<context_numBits;i++){context_data_val=context_data_val<<1|1&value;if(context_data_position==bitsPerChar-1){context_data_position=0;context_data.push(getCharFromInt(context_data_val));context_data_val=0}else context_data_position++;value>>=1}while(true){context_data_val<<=1;if(context_data_position==bitsPerChar-1){context_data.push(getCharFromInt(context_data_val));break}context_data_position++}return context_data.join("")},decompress:function(compressed){if(null==compressed)return"";if(""==compressed)return null;return LZString._decompress(compressed.length,32768,function(index){return compressed.charCodeAt(index)})},_decompress:function(length,resetValue,getNextValue){var i,w,bits,resb,maxpower,power,c,dictionary=[],enlargeIn=4,dictSize=4,numBits=3,entry="",result=[],data={val:getNextValue(0),position:resetValue,index:1};for(i=0;i<3;i+=1)dictionary[i]=i;bits=0;maxpower=Math.pow(2,2);power=1;while(power!=maxpower){resb=data.val&data.position;data.position>>=1;if(0==data.position){data.position=resetValue;data.val=getNextValue(data.index++)}bits|=(resb>0?1:0)*power;power<<=1}switch(bits){case 0:bits=0;maxpower=Math.pow(2,8);power=1;while(power!=maxpower){resb=data.val&data.position;data.position>>=1;if(0==data.position){data.position=resetValue;data.val=getNextValue(data.index++)}bits|=(resb>0?1:0)*power;power<<=1}c=f(bits);break;case 1:bits=0;maxpower=Math.pow(2,16);power=1;while(power!=maxpower){resb=data.val&data.position;data.position>>=1;if(0==data.position){data.position=resetValue;data.val=getNextValue(data.index++)}bits|=(resb>0?1:0)*power;power<<=1}c=f(bits);break;case 2:return""}dictionary[3]=c;w=c;result.push(c);while(true){if(data.index>length)return"";bits=0;maxpower=Math.pow(2,numBits);power=1;while(power!=maxpower){resb=data.val&data.position;data.position>>=1;if(0==data.position){data.position=resetValue;data.val=getNextValue(data.index++)}bits|=(resb>0?1:0)*power;power<<=1}switch(c=bits){case 0:bits=0;maxpower=Math.pow(2,8);power=1;while(power!=maxpower){resb=data.val&data.position;data.position>>=1;if(0==data.position){data.position=resetValue;data.val=getNextValue(data.index++)}bits|=(resb>0?1:0)*power;power<<=1}dictionary[dictSize++]=f(bits);c=dictSize-1;enlargeIn--;break;case 1:bits=0;maxpower=Math.pow(2,16);power=1;while(power!=maxpower){resb=data.val&data.position;data.position>>=1;if(0==data.position){data.position=resetValue;data.val=getNextValue(data.index++)}bits|=(resb>0?1:0)*power;power<<=1}dictionary[dictSize++]=f(bits);c=dictSize-1;enlargeIn--;break;case 2:return result.join("")}if(0==enlargeIn){enlargeIn=Math.pow(2,numBits);numBits++}if(dictionary[c])entry=dictionary[c];else{if(c!==dictSize)return null;entry=w+w.charAt(0)}result.push(entry);dictionary[dictSize++]=w+entry.charAt(0);enlargeIn--;w=entry;if(0==enlargeIn){enlargeIn=Math.pow(2,numBits);numBits++}}}};return LZString}();true;!(__WEBPACK_AMD_DEFINE_RESULT__=function(){return LZString}.call(exports,__webpack_require__,exports,module),void 0!==__WEBPACK_AMD_DEFINE_RESULT__&&(module.exports=__WEBPACK_AMD_DEFINE_RESULT__))},6324:function(module,exports,__webpack_require__){0,factory=function(locationUtils,PathUtils,_createTransitionManager,DOMUtils){"use strict";locationUtils=locationUtils&&locationUtils.hasOwnProperty("default")?locationUtils["default"]:locationUtils;PathUtils=PathUtils&&PathUtils.hasOwnProperty("default")?PathUtils["default"]:PathUtils;_createTransitionManager=_createTransitionManager&&_createTransitionManager.hasOwnProperty("default")?_createTransitionManager["default"]:_createTransitionManager;DOMUtils=DOMUtils&&DOMUtils.hasOwnProperty("default")?DOMUtils["default"]:DOMUtils;var createLocation=locationUtils.createLocation,locationsAreEqual=locationUtils.locationsAreEqual;var addLeadingSlash=PathUtils.addLeadingSlash,stripLeadingSlash=PathUtils.stripLeadingSlash,stripTrailingSlash=PathUtils.stripTrailingSlash,hasBasename=PathUtils.hasBasename,stripBasename=PathUtils.stripBasename,createPath=PathUtils.createPath;var canUseDOM=DOMUtils.canUseDOM,addEventListener=DOMUtils.addEventListener,removeEventListener=DOMUtils.removeEventListener,getConfirmation=DOMUtils.getConfirmation,supportsGoWithoutReloadUsingHash=DOMUtils.supportsGoWithoutReloadUsingHash,supportsHistory=DOMUtils.supportsHistory;var createTransitionManager=Object.hasOwnProperty.call(_createTransitionManager,"default")?_createTransitionManager.default:_createTransitionManager;function warning(condition,message){if(condition)return;console.warn(message)}function invariant(condition,message){if(condition)return;throw new Error("Invariant failed: ".concat(message||""))}var PopStateEvent="popstate";var HashChangeEvent="hashchange";var getHistoryState=function getHistoryState(){try{return window.history.state||{}}catch(e){return{}}};var HashPathCoders={hashbang:{encodePath:function encodePath(path){return"!"===path.charAt(0)?path:"!/".concat(stripLeadingSlash(path))},decodePath:function decodePath(path){return"!"===path.charAt(0)?path.substr(1):path}},noslash:{encodePath:stripLeadingSlash,decodePath:addLeadingSlash},slash:{encodePath:addLeadingSlash,decodePath:addLeadingSlash}};var getHashPath=function getHashPath(){var href=window.location.href;var hashIndex=href.indexOf("#");return-1===hashIndex?"":href.substring(hashIndex+1)};var pushHashPath=function pushHashPath(path){window.location.hash=path};var replaceHashPath=function replaceHashPath(path){var hashIndex=window.location.href.indexOf("#");window.location.replace("".concat(window.location.href.slice(0,hashIndex>=0?hashIndex:0),"#").concat(path))};var createHashStateHistory=function createHashStateHistory(){var props=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};invariant(canUseDOM,"Hash history needs a DOM");var globalHistory=window.history;var canGoWithoutReload=supportsGoWithoutReloadUsingHash();var canUseHistory=supportsHistory();var _props$getUserConfirm=props.getUserConfirmation,getUserConfirmation=void 0===_props$getUserConfirm?getConfirmation:_props$getUserConfirm,_props$hashType=props.hashType,hashType=void 0===_props$hashType?"slash":_props$hashType,_props$keyLength=props.keyLength,keyLength=void 0===_props$keyLength?6:_props$keyLength;var basename=props.basename?stripTrailingSlash(addLeadingSlash(props.basename)):"";var _HashPathCoders$hashT=HashPathCoders[hashType],encodePath=_HashPathCoders$hashT.encodePath,decodePath=_HashPathCoders$hashT.decodePath;var getDOMLocation=function getDOMLocation(){var _getHistoryState=getHistoryState(),key=_getHistoryState.key,state=_getHistoryState.state;var path=decodePath(getHashPath());warning(!basename||hasBasename(path,basename),"".concat('You are attempting to use a basename on a page whose URL path does not begin with the basename. Expected path "').concat(path,'" to begin with "').concat(basename,'".'));basename&&(path=stripBasename(path,basename));return createLocation(path,state,key)};var createKey=function createKey(){return Math.random().toString(36).substr(2,keyLength)};var transitionManager=createTransitionManager();var setState=function setState(nextState){Object.assign(history,nextState);history.length=globalHistory.length;transitionManager.notifyListeners(history.location,history.action)};var forceNextPop=false;var ignorePath=null;var handleHashChange=function handleHashChange(){var path=getHashPath();var encodedPath=encodePath(path);if(path!==encodedPath)replaceHashPath(encodedPath);else{var location=getDOMLocation();var prevLocation=history.location;if(!forceNextPop&&locationsAreEqual(prevLocation,location))return;if(ignorePath===createPath(location))return;ignorePath=null;handlePop(location)}};var handlePop=function handlePop(location){if(forceNextPop){forceNextPop=false;setState()}else{var action="POP";transitionManager.confirmTransitionTo(location,action,getUserConfirmation,function(ok){ok?setState({action:action,location:location}):revertPop(location)})}};var revertPop=function revertPop(fromLocation){var toLocation=history.location;var toIndex=allPaths.lastIndexOf(createPath(toLocation));-1===toIndex&&(toIndex=0);var fromIndex=allPaths.lastIndexOf(createPath(fromLocation));-1===fromIndex&&(fromIndex=0);var delta=toIndex-fromIndex;if(delta){forceNextPop=true;go(delta)}};var path=getHashPath();var encodedPath=encodePath(path);path!==encodedPath&&replaceHashPath(encodedPath);var initialLocation=getDOMLocation();var allPaths=[createPath(initialLocation)];var createHref=function createHref(location){return"#".concat(encodePath(basename+createPath(location)))};var push=function push(path,state){var action="PUSH";var location=createLocation(path,state,createKey(),history.location);transitionManager.confirmTransitionTo(location,action,getUserConfirmation,function(ok){if(!ok)return;var path=createPath(location);var encodedPath=encodePath(basename+path);if(canUseHistory){var key=location.key,_state=location.state;var href=createHref(location);globalHistory.pushState({key:key,state:_state},null,href)}else{ignorePath=path;var hashChanged=getHashPath()!==encodedPath;if(hashChanged){warning(false,"Hash history cannot PUSH the same path; a new entry will not be added to the history stack");setState()}else warning(void 0===state,"Browser history cannot push state in browsers that do not support HTML5 history, state is ignored");pushHashPath(encodedPath)}var prevIndex=allPaths.lastIndexOf(createPath(history.location));var nextPaths=allPaths.slice(0,-1===prevIndex?0:prevIndex+1);nextPaths.push(path);allPaths=nextPaths;setState({action:action,location:location})})};var replace=function replace(path,state){var action="REPLACE";var location=createLocation(path,state,createKey(),history.location);transitionManager.confirmTransitionTo(location,action,getUserConfirmation,function(ok){if(!ok)return;var path=createPath(location);var encodedPath=encodePath(basename+path);if(canUseHistory){var key=location.key,_state2=location.state;var href=createHref(location);globalHistory.replaceState({key:key,state:_state2},null,href)}else{warning(void 0===state,"Browser history cannot push state in browsers that do not support HTML5 history, state is ignored");var hashChanged=getHashPath()!==encodedPath;if(hashChanged){ignorePath=path;replaceHashPath(encodedPath)}}var prevIndex=allPaths.indexOf(createPath(history.location));-1!==prevIndex&&(allPaths[prevIndex]=path);setState({action:action,location:location})})};var go=function go(n){warning(canGoWithoutReload,"Hash history go(n) causes a full page reload in this browser");globalHistory.go(n)};var goBack=function goBack(){return go(-1)};var goForward=function goForward(){return go(1)};var listenerCount=0;var checkDOMListeners=function checkDOMListeners(delta){listenerCount+=delta;var eventType=canUseHistory?PopStateEvent:HashChangeEvent;1===listenerCount?addEventListener(window,eventType,handleHashChange):0===listenerCount&&removeEventListener(window,eventType,handleHashChange)};var isBlocked=false;var block=function block(){var prompt=arguments.length>0&&void 0!==arguments[0]&&arguments[0];var unblock=transitionManager.setPrompt(prompt);if(!isBlocked){checkDOMListeners(1);isBlocked=true}return function(){if(isBlocked){isBlocked=false;checkDOMListeners(-1)}return unblock()}};var listen=function listen(listener){var unlisten=transitionManager.appendListener(listener);checkDOMListeners(1);return function(){checkDOMListeners(-1);unlisten()}};var history={length:globalHistory.length,action:"POP",location:initialLocation,createHref:createHref,push:push,replace:replace,go:go,goBack:goBack,goForward:goForward,block:block,listen:listen};return history};return createHashStateHistory},void(module.exports=factory(__webpack_require__(626),__webpack_require__(519),__webpack_require__(793),__webpack_require__(1138)));var factory},6325:function(module,exports,__webpack_require__){
/*!
 * @scant/router v0.1.0
 * (c) 2018-present Joe Fleming (https://github.com/w33ble)
 * Released under the MIT License.
 */
!(0,e=function(r){"use strict";r=r&&r.hasOwnProperty("default")?r.default:r;var e=function(r,e){return"object"===r?"object"==typeof e&&null!=e&&!Array.isArray(e):"array"===r?Array.isArray(e):"null"===r?null===e:"unset"===r?null==e:typeof e===r},n=function(r){return/^\//.test(r)},t=function(){};var a=function(r){if(!e("object",r))return!1;var n,t,a=e("unset",r.action)||e("function",r.action),i=e("unset",r.children)||e("array",r.children),o=e("unset",r.meta)||e("object",r.meta);return n=r,t="path",Object.prototype.hasOwnProperty.call(n,t)&&a&&i&&o},i=function(r,e){if(void 0===e&&(e=""),!n(r))return!1;var t=""+e.replace(/\/$/,"")+r;return t.length>1?t.replace(/\/$/,""):t},o=function(r){var e=r.match(/^(\/[^?#\s]*)(\?[^#\s]*)?(#[^\s]*)?$/);if(!e)throw new Error("Failed to extract pathname: "+r);return{url:e[0],pathname:e[1],search:e[2],hash:e[3]}},u=function(r){return{path:r.path,name:r.name,meta:r.meta}};return function(s,c){if(void 0===c&&(c={}),!e("array",s))throw new Error("An array of route objects is required");var f=c.useHash?"#":c.useHashBang?"#!":"",h=n(c.basepath)?i(c.basepath):"",p={configs:[],parsers:[],names:[]};function m(r){return p.parsers.reduce(function(e,n,t){if(!1!==e)return e;var a=n.match(r);return a?Object.assign({},p.configs[t],{params:a,index:t}):e},!1)}return s.forEach(function(n){(function n(o,u){if(void 0===u&&(u=""),!a(o))throw new Error("Route definition is invalid: "+JSON.stringify(o));var s=i(o.path,u);if(!1===s)throw new Error("Route's path is invalid: "+o.path);return e("array",o.children)?o.children.reduce(function(r,e){return r.concat(n(e,s))},[]):[{name:o.name,path:s,meta:o.meta||{},action:o.action||t,parser:new r(s,{segmentNameCharset:"a-zA-Z0-9_-",segmentValueCharset:"a-zA-Z0-9-_~ %."})}]})(n).forEach(function(r){var e=r.parser,n=function(r,e){var n={};for(var t in r)e.indexOf(t)>=0||Object.prototype.hasOwnProperty.call(r,t)&&(n[t]=r[t]);return n}(r,["parser"]);if(null!=n.name&&p.names.includes(n.name))throw new Error("Route with name '"+n.name+"' already defined, names must be unique");p.parsers.push(e),p.configs.push(n),p.names.push(n.name)})}),{match:function(r){var e=m(o(r).pathname);return!1!==e&&u(e)},parse:function(r){return new Promise(function(e,n){var t,a,i;return t=o(r),!1===(a=m(t.pathname))?n(new Error("No matching route found: "+r)):(Object.keys(a.params).forEach(function(r){var e=parseFloat(a.params[r]);Number.isNaN(e)||(a.params[r]=e)}),i={location:t,params:a.params,match:u(a),router:this},Promise.resolve(a.action(i)).then(function(r){try{return e(i)}catch(r){return n(r)}}.bind(this),n))}.bind(this))},create:function(r,e){if(void 0===e&&(e={}),null==r)return!1;if(n(r))return""+f+h+r;if(!p.names.includes(r))return!1;var t=p.configs.findIndex(function(e){return e.name===r});try{var a=p.parsers[t].stringify(e);return""+f+h+a}catch(r){throw r.message="Route can not be created, "+r.message,r}}}}},void(module.exports=e(__webpack_require__(6326))));var e},6326:function(module,exports,__webpack_require__){var __WEBPACK_AMD_DEFINE_FACTORY__,__WEBPACK_AMD_DEFINE_ARRAY__,__WEBPACK_AMD_DEFINE_RESULT__;var slice=[].slice;root=this,factory=function(){var P,UrlPattern,astNodeContainsSegmentsForProvidedParams,astNodeToNames,astNodeToRegexString,baseAstNodeToRegexString,concatMap,defaultOptions,escapeForRegex,getParam,keysAndValuesToObject,newParser,regexGroupCount,stringConcatMap,stringify;escapeForRegex=function(string){return string.replace(/[-\/\\^$*+?.()|[\]{}]/g,"\\$&")};concatMap=function(array,f){var i,length,results;results=[];i=-1;length=array.length;while(++i<length)results=results.concat(f(array[i]));return results};stringConcatMap=function(array,f){var i,length,result;result="";i=-1;length=array.length;while(++i<length)result+=f(array[i]);return result};regexGroupCount=function(regex){return new RegExp(regex.toString()+"|").exec("").length-1};keysAndValuesToObject=function(keys,values){var i,key,length,object,value;object={};i=-1;length=keys.length;while(++i<length){key=keys[i];value=values[i];if(null==value)continue;if(null!=object[key]){Array.isArray(object[key])||(object[key]=[object[key]]);object[key].push(value)}else object[key]=value}return object};P={};P.Result=function(value,rest){this.value=value;this.rest=rest};P.Tagged=function(tag,value){this.tag=tag;this.value=value};P.tag=function(tag,parser){return function(input){var result,tagged;result=parser(input);if(null==result)return;tagged=new P.Tagged(tag,result.value);return new P.Result(tagged,result.rest)}};P.regex=function(regex){return function(input){var matches,result;matches=regex.exec(input);if(null==matches)return;result=matches[0];return new P.Result(result,input.slice(result.length))}};P.sequence=function(){var parsers;parsers=1<=arguments.length?slice.call(arguments,0):[];return function(input){var i,length,parser,rest,result,values;i=-1;length=parsers.length;values=[];rest=input;while(++i<length){parser=parsers[i];result=parser(rest);if(null==result)return;values.push(result.value);rest=result.rest}return new P.Result(values,rest)}};P.pick=function(){var indexes,parsers;indexes=arguments[0],parsers=2<=arguments.length?slice.call(arguments,1):[];return function(input){var array,result;result=P.sequence.apply(P,parsers)(input);if(null==result)return;array=result.value;result.value=array[indexes];return result}};P.string=function(string){var length;length=string.length;return function(input){if(input.slice(0,length)===string)return new P.Result(string,input.slice(length))}};P.lazy=function(fn){var cached;cached=null;return function(input){null==cached&&(cached=fn());return cached(input)}};P.baseMany=function(parser,end,stringResult,atLeastOneResultRequired,input){var endResult,parserResult,rest,results;rest=input;results=stringResult?"":[];while(true){if(null!=end){endResult=end(rest);if(null!=endResult)break}parserResult=parser(rest);if(null==parserResult)break;stringResult?results+=parserResult.value:results.push(parserResult.value);rest=parserResult.rest}if(atLeastOneResultRequired&&0===results.length)return;return new P.Result(results,rest)};P.many1=function(parser){return function(input){return P.baseMany(parser,null,false,true,input)}};P.concatMany1Till=function(parser,end){return function(input){return P.baseMany(parser,end,true,true,input)}};P.firstChoice=function(){var parsers;parsers=1<=arguments.length?slice.call(arguments,0):[];return function(input){var i,length,parser,result;i=-1;length=parsers.length;while(++i<length){parser=parsers[i];result=parser(input);if(null!=result)return result}}};newParser=function(options){var U;U={};U.wildcard=P.tag("wildcard",P.string(options.wildcardChar));U.optional=P.tag("optional",P.pick(1,P.string(options.optionalSegmentStartChar),P.lazy(function(){return U.pattern}),P.string(options.optionalSegmentEndChar)));U.name=P.regex(new RegExp("^["+options.segmentNameCharset+"]+"));U.named=P.tag("named",P.pick(1,P.string(options.segmentNameStartChar),P.lazy(function(){return U.name})));U.escapedChar=P.pick(1,P.string(options.escapeChar),P.regex(/^./));U["static"]=P.tag("static",P.concatMany1Till(P.firstChoice(P.lazy(function(){return U.escapedChar}),P.regex(/^./)),P.firstChoice(P.string(options.segmentNameStartChar),P.string(options.optionalSegmentStartChar),P.string(options.optionalSegmentEndChar),U.wildcard)));U.token=P.lazy(function(){return P.firstChoice(U.wildcard,U.optional,U.named,U["static"])});U.pattern=P.many1(P.lazy(function(){return U.token}));return U};defaultOptions={escapeChar:"\\",segmentNameStartChar:":",segmentValueCharset:"a-zA-Z0-9-_~ %",segmentNameCharset:"a-zA-Z0-9",optionalSegmentStartChar:"(",optionalSegmentEndChar:")",wildcardChar:"*"};baseAstNodeToRegexString=function(astNode,segmentValueCharset){if(Array.isArray(astNode))return stringConcatMap(astNode,function(node){return baseAstNodeToRegexString(node,segmentValueCharset)});switch(astNode.tag){case"wildcard":return"(.*?)";case"named":return"(["+segmentValueCharset+"]+)";case"static":return escapeForRegex(astNode.value);case"optional":return"(?:"+baseAstNodeToRegexString(astNode.value,segmentValueCharset)+")?"}};astNodeToRegexString=function(astNode,segmentValueCharset){null==segmentValueCharset&&(segmentValueCharset=defaultOptions.segmentValueCharset);return"^"+baseAstNodeToRegexString(astNode,segmentValueCharset)+"$"};astNodeToNames=function(astNode){if(Array.isArray(astNode))return concatMap(astNode,astNodeToNames);switch(astNode.tag){case"wildcard":return["_"];case"named":return[astNode.value];case"static":return[];case"optional":return astNodeToNames(astNode.value)}};getParam=function(params,key,nextIndexes,sideEffects){var index,maxIndex,result,value;null==sideEffects&&(sideEffects=false);value=params[key];if(null==value){if(sideEffects)throw new Error("no values provided for key `"+key+"`");return}index=nextIndexes[key]||0;maxIndex=Array.isArray(value)?value.length-1:0;if(index>maxIndex){if(sideEffects)throw new Error("too few values provided for key `"+key+"`");return}result=Array.isArray(value)?value[index]:value;sideEffects&&(nextIndexes[key]=index+1);return result};astNodeContainsSegmentsForProvidedParams=function(astNode,params,nextIndexes){var i,length;if(Array.isArray(astNode)){i=-1;length=astNode.length;while(++i<length)if(astNodeContainsSegmentsForProvidedParams(astNode[i],params,nextIndexes))return true;return false}switch(astNode.tag){case"wildcard":return null!=getParam(params,"_",nextIndexes,false);case"named":return null!=getParam(params,astNode.value,nextIndexes,false);case"static":return false;case"optional":return astNodeContainsSegmentsForProvidedParams(astNode.value,params,nextIndexes)}};stringify=function(astNode,params,nextIndexes){if(Array.isArray(astNode))return stringConcatMap(astNode,function(node){return stringify(node,params,nextIndexes)});switch(astNode.tag){case"wildcard":return getParam(params,"_",nextIndexes,true);case"named":return getParam(params,astNode.value,nextIndexes,true);case"static":return astNode.value;case"optional":return astNodeContainsSegmentsForProvidedParams(astNode.value,params,nextIndexes)?stringify(astNode.value,params,nextIndexes):""}};UrlPattern=function(arg1,arg2){var groupCount,options,parsed,parser,withoutWhitespace;if(arg1 instanceof UrlPattern){this.isRegex=arg1.isRegex;this.regex=arg1.regex;this.ast=arg1.ast;this.names=arg1.names;return}this.isRegex=arg1 instanceof RegExp;if(!("string"===typeof arg1||this.isRegex))throw new TypeError("argument must be a regex or a string");if(this.isRegex){this.regex=arg1;if(null!=arg2){if(!Array.isArray(arg2))throw new Error("if first argument is a regex the second argument may be an array of group names but you provided something else");groupCount=regexGroupCount(this.regex);if(arg2.length!==groupCount)throw new Error("regex contains "+groupCount+" groups but array of group names contains "+arg2.length);this.names=arg2}return}if(""===arg1)throw new Error("argument must not be the empty string");withoutWhitespace=arg1.replace(/\s+/g,"");if(withoutWhitespace!==arg1)throw new Error("argument must not contain whitespace");options={escapeChar:(null!=arg2?arg2.escapeChar:void 0)||defaultOptions.escapeChar,segmentNameStartChar:(null!=arg2?arg2.segmentNameStartChar:void 0)||defaultOptions.segmentNameStartChar,segmentNameCharset:(null!=arg2?arg2.segmentNameCharset:void 0)||defaultOptions.segmentNameCharset,segmentValueCharset:(null!=arg2?arg2.segmentValueCharset:void 0)||defaultOptions.segmentValueCharset,optionalSegmentStartChar:(null!=arg2?arg2.optionalSegmentStartChar:void 0)||defaultOptions.optionalSegmentStartChar,optionalSegmentEndChar:(null!=arg2?arg2.optionalSegmentEndChar:void 0)||defaultOptions.optionalSegmentEndChar,wildcardChar:(null!=arg2?arg2.wildcardChar:void 0)||defaultOptions.wildcardChar};parser=newParser(options);parsed=parser.pattern(arg1);if(null==parsed)throw new Error("couldn't parse pattern");if(""!==parsed.rest)throw new Error("could only partially parse pattern");this.ast=parsed.value;this.regex=new RegExp(astNodeToRegexString(this.ast,options.segmentValueCharset));this.names=astNodeToNames(this.ast)};UrlPattern.prototype.match=function(url){var groups,match;match=this.regex.exec(url);if(null==match)return null;groups=match.slice(1);return this.names?keysAndValuesToObject(this.names,groups):groups};UrlPattern.prototype.stringify=function(params){null==params&&(params={});if(this.isRegex)throw new Error("can't stringify patterns generated from a regex");if(params!==Object(params))throw new Error("argument must be an object or undefined");return stringify(this.ast,params,{})};UrlPattern.escapeForRegex=escapeForRegex;UrlPattern.concatMap=concatMap;UrlPattern.stringConcatMap=stringConcatMap;UrlPattern.regexGroupCount=regexGroupCount;UrlPattern.keysAndValuesToObject=keysAndValuesToObject;UrlPattern.P=P;UrlPattern.newParser=newParser;UrlPattern.defaultOptions=defaultOptions;UrlPattern.astNodeToRegexString=astNodeToRegexString;UrlPattern.astNodeToNames=astNodeToNames;UrlPattern.getParam=getParam;UrlPattern.astNodeContainsSegmentsForProvidedParams=astNodeContainsSegmentsForProvidedParams;UrlPattern.stringify=stringify;return UrlPattern},true,null!=__webpack_require__(784)?!(__WEBPACK_AMD_DEFINE_ARRAY__=[],__WEBPACK_AMD_DEFINE_FACTORY__=factory,__WEBPACK_AMD_DEFINE_RESULT__="function"===typeof __WEBPACK_AMD_DEFINE_FACTORY__?__WEBPACK_AMD_DEFINE_FACTORY__.apply(exports,__WEBPACK_AMD_DEFINE_ARRAY__):__WEBPACK_AMD_DEFINE_FACTORY__,void 0!==__WEBPACK_AMD_DEFINE_RESULT__&&(module.exports=__WEBPACK_AMD_DEFINE_RESULT__)):"undefined"!==typeof exports&&null!==exports?module.exports=factory():root.UrlPattern=factory();var root,factory},6327:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.inFlight=void 0;var _modify_path=__webpack_require__(803);var _resolved_args=__webpack_require__(630);exports.inFlight=function inFlight(_ref){var dispatch=_ref.dispatch;return function(next){var pendingCache=[];return function(action){var isLoading=action.type===_resolved_args.setLoading.toString();var isSetting=action.type===_resolved_args.setValue.toString();if(isLoading||isSetting){var cacheKey=(0,_modify_path.convert)(action.payload.path).join("/");if(isLoading){pendingCache.push(cacheKey);dispatch((0,_resolved_args.inFlightActive)())}else if(isSetting){var idx=pendingCache.indexOf(cacheKey);pendingCache.splice(idx,1);0===pendingCache.length&&dispatch((0,_resolved_args.inFlightComplete)())}}next(action)}}}},6328:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.workpadUpdate=void 0;var _pages=__webpack_require__(441);var _elements=__webpack_require__(109);var _workpad=__webpack_require__(54);exports.workpadUpdate=function workpadUpdate(_ref){var dispatch=_ref.dispatch,getState=_ref.getState;return function(next){return function(action){next(action);if(action.type===_pages.duplicatePage.toString()){var pages=(0,_workpad.getPages)(getState());var newPage=pages[pages.length-1];return newPage.elements.forEach(function(element){return dispatch((0,_elements.fetchRenderable)(element))})}}}}},6329:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.workpadRefresh=void 0;var _elements=__webpack_require__(109);var _workpad=__webpack_require__(233);var _resolved_args=__webpack_require__(630);var _resolved_args2=__webpack_require__(1165);exports.workpadRefresh=function workpadRefresh(_ref){var dispatch=_ref.dispatch,getState=_ref.getState;return function(next){var refreshTimeout=void 0;var refreshInterval=0;function updateWorkpad(){if(0===refreshInterval)return;var inFlightActive=(0,_resolved_args2.getInFlight)(getState());inFlightActive?startDelayedUpdate():dispatch((0,_elements.fetchAllRenderables)())}function startDelayedUpdate(){clearTimeout(refreshTimeout);refreshTimeout=setTimeout(function(){updateWorkpad()},refreshInterval)}return function(action){next(action);action.type===_resolved_args.inFlightComplete.toString()&&refreshInterval>0&&startDelayedUpdate();if(action.type===_workpad.setRefreshInterval.toString()){refreshInterval=action.payload;clearTimeout(refreshTimeout);refreshInterval>0&&startDelayedUpdate()}}}}},633:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.CANVAS_TYPE="canvas-workpad";exports.CANVAS_APP="canvas";var APP_ROUTE=exports.APP_ROUTE="/app/canvas";exports.APP_ROUTE_WORKPAD=APP_ROUTE+"#/workpad";var API_ROUTE=exports.API_ROUTE="/api/canvas";exports.API_ROUTE_WORKPAD=API_ROUTE+"/workpad";exports.LOCALSTORAGE_LASTPAGE="canvas:lastpage";exports.FETCH_TIMEOUT=3e4;exports.CANVAS_USAGE_TYPE="canvas";exports.SECURITY_AUTH_MESSAGE="Authentication failed"},6330:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.appReady=void 0;var _app=__webpack_require__(119);var _app2=__webpack_require__(812);exports.appReady=function appReady(_ref){var dispatch=_ref.dispatch,getState=_ref.getState;return function(next){return function(action){next(action);var state=getState();if(state.app.ready)return;(0,_app.isAppReady)(state)&&dispatch((0,_app2.appReady)())}}}},6331:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.getRootReducer=getRootReducer;var _redux=__webpack_require__(53);var _reduceReducers=__webpack_require__(814);var _reduceReducers2=_interopRequireDefault(_reduceReducers);var _lodash=__webpack_require__(1);var _app=__webpack_require__(6332);var _transient=__webpack_require__(6333);var _resolved_args=__webpack_require__(6334);var _workpad=__webpack_require__(6335);var _pages=__webpack_require__(6336);var _elements=__webpack_require__(6337);var _assets=__webpack_require__(6338);var _history=__webpack_require__(6339);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function getRootReducer(initialState){return(0,_redux.combineReducers)({assets:_assets.assetsReducer,app:_app.appReducer,transient:(0,_reduceReducers2.default)(_transient.transientReducer,_resolved_args.resolvedArgsReducer),persistent:(0,_reduceReducers2.default)(_history.historyReducer,(0,_redux.combineReducers)({workpad:(0,_reduceReducers2.default)(_workpad.workpadReducer,_pages.pagesReducer,_elements.elementsReducer),schemaVersion:function schemaVersion(){var state=arguments.length>0&&void 0!==arguments[0]?arguments[0]:(0,_lodash.get)(initialState,"persistent.schemaVersion");return state}}))})}},6332:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.appReducer=void 0;var _handleActions;var _extends=Object.assign||function(target){for(var i=1;i<arguments.length;i++){var source=arguments[i];for(var key in source)Object.prototype.hasOwnProperty.call(source,key)&&(target[key]=source[key])}return target};var _reduxActions=__webpack_require__(29);var _app=__webpack_require__(812);function _defineProperty(obj,key,value){key in obj?Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true}):obj[key]=value;return obj}exports.appReducer=(0,_reduxActions.handleActions)((_handleActions={},_defineProperty(_handleActions,_app.appReady,function(appState){return _extends({},appState,{ready:true})}),_defineProperty(_handleActions,_app.appError,function(appState,_ref){var payload=_ref.payload;return _extends({},appState,{ready:payload})}),_handleActions),{})},6333:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.transientReducer=void 0;var _handleActions;var _extends=Object.assign||function(target){for(var i=1;i<arguments.length;i++){var source=arguments[i];for(var key in source)Object.prototype.hasOwnProperty.call(source,key)&&(target[key]=source[key])}return target};var _reduxActions=__webpack_require__(29);var _objectPathImmutable=__webpack_require__(342);var _history=__webpack_require__(631);var _transient=__webpack_require__(345);var actions=_interopRequireWildcard(_transient);var _elements=__webpack_require__(109);var _workpad=__webpack_require__(233);function _interopRequireWildcard(obj){if(obj&&obj.__esModule)return obj;var newObj={};if(null!=obj)for(var key in obj)Object.prototype.hasOwnProperty.call(obj,key)&&(newObj[key]=obj[key]);newObj.default=obj;return newObj}function _defineProperty(obj,key,value){key in obj?Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true}):obj[key]=value;return obj}exports.transientReducer=(0,_reduxActions.handleActions)((_handleActions={},_defineProperty(_handleActions,_history.restoreHistory,function(transientState){return(0,_objectPathImmutable.set)(transientState,"resolvedArgs",{})}),_defineProperty(_handleActions,_elements.removeElements,function(transientState,_ref){var elementIds=_ref.payload.elementIds;var selectedElement=transientState.selectedElement;return(0,_objectPathImmutable.del)(_extends({},transientState,{selectedElement:-1===elementIds.indexOf(selectedElement)?selectedElement:null}),["resolvedArgs",elementIds])}),_defineProperty(_handleActions,actions.setCanUserWrite,function(transientState,_ref2){var payload=_ref2.payload;return(0,_objectPathImmutable.set)(transientState,"canUserWrite",Boolean(payload))}),_defineProperty(_handleActions,actions.setFullscreen,function(transientState,_ref3){var payload=_ref3.payload;return(0,_objectPathImmutable.set)(transientState,"fullscreen",Boolean(payload))}),_defineProperty(_handleActions,actions.selectElement,function(transientState,_ref4){var payload=_ref4.payload;return _extends({},transientState,{selectedElement:payload||null})}),_defineProperty(_handleActions,_workpad.setRefreshInterval,function(transientState,_ref5){var payload=_ref5.payload;return _extends({},transientState,{refresh:{interval:Number(payload)||0}})}),_handleActions),{})},6334:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.resolvedArgsReducer=void 0;var _handleActions;var _reduxActions=__webpack_require__(29);var _objectPathImmutable=__webpack_require__(342);var _lodash=__webpack_require__(1);var _modify_path=__webpack_require__(803);var _resolved_args=__webpack_require__(630);var actions=_interopRequireWildcard(_resolved_args);var _elements=__webpack_require__(109);function _interopRequireWildcard(obj){if(obj&&obj.__esModule)return obj;var newObj={};if(null!=obj)for(var key in obj)Object.prototype.hasOwnProperty.call(obj,key)&&(newObj[key]=obj[key]);newObj.default=obj;return newObj}function _defineProperty(obj,key,value){key in obj?Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true}):obj[key]=value;return obj}function _getState(hasError,loading){if(hasError)return"error";if(Boolean(loading))return"pending";return"ready"}function _getValue(hasError,value,oldVal){if(hasError||null==value)return oldVal&&oldVal.value;return value}function getContext(value){var loading=arguments.length>1&&void 0!==arguments[1]&&arguments[1];var oldVal=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;var hasError=value instanceof Error;return{state:_getState(hasError,loading),value:_getValue(hasError,value,oldVal),error:hasError?value:null}}function getFullPath(path){var isArray=Array.isArray(path);var isString="string"===typeof path;if(!isArray&&!isString)throw new Error("Resolved argument path is invalid: "+path);return(0,_modify_path.prepend)(path,"resolvedArgs")}exports.resolvedArgsReducer=(0,_reduxActions.handleActions)((_handleActions={},_defineProperty(_handleActions,actions.setLoading,function(transientState,_ref){var payload=_ref.payload;var path=payload.path,_payload$loading=payload.loading,loading=void 0===_payload$loading||_payload$loading;var fullPath=getFullPath(path);var oldVal=(0,_lodash.get)(transientState,fullPath,null);return(0,_objectPathImmutable.set)(transientState,fullPath,getContext((0,_lodash.get)(oldVal,"value",null),loading))}),_defineProperty(_handleActions,actions.setValue,function(transientState,_ref2){var payload=_ref2.payload;var path=payload.path,value=payload.value;var fullPath=getFullPath(path);var oldVal=(0,_lodash.get)(transientState,fullPath,null);return(0,_objectPathImmutable.set)(transientState,fullPath,getContext(value,false,oldVal))}),_defineProperty(_handleActions,actions.setValues,function(transientState,_ref3){var payload=_ref3.payload;return payload.reduce(function(acc,setValueObj){var fullPath=getFullPath(setValueObj.path);var oldVal=(0,_lodash.get)(acc,fullPath,null);return(0,_objectPathImmutable.set)(acc,fullPath,getContext(setValueObj.value,false,oldVal))},transientState)}),_defineProperty(_handleActions,actions.clear,function(transientState,_ref4){var payload=_ref4.payload;var path=payload.path;return(0,_objectPathImmutable.del)(transientState,getFullPath(path))}),_defineProperty(_handleActions,actions.inFlightActive,function(transientState){return(0,_objectPathImmutable.set)(transientState,"inFlight",true)}),_defineProperty(_handleActions,actions.inFlightComplete,function(transientState){return(0,_objectPathImmutable.set)(transientState,"inFlight",false)}),_defineProperty(_handleActions,_elements.flushContext,function(transientState,_ref5){var elementId=_ref5.payload;return(0,_objectPathImmutable.del)(transientState,getFullPath([elementId,"expressionContext"]))}),_defineProperty(_handleActions,_elements.flushContextAfterIndex,function(transientState,_ref6){var payload=_ref6.payload;var elementId=payload.elementId,index=payload.index;var expressionContext=(0,_lodash.get)(transientState,getFullPath([elementId,"expressionContext"]));if(!expressionContext)return transientState;return Object.keys(expressionContext).reduce(function(state,indexKey){var indexAsNum=parseInt(indexKey,10);if(indexAsNum>=index)return(0,_objectPathImmutable.del)(state,getFullPath([elementId,"expressionContext",indexKey]));return state},transientState)}),_handleActions),{})},6335:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.workpadReducer=void 0;var _handleActions;var _extends=Object.assign||function(target){for(var i=1;i<arguments.length;i++){var source=arguments[i];for(var key in source)Object.prototype.hasOwnProperty.call(source,key)&&(target[key]=source[key])}return target};var _persisted_log=__webpack_require__(241);var _reduxActions=__webpack_require__(29);var _workpad=__webpack_require__(233);var _constants=__webpack_require__(633);function _defineProperty(obj,key,value){key in obj?Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true}):obj[key]=value;return obj}exports.workpadReducer=(0,_reduxActions.handleActions)((_handleActions={},_defineProperty(_handleActions,_workpad.setWorkpad,function(workpadState,_ref){var payload=_ref.payload;_persisted_log.recentlyAccessed.add(_constants.APP_ROUTE_WORKPAD+"/"+payload.id,payload.name,payload.id);return payload}),_defineProperty(_handleActions,_workpad.sizeWorkpad,function(workpadState,_ref2){var payload=_ref2.payload;return _extends({},workpadState,payload)}),_defineProperty(_handleActions,_workpad.setColors,function(workpadState,_ref3){var payload=_ref3.payload;return _extends({},workpadState,{colors:payload})}),_defineProperty(_handleActions,_workpad.setName,function(workpadState,_ref4){var payload=_ref4.payload;_persisted_log.recentlyAccessed.add(_constants.APP_ROUTE_WORKPAD+"/"+workpadState.id,payload,workpadState.id);return _extends({},workpadState,{name:payload})}),_defineProperty(_handleActions,_workpad.setWriteable,function(workpadState,_ref5){var payload=_ref5.payload;return _extends({},workpadState,{isWriteable:Boolean(payload)})}),_handleActions),{})},6336:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.pagesReducer=void 0;var _handleActions;var _extends=Object.assign||function(target){for(var i=1;i<arguments.length;i++){var source=arguments[i];for(var key in source)Object.prototype.hasOwnProperty.call(source,key)&&(target[key]=source[key])}return target};var _reduxActions=__webpack_require__(29);var _objectPathImmutable=__webpack_require__(342);var _get_id=__webpack_require__(525);var _router_provider=__webpack_require__(1181);var _defaults=__webpack_require__(804);var _pages=__webpack_require__(441);var actions=_interopRequireWildcard(_pages);function _interopRequireWildcard(obj){if(obj&&obj.__esModule)return obj;var newObj={};if(null!=obj)for(var key in obj)Object.prototype.hasOwnProperty.call(obj,key)&&(newObj[key]=obj[key]);newObj.default=obj;return newObj}function _defineProperty(obj,key,value){key in obj?Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true}):obj[key]=value;return obj}function setPageIndex(workpadState,index){if(index<0||!workpadState.pages[index])return workpadState;return(0,_objectPathImmutable.set)(workpadState,"page",index)}function getPageIndexById(workpadState,id){return workpadState.pages.findIndex(function(page){return page.id===id})}function addPage(workpadState,payload){var srcIndex=arguments.length>2&&void 0!==arguments[2]?arguments[2]:workpadState.pages.length-1;return(0,_objectPathImmutable.insert)(workpadState,"pages",payload||(0,_defaults.getDefaultPage)(),srcIndex+1)}function clonePage(page){return _extends({},page,{id:(0,_get_id.getId)("page"),elements:page.elements.map(function(element){return _extends({},element,{id:(0,_get_id.getId)("element")})})})}exports.pagesReducer=(0,_reduxActions.handleActions)((_handleActions={},_defineProperty(_handleActions,actions.addPage,function(workpadState,_ref){var payload=_ref.payload;var activePage=workpadState.page;var withNewPage=addPage(workpadState,payload,activePage);var newState=setPageIndex(withNewPage,activePage+1);var router=(0,_router_provider.routerProvider)();router.navigateTo("loadWorkpad",{id:newState.id,page:newState.page+1});return newState}),_defineProperty(_handleActions,actions.duplicatePage,function(workpadState,_ref2){var payload=_ref2.payload;var srcPage=workpadState.pages.find(function(page){return page.id===payload});if(!srcPage)return workpadState;var srcIndex=workpadState.pages.indexOf(srcPage);var newPageIndex=srcIndex+1;var insertedWorkpadState=addPage(workpadState,clonePage(srcPage),srcIndex);var newState=setPageIndex(insertedWorkpadState,newPageIndex);var router=(0,_router_provider.routerProvider)();router.navigateTo("loadWorkpad",{id:newState.id,page:newPageIndex+1});return newState}),_defineProperty(_handleActions,actions.setPage,function(workpadState,_ref3){var payload=_ref3.payload;return setPageIndex(workpadState,payload)}),_defineProperty(_handleActions,actions.gotoPage,function(workpadState,_ref4){var payload=_ref4.payload;var newState=setPageIndex(workpadState,payload);var router=(0,_router_provider.routerProvider)();router.navigateTo("loadWorkpad",{id:newState.id,page:newState.page+1});return newState}),_defineProperty(_handleActions,actions.movePage,function(workpadState,_ref5){var payload=_ref5.payload;var id=payload.id,position=payload.position;var pageIndex=getPageIndexById(workpadState,id);var newIndex=pageIndex+position;if(pageIndex<0)return workpadState;if(newIndex<0||newIndex>=workpadState.pages.length)return workpadState;var page=_extends({},workpadState.pages[pageIndex]);var newState=(0,_objectPathImmutable.insert)((0,_objectPathImmutable.del)(workpadState,"pages."+pageIndex),"pages",page,newIndex);var selectedId=workpadState.pages[workpadState.page].id;var newSelectedIndex=newState.pages.findIndex(function(page){return page.id===selectedId});newState=(0,_objectPathImmutable.set)(newState,"page",newSelectedIndex);var router=(0,_router_provider.routerProvider)();router.navigateTo("loadWorkpad",{id:newState.id,page:newState.page+1});return newState}),_defineProperty(_handleActions,actions.removePage,function(workpadState,_ref6){var payload=_ref6.payload;var curIndex=workpadState.page;var delIndex=getPageIndexById(workpadState,payload);if(delIndex>=0){var newState=(0,_objectPathImmutable.del)(workpadState,"pages."+delIndex);var router=(0,_router_provider.routerProvider)();var wasSelected=curIndex===delIndex;var wasOnlyPage=0===newState.pages.length;var newSelectedPage=curIndex>=delIndex?curIndex-1:curIndex;wasOnlyPage&&(newState=addPage(newState));newState=wasOnlyPage||wasSelected?(0,_objectPathImmutable.set)(newState,"page",0):(0,_objectPathImmutable.set)(newState,"page",newSelectedPage);router.navigateTo("loadWorkpad",{id:newState.id,page:newState.page+1});return newState}}),_defineProperty(_handleActions,actions.stylePage,function(workpadState,_ref7){var payload=_ref7.payload;var pageIndex=workpadState.pages.findIndex(function(page){return page.id===payload.pageId});return(0,_objectPathImmutable.set)(workpadState,["pages",pageIndex,"style"],payload.style)}),_defineProperty(_handleActions,actions.setPageTransition,function(workpadState,_ref8){var payload=_ref8.payload;var pageIndex=workpadState.pages.findIndex(function(page){return page.id===payload.pageId});return(0,_objectPathImmutable.set)(workpadState,["pages",pageIndex,"transition"],payload.transition)}),_handleActions),{})},6337:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.elementsReducer=void 0;var _handleActions;var _reduxActions=__webpack_require__(29);var _objectPathImmutable=__webpack_require__(342);var _lodash=__webpack_require__(1);var _elements=__webpack_require__(109);var actions=_interopRequireWildcard(_elements);function _interopRequireWildcard(obj){if(obj&&obj.__esModule)return obj;var newObj={};if(null!=obj)for(var key in obj)Object.prototype.hasOwnProperty.call(obj,key)&&(newObj[key]=obj[key]);newObj.default=obj;return newObj}function _defineProperty(obj,key,value){key in obj?Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true}):obj[key]=value;return obj}function getPageIndexById(workpadState,pageId){return(0,_lodash.get)(workpadState,"pages",[]).findIndex(function(page){return page.id===pageId})}function getElementIndexById(page,elementId){return page.elements.findIndex(function(element){return element.id===elementId})}function assignElementProperties(workpadState,pageId,elementId,props){var pageIndex=getPageIndexById(workpadState,pageId);var elementsPath=["pages",pageIndex,"elements"];var elementIndex=(0,_lodash.get)(workpadState,elementsPath,[]).findIndex(function(element){return element.id===elementId});if(-1===pageIndex||-1===elementIndex)return workpadState;var cleanWorkpadState=(0,_objectPathImmutable.del)(workpadState,elementsPath.concat([elementIndex,"ast"]));return(0,_objectPathImmutable.assign)(cleanWorkpadState,elementsPath.concat(elementIndex),props)}function moveElementLayer(workpadState,pageId,elementId,movement){var pageIndex=getPageIndexById(workpadState,pageId);var elementIndex=getElementIndexById(workpadState.pages[pageIndex],elementId);var elements=(0,_lodash.get)(workpadState,["pages",pageIndex,"elements"]);var from=elementIndex;var to=function(){if(movement<Infinity&&movement>-Infinity)return elementIndex+movement;if(Infinity===movement)return elements.length-1;if(-Infinity===movement)return 0;throw new Error("Invalid element layer movement")}();if(to>elements.length-1||to<0)return workpadState;var newElements=elements.slice(0);newElements.splice(to,0,newElements.splice(from,1)[0]);return(0,_objectPathImmutable.set)(workpadState,["pages",pageIndex,"elements"],newElements)}exports.elementsReducer=(0,_reduxActions.handleActions)((_handleActions={},_defineProperty(_handleActions,actions.setExpression,function(workpadState,_ref){var payload=_ref.payload;var expression=payload.expression,pageId=payload.pageId,elementId=payload.elementId;return assignElementProperties(workpadState,pageId,elementId,{expression:expression})}),_defineProperty(_handleActions,actions.setFilter,function(workpadState,_ref2){var payload=_ref2.payload;var filter=payload.filter,pageId=payload.pageId,elementId=payload.elementId;return assignElementProperties(workpadState,pageId,elementId,{filter:filter})}),_defineProperty(_handleActions,actions.setMultiplePositions,function(workpadState,_ref3){var payload=_ref3.payload;return payload.repositionedElements.reduce(function(previousWorkpadState,_ref4){var position=_ref4.position,pageId=_ref4.pageId,elementId=_ref4.elementId;return assignElementProperties(previousWorkpadState,pageId,elementId,{position:position})},workpadState)}),_defineProperty(_handleActions,actions.elementLayer,function(workpadState,_ref5){var _ref5$payload=_ref5.payload,pageId=_ref5$payload.pageId,elementId=_ref5$payload.elementId,movement=_ref5$payload.movement;return moveElementLayer(workpadState,pageId,elementId,movement)}),_defineProperty(_handleActions,actions.addElement,function(workpadState,_ref6){var _ref6$payload=_ref6.payload,pageId=_ref6$payload.pageId,element=_ref6$payload.element;var pageIndex=getPageIndexById(workpadState,pageId);if(pageIndex<0)return workpadState;return(0,_objectPathImmutable.push)(workpadState,["pages",pageIndex,"elements"],element)}),_defineProperty(_handleActions,actions.duplicateElement,function(workpadState,_ref7){var _ref7$payload=_ref7.payload,pageId=_ref7$payload.pageId,element=_ref7$payload.element;var pageIndex=getPageIndexById(workpadState,pageId);if(pageIndex<0)return workpadState;return(0,_objectPathImmutable.push)(workpadState,["pages",pageIndex,"elements"],element)}),_defineProperty(_handleActions,actions.removeElements,function(workpadState,_ref8){var _ref8$payload=_ref8.payload,pageId=_ref8$payload.pageId,elementIds=_ref8$payload.elementIds;var pageIndex=getPageIndexById(workpadState,pageId);if(pageIndex<0)return workpadState;var elementIndices=elementIds.map(function(elementId){return getElementIndexById(workpadState.pages[pageIndex],elementId)}).sort(function(a,b){return b-a});return elementIndices.reduce(function(state,nextElementIndex){return(0,_objectPathImmutable.del)(state,["pages",pageIndex,"elements",nextElementIndex])},workpadState)}),_handleActions),{})},6338:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.assetsReducer=void 0;var _handleActions;var _extends=Object.assign||function(target){for(var i=1;i<arguments.length;i++){var source=arguments[i];for(var key in source)Object.prototype.hasOwnProperty.call(source,key)&&(target[key]=source[key])}return target};var _reduxActions=__webpack_require__(29);var _objectPathImmutable=__webpack_require__(342);var _lodash=__webpack_require__(1);var _assets=__webpack_require__(442);var _get_id=__webpack_require__(525);function _defineProperty(obj,key,value){key in obj?Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true}):obj[key]=value;return obj}exports.assetsReducer=(0,_reduxActions.handleActions)((_handleActions={},_defineProperty(_handleActions,_assets.createAsset,function(assetState,_ref){var payload=_ref.payload;var asset=_extends({id:(0,_get_id.getId)("asset"),"@created":(new Date).toISOString()},payload);return(0,_objectPathImmutable.set)(assetState,asset.id,asset)}),_defineProperty(_handleActions,_assets.setAssetValue,function(assetState,_ref2){var payload=_ref2.payload;var id=payload.id,value=payload.value;var asset=(0,_lodash.get)(assetState,[id]);if(!asset)throw new Error("Can not set asset data, id not found: "+id);return(0,_objectPathImmutable.assign)(assetState,id,{value:value})}),_defineProperty(_handleActions,_assets.removeAsset,function(assetState,_ref3){var assetId=_ref3.payload;return(0,_objectPathImmutable.del)(assetState,assetId)}),_defineProperty(_handleActions,(0,_reduxActions.combineActions)(_assets.setAssets,_assets.resetAssets),function(assetState,_ref4){var payload=_ref4.payload;return payload||{}}),_handleActions),{})},6339:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.historyReducer=void 0;var _reduxActions=__webpack_require__(29);var _history=__webpack_require__(631);function _defineProperty(obj,key,value){key in obj?Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true}):obj[key]=value;return obj}exports.historyReducer=(0,_reduxActions.handleActions)(_defineProperty({},_history.restoreHistory,function(persistedState,_ref){var payload=_ref.payload;return payload}),{})},634:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.templateFromReactComponent=void 0;var _react=__webpack_require__(0);var _react2=_interopRequireDefault(_react);var _reactDom=__webpack_require__(14);var _reactDom2=_interopRequireDefault(_reactDom);var _propTypes=__webpack_require__(4);var _propTypes2=_interopRequireDefault(_propTypes);var _error_boundary=__webpack_require__(2060);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}exports.templateFromReactComponent=function templateFromReactComponent(Component){var WrappedComponent=function WrappedComponent(props){return _react2.default.createElement(_error_boundary.ErrorBoundary,null,function(_ref){var error=_ref.error;if(error){props.renderError();return null}return _react2.default.createElement(Component,props)})};WrappedComponent.propTypes={renderError:_propTypes2.default.func};return function(domNode,config,handlers){try{var el=_react2.default.createElement(WrappedComponent,config);_reactDom2.default.render(el,domNode,function(){handlers.done()});handlers.onDestroy(function(){_reactDom2.default.unmountComponentAtNode(domNode)})}catch(err){handlers.done();config.renderError()}}}},6340:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.getInitialState=void 0;var _lodash=__webpack_require__(1);var _defaults=__webpack_require__(804);exports.getInitialState=function getInitialState(path){var state={app:{},assets:{},transient:{canUserWrite:true,fullscreen:false,selectedElement:null,resolvedArgs:{},refresh:{interval:0}},persistent:{schemaVersion:1,workpad:(0,_defaults.getDefaultWorkpad)()}};if(!path)return state;return(0,_lodash.get)(state,path)}},6341:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var _canvas=__webpack_require__(6342);Object.defineProperty(exports,"CanvasRootController",{enumerable:true,get:function get(){return _canvas.CanvasRootController}})},6342:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.CanvasRootController=CanvasRootController;var _react=__webpack_require__(0);var _react2=_interopRequireDefault(_react);var _reactDom=__webpack_require__(14);var _reactRedux=__webpack_require__(19);var _app=__webpack_require__(6343);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function CanvasRootController(canvasStore,$scope,$element){var domNode=$element[0];(0,_reactDom.render)(_react2.default.createElement(_reactRedux.Provider,{store:canvasStore},_react2.default.createElement(_app.App,null)),domNode);$scope.$on("$destroy",function(){(0,_reactDom.unmountComponentAtNode)(domNode)})}},6343:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.App=void 0;var _extends=Object.assign||function(target){for(var i=1;i<arguments.length;i++){var source=arguments[i];for(var key in source)Object.prototype.hasOwnProperty.call(source,key)&&(target[key]=source[key])}return target};var _typeof="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(obj){return typeof obj}:function(obj){return obj&&"function"===typeof Symbol&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj};var _reactRedux=__webpack_require__(19);var _recompose=__webpack_require__(24);var _socket=__webpack_require__(2041);var _interpreter=__webpack_require__(526);var _browser_registries=__webpack_require__(808);var _app=__webpack_require__(119);var _app2=__webpack_require__(812);var _track_route_change=__webpack_require__(6344);var _app3=__webpack_require__(6345);function _asyncToGenerator(fn){return function(){var gen=fn.apply(this,arguments);return new Promise(function(resolve,reject){function step(key,arg){try{var info=gen[key](arg);var value=info.value}catch(error){reject(error);return}if(!info.done)return Promise.resolve(value).then(function(value){step("next",value)},function(err){step("throw",err)});resolve(value)}return step("next")})}}var mapStateToProps=function mapStateToProps(state){var appState=(0,_app.getAppReady)(state);return{appState:"object"===("undefined"===typeof appState?"undefined":_typeof(appState))?appState:{ready:appState},basePath:(0,_app.getBasePath)(state)}};var mapDispatchToProps=function mapDispatchToProps(dispatch){return{setAppReady:function setAppReady(basePath){return _asyncToGenerator(regeneratorRuntime.mark(function _callee(){return regeneratorRuntime.wrap(function _callee$(_context){while(1)switch(_context.prev=_context.next){case 0:_context.prev=0;_context.next=3;return(0,_socket.createSocket)(basePath);case 3:_context.next=5;return(0,_browser_registries.populateBrowserRegistries)();case 5:_context.next=7;return(0,_interpreter.initialize)();case 7:dispatch((0,_app2.appReady)());_context.next=13;break;case 10:_context.prev=10;_context.t0=_context["catch"](0);dispatch((0,_app2.appError)(_context.t0));case 13:case"end":return _context.stop()}},_callee,void 0,[[0,10]])}))},setAppError:function setAppError(payload){return dispatch((0,_app2.appError)(payload))}}};var mergeProps=function mergeProps(stateProps,dispatchProps,ownProps){return _extends({},ownProps,stateProps,dispatchProps,{setAppReady:dispatchProps.setAppReady(stateProps.basePath)})};exports.App=(0,_recompose.compose)((0,_reactRedux.connect)(mapStateToProps,mapDispatchToProps,mergeProps),(0,_recompose.withProps)(function(){return{onRouteChange:_track_route_change.trackRouteChange}}))(_app3.App)},6344:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.trackRouteChange=trackRouteChange;var _chrome=__webpack_require__(9);var _chrome2=_interopRequireDefault(_chrome);var _absolute_to_parsed_url=__webpack_require__(992);var _lodash=__webpack_require__(1);var _get_window=__webpack_require__(385);var _constants=__webpack_require__(633);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function trackRouteChange(){var basePath=_chrome2.default.getBasePath();_chrome2.default.trackSubUrlForApp(_constants.CANVAS_APP,(0,_absolute_to_parsed_url.absoluteToParsedUrl)((0,_lodash.get)((0,_get_window.getWindow)(),"location.href"),basePath))}},6345:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.App=void 0;var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;"value"in descriptor&&(descriptor.writable=true);Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){protoProps&&defineProperties(Constructor.prototype,protoProps);staticProps&&defineProperties(Constructor,staticProps);return Constructor}}();var _react=__webpack_require__(0);var _react2=_interopRequireDefault(_react);var _propTypes=__webpack_require__(4);var _propTypes2=_interopRequireDefault(_propTypes);var _apps=__webpack_require__(2073);var _shortcut_manager=__webpack_require__(6346);var _get_window=__webpack_require__(385);var _router=__webpack_require__(6348);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(self,call){if(!self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!call||"object"!==typeof call&&"function"!==typeof call?self:call}function _inherits(subClass,superClass){if("function"!==typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function, not "+typeof superClass);subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:false,writable:true,configurable:true}});superClass&&(Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass)}var App=exports.App=function(_React$PureComponent){_inherits(App,_React$PureComponent);function App(){var _ref;var _temp,_this,_ret;_classCallCheck(this,App);for(var _len=arguments.length,args=Array(_len),_key=0;_key<_len;_key++)args[_key]=arguments[_key];return _ret=(_temp=(_this=_possibleConstructorReturn(this,(_ref=App.__proto__||Object.getPrototypeOf(App)).call.apply(_ref,[this].concat(args))),_this),_this.renderError=function(){console.error(_this.props.appState);return _react2.default.createElement("div",null,_react2.default.createElement("div",null,"Canvas failed to load :("),_react2.default.createElement("div",null,"Message: ",_this.props.appState.message))},_temp),_possibleConstructorReturn(_this,_ret)}_createClass(App,[{key:"getChildContext",value:function getChildContext(){return{shortcuts:_shortcut_manager.shortcutManager}}},{key:"componentDidMount",value:function componentDidMount(){var win=(0,_get_window.getWindow)();win.canvasInitErrorHandler&&win.canvasInitErrorHandler()}},{key:"componentWillUnmount",value:function componentWillUnmount(){var win=(0,_get_window.getWindow)();win.canvasRestoreErrorHandler&&win.canvasRestoreErrorHandler()}},{key:"render",value:function render(){var _this2=this;if(this.props.appState instanceof Error)return this.renderError();return _react2.default.createElement("div",{className:"canvas canvasContainer"},_react2.default.createElement(_router.Router,{routes:_apps.routes,showLoading:false===this.props.appState.ready,loadingMessage:"Canvas is loading",onRouteChange:this.props.onRouteChange,onLoad:function onLoad(){return _this2.props.setAppReady(true)},onError:function onError(err){return _this2.props.setAppError(err)}}))}}]);return App}(_react2.default.PureComponent);App.childContextTypes={shortcuts:_propTypes2.default.object.isRequired};App.propTypes={appState:_propTypes2.default.object.isRequired,setAppReady:_propTypes2.default.func.isRequired,setAppError:_propTypes2.default.func.isRequired,onRouteChange:_propTypes2.default.func.isRequired}},6346:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.shortcutManager=void 0;var _reactShortcuts=__webpack_require__(813);var _keymap=__webpack_require__(6347);exports.shortcutManager=new _reactShortcuts.ShortcutManager(_keymap.keymap)},6347:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.keymap={EDITOR:{UNDO:"ctrl+z",REDO:"ctrl+shift+y",NEXT:"alt+]",PREV:"alt+[",FULLSCREEN:["alt+p","alt+f"],FULLSCREEN_EXIT:["escape"],EDITING:["alt+e"],GRID:"alt+g",REFRESH:"alt+r"},ELEMENT:{DELETE:"del"},PRESENTATION:{NEXT:["space","right","alt+]"],PREV:["left","alt+["],REFRESH:"alt+r"}}},6348:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var _router=__webpack_require__(6349);Object.defineProperty(exports,"Router",{enumerable:true,get:function get(){return _router.Router}})},6349:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.Router=void 0;var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;"value"in descriptor&&(descriptor.writable=true);Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){protoProps&&defineProperties(Constructor.prototype,protoProps);staticProps&&defineProperties(Constructor,staticProps);return Constructor}}();var _react=__webpack_require__(0);var _react2=_interopRequireDefault(_react);var _recompose=__webpack_require__(24);var _propTypes=__webpack_require__(4);var _propTypes2=_interopRequireDefault(_propTypes);var _router_provider=__webpack_require__(1181);var _canvas_loading=__webpack_require__(6350);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(self,call){if(!self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!call||"object"!==typeof call&&"function"!==typeof call?self:call}function _inherits(subClass,superClass){if("function"!==typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function, not "+typeof superClass);subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:false,writable:true,configurable:true}});superClass&&(Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass)}var Router=exports.Router=function(_React$PureComponent){_inherits(Router,_React$PureComponent);function Router(){var _ref;var _temp,_this,_ret;_classCallCheck(this,Router);for(var _len=arguments.length,args=Array(_len),_key=0;_key<_len;_key++)args[_key]=arguments[_key];return _ret=(_temp=(_this=_possibleConstructorReturn(this,(_ref=Router.__proto__||Object.getPrototypeOf(Router)).call.apply(_ref,[this].concat(args))),_this),_this.state={router:{},activeComponent:_canvas_loading.CanvasLoading},_temp),_possibleConstructorReturn(_this,_ret)}_createClass(Router,[{key:"getChildContext",value:function getChildContext(){var router=this.state.router;return{router:router}}},{key:"componentWillMount",value:function componentWillMount(){var _this2=this;var _props=this.props,routes=_props.routes,onRouteChange=_props.onRouteChange,onLoad=_props.onLoad,onError=_props.onError;var router=(0,_router_provider.routerProvider)(routes);var firstLoad=true;router.onPathChange(function(route){var pathname=route.location.pathname;var component=route.meta.component;if(!component){false;return}if(firstLoad){firstLoad=false;router.execute().then(function(){return onLoad()}).catch(function(err){return onError(err)})}onRouteChange&&onRouteChange(pathname);_this2.setState({activeComponent:component})});this.setState({router:router})}},{key:"render",value:function render(){if(this.props.showLoading)return _react2.default.createElement(_canvas_loading.CanvasLoading,{msg:this.props.loadingMessage});return(0,_recompose.isClassComponent)(this.state.activeComponent)?_react2.default.createElement(this.state.activeComponent,{}):this.state.activeComponent({})}}]);return Router}(_react2.default.PureComponent);Router.childContextTypes={router:_propTypes2.default.object.isRequired};Router.propTypes={showLoading:_propTypes2.default.bool.isRequired,onLoad:_propTypes2.default.func.isRequired,onError:_propTypes2.default.func.isRequired,routes:_propTypes2.default.array.isRequired,loadingMessage:_propTypes2.default.string,onRouteChange:_propTypes2.default.func}},6350:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.CanvasLoading=void 0;var _react=__webpack_require__(0);var _react2=_interopRequireDefault(_react);var _propTypes=__webpack_require__(4);var _propTypes2=_interopRequireDefault(_propTypes);var _eui=__webpack_require__(2);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var CanvasLoading=exports.CanvasLoading=function CanvasLoading(_ref){var msg=_ref.msg;return _react2.default.createElement("div",{className:"canvasContainer--loading"},_react2.default.createElement(_eui.EuiPanel,null,_react2.default.createElement(_eui.EuiLoadingChart,{size:"m"}),_react2.default.createElement(_eui.EuiSpacer,{size:"s"}),_react2.default.createElement(_eui.EuiText,null,_react2.default.createElement("p",{style:{color:"#000"}},msg))))};CanvasLoading.propTypes={msg:_propTypes2.default.string};CanvasLoading.defaultProps={msg:"Loading..."}},6351:function(module,exports){},6352:function(module,exports,__webpack_require__){"use strict";var _arg_types=__webpack_require__(6353);var _datasources=__webpack_require__(6369);var _expression_types=__webpack_require__(809);_arg_types.argTypeSpecs.forEach(function(expFn){return _expression_types.argTypeRegistry.register(expFn)});_datasources.datasourceSpecs.forEach(function(expFn){return _expression_types.datasourceRegistry.register(expFn)})},6353:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.argTypeSpecs=void 0;var _color=__webpack_require__(6354);var _series_style=__webpack_require__(6355);var _container_style=__webpack_require__(6358);var _font=__webpack_require__(6363);exports.argTypeSpecs=[_color.color,_container_style.containerStyle,_font.font,_series_style.seriesStyle]},6354:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.color=void 0;var _react=__webpack_require__(0);var _react2=_interopRequireDefault(_react);var _propTypes=__webpack_require__(4);var _propTypes2=_interopRequireDefault(_propTypes);var _eui=__webpack_require__(2);var _template_from_react_component=__webpack_require__(634);var _color_picker_mini=__webpack_require__(529);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var ColorArgInput=function ColorArgInput(_ref){var onValueChange=_ref.onValueChange,argValue=_ref.argValue,workpad=_ref.workpad;return _react2.default.createElement(_eui.EuiFlexGroup,{gutterSize:"s"},_react2.default.createElement(_eui.EuiFlexItem,{grow:false},_react2.default.createElement(_color_picker_mini.ColorPickerMini,{value:argValue,onChange:onValueChange,colors:workpad.colors})))};ColorArgInput.propTypes={argValue:_propTypes2.default.any.isRequired,onValueChange:_propTypes2.default.func.isRequired,workpad:_propTypes2.default.shape({colors:_propTypes2.default.array.isRequired}).isRequired};exports.color=function color(){return{name:"color",displayName:"Color",help:"Color picker",simpleTemplate:(0,_template_from_react_component.templateFromReactComponent)(ColorArgInput),default:"#000000"}}},6355:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.seriesStyle=void 0;var _propTypes=__webpack_require__(4);var _propTypes2=_interopRequireDefault(_propTypes);var _recompose=__webpack_require__(24);var _lodash=__webpack_require__(1);var _template_from_react_component=__webpack_require__(634);var _simple_template=__webpack_require__(6356);var _extended_template=__webpack_require__(6357);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var EnhancedExtendedTemplate=(0,_recompose.lifecycle)({formatLabel:function formatLabel(label){"string"!==typeof label&&this.props.renderError();return"Style: "+label},componentWillMount:function componentWillMount(){var label=(0,_lodash.get)(this.props.argValue,"chain.0.arguments.label.0","");label&&this.props.setLabel(this.formatLabel(label))},componentWillReceiveProps:function componentWillReceiveProps(newProps){var newLabel=(0,_lodash.get)(newProps.argValue,"chain.0.arguments.label.0","");newLabel&&this.props.label!==this.formatLabel(newLabel)&&this.props.setLabel(this.formatLabel(newLabel))}})(_extended_template.ExtendedTemplate);EnhancedExtendedTemplate.propTypes={argValue:_propTypes2.default.any.isRequired,setLabel:_propTypes2.default.func.isRequired,label:_propTypes2.default.string};exports.seriesStyle=function seriesStyle(){return{name:"seriesStyle",displayName:"Series style",help:"Set the style for a selected named series",template:(0,_template_from_react_component.templateFromReactComponent)(EnhancedExtendedTemplate),simpleTemplate:(0,_template_from_react_component.templateFromReactComponent)(_simple_template.SimpleTemplate),default:"{seriesStyle}"}}},6356:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.SimpleTemplate=void 0;var _react=__webpack_require__(0);var _react2=_interopRequireDefault(_react);var _propTypes=__webpack_require__(4);var _propTypes2=_interopRequireDefault(_propTypes);var _eui=__webpack_require__(2);var _objectPathImmutable=__webpack_require__(342);var _lodash=__webpack_require__(1);var _color_picker_mini=__webpack_require__(529);var _tooltip_icon=__webpack_require__(1173);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var SimpleTemplate=exports.SimpleTemplate=function SimpleTemplate(props){var typeInstance=props.typeInstance,argValue=props.argValue,onValueChange=props.onValueChange,labels=props.labels,workpad=props.workpad;var name=typeInstance.name;var chain=(0,_lodash.get)(argValue,"chain.0",{});var chainArgs=(0,_lodash.get)(chain,"arguments",{});var color=(0,_lodash.get)(chainArgs,"color.0","");var handleChange=function handleChange(argName,ev){var fn=""===ev.target.value?_objectPathImmutable.del:_objectPathImmutable.set;var newValue=fn(argValue,["chain",0,"arguments",argName],[ev.target.value]);return onValueChange(newValue)};var handlePlain=function handlePlain(argName,val){return handleChange(argName,{target:{value:val}})};return _react2.default.createElement(_eui.EuiFlexGroup,{gutterSize:"none",alignItems:"center",className:"canvasArgSeries__colorPicker"},color&&0!==color.length?_react2.default.createElement(_react.Fragment,null,_react2.default.createElement(_eui.EuiFlexItem,{grow:false},_react2.default.createElement("label",null,"Color ")),_react2.default.createElement(_eui.EuiFlexItem,{style:{fontSize:0}},_react2.default.createElement(_color_picker_mini.ColorPickerMini,{id:"series-style",value:color,onChange:function onChange(val){return handlePlain("color",val)},colors:workpad.colors,placement:"leftCenter"})),_react2.default.createElement(_eui.EuiFlexItem,null,_react2.default.createElement(_eui.EuiButtonIcon,{iconType:"cross",color:"danger",onClick:function onClick(){return handlePlain("color","")},"aria-label":"Remove Series Color"}))):_react2.default.createElement(_react.Fragment,null,_react2.default.createElement(_eui.EuiFlexItem,{grow:false},_react2.default.createElement("label",null,"Color ")),_react2.default.createElement(_eui.EuiFlexItem,{grow:false},_react2.default.createElement(_eui.EuiLink,{onClick:function onClick(){return handlePlain("color","#000000")}},"Auto ",_react2.default.createElement(_eui.EuiIcon,{type:"bolt"})))),"defaultStyle"!==name&&(!labels||0===labels.length)&&_react2.default.createElement(_eui.EuiFlexItem,{grow:false},_react2.default.createElement(_tooltip_icon.TooltipIcon,{position:"left",icon:"warning",content:"Data has no series to style, add a color dimension"})))};SimpleTemplate.displayName="SeriesStyleArgSimpleInput";SimpleTemplate.propTypes={onValueChange:_propTypes2.default.func.isRequired,argValue:_propTypes2.default.any.isRequired,labels:_propTypes2.default.array,workpad:_propTypes2.default.shape({colors:_propTypes2.default.array.isRequired}).isRequired,typeInstance:_propTypes2.default.shape({name:_propTypes2.default.string.isRequired}).isRequired}},6357:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.ExtendedTemplate=void 0;var _react=__webpack_require__(0);var _react2=_interopRequireDefault(_react);var _propTypes=__webpack_require__(4);var _propTypes2=_interopRequireDefault(_propTypes);var _eui=__webpack_require__(2);var _objectPathImmutable=__webpack_require__(342);var _lodash=__webpack_require__(1);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var ExtendedTemplate=exports.ExtendedTemplate=function ExtendedTemplate(props){var typeInstance=props.typeInstance,onValueChange=props.onValueChange,labels=props.labels,argValue=props.argValue;var chain=(0,_lodash.get)(argValue,"chain.0",{});var chainArgs=(0,_lodash.get)(chain,"arguments",{});var selectedSeries=(0,_lodash.get)(chainArgs,"label.0","");var name=typeInstance.name;var fields=(0,_lodash.get)(typeInstance,"options.include",[]);var hasPropFields=fields.some(function(field){return-1!==["lines","bars","points"].indexOf(field)});var handleChange=function handleChange(argName,ev){var fn=""===ev.target.value?_objectPathImmutable.del:_objectPathImmutable.set;var newValue=fn(argValue,["chain",0,"arguments",argName],[ev.target.value]);return onValueChange(newValue)};var values=[{value:0,text:"None"},{value:1,text:"1"},{value:2,text:"2"},{value:3,text:"3"},{value:4,text:"4"},{value:5,text:"5"}];var labelOptions=[{value:"",text:"Select Series"}];labels.sort().forEach(function(val){return labelOptions.push({value:val,text:val})});return _react2.default.createElement("div",null,"defaultStyle"!==name&&_react2.default.createElement(_eui.EuiFormRow,{label:"Series Identifier",compressed:true},_react2.default.createElement(_eui.EuiSelect,{value:selectedSeries,options:labelOptions,onChange:function onChange(ev){return handleChange("label",ev)}})),hasPropFields&&_react2.default.createElement(_eui.EuiFlexGroup,{gutterSize:"s"},fields.includes("lines")&&_react2.default.createElement(_eui.EuiFlexItem,null,_react2.default.createElement(_eui.EuiFormRow,{label:"Line",compressed:true},_react2.default.createElement(_eui.EuiSelect,{value:(0,_lodash.get)(chainArgs,"lines.0",0),options:values,onChange:function onChange(ev){return handleChange("lines",ev)}}))),fields.includes("bars")&&_react2.default.createElement(_eui.EuiFlexItem,null,_react2.default.createElement(_eui.EuiFormRow,{label:"Bar",compressed:true},_react2.default.createElement(_eui.EuiSelect,{value:(0,_lodash.get)(chainArgs,"bars.0",0),options:values,onChange:function onChange(ev){return handleChange("bars",ev)}}))),fields.includes("points")&&_react2.default.createElement(_eui.EuiFlexItem,null,_react2.default.createElement(_eui.EuiFormRow,{label:"Point",compressed:true},_react2.default.createElement(_eui.EuiSelect,{value:(0,_lodash.get)(chainArgs,"points.0",0),options:values,onChange:function onChange(ev){return handleChange("points",ev)}})))))};ExtendedTemplate.displayName="SeriesStyleArgAdvancedInput";ExtendedTemplate.propTypes={onValueChange:_propTypes2.default.func.isRequired,argValue:_propTypes2.default.any.isRequired,typeInstance:_propTypes2.default.object,labels:_propTypes2.default.array.isRequired,renderError:_propTypes2.default.func}},6358:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.containerStyle=void 0;var _recompose=__webpack_require__(24);var _objectPathImmutable=__webpack_require__(342);var _lodash=__webpack_require__(1);var _template_from_react_component=__webpack_require__(634);var _simple_template=__webpack_require__(6359);var _extended_template=__webpack_require__(6360);var wrap=function wrap(Component){return(0,_recompose.withHandlers)({getArgValue:function getArgValue(_ref){var argValue=_ref.argValue;return function(name,alt){var args=(0,_lodash.get)(argValue,"chain.0.arguments",{});return(0,_lodash.get)(args,[name,0],alt)}},setArgValue:function setArgValue(_ref2){var argValue=_ref2.argValue,onValueChange=_ref2.onValueChange;return function(name,val){var newValue=(0,_objectPathImmutable.set)(argValue,["chain",0,"arguments",name,0],val);onValueChange(newValue)}}})(Component)};exports.containerStyle=function containerStyle(){return{name:"containerStyle",displayName:"Container style",help:"Tweak the appearance of the element container",default:"{containerStyle}",simpleTemplate:(0,_template_from_react_component.templateFromReactComponent)(wrap(_simple_template.SimpleTemplate)),template:(0,_template_from_react_component.templateFromReactComponent)(wrap(_extended_template.ExtendedTemplate))}}},6359:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.SimpleTemplate=void 0;var _react=__webpack_require__(0);var _react2=_interopRequireDefault(_react);var _propTypes=__webpack_require__(4);var _propTypes2=_interopRequireDefault(_propTypes);var _color_picker_mini=__webpack_require__(529);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var SimpleTemplate=exports.SimpleTemplate=function SimpleTemplate(_ref){var getArgValue=_ref.getArgValue,setArgValue=_ref.setArgValue,workpad=_ref.workpad;return _react2.default.createElement("div",{style:{fontSize:0}},_react2.default.createElement(_color_picker_mini.ColorPickerMini,{value:getArgValue("backgroundColor"),onChange:function onChange(color){return setArgValue("backgroundColor",color)},colors:workpad.colors,anchorPosition:"leftCenter"}))};SimpleTemplate.displayName="ContainerStyleArgSimpleInput";SimpleTemplate.propTypes={onValueChange:_propTypes2.default.func.isRequired,argValue:_propTypes2.default.any.isRequired,getArgValue:_propTypes2.default.func.isRequired,setArgValue:_propTypes2.default.func.isRequired,workpad:_propTypes2.default.shape({colors:_propTypes2.default.array.isRequired})}},6360:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.ExtendedTemplate=void 0;var _react=__webpack_require__(0);var _react2=_interopRequireDefault(_react);var _propTypes=__webpack_require__(4);var _propTypes2=_interopRequireDefault(_propTypes);var _eui=__webpack_require__(2);var _border_form=__webpack_require__(6361);var _appearance_form=__webpack_require__(6362);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var ExtendedTemplate=exports.ExtendedTemplate=function ExtendedTemplate(_ref){var getArgValue=_ref.getArgValue,setArgValue=_ref.setArgValue,workpad=_ref.workpad;return _react2.default.createElement("div",null,_react2.default.createElement(_eui.EuiTitle,{size:"xxxs",textTransform:"uppercase"},_react2.default.createElement("h6",null,"Appearance")),_react2.default.createElement(_eui.EuiSpacer,{size:"xs"}),_react2.default.createElement(_eui.EuiSpacer,{size:"xs"}),_react2.default.createElement(_appearance_form.AppearanceForm,{padding:getArgValue("padding"),backgroundColor:getArgValue("backgroundColor"),opacity:getArgValue("opacity"),overflow:getArgValue("overflow"),onChange:setArgValue}),_react2.default.createElement(_eui.EuiSpacer,{size:"m"}),_react2.default.createElement(_eui.EuiTitle,{size:"xxxs",textTransform:"uppercase"},_react2.default.createElement("h6",null,"Border")),_react2.default.createElement(_eui.EuiSpacer,{size:"xs"}),_react2.default.createElement(_eui.EuiSpacer,{size:"xs"}),_react2.default.createElement(_border_form.BorderForm,{value:getArgValue("border",""),radius:getArgValue("borderRadius"),onChange:setArgValue,colors:workpad.colors}))};ExtendedTemplate.displayName="ContainerStyleArgExtendedInput";ExtendedTemplate.propTypes={onValueChange:_propTypes2.default.func.isRequired,argValue:_propTypes2.default.any.isRequired,getArgValue:_propTypes2.default.func.isRequired,setArgValue:_propTypes2.default.func.isRequired,workpad:_propTypes2.default.shape({colors:_propTypes2.default.array.isRequired}).isRequired}},6361:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.BorderForm=void 0;var _slicedToArray=function(){function sliceIterator(arr,i){var _arr=[];var _n=true;var _d=false;var _e=void 0;try{for(var _s,_i=arr[Symbol.iterator]();!(_n=(_s=_i.next()).done);_n=true){_arr.push(_s.value);if(i&&_arr.length===i)break}}catch(err){_d=true;_e=err}finally{try{!_n&&_i["return"]&&_i["return"]()}finally{if(_d)throw _e}}return _arr}return function(arr,i){if(Array.isArray(arr))return arr;if(Symbol.iterator in Object(arr))return sliceIterator(arr,i);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}();var _react=__webpack_require__(0);var _react2=_interopRequireDefault(_react);var _propTypes=__webpack_require__(4);var _propTypes2=_interopRequireDefault(_propTypes);var _eui=__webpack_require__(2);var _color_picker_mini=__webpack_require__(529);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var styles=["none","solid","dotted","dashed","double","groove","ridge","inset","outset"];var BorderForm=exports.BorderForm=function BorderForm(_ref){var value=_ref.value,radius=_ref.radius,onChange=_ref.onChange,colors=_ref.colors;var border=value||"";var _border$split=border.split(" "),_border$split2=_slicedToArray(_border$split,3),_border$split2$=_border$split2[0],borderWidth=void 0===_border$split2$?"":_border$split2$,_border$split2$2=_border$split2[1],borderStyle=void 0===_border$split2$2?"":_border$split2$2,_border$split2$3=_border$split2[2],borderColor=void 0===_border$split2$3?"":_border$split2$3;var borderWidthVal=borderWidth?borderWidth.replace("px",""):"";var radiusVal=radius?radius.replace("px",""):"";var namedChange=function namedChange(name){return function(val){if("borderWidth"===name)return onChange("border",val+"px "+borderStyle+" "+borderColor);if("borderStyle"===name){if(""===val)return onChange("border","0px");return onChange("border",borderWidth+" "+val+" "+borderColor)}if("borderRadius"===name)return onChange("borderRadius",val+"px");onChange(name,val)}};var borderColorChange=function borderColorChange(color){return onChange("border",borderWidth+" "+borderStyle+" "+color)};return _react2.default.createElement(_eui.EuiFlexGroup,{gutterSize:"s"},_react2.default.createElement(_eui.EuiFlexItem,{grow:2},_react2.default.createElement(_eui.EuiFormRow,{label:"Thickness",compressed:true},_react2.default.createElement(_eui.EuiFieldNumber,{value:Number(borderWidthVal),onChange:function onChange(e){return namedChange("borderWidth")(e.target.value)}}))),_react2.default.createElement(_eui.EuiFlexItem,{grow:3},_react2.default.createElement(_eui.EuiFormRow,{label:"Style",compressed:true},_react2.default.createElement(_eui.EuiSuperSelect,{valueOfSelected:borderStyle||"none",options:styles.map(function(style){return{value:style,inputDisplay:_react2.default.createElement("div",{style:{height:16,border:"4px "+style}})}}),onChange:namedChange("borderStyle")}))),_react2.default.createElement(_eui.EuiFlexItem,{grow:2},_react2.default.createElement(_eui.EuiFormRow,{label:"Radius",compressed:true},_react2.default.createElement(_eui.EuiFieldNumber,{value:Number(radiusVal),onChange:function onChange(e){return namedChange("borderRadius")(e.target.value)}}))),_react2.default.createElement(_eui.EuiFlexItem,{grow:1},_react2.default.createElement(_eui.EuiFormRow,{label:"Color",style:{fontSize:0}},_react2.default.createElement(_color_picker_mini.ColorPickerMini,{value:borderColor,onChange:borderColorChange,colors:colors,anchorPosition:"upCenter"}))))};BorderForm.propTypes={value:_propTypes2.default.string,radius:_propTypes2.default.string,onChange:_propTypes2.default.func.isRequired,colors:_propTypes2.default.array.isRequired}},6362:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.AppearanceForm=void 0;var _react=__webpack_require__(0);var _react2=_interopRequireDefault(_react);var _propTypes=__webpack_require__(4);var _propTypes2=_interopRequireDefault(_propTypes);var _eui=__webpack_require__(2);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var opacities=[{value:1,text:"100%"},{value:.9,text:"90%"},{value:.7,text:"70%"},{value:.5,text:"50%"},{value:.3,text:"30%"},{value:.1,text:"10%"}];var overflows=[{value:"hidden",text:"Hidden"},{value:"visible",text:"Visible"}];var AppearanceForm=exports.AppearanceForm=function AppearanceForm(_ref){var padding=_ref.padding,opacity=_ref.opacity,overflow=_ref.overflow,onChange=_ref.onChange;var paddingVal=padding?padding.replace("px",""):"";var namedChange=function namedChange(name){return function(ev){if("padding"===name)return onChange(name,ev.target.value+"px");onChange(name,ev.target.value)}};return _react2.default.createElement(_eui.EuiFlexGroup,{gutterSize:"s","justify-content":"spaceBetween"},_react2.default.createElement(_eui.EuiFlexItem,{grow:2},_react2.default.createElement(_eui.EuiFormRow,{label:"Padding",compressed:true},_react2.default.createElement(_eui.EuiFieldNumber,{value:Number(paddingVal),onChange:namedChange("padding")}))),_react2.default.createElement(_eui.EuiFlexItem,{grow:3},_react2.default.createElement(_eui.EuiFormRow,{label:"Opacity",compressed:true},_react2.default.createElement(_eui.EuiSelect,{value:opacity,options:opacities,onChange:namedChange("opacity")}))),_react2.default.createElement(_eui.EuiFlexItem,{grow:3},_react2.default.createElement(_eui.EuiFormRow,{label:"Overflow",compressed:true},_react2.default.createElement(_eui.EuiSelect,{value:overflow,options:overflows,onChange:namedChange("overflow")}))))};AppearanceForm.propTypes={padding:_propTypes2.default.oneOfType([_propTypes2.default.string,_propTypes2.default.number]),opacity:_propTypes2.default.oneOfType([_propTypes2.default.string,_propTypes2.default.number]),overflow:_propTypes2.default.oneOf(["hidden","visible"]),onChange:_propTypes2.default.func.isRequired};AppearanceForm.defaultProps={opacity:1,overflow:"hidden"}},6363:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.font=exports.FontArgInput=void 0;var _react=__webpack_require__(0);var _react2=_interopRequireDefault(_react);var _propTypes=__webpack_require__(4);var _propTypes2=_interopRequireDefault(_propTypes);var _lodash=__webpack_require__(1);var _fonts=__webpack_require__(2094);var _template_from_react_component=__webpack_require__(634);var _text_style_picker=__webpack_require__(6364);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var FontArgInput=exports.FontArgInput=function FontArgInput(props){var onValueChange=props.onValueChange,argValue=props.argValue,workpad=props.workpad;var chain=(0,_lodash.get)(argValue,"chain.0",{});var chainArgs=(0,_lodash.get)(chain,"arguments",{});var spec=(0,_lodash.mapValues)(chainArgs,"[0]");function handleChange(newSpec){var newValue=(0,_lodash.set)(argValue,["chain",0,"arguments"],(0,_lodash.mapValues)(newSpec,function(v){return[v]}));return onValueChange(newValue)}return _react2.default.createElement(_text_style_picker.TextStylePicker,{family:spec.family,color:spec.color,size:spec.size,align:spec.align,weight:spec.weight,underline:spec.underline||false,italic:spec.italic||false,onChange:handleChange,colors:workpad.colors})};FontArgInput.propTypes={onValueChange:_propTypes2.default.func.isRequired,argValue:_propTypes2.default.any.isRequired,typeInstance:_propTypes2.default.object,workpad:_propTypes2.default.shape({colors:_propTypes2.default.array.isRequired}).isRequired};FontArgInput.displayName="FontArgInput";exports.font=function font(){return{name:"font",displayName:"Text settings",help:"Set the font, size and color",template:(0,_template_from_react_component.templateFromReactComponent)(FontArgInput),default:'{font size=14 family="'+_fonts.openSans.value+'" color="#000000" align=left}'}}},6364:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.TextStylePicker=void 0;var _recompose=__webpack_require__(24);var _text_style_picker=__webpack_require__(6365);exports.TextStylePicker=(0,_recompose.pure)(_text_style_picker.TextStylePicker)},6365:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.TextStylePicker=void 0;var _react=__webpack_require__(0);var _react2=_interopRequireDefault(_react);var _propTypes=__webpack_require__(4);var _propTypes2=_interopRequireDefault(_propTypes);var _eui=__webpack_require__(2);var _font_picker=__webpack_require__(6366);var _color_picker_mini=__webpack_require__(529);var _font_sizes=__webpack_require__(6368);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _defineProperty(obj,key,value){key in obj?Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true}):obj[key]=value;return obj}var TextStylePicker=exports.TextStylePicker=function TextStylePicker(_ref){var _stylesSelectedMap;var family=_ref.family,size=_ref.size,align=_ref.align,color=_ref.color,weight=_ref.weight,underline=_ref.underline,italic=_ref.italic,onChange=_ref.onChange,colors=_ref.colors;var alignmentButtons=[{id:"left",label:"Align left",iconType:"editorAlignLeft"},{id:"center",label:"Align center",iconType:"editorAlignCenter"},{id:"right",label:"Align right",iconType:"editorAlignRight"}];var styleButtons=[{id:"bold",label:"Bold",iconType:"editorBold"},{id:"italic",label:"Italic",iconType:"editorItalic"},{id:"underline",label:"Underline",iconType:"editorUnderline"}];var stylesSelectedMap=(_stylesSelectedMap={},_defineProperty(_stylesSelectedMap,"bold","bold"===weight),_defineProperty(_stylesSelectedMap,"italic",Boolean(italic)),_defineProperty(_stylesSelectedMap,"underline",Boolean(underline)),_stylesSelectedMap);var doChange=function doChange(propName,value){onChange(_defineProperty({family:family,size:size,align:align,color:color,weight:weight||"normal",underline:underline||false,italic:italic||false},propName,value))};var onAlignmentChange=function onAlignmentChange(optionId){return doChange("align",optionId)};var onStyleChange=function onStyleChange(optionId){var prop=void 0;var value=void 0;if("bold"===optionId){prop="weight";value=stylesSelectedMap[optionId]?"normal":"bold"}else{prop=optionId;value=!stylesSelectedMap[optionId]}doChange(prop,value)};return _react2.default.createElement("div",{className:"canvasTextStylePicker"},_react2.default.createElement(_eui.EuiFlexGroup,{gutterSize:"m"},_react2.default.createElement(_eui.EuiFlexItem,{grow:false},_react2.default.createElement(_eui.EuiSelect,{compressed:true,value:size,onChange:function onChange(e){return doChange("size",Number(e.target.value))},options:_font_sizes.fontSizes.map(function(size){return{text:String(size),value:size}})})),_react2.default.createElement(_eui.EuiFlexItem,null,_react2.default.createElement(_font_picker.FontPicker,{value:family,onSelect:function onSelect(value){return doChange("family",value)}}))),_react2.default.createElement(_eui.EuiSpacer,{size:"m"}),_react2.default.createElement(_eui.EuiFlexGroup,{gutterSize:"m",alignItems:"center"},_react2.default.createElement(_eui.EuiFlexItem,{grow:false},_react2.default.createElement(_eui.EuiButtonGroup,{options:styleButtons,idToSelectedMap:stylesSelectedMap,onChange:onStyleChange,type:"multi",isIconOnly:true})),_react2.default.createElement(_eui.EuiFlexItem,{grow:false},_react2.default.createElement(_eui.EuiButtonGroup,{options:alignmentButtons,isIconOnly:true,idSelected:align,onChange:onAlignmentChange})),_react2.default.createElement(_eui.EuiFlexItem,{grow:false,style:{fontSize:0}},_react2.default.createElement(_color_picker_mini.ColorPickerMini,{value:color,onChange:function onChange(value){return doChange("color",value)},colors:colors}))))};TextStylePicker.propTypes={family:_propTypes2.default.string,size:_propTypes2.default.number,align:_propTypes2.default.string,color:_propTypes2.default.string,weight:_propTypes2.default.string,underline:_propTypes2.default.bool,italic:_propTypes2.default.bool,onChange:_propTypes2.default.func.isRequired,colors:_propTypes2.default.array};TextStylePicker.defaultProps={align:"left",size:14}},6366:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.FontPicker=void 0;var _recompose=__webpack_require__(24);var _font_picker=__webpack_require__(6367);exports.FontPicker=(0,_recompose.pure)(_font_picker.FontPicker)},6367:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.FontPicker=void 0;var _react=__webpack_require__(0);var _react2=_interopRequireDefault(_react);var _propTypes=__webpack_require__(4);var _propTypes2=_interopRequireDefault(_propTypes);var _eui=__webpack_require__(2);var _fonts=__webpack_require__(2094);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var FontPicker=exports.FontPicker=function FontPicker(_ref){var onSelect=_ref.onSelect,value=_ref.value;if(value&&!_fonts.fonts.find(function(font){return font.value===value})){var label=(value.indexOf(",")>=0?value.split(",")[0]:value).replace(/['"]/g,"");_fonts.fonts.push({value:value,label:label});_fonts.fonts.sort(function(a,b){return a.label.localeCompare(b.label)})}return _react2.default.createElement(_eui.EuiSuperSelect,{compressed:true,options:_fonts.fonts.map(function(_ref2){var value=_ref2.value,label=_ref2.label;return{value:value,inputDisplay:_react2.default.createElement("div",{style:{fontFamily:value}},label)}}),valueOfSelected:value,onChange:function onChange(value){return onSelect(value)}})};FontPicker.propTypes={value:_propTypes2.default.string,onSelect:_propTypes2.default.func}},6368:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.fontSizes=[0,6,7,8,9,10,11,12,14,16,18,24,30,36,48,60,72,96]},6369:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.datasourceSpecs=void 0;var _esdocs=__webpack_require__(6370);exports.datasourceSpecs=[_esdocs.esdocs]},6370:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.esdocs=void 0;var _slicedToArray=function(){function sliceIterator(arr,i){var _arr=[];var _n=true;var _d=false;var _e=void 0;try{for(var _s,_i=arr[Symbol.iterator]();!(_n=(_s=_i.next()).done);_n=true){_arr.push(_s.value);if(i&&_arr.length===i)break}}catch(err){_d=true;_e=err}finally{try{!_n&&_i["return"]&&_i["return"]()}finally{if(_d)throw _e}}return _arr}return function(arr,i){if(Array.isArray(arr))return arr;if(Symbol.iterator in Object(arr))return sliceIterator(arr,i);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}();var _extends=Object.assign||function(target){for(var i=1;i<arguments.length;i++){var source=arguments[i];for(var key in source)Object.prototype.hasOwnProperty.call(source,key)&&(target[key]=source[key])}return target};var _react=__webpack_require__(0);var _react2=_interopRequireDefault(_react);var _propTypes=__webpack_require__(4);var _propTypes2=_interopRequireDefault(_propTypes);var _eui=__webpack_require__(2);var _arg_helpers=__webpack_require__(6371);var _es_fields_select=__webpack_require__(6372);var _es_field_select=__webpack_require__(6374);var _es_index_select=__webpack_require__(6376);var _template_from_react_component=__webpack_require__(634);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var EsdocsDatasource=function EsdocsDatasource(_ref){var args=_ref.args,updateArgs=_ref.updateArgs;var setArg=function setArg(name,value){updateArgs&&updateArgs(_extends({},args,(0,_arg_helpers.setSimpleArg)(name,value)))};var getArgName=function getArgName(){if((0,_arg_helpers.getSimpleArg)("_",args)[0])return"_";if((0,_arg_helpers.getSimpleArg)("q",args)[0])return"q";return"query"};var getIndex=function getIndex(){return(0,_arg_helpers.getSimpleArg)("index",args)[0]||""};var getQuery=function getQuery(){return(0,_arg_helpers.getSimpleArg)(getArgName(),args)[0]||""};var getFields=function getFields(){var commas=(0,_arg_helpers.getSimpleArg)("fields",args)[0]||"";if(0===commas.length)return[];return commas.split(",").map(function(str){return str.trim()})};var getSortBy=function getSortBy(){var commas=(0,_arg_helpers.getSimpleArg)("sort",args)[0]||", DESC";return commas.split(",").map(function(str){return str.trim()})};var fields=getFields();var _getSortBy=getSortBy(),_getSortBy2=_slicedToArray(_getSortBy,2),sortField=_getSortBy2[0],sortOrder=_getSortBy2[1];var index=getIndex().toLowerCase();var sortOptions=[{value:"asc",text:"Ascending"},{value:"desc",text:"Descending"}];return _react2.default.createElement("div",null,_react2.default.createElement(_eui.EuiCallOut,{size:"s",title:"Be careful",color:"warning"},_react2.default.createElement("p",null,"The Elasticsearch Docs datasource is used to pull documents directly from Elasticsearch without the use of aggregations. It is best used with low volume datasets and in situations where you need to view raw documents or plot exact, non-aggregated values on a chart.")),_react2.default.createElement(_eui.EuiSpacer,{size:"m"}),_react2.default.createElement(_eui.EuiFormRow,{label:"Index",helpText:"Enter an index name or select an index pattern"},_react2.default.createElement(_es_index_select.ESIndexSelect,{value:index,onChange:function onChange(index){return setArg("index",index)}})),_react2.default.createElement(_eui.EuiFormRow,{label:"Query",helpText:"Lucene query string syntax",compressed:true},_react2.default.createElement(_eui.EuiFieldText,{value:getQuery(),onChange:function onChange(e){return setArg(getArgName(),e.target.value)}})),_react2.default.createElement(_eui.EuiFormRow,{label:"Sort Field",helpText:"Document sort field"},_react2.default.createElement(_es_field_select.ESFieldSelect,{index:index,value:sortField,onChange:function onChange(field){return setArg("sort",[field,sortOrder].join(", "))}})),_react2.default.createElement(_eui.EuiFormRow,{label:"Sort Order",helpText:"Document sort order",compressed:true},_react2.default.createElement(_eui.EuiSelect,{value:sortOrder.toLowerCase(),onChange:function onChange(e){return setArg("sort",[sortField,e.target.value].join(", "))},options:sortOptions})),_react2.default.createElement(_eui.EuiFormRow,{label:"Fields",helpText:fields.length<=10?"The fields to extract. Kibana scripted fields are not currently available":"This datasource performs best with 10 or fewer fields"},_react2.default.createElement(_es_fields_select.ESFieldsSelect,{index:index,onChange:function onChange(fields){return setArg("fields",fields.join(", "))},selected:fields})))};EsdocsDatasource.propTypes={args:_propTypes2.default.object.isRequired,updateArgs:_propTypes2.default.func};exports.esdocs=function esdocs(){return{name:"esdocs",displayName:"Elasticsearch raw documents",help:"Pull back raw documents from elasticsearch",image:"logoElasticsearch",template:(0,_template_from_react_component.templateFromReactComponent)(EsdocsDatasource)}}},6371:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.validateArg=validateArg;exports.getSimpleArg=getSimpleArg;exports.setSimpleArg=setSimpleArg;var _lodash=__webpack_require__(1);var _get_type=__webpack_require__(386);function _defineProperty(obj,key,value){key in obj?Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true}):obj[key]=value;return obj}var allowedTypes=["string","number","boolean"];var badType=function badType(){return new Error("Arg setting helpers only support "+allowedTypes.join(","))};var isAllowed=function isAllowed(type){return(0,_lodash.includes)(allowedTypes,type)};function validateArg(value){var type=(0,_get_type.getType)(value);if(!isAllowed(type))throw badType();return value}function getSimpleArg(name,args){if(!args[name])return[];return args[name].map(function(astVal){if(!isAllowed((0,_get_type.getType)(astVal)))throw badType();return astVal})}function setSimpleArg(name,value){value=Array.isArray(value)?value:[value];return _defineProperty({},name,value.map(validateArg))}},6372:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.ESFieldsSelect=void 0;var _recompose=__webpack_require__(24);var _es_service=__webpack_require__(1182);var _es_fields_select=__webpack_require__(6373);exports.ESFieldsSelect=(0,_recompose.compose)((0,_recompose.withState)("fields","setFields",[]),(0,_recompose.lifecycle)({componentDidMount:function componentDidMount(){var _this=this;this.props.index&&(0,_es_service.getFields)(this.props.index).then(function(){var fields=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return _this.props.setFields(fields)})},componentDidUpdate:function componentDidUpdate(_ref){var index=_ref.index;var _props=this.props,setFields=_props.setFields,onChange=_props.onChange,selected=_props.selected;this.props.index!==index&&(0,_es_service.getFields)(this.props.index).then(function(){var fields=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];setFields(fields);onChange(selected.filter(function(option){return fields.includes(option)}))})}}))(_es_fields_select.ESFieldsSelect)},6373:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.ESFieldsSelect=void 0;var _react=__webpack_require__(0);var _react2=_interopRequireDefault(_react);var _propTypes=__webpack_require__(4);var _propTypes2=_interopRequireDefault(_propTypes);var _eui=__webpack_require__(2);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var ESFieldsSelect=exports.ESFieldsSelect=function ESFieldsSelect(_ref){var selected=_ref.selected,fields=_ref.fields,_onChange=_ref.onChange,onFocus=_ref.onFocus,onBlur=_ref.onBlur;var options=fields.map(function(value){return{label:value}});var selectedOptions=selected.map(function(value){return{label:value}});return _react2.default.createElement(_eui.EuiComboBox,{selectedOptions:selectedOptions,options:options,onChange:function onChange(values){return _onChange(values.map(function(_ref2){var label=_ref2.label;return label}))},className:"canvasFieldsSelect",onFocus:onFocus,onBlur:onBlur})};ESFieldsSelect.propTypes={onChange:_propTypes2.default.func,selected:_propTypes2.default.array,fields:_propTypes2.default.array,onFocus:_propTypes2.default.func,onBlur:_propTypes2.default.func};ESFieldsSelect.defaultProps={selected:[],fields:[]}},6374:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.ESFieldSelect=void 0;var _recompose=__webpack_require__(24);var _es_service=__webpack_require__(1182);var _es_field_select=__webpack_require__(6375);exports.ESFieldSelect=(0,_recompose.compose)((0,_recompose.withState)("fields","setFields",[]),(0,_recompose.lifecycle)({componentDidMount:function componentDidMount(){this.props.index&&(0,_es_service.getFields)(this.props.index).then(this.props.setFields)},componentDidUpdate:function componentDidUpdate(_ref){var index=_ref.index;var _props=this.props,value=_props.value,onChange=_props.onChange,setFields=_props.setFields;this.props.index!==index&&(0,_es_service.getFields)(this.props.index).then(function(fields){setFields(fields)});value&&!this.props.fields.includes(value)&&onChange(null)}}))(_es_field_select.ESFieldSelect)},6375:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.ESFieldSelect=void 0;var _slicedToArray=function(){function sliceIterator(arr,i){var _arr=[];var _n=true;var _d=false;var _e=void 0;try{for(var _s,_i=arr[Symbol.iterator]();!(_n=(_s=_i.next()).done);_n=true){_arr.push(_s.value);if(i&&_arr.length===i)break}}catch(err){_d=true;_e=err}finally{try{!_n&&_i["return"]&&_i["return"]()}finally{if(_d)throw _e}}return _arr}return function(arr,i){if(Array.isArray(arr))return arr;if(Symbol.iterator in Object(arr))return sliceIterator(arr,i);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}();var _react=__webpack_require__(0);var _react2=_interopRequireDefault(_react);var _propTypes=__webpack_require__(4);var _propTypes2=_interopRequireDefault(_propTypes);var _eui=__webpack_require__(2);var _lodash=__webpack_require__(1);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var ESFieldSelect=exports.ESFieldSelect=function ESFieldSelect(_ref){var value=_ref.value,_ref$fields=_ref.fields,fields=void 0===_ref$fields?[]:_ref$fields,_onChange=_ref.onChange,onFocus=_ref.onFocus,onBlur=_ref.onBlur;var selectedOption=value?[{label:value}]:[];var options=fields.map(function(field){return{label:field}});return _react2.default.createElement(_eui.EuiComboBox,{selectedOptions:selectedOption,options:options,onChange:function onChange(_ref2){var _ref3=_slicedToArray(_ref2,1),field=_ref3[0];return _onChange((0,_lodash.get)(field,"label",null))},onSearchChange:function onSearchChange(searchValue){searchValue&&_onChange(null)},onFocus:onFocus,onBlur:onBlur,singleSelection:{asPlainText:true},isClearable:false})};ESFieldSelect.propTypes={onChange:_propTypes2.default.func,onFocus:_propTypes2.default.func,onBlur:_propTypes2.default.func,value:_propTypes2.default.string,fields:_propTypes2.default.array};ESFieldSelect.defaultProps={fields:[]}},6376:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.ESIndexSelect=void 0;var _recompose=__webpack_require__(24);var _es_service=__webpack_require__(1182);var _es_index_select=__webpack_require__(6377);exports.ESIndexSelect=(0,_recompose.compose)((0,_recompose.withState)("loading","setLoading",true),(0,_recompose.withState)("indices","setIndices",[]),(0,_recompose.lifecycle)({componentDidMount:function componentDidMount(){var _this=this;(0,_es_service.getIndices)().then(function(){var indices=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];var _props=_this.props,setLoading=_props.setLoading,setIndices=_props.setIndices,value=_props.value,onChange=_props.onChange;setLoading(false);setIndices(indices.sort());!value&&indices.length&&onChange(indices[0])})}}))(_es_index_select.ESIndexSelect)},6377:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.ESIndexSelect=void 0;var _slicedToArray=function(){function sliceIterator(arr,i){var _arr=[];var _n=true;var _d=false;var _e=void 0;try{for(var _s,_i=arr[Symbol.iterator]();!(_n=(_s=_i.next()).done);_n=true){_arr.push(_s.value);if(i&&_arr.length===i)break}}catch(err){_d=true;_e=err}finally{try{!_n&&_i["return"]&&_i["return"]()}finally{if(_d)throw _e}}return _arr}return function(arr,i){if(Array.isArray(arr))return arr;if(Symbol.iterator in Object(arr))return sliceIterator(arr,i);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}();var _react=__webpack_require__(0);var _react2=_interopRequireDefault(_react);var _propTypes=__webpack_require__(4);var _propTypes2=_interopRequireDefault(_propTypes);var _eui=__webpack_require__(2);var _lodash=__webpack_require__(1);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var defaultIndex="_all";var ESIndexSelect=exports.ESIndexSelect=function ESIndexSelect(_ref){var value=_ref.value,loading=_ref.loading,indices=_ref.indices,_onChange=_ref.onChange,onFocus=_ref.onFocus,onBlur=_ref.onBlur;var selectedOption=value!==defaultIndex?[{label:value}]:[];var options=indices.map(function(index){return{label:index}});return _react2.default.createElement(_eui.EuiComboBox,{selectedOptions:selectedOption,onChange:function onChange(_ref2){var _ref3=_slicedToArray(_ref2,1),index=_ref3[0];return _onChange((0,_lodash.get)(index,"label",defaultIndex).toLowerCase())},onSearchChange:function onSearchChange(searchValue){searchValue&&_onChange(defaultIndex)},onBlur:onBlur,onFocus:onFocus,disabled:loading,options:options,singleSelection:{asPlainText:true},isClearable:false,onCreateOption:function onCreateOption(input){return _onChange(input||defaultIndex)}})};ESIndexSelect.propTypes={value:_propTypes2.default.string,onChange:_propTypes2.default.func.isRequired,onFocus:_propTypes2.default.func,onBlur:_propTypes2.default.func,indices:_propTypes2.default.array.isRequired,loading:_propTypes2.default.bool.isRequired};ESIndexSelect.defaultProps={value:defaultIndex}},6378:function(module,exports,__webpack_require__){"use strict";var _transitions=__webpack_require__(6379);var _transitions_registry=__webpack_require__(1179);_transitions.transitions.forEach(function(spec){return _transitions_registry.transitionsRegistry.register(spec)})},6379:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.transitions=void 0;var _fade=__webpack_require__(6380);var _rotate=__webpack_require__(6382);var _slide=__webpack_require__(6384);var _zoom=__webpack_require__(6386);exports.transitions=[_fade.fade,_rotate.rotate,_slide.slide,_zoom.zoom]},6380:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.fade=void 0;__webpack_require__(6381);exports.fade=function fade(){return{name:"fade",displayName:"Fade",help:"Fade from one page to the next",enter:"fadeIn",exit:"fadeOut"}}},6381:function(module,exports){},6382:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.rotate=void 0;__webpack_require__(6383);exports.rotate=function rotate(){return{name:"rotate",displayName:"Rotate",help:"Rotate from one page to the next",enter:"rotateIn",exit:"rotateOut"}}},6383:function(module,exports){},6384:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.slide=void 0;__webpack_require__(6385);exports.slide=function slide(){return{name:"slide",displayName:"Slide",help:"Slide from one page to the next",enter:"slideIn",exit:"slideOut"}}},6385:function(module,exports){},6386:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.zoom=void 0;__webpack_require__(6387);exports.zoom=function zoom(){return{name:"zoom",displayName:"Zoom",help:"Zoom from one page to the next",enter:"zoomIn",exit:"zoomOut"}}},6387:function(module,exports){},802:function(module,exports,__webpack_require__){"use strict";var _slicedToArray=function(){function sliceIterator(arr,i){var _arr=[];var _n=true;var _d=false;var _e=void 0;try{for(var _s,_i=arr[Symbol.iterator]();!(_n=(_s=_i.next()).done);_n=true){_arr.push(_s.value);if(i&&_arr.length===i)break}}catch(err){_d=true;_e=err}finally{try{!_n&&_i["return"]&&_i["return"]()}finally{if(_d)throw _e}}return _arr}return function(arr,i){if(Array.isArray(arr))return arr;if(Symbol.iterator in Object(arr))return sliceIterator(arr,i);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}();var transpose=function transpose(_ref){var _ref2=_slicedToArray(_ref,16),a=_ref2[0],e=_ref2[1],i=_ref2[2],m=_ref2[3],b=_ref2[4],f=_ref2[5],j=_ref2[6],n=_ref2[7],c=_ref2[8],g=_ref2[9],k=_ref2[10],o=_ref2[11],d=_ref2[12],h=_ref2[13],l=_ref2[14],p=_ref2[15];return[a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p]};var ORIGIN=[0,0,0,1];var NULLVECTOR=[0,0,0,0];var NULLMATRIX=transpose([0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]);var UNITMATRIX=transpose([1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]);var translate=function translate(x,y,z){return transpose([1,0,0,x,0,1,0,y,0,0,1,z,0,0,0,1])};var scale=function scale(x,y,z){return transpose([x,0,0,0,0,y,0,0,0,0,z,0,0,0,0,1])};var shear=function shear(x,y){return transpose([1,x,0,0,y,1,0,0,0,0,1,0,0,0,0,1])};var perspective=function perspective(d){return transpose([1,0,0,0,0,1,0,0,0,0,1,0,0,0,-1/d,1])};var rotate=function rotate(x,y,z,a){var sinA=Math.sin(a);var coshAi=1-Math.cos(a);return transpose([1+coshAi*(x*x-1),z*sinA+x*y*coshAi,-y*sinA+x*y*coshAi,0,-z*sinA+x*y*coshAi,1+coshAi*(y*y-1),x*sinA+y*x*coshAi,0,y*sinA+x*z*coshAi,-x*sinA+y*z*coshAi,1+coshAi*(z*z-1),0,0,0,0,1])};var rotateX=function rotateX(a){return rotate(1,0,0,a)};var rotateY=function rotateY(a){return rotate(0,1,0,a)};var rotateZ=function rotateZ(a){return rotate(0,0,1,a)};var mult=function mult(_ref3,_ref4){var _ref6=_slicedToArray(_ref3,16),a=_ref6[0],b=_ref6[1],c=_ref6[2],d=_ref6[3],e=_ref6[4],f=_ref6[5],g=_ref6[6],h=_ref6[7],i=_ref6[8],j=_ref6[9],k=_ref6[10],l=_ref6[11],m=_ref6[12],n=_ref6[13],o=_ref6[14],p=_ref6[15];var _ref5=_slicedToArray(_ref4,16),A=_ref5[0],B=_ref5[1],C=_ref5[2],D=_ref5[3],E=_ref5[4],F=_ref5[5],G=_ref5[6],H=_ref5[7],I=_ref5[8],J=_ref5[9],K=_ref5[10],L=_ref5[11],M=_ref5[12],N=_ref5[13],O=_ref5[14],P=_ref5[15];return[a*A+e*B+i*C+m*D,b*A+f*B+j*C+n*D,c*A+g*B+k*C+o*D,d*A+h*B+l*C+p*D,a*E+e*F+i*G+m*H,b*E+f*F+j*G+n*H,c*E+g*F+k*G+o*H,d*E+h*F+l*G+p*H,a*I+e*J+i*K+m*L,b*I+f*J+j*K+n*L,c*I+g*J+k*K+o*L,d*I+h*J+l*K+p*L,a*M+e*N+i*O+m*P,b*M+f*N+j*O+n*P,c*M+g*N+k*O+o*P,d*M+h*N+l*O+p*P]};var multiply=function multiply(){for(var _len=arguments.length,elements=Array(_len),_key=0;_key<_len;_key++)elements[_key]=arguments[_key];return elements.slice(1).reduce(function(prev,next){return mult(prev,next)},elements[0])};var mvMultiply=function mvMultiply(_ref7,_ref8){var _ref10=_slicedToArray(_ref7,16),a=_ref10[0],b=_ref10[1],c=_ref10[2],d=_ref10[3],e=_ref10[4],f=_ref10[5],g=_ref10[6],h=_ref10[7],i=_ref10[8],j=_ref10[9],k=_ref10[10],l=_ref10[11],m=_ref10[12],n=_ref10[13],o=_ref10[14],p=_ref10[15];var _ref9=_slicedToArray(_ref8,4),A=_ref9[0],B=_ref9[1],C=_ref9[2],D=_ref9[3];return[a*A+e*B+i*C+m*D,b*A+f*B+j*C+n*D,c*A+g*B+k*C+o*D,d*A+h*B+l*C+p*D]};var normalize=function normalize(_ref11){var _ref12=_slicedToArray(_ref11,4),A=_ref12[0],B=_ref12[1],C=_ref12[2],D=_ref12[3];return 1===D?[A,B,C,D]:[A/D,B/D,C/D,1]};var invert=function invert(_ref13){var _ref14=_slicedToArray(_ref13,16),a=_ref14[0],b=_ref14[1],c=_ref14[2],d=_ref14[3],e=_ref14[4],f=_ref14[5],g=_ref14[6],h=_ref14[7],i=_ref14[8],j=_ref14[9],k=_ref14[10],l=_ref14[11],m=_ref14[12],n=_ref14[13],o=_ref14[14],p=_ref14[15];var inv=[f*k*p-f*l*o-j*g*p+j*h*o+n*g*l-n*h*k,-b*k*p+b*l*o+j*c*p-j*d*o-n*c*l+n*d*k,b*g*p-b*h*o-f*c*p+f*d*o+n*c*h-n*d*g,-b*g*l+b*h*k+f*c*l-f*d*k-j*c*h+j*d*g,-e*k*p+e*l*o+i*g*p-i*h*o-m*g*l+m*h*k,a*k*p-a*l*o-i*c*p+i*d*o+m*c*l-m*d*k,-a*g*p+a*h*o+e*c*p-e*d*o-m*c*h+m*d*g,a*g*l-a*h*k-e*c*l+e*d*k+i*c*h-i*d*g,e*j*p-e*l*n-i*f*p+i*h*n+m*f*l-m*h*j,-a*j*p+a*l*n+i*b*p-i*d*n-m*b*l+m*d*j,a*f*p-a*h*n-e*b*p+e*d*n+m*b*h-m*d*f,-a*f*l+a*h*j+e*b*l-e*d*j-i*b*h+i*d*f,-e*j*o+e*k*n+i*f*o-i*g*n-m*f*k+m*g*j,a*j*o-a*k*n-i*b*o+i*c*n+m*b*k-m*c*j,-a*f*o+a*g*n+e*b*o-e*c*n-m*b*g+m*c*f,a*f*k-a*g*j-e*b*k+e*c*j+i*b*g-i*c*f];var det=a*inv[0]+b*inv[4]+c*inv[8]+d*inv[12];if(0===det)return false;var recDet=1/det;for(var index=0;index<16;index++)inv[index]*=recDet;return inv};var translateComponent=function translateComponent(a){return[1,0,0,0,0,1,0,0,0,0,1,0,a[12],a[13],a[14],1]};var compositeComponent=function compositeComponent(_ref15){var _ref16=_slicedToArray(_ref15,16),a=_ref16[0],b=_ref16[1],c=_ref16[2],d=_ref16[3],e=_ref16[4],f=_ref16[5],g=_ref16[6],h=_ref16[7],i=_ref16[8],j=_ref16[9],k=_ref16[10],l=_ref16[11],p=(_ref16[12],_ref16[13],_ref16[14],_ref16[15]);return[a,b,c,d,e,f,g,h,i,j,k,l,0,0,0,p]};var add=function add(_ref17,_ref18){var _ref20=_slicedToArray(_ref17,16),a=_ref20[0],b=_ref20[1],c=_ref20[2],d=_ref20[3],e=_ref20[4],f=_ref20[5],g=_ref20[6],h=_ref20[7],i=_ref20[8],j=_ref20[9],k=_ref20[10],l=_ref20[11],m=_ref20[12],n=_ref20[13],o=_ref20[14],p=_ref20[15];var _ref19=_slicedToArray(_ref18,16),A=_ref19[0],B=_ref19[1],C=_ref19[2],D=_ref19[3],E=_ref19[4],F=_ref19[5],G=_ref19[6],H=_ref19[7],I=_ref19[8],J=_ref19[9],K=_ref19[10],L=_ref19[11],M=_ref19[12],N=_ref19[13],O=_ref19[14],P=_ref19[15];return[a+A,b+B,c+C,d+D,e+E,f+F,g+G,h+H,i+I,j+J,k+K,l+L,m+M,n+N,o+O,p+P]};var subtract=function subtract(_ref21,_ref22){var _ref24=_slicedToArray(_ref21,16),a=_ref24[0],b=_ref24[1],c=_ref24[2],d=_ref24[3],e=_ref24[4],f=_ref24[5],g=_ref24[6],h=_ref24[7],i=_ref24[8],j=_ref24[9],k=_ref24[10],l=_ref24[11],m=_ref24[12],n=_ref24[13],o=_ref24[14],p=_ref24[15];var _ref23=_slicedToArray(_ref22,16),A=_ref23[0],B=_ref23[1],C=_ref23[2],D=_ref23[3],E=_ref23[4],F=_ref23[5],G=_ref23[6],H=_ref23[7],I=_ref23[8],J=_ref23[9],K=_ref23[10],L=_ref23[11],M=_ref23[12],N=_ref23[13],O=_ref23[14],P=_ref23[15];return[a-A,b-B,c-C,d-D,e-E,f-F,g-G,h-H,i-I,j-J,k-K,l-L,m-M,n-N,o-O,p-P]};var reduceTransforms=function reduceTransforms(transforms){return 1===transforms.length?transforms[0]:transforms.slice(1).reduce(function(prev,next){return multiply(prev,next)},transforms[0])};var applyTransforms=function applyTransforms(transforms,previousTransformMatrix){return transforms.reduce(function(prev,next){return multiply(prev,next)},previousTransformMatrix)};var clamp=function clamp(low,high,value){return Math.min(high,Math.max(low,value))};var matrixToAngle=function matrixToAngle(transformMatrix){var z0=180*Math.acos(clamp(-1,1,transformMatrix[0]))/Math.PI;var z1=180*Math.asin(clamp(-1,1,transformMatrix[1]))/Math.PI;return z1>0?z0:-z0};module.exports={ORIGIN:ORIGIN,NULLVECTOR:NULLVECTOR,NULLMATRIX:NULLMATRIX,UNITMATRIX:UNITMATRIX,transpose:transpose,translate:translate,shear:shear,rotateX:rotateX,rotateY:rotateY,rotateZ:rotateZ,scale:scale,perspective:perspective,matrixToAngle:matrixToAngle,multiply:multiply,mvMultiply:mvMultiply,invert:invert,normalize:normalize,applyTransforms:applyTransforms,reduceTransforms:reduceTransforms,translateComponent:translateComponent,compositeComponent:compositeComponent,add:add,subtract:subtract}},803:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.prepend=prepend;exports.append=append;exports.convert=convert;var _lodash=__webpack_require__(6045);var _lodash2=_interopRequireDefault(_lodash);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function prepend(path,value){return(0,_lodash2.default)(value).concat((0,_lodash2.default)(path))}function append(path,value){return(0,_lodash2.default)(path).concat((0,_lodash2.default)(value))}function convert(path){return(0,_lodash2.default)(path)}},804:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.getDefaultWorkpad=exports.getDefaultPage=exports.getDefaultElement=void 0;var _get_id=__webpack_require__(525);exports.getDefaultElement=function getDefaultElement(){return{id:(0,_get_id.getId)("element"),position:{top:20,left:20,height:300,width:500,angle:0},expression:'\n      demodata\n      | pointseries y="median(cost)" x=time color="project"\n      | plot defaultStyle={seriesStyle points=5}\n    ',filter:null}};var getDefaultPage=exports.getDefaultPage=function getDefaultPage(){return{id:(0,_get_id.getId)("page"),style:{background:"#fff"},transition:{},elements:[]}};exports.getDefaultWorkpad=function getDefaultWorkpad(){var page=getDefaultPage();return{name:"Untitled Workpad",id:(0,_get_id.getId)("workpad"),width:1080,height:720,page:0,pages:[page],colors:["#37988d","#c19628","#b83c6f","#3f9939","#1785b0","#ca5f35","#45bdb0","#f2bc33","#e74b8b","#4fbf48","#1ea6dc","#fd7643","#72cec3","#f5cc5d","#ec77a8","#7acf74","#4cbce4","#fd986f","#a1ded7","#f8dd91","#f2a4c5","#a6dfa2","#86d2ed","#fdba9f","#000000","#444444","#777777","#BBBBBB","#FFFFFF","rgba(255,255,255,0)"],isWriteable:true}}},805:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.typesRegistry=void 0;var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;"value"in descriptor&&(descriptor.writable=true);Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){protoProps&&defineProperties(Constructor.prototype,protoProps);staticProps&&defineProperties(Constructor,staticProps);return Constructor}}();var _registry=__webpack_require__(313);var _type=__webpack_require__(6049);function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(self,call){if(!self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!call||"object"!==typeof call&&"function"!==typeof call?self:call}function _inherits(subClass,superClass){if("function"!==typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function, not "+typeof superClass);subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:false,writable:true,configurable:true}});superClass&&(Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass)}var TypesRegistry=function(_Registry){_inherits(TypesRegistry,_Registry);function TypesRegistry(){_classCallCheck(this,TypesRegistry);return _possibleConstructorReturn(this,(TypesRegistry.__proto__||Object.getPrototypeOf(TypesRegistry)).apply(this,arguments))}_createClass(TypesRegistry,[{key:"wrapper",value:function wrapper(obj){return new _type.Type(obj)}}]);return TypesRegistry}(_registry.Registry);exports.typesRegistry=new TypesRegistry},806:function(module,exports){exports.encode=function(obj){var str="";for(var i in obj)if(obj.hasOwnProperty(i)){str.length&&(str+="&");str+=encodeURIComponent(i)+"="+encodeURIComponent(obj[i])}return str};exports.decode=function(qs){var qry={};var pairs=qs.split("&");for(var i=0,l=pairs.length;i<l;i++){var pair=pairs[i].split("=");qry[decodeURIComponent(pair[0])]=decodeURIComponent(pair[1])}return qry}},807:function(module,exports){module.exports=function(a,b){var fn=function(){};fn.prototype=b.prototype;a.prototype=new fn;a.prototype.constructor=a}},808:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.populateBrowserRegistries=exports.getBrowserRegistries=void 0;var _chrome=__webpack_require__(9);var _chrome2=_interopRequireDefault(_chrome);var _scriptjs=__webpack_require__(6074);var _scriptjs2=_interopRequireDefault(_scriptjs);var _types_registry=__webpack_require__(805);var _expression_types=__webpack_require__(809);var _elements_registry=__webpack_require__(2065);var _render_functions_registry=__webpack_require__(2066);var _functions_registry=__webpack_require__(1174);var _load_private_browser_functions=__webpack_require__(6096);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var registries={browserFunctions:_functions_registry.functionsRegistry,commonFunctions:_functions_registry.functionsRegistry,elements:_elements_registry.elementsRegistry,types:_types_registry.typesRegistry,renderers:_render_functions_registry.renderFunctionsRegistry,transformUIs:_expression_types.transformRegistry,datasourceUIs:_expression_types.datasourceRegistry,modelUIs:_expression_types.modelRegistry,viewUIs:_expression_types.viewRegistry,argumentUIs:_expression_types.argTypeRegistry};var resolve=null;var called=false;var populatePromise=new Promise(function(_resolve){resolve=_resolve});exports.getBrowserRegistries=function getBrowserRegistries(){return populatePromise};exports.populateBrowserRegistries=function populateBrowserRegistries(){if(called)throw new Error("function should only be called once per process");called=true;(0,_load_private_browser_functions.loadPrivateBrowserFunctions)();var remainingTypes=Object.keys(registries);var populatedTypes={};function loadType(){var type=remainingTypes.pop();window.canvas=window.canvas||{};window.canvas.register=function(d){return registries[type].register(d)};var pluginPath=_chrome2.default.addBasePath("/api/canvas/plugins?type="+type);(0,_scriptjs2.default)(pluginPath,function(){populatedTypes[type]=registries[type];remainingTypes.length?loadType():resolve(populatedTypes)})}remainingTypes.length&&loadType();return populatePromise}},809:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var _datasource=__webpack_require__(2055);Object.defineProperty(exports,"Datasource",{enumerable:true,get:function get(){return _datasource.Datasource}});Object.defineProperty(exports,"datasourceRegistry",{enumerable:true,get:function get(){return _datasource.datasourceRegistry}});var _transform=__webpack_require__(2057);Object.defineProperty(exports,"Transform",{enumerable:true,get:function get(){return _transform.Transform}});Object.defineProperty(exports,"transformRegistry",{enumerable:true,get:function get(){return _transform.transformRegistry}});var _model=__webpack_require__(2063);Object.defineProperty(exports,"Model",{enumerable:true,get:function get(){return _model.Model}});Object.defineProperty(exports,"modelRegistry",{enumerable:true,get:function get(){return _model.modelRegistry}});var _view=__webpack_require__(2064);Object.defineProperty(exports,"View",{enumerable:true,get:function get(){return _view.View}});Object.defineProperty(exports,"viewRegistry",{enumerable:true,get:function get(){return _view.viewRegistry}});var _arg_type=__webpack_require__(2062);Object.defineProperty(exports,"ArgType",{enumerable:true,get:function get(){return _arg_type.ArgType}});Object.defineProperty(exports,"argTypeRegistry",{enumerable:true,get:function get(){return _arg_type.argTypeRegistry}});var _arg=__webpack_require__(2059);Object.defineProperty(exports,"Arg",{enumerable:true,get:function get(){return _arg.Arg}})},810:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var _popover=__webpack_require__(6078);Object.defineProperty(exports,"Popover",{enumerable:true,get:function get(){return _popover.Popover}})},811:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.Loading=void 0;var _recompose=__webpack_require__(24);var _loading=__webpack_require__(6091);exports.Loading=(0,_recompose.pure)(_loading.Loading)},812:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.appError=exports.appReady=void 0;var _reduxActions=__webpack_require__(29);exports.appReady=(0,_reduxActions.createAction)("appReady");exports.appError=(0,_reduxActions.createAction)("appError")},813:function(module,exports,__webpack_require__){"use strict";module.exports={ShortcutManager:__webpack_require__(6227),Shortcuts:__webpack_require__(6231)}}},[6028]);